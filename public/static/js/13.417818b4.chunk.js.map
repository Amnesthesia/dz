{"version":3,"sources":["graphql/createQuery.tsx","components/RigSelect.tsx","components/ChipSelect.tsx","components/forms/slots_multiple/UserRigCard.tsx","utils/calculateWingLoading.ts","components/forms/slots_multiple/MultipleSlotForm.tsx","screens/authenticated/manifest/ManifestGroupScreen.tsx"],"names":["createQuery","query","options","getPayload","opts","variables","onError","dispatch","useAppDispatch","useQuery","data","loading","previousData","refetch","error","transformedData","useMemo","JSON","stringify","useEffect","message","showSnackbarErrors","snackbarActions","showSnackbar","variant","QUERY_RIGS","gql","RigSelect","props","useState","isMenuOpen","setMenuOpen","globalState","useAppSelector","state","global","useLazyQuery","fetchRigs","userId","dropzoneId","Number","currentDropzone","id","value","autoSelectFirst","dropzone","dropzoneUser","availableRigs","length","onSelect","onDismiss","visible","anchor","Item","onPress","title","make","model","canopySize","description","required","left","Icon","icon","map","rig","key","user","ChipSelect","items","selected","isDisabled","renderItemLabel","onChangeSelected","View","style","flex","flexDirection","flexWrap","item","Chip","mode","margin","disabled","includes","xorBy","QUERY_DROPZONE_USERS_MANIFEST_DETAILS","useQueryDropzoneUsersDetails","UserRigCard","exitWeightInKg","canopySizeInFt","dropzoneUserId","onChangeRig","exitWeight","rigId","onChangeExitWeight","selectedRig","rigs","find","Card","width","elevation","ProgressBar","indeterminate","color","theme","colors","accent","Title","name","size","Content","Divider","marginBottom","ScrollView","horizontal","marginHorizontal","role","license","round","toFixed","TextInput","onChangeText","text","keyboardType","label","QUERY_DROPZONE_USERS_ALLOWED_JUMP_TYPES","useAllowedJumpTypes","allowedJumpTypes","ticketTypes","jumpTypes","actions","slice","SlotForm","slotsMultipleForm","userIds","fields","users","slotUser","useRestriction","Subheader","uniqBy","jumpType","first","setField","HelperText","type","ticketType","extras","styles","ticketAddons","extra","some","filter","cost","undefined","newRig","StyleSheet","create","field","MUTATION_CREATE_SLOTS","ManifestGroupScreen","useMutation","mutationCreateSlots","mutationData","navigation","useNavigation","validate","useCallback","hasErrors","slotForm","setFieldError","onManifest","a","async","jumpTypeId","extraIds","loadId","load","userGroup","result","createSlot","fieldErrors","createSlots","errors","navigate","screen","onSuccess","ScrollableScreen","loadNumber","Button","marginVertical"],"mappings":"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","file":"static/js/13.417818b4.chunk.js","sourcesContent":["import { DocumentNode, useQuery } from \"@apollo/client\";\nimport { Maybe } from \"graphql/jsutils/Maybe\";\nimport { useEffect, useMemo } from \"react\";\nimport { Query } from \"../graphql/schema\";\nimport { snackbarActions, useAppDispatch } from \"../redux\";\n\nexport interface IAppQuery<Payload, InputType> {\n  data: Maybe<Payload>,\n  loading: boolean;\n  refetch(variables?: InputType): void;\n}\n\nexport interface IAppQueryProps<Payload, InputType> {\n  onError?(message: string): void;\n  showSnackbarErrors?: boolean;\n  variables?: InputType;\n}\n\nexport function createQuery<Payload extends any, InputType extends {}>(\n  query: DocumentNode,\n  options: {\n    getPayload(query?: Query): Maybe<Payload>;\n  }\n) {\n  const { getPayload } = options;\n\n  return function useAppQuery(opts: IAppQueryProps<Payload, InputType>): IAppQuery<Payload, InputType> {\n    const { variables, onError } = opts\n    const dispatch = useAppDispatch();\n    \n    const { data, loading, previousData, refetch, error } = useQuery(query, {\n      variables,\n    });\n\n    const transformedData = useMemo(() => getPayload(data), [JSON.stringify(data)]);\n\n    useEffect(() => {\n      const hasChanged = JSON.stringify(previousData) !== JSON.stringify(data);\n      if (error?.message) {\n        if (opts.showSnackbarErrors !== false) {\n          dispatch(\n            snackbarActions.showSnackbar({ message: error.message, variant: \"error\" })\n          );\n        }\n\n        onError!(error.message);\n      }\n      \n    }, [opts.onError, error?.message])\n    \n\n    return {\n      loading,\n      data: transformedData,\n      refetch,\n    }    \n  }\n}","import { useLazyQuery, useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useEffect, useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { Rig, Query } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\ninterface IRigSelect {\n  dropzoneId?: number;\n  userId?: number;\n  value?: Rig | null;\n  required?: boolean;\n  autoSelectFirst?: boolean;\n  onSelect(rig: Rig): void;\n}\n\n\nconst QUERY_RIGS = gql`\n  query QueryAvailableRigs(\n    $dropzoneId: Int!\n    $userId: Int!\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      dropzoneUser(userId: $userId) {\n        id\n        availableRigs {\n          id\n          make\n          model\n          canopySize\n          serial\n\n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function RigSelect(props: IRigSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const [fetchRigs, { data, }] = useLazyQuery<Query>(QUERY_RIGS);\n\n  useEffect(() => {\n    if (props.userId && props.dropzoneId) {\n      fetchRigs({\n        variables: {\n          dropzoneId: Number(globalState.currentDropzone?.id),\n          userId: Number(props.userId)\n        }\n      });\n    }\n  }, [props.userId, props.dropzoneId])\n\n  useEffect(() => {\n    if (!props.value && props.autoSelectFirst && data?.dropzone?.dropzoneUser?.availableRigs?.length) {\n      props.onSelect(data.dropzone.dropzoneUser.availableRigs[0]);\n    }\n  }, [props.autoSelectFirst, JSON.stringify(data?.dropzone?.dropzoneUser?.availableRigs)])\n  \n  return (\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <List.Item\n          onPress={() => {\n            setMenuOpen(true);\n          }}\n          title={\n            props.value\n            ? `${props.value?.make} ${props.value?.model} (${props.value?.canopySize || \"?\"}sqft)`\n            : 'Select rig'\n          }\n          description={!props.required ? \"Optional\" : null}\n          left={() => <List.Icon icon=\"parachute\" />}\n        />\n      }>\n      {\n        data?.dropzone?.dropzoneUser?.availableRigs?.map((rig) => \n          <Menu.Item\n            key={`rig-select-${rig.id}`}\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(rig);\n            }}\n            title={\n              `${rig?.make} ${rig?.model} (${rig?.canopySize} sqft) ${!rig.user ? \"[DROPZONE RIG]\": \"\"}`\n            }\n          />\n        )\n      }\n    </Menu>\n  )\n}","import { xorBy } from \"lodash\";\nimport React, { useEffect } from \"react\";\nimport { View } from \"react-native\";\nimport { Chip } from \"react-native-paper\";\n\n\ninterface IChipSelect<T extends { id: any }> {\n  items: T[];\n  selected: T[];\n  autoSelectFirst?: boolean;\n  isDisabled(item: T): boolean;\n  renderItemLabel(item: T): React.ReactNode;\n  onChangeSelected(newItems: T[]): void;\n}\nfunction ChipSelect<T extends { id: any }>(props: IChipSelect<T>) {\n  const { items, selected, isDisabled, renderItemLabel, onChangeSelected, autoSelectFirst } = props;\n\n  useEffect(() => {\n    if (!selected || !selected.length && items.length && autoSelectFirst) {\n      onChangeSelected(\n        [items[0]]\n      );\n    }\n  }, [JSON.stringify(selected), JSON.stringify(items), autoSelectFirst])\n\n  return (\n    <View style={{ flex: 1, flexDirection: \"row\", flexWrap: \"wrap\" }}>\n      { items.map((item) =>\n        <Chip\n          mode=\"outlined\"\n          style={{ margin: 1 }}\n          disabled={isDisabled(item)}\n          selected={selected.map(({ id }) => id).includes(item.id)}\n          onPress={() =>\n            onChangeSelected(\n              selected.length === 1 ? [item] : xorBy(selected, [item], ({ id }) => id)\n            )\n          }\n        >\n          { renderItemLabel(item) }\n        </Chip>\n      )}\n    </View>\n  )\n}\n\nexport default ChipSelect;","import gql from \"graphql-tag\";\nimport React, { useEffect } from \"react\";\nimport { ScrollView } from \"react-native\";\nimport { Avatar, Card, TextInput, ProgressBar, Chip, Divider } from \"react-native-paper\";\nimport { createQuery } from \"../../../graphql/createQuery\";\nimport { Query, Rig } from \"../../../graphql/schema\";\nimport { useAppSelector } from \"../../../redux\";\nimport calculateWingLoading from \"../../../utils/calculateWingLoading\";\nimport RigSelect from \"../../RigSelect\";\n\n\ninterface IUserRigCard {\n  dropzoneUserId: number;\n  dropzoneId: number;\n  exitWeight?: number;\n  onChangeExitWeight(weight: number): void;\n  rigId?: number;\n  onChangeRig(rig: Rig): void;\n}\n\nconst QUERY_DROPZONE_USERS_MANIFEST_DETAILS = gql`\nquery QueryDropzoneUsersManifestDetails(\n  $dropzoneId: Int!\n  $dropzoneUserId: Int!\n) {\n  dropzone(id: $dropzoneId) {\n    id\n    name\n\n    dropzoneUser(id: $dropzoneUserId) {\n      id\n\n      user {\n        id\n        name\n        exitWeight\n        license {\n          id\n          name\n        }\n        rigs {\n          id\n          make\n          model\n          canopySize\n        }\n      }\n      role {\n        id\n        name\n      }\n      user {\n        id\n        name\n      }\n    }\n  }\n}\n`;\nconst useQueryDropzoneUsersDetails = createQuery<Query[\"dropzone\"][\"dropzoneUser\"], {\n  dropzoneId: number,\n  dropzoneUserId: number,\n }>(QUERY_DROPZONE_USERS_MANIFEST_DETAILS, {\n   getPayload: (query) => query?.dropzone?.dropzoneUser,\n });\n\nexport default function UserRigCard(props: IUserRigCard) {\n\n  const { dropzoneId, dropzoneUserId, onChangeRig, exitWeight, rigId, onChangeExitWeight } = props;\n  const { global: globalState } = useAppSelector(state => state);\n\n  const { data, loading } = useQueryDropzoneUsersDetails({\n    variables: {\n      dropzoneUserId,\n      dropzoneId\n    }\n  });\n\n  const selectedRig = data?.user?.rigs?.find(({ id }) => Number(id) === rigId);\n\n  useEffect(() => {\n    if (!exitWeight && data?.user?.exitWeight) {\n      onChangeExitWeight(Number(data.user.exitWeight));\n    }\n  }, [data?.user?.exitWeight])\n  return (\n    <Card style={{ width: \"100%\"}} elevation={3}>\n      <ProgressBar indeterminate color={globalState.theme.colors.accent} visible={loading} />\n      <Card.Title\n        title={data?.user.name}\n        left={() => <Avatar.Icon icon=\"account\" size={24} />}\n      />\n      \n      <Card.Content>\n        <Divider style={{ marginBottom: 8 }} />\n        <ScrollView horizontal>\n          <Chip style={{ marginHorizontal: 1 }} icon=\"lock\" mode=\"outlined\" disabled>{data?.role?.name}</Chip>\n          <Chip style={{ marginHorizontal: 1 }} icon=\"ticket-account\" mode=\"outlined\" disabled>{data?.user?.license?.name}</Chip>\n          {\n            !selectedRig || !exitWeight || !selectedRig.canopySize\n              ? null\n              : <Chip style={{ marginHorizontal: 1 }} icon=\"escalator-down\" mode=\"outlined\" disabled>{calculateWingLoading(exitWeight, selectedRig.canopySize!)}</Chip>\n                  \n          }\n        </ScrollView>\n        <RigSelect\n          userId={dropzoneUserId}\n          dropzoneId={dropzoneId}\n          onSelect={onChangeRig}\n          value={selectedRig}\n          autoSelectFirst\n        />\n\n        <TextInput\n          value={!exitWeight ? \"\" : `${exitWeight}`}\n          onChangeText={(text: string) => onChangeExitWeight(Number(text))}\n          keyboardType=\"number-pad\"\n          label=\"Exit weight\"\n          mode=\"outlined\"\n        />\n      </Card.Content>\n    </Card>\n  );\n}","import { round } from \"lodash\";\n\nexport default function calculateWingLoading(exitWeightInKg: number, canopySizeInFt: number) {\n  return round((2.20462 * exitWeightInKg) / canopySizeInFt, 2).toFixed(2);\n}","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, Divider, Chip, List, Card } from 'react-native-paper';\nimport gql from 'graphql-tag';\nimport { uniqBy } from 'lodash';\n\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\n\nimport slice from \"./slice\";\nimport TicketTypeSelect from '../../TicketTypeSelect';\nimport useRestriction from '../../../hooks/useRestriction';\nimport ChipSelect from '../../ChipSelect';\nimport { createQuery } from '../../../graphql/createQuery';\nimport { JumpType, Query, SlotUser, TicketType } from '../../../graphql/schema';\n\nimport UserRigCard from \"./UserRigCard\";\n\n\nconst QUERY_DROPZONE_USERS_ALLOWED_JUMP_TYPES = gql`\nquery DropzoneUsersAllowedJumpTypes(\n  $dropzoneId: Int!,\n  $userIds: [Int!]!\n) {\n  dropzone(id: $dropzoneId) {\n    id\n\n    allowedJumpTypes(userId: $userIds) {\n      id\n      name\n    }\n\n    ticketTypes(isPublic: true) {\n      id\n      name\n      cost\n\n      extras {\n        id\n        cost\n        name\n      }\n    }\n  }\n  jumpTypes {\n    id\n    name\n  }\n}\n\n`;\n\nconst useAllowedJumpTypes = createQuery<{ jumpTypes: JumpType[], allowedJumpTypes: JumpType[], ticketTypes: TicketType[] }, {\n  dropzoneId: number,\n  userIds: number[],\n }>(QUERY_DROPZONE_USERS_ALLOWED_JUMP_TYPES, {\n   getPayload: (query) => ({\n     allowedJumpTypes: query?.dropzone?.allowedJumpTypes || [],\n     ticketTypes: query?.dropzone?.ticketTypes || [],\n     jumpTypes: query?.jumpTypes || [],\n   })\n });\n\nconst { actions } = slice;\nexport default function SlotForm() {\n  const state = useAppSelector(state => state.slotsMultipleForm);\n  const globalState = useAppSelector(state => state.global);\n  const dispatch = useAppDispatch();\n  const { data, loading } = useAllowedJumpTypes({\n    variables: {\n      userIds: state.fields.users?.value?.map((slotUser) => slotUser.id) as number[],\n      dropzoneId: Number(globalState?.currentDropzone?.id)\n    }\n  });\n\n  const allowedToManifestOthers = useRestriction(\n    \"createUserSlot\"\n  );\n\n  return ( \n    <>\n      <List.Subheader>Jump type</List.Subheader>\n      <Card elevation={2} style={{ marginBottom: 16 }}>\n        <Card.Content>\n            <ChipSelect\n              autoSelectFirst\n              items={uniqBy([\n                  ...(data?.allowedJumpTypes || []),\n                  ...(data?.jumpTypes || [])\n                ], ({ id }) => id) || []\n              }\n              selected={state.fields.jumpType.value ? [state.fields.jumpType.value] : []}\n              renderItemLabel={(jumpType) => jumpType.name}\n              isDisabled={(jumpType) => !data?.allowedJumpTypes?.map(({ id }) => id).includes(jumpType.id)}\n              onChangeSelected={([first]) =>\n                dispatch(actions.setField([\"jumpType\", first]))\n              }\n            />\n            \n            <HelperText type={!!state.fields.jumpType.error ? \"error\" : \"info\"}>\n              { state.fields.jumpType.error || \"\" }\n            </HelperText>\n          </Card.Content>\n        </Card>\n\n        <List.Subheader>Ticket</List.Subheader>\n        <Card elevation={2} style={{ width: \"100%\" }}>\n          <Card.Content>\n            <ChipSelect\n              autoSelectFirst\n              items={data?.ticketTypes || []}\n              selected={state.fields.ticketType.value ? [state.fields.ticketType.value] : []}\n              renderItemLabel={(ticketType) => ticketType.name}\n              isDisabled={() => false}\n              onChangeSelected={([first]) =>\n                dispatch(actions.setField([\"ticketType\", first]))\n              }\n            />\n            <HelperText type={!!state.fields.ticketType.error ? \"error\" : \"info\"}>\n              { state.fields.ticketType.error || \"\" }\n            </HelperText>\n\n          {\n            !state?.fields?.ticketType?.value?.extras?.length ? null:  (\n              <List.Subheader>\n                Ticket addons\n              </List.Subheader>\n            )\n          }\n          <ScrollView horizontal style={styles.ticketAddons}>\n            {state?.fields?.ticketType?.value?.extras?.map((extra) =>\n              <Chip\n                selected={state?.fields?.extras.value?.some(({id}) => id === extra.id)}\n                onPress={\n                  state?.fields?.extras.value?.some(({id}) => id === extra.id)\n                  ? () => dispatch(actions.setField([\"extras\", state?.fields?.extras.value?.filter(({ id }) => id !== extra.id)]))\n                  : () => dispatch(actions.setField([\"extras\", [...(state?.fields?.extras?.value || []), extra]]))\n                }\n              >\n                {`${extra.name} ($${extra.cost})`}\n              </Chip>\n            )}\n          </ScrollView>\n          <HelperText type={!!state.fields.extras.error ? \"error\" : \"info\"}>\n            { state.fields.extras.error || \"\" }\n          </HelperText>\n      </Card.Content>\n    </Card>\n    <Divider />\n        \n\n      <List.Subheader>Group</List.Subheader>\n      {\n        state.fields?.users?.value?.map((slotUser) =>\n          <UserRigCard\n            dropzoneId={Number(globalState.currentDropzone!.id)}\n            dropzoneUserId={Number(slotUser.id)}\n            rigId={Number(slotUser.rigId) || undefined}\n            exitWeight={slotUser.exitWeight}\n            onChangeExitWeight={(exitWeight) =>\n              dispatch(\n                actions.setField([\n                  \"users\", state.fields.users.value?.map((user) => user.id === slotUser.id\n                    ? { ...slotUser, exitWeight }\n                    : user\n                  )\n                ]))\n            }\n            onChangeRig={(newRig) =>\n              dispatch(\n                actions.setField([\n                  \"users\", state.fields.users.value?.map((user) => user.id === slotUser.id\n                    ? { ...slotUser, rigId: Number(newRig.id) }\n                    : user\n                  )\n                ]))\n            }\n          />\n        )\n      }\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    flex: 1,\n    \n  },\n  field: {\n    marginBottom: 8,\n  },\n  ticketAddons: {\n    marginBottom: 8\n  }\n});\n","import { gql, useMutation } from \"@apollo/client\";\nimport React, { useCallback, useEffect } from \"react\";\nimport { ScrollView } from \"react-native\";\nimport { Button, Card, ProgressBar } from \"react-native-paper\";\nimport ScrollableScreen from \"../../../components/ScrollableScreen\";\nimport { DropzoneUser, Mutation, Slot } from \"../../../graphql/schema\";\nimport { slotForm, slotsMultipleForm, snackbarActions, useAppDispatch, useAppSelector } from \"../../../redux\";\nimport MultipleSlotForm from \"../../../components/forms/slots_multiple/MultipleSlotForm\";\nimport { useNavigation, useRoute } from \"@react-navigation/core\";\ninterface IManifestUserDialog {\n  open?: boolean;\n  onClose(): void;\n  onSuccess(): void;\n}\n\nconst MUTATION_CREATE_SLOTS = gql`\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $ticketTypeId: Int\n    $userGroup: [SlotUser!]!,\n  ) {\n    createSlots(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          ticketTypeId: $ticketTypeId\n          userGroup: $userGroup,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      slots {\n        id\n        groupNumber\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n        exitWeight\n        load {\n          id\n          name\n          loadNumber\n          createdAt\n          dispatchAt\n          hasLanded\n          maxSlots\n          isFull\n          isOpen\n          plane {\n            id\n            name\n          }\n          gca {\n            id\n            user {\n              id\n              name\n            }\n          }\n          pilot {\n            id\n            user {\n              id\n              name\n            }\n          }\n          loadMaster {\n            id\n            user {\n              id\n              name\n            }\n          }\n          slots {\n            id\n            createdAt\n            user {\n              id\n              name\n            }\n            passengerName\n            passengerExitWeight\n            ticketType {\n              id\n              name\n              isTandem\n              altitude\n            }\n            jumpType {\n              id\n              name\n            }\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function ManifestGroupScreen(props: IManifestUserDialog) {\n  const dispatch = useAppDispatch();\n  const state = useAppSelector(state => state.slotsMultipleForm);\n  const globalState = useAppSelector(state => state.global);\n  const [mutationCreateSlots, mutationData] = useMutation<Mutation>(MUTATION_CREATE_SLOTS);\n  const navigation = useNavigation();\n  \n\n  const validate = useCallback(() => {\n    let hasErrors = false;\n    if (!state.fields.jumpType.value?.id) {\n      hasErrors = true;\n      dispatch(\n        slotForm.setFieldError([\"jumpType\", \"You must specify the type of jump\"])\n      );\n    }\n\n    if (!state.fields.ticketType.value?.id) {\n      hasErrors = true;\n      dispatch(\n        slotForm.setFieldError([\"ticketType\", \"You must select a ticket type to manifest\"])\n      );\n    }\n\n    return !hasErrors;\n  }, [JSON.stringify(state.fields)]);\n  \n  const onManifest = useCallback(async () => {\n\n    if (!validate()) {\n      return;\n    }\n    try {\n      const result = await mutationCreateSlots({\n        variables: {\n          jumpTypeId: Number(state.fields.jumpType.value?.id),\n          extraIds: state.fields.extras?.value?.map(({ id }) => Number(id)),\n          loadId: Number(state.fields.load.value?.id),\n          userGroup: state.fields.users.value,\n        }\n      });\n\n      result.data?.createSlot?.fieldErrors?.map(({ field, message }) => {\n        switch (field) {\n          case \"jump_type\":\n            return dispatch(slotForm.setFieldError([\"jumpType\", message]));\n          case \"load\":\n            return dispatch(slotForm.setFieldError([\"load\", message]));\n          case \"credits\":\n          case \"extras\":\n          case \"extra_ids\":\n            return dispatch(slotForm.setFieldError([\"extras\", message]));\n          case \"ticket_type\":\n            return dispatch(slotForm.setFieldError([\"ticketType\", message]));\n          case \"rig\":\n            return dispatch(slotForm.setFieldError([\"rig\", message]));\n          case \"user\":\n            return dispatch(slotForm.setFieldError([\"user\", message]));\n          case \"exit_weight\":\n            return dispatch(slotForm.setFieldError([\"exitWeight\", message]));\n        }\n      });\n      if (result?.data?.createSlots?.errors?.length) {\n        return dispatch(snackbarActions.showSnackbar({ message: result?.data?.createSlots?.errors[0], variant: \"error\" }));\n      }\n      if (!result.data?.createSlots?.fieldErrors?.length) {\n        navigation.navigate(\"Manifest\", { screen: \"DropzoneScreen\" });\n      }\n\n    } catch(error) {\n      dispatch(snackbarActions.showSnackbar({ message: error.message, variant: \"error\" }));\n    } \n  }, [JSON.stringify(state.fields), mutationCreateSlots, props.onSuccess])\n  \n  return (\n    <ScrollableScreen>\n      <ProgressBar indeterminate visible={mutationData.loading} color={globalState.theme.colors.accent} />\n      <Card.Title title={`Manifest ${state?.fields?.users?.value?.length} jumpers on Load #${state.fields.load?.value?.loadNumber}`} />\n      <MultipleSlotForm />\n      <Button\n        mode=\"contained\"\n        style={{ width: \"100%\", marginVertical: 16 }}\n        onPress={() => onManifest()}\n        loading={mutationData.loading}\n      >\n        Save\n      </Button>\n  </ScrollableScreen>\n  )\n}"],"sourceRoot":""}