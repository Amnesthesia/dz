{"version":3,"sources":["navigation/AppBar.tsx","navigation/tabs/profile.tsx"],"names":["QUERY_DROPZONES","gql","styles","StyleSheet","create","warning","flexDirection","alignItems","height","width","backgroundColor","justifyContent","paddingHorizontal","AppBar","navigation","previous","scene","useState","dropzoneMenuOpen","setDropzoneMenuOpen","data","useQuery","useAppSelector","state","global","currentDropzone","dispatch","theme","useAppDispatch","hasRig","currentUser","user","rigs","length","hasExitWeight","exitWeight","showSetupWarning","Header","BackAction","onPress","goBack","Content","title","descriptor","options","onDismiss","visible","anchor","style","color","marginRight","name","dropzones","edges","map","edge","Item","node","globalActions","setDropzone","mode","navigate","ProfileScreen","React","RigScreen","UpdateUserScreen","Profile","createStackNavigator","ProfileTab","Navigator","screenOptions","headerShown","header","props","cardStyle","flex","Screen","component","initialParams","userId","id"],"mappings":"2NAQMA,EAAkBC,cAAH,mKA0ErB,IAAMC,EAASC,IAAWC,OAAO,CAC/BC,QAAS,CACPC,cAAe,MACfC,WAAY,SACZC,OAAQ,GACRC,MAAO,OACPC,gBAAiB,UACjBC,eAAgB,gBAChBC,kBAAmB,MAIRC,IAlEf,YAAoE,IAAD,cAAjDC,EAAiD,EAAjDA,WAAYC,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,MAA2B,EACjBC,oBAAS,GADQ,WAC1DC,EAD0D,KACxCC,EADwC,KAEzDC,EAASC,mBAAgBrB,GAAzBoB,KAFyD,EAG9BE,aAAe,SAAAC,GAAK,OAAIA,EAAMC,UAAzDC,EAHyD,EAGzDA,gBACFC,GAJ2D,EAGxCC,MACRC,eAEXC,IAAU,MAACJ,GAAD,SAACA,EAAiBK,cAAlB,SAAC,EAA8BC,OAA/B,SAAC,EAAoCC,QAApC,EAA0CC,QACrDC,IAAiB,MAACT,GAAD,SAACA,EAAiBK,cAAlB,SAAC,EAA8BC,QAA9B,EAAoCI,YAEtDC,GAAoBP,IAAWK,EAErC,OACE,oCACA,kBAAC,IAAOG,OAAR,KACGtB,EAAW,kBAAC,IAAOuB,WAAR,CAAmBC,QAASzB,EAAW0B,SAAa,KAChE,kBAAC,IAAOC,QAAR,CAAgBC,MAAO1B,EAAM2B,WAAWC,QAAQF,QAChD,kBAAC,IAAD,CACEG,UAAW,kBAAM1B,GAAoB,IACrC2B,QAAS5B,EACT6B,OACE,kBAAC,IAAD,CACER,QAAS,kBAAMpB,GAAoB,IACnC6B,MAAO,CAAEC,MAAO,QAASC,YAAa,IAFxC,MAIGzB,OAJH,EAIGA,EAAiB0B,OARxB,MAYI/B,GAZJ,SAYIA,EAAMgC,YAZV,SAYI,EAAiBC,YAZrB,EAYI,EAAwBC,KAAI,SAACC,GAAD,aAC1B,kBAAC,IAAKC,KAAN,CACEd,MAAK,MAAEa,GAAF,SAAEA,EAAME,WAAR,EAAE,EAAYN,KACnBZ,QAAS,WACPb,EAASgC,IAAcC,YAAd,MAA0BJ,OAA1B,EAA0BA,EAAME,OACzCtC,GAAoB,WAO9BiB,GACA,kBAAC,IAAD,CAAMY,MAAO9C,EAAOG,SAClB,kBAAC,IAAD,0CAGA,kBAAC,IAAD,CAAQ4C,MAAM,QAAQW,KAAK,WAAWrB,QAAS,kBAAMzB,EAAW+C,SAAS,aAAzE,qB,iCCzER,oFAMMC,EAAgBC,QAAW,kBAAM,qEACjCC,EAAYD,QAAW,kBAAM,wDAC7BE,EAAmBF,QAAW,kBAAM,wDAUpCG,EAAUC,cAED,SAASC,IAAc,IAAD,EAC3B3C,EAAoBH,aAAe,SAAAC,GAAK,OAAIA,EAAMC,UAAlDC,gBACR,OACE,gBAACyC,EAAQG,UAAT,CACEC,cAAe,CACbC,aAAa,EACbC,OAAQ,SAACC,GAAD,OAAW,gBAAC,IAAWA,IAC/BC,UAAW,CACTC,KAAM,KAIV,gBAACT,EAAQU,OAAT,CACEzB,KAAK,gBACL0B,UAAWf,EACXlB,QAAS,CAAEF,MAAO,WAClBoC,cAAe,CACbC,OAAM,MAAEtD,GAAF,SAAEA,EAAiBK,kBAAnB,EAAE,EAA8BkD,MAG1C,gBAACd,EAAQU,OAAT,CAAgBzB,KAAK,mBAAmB0B,UAAWZ,EAAkBrB,QAAS,CAAEF,MAAO,kBACvF,gBAACwB,EAAQU,OAAT,CAAgBzB,KAAK,YAAY0B,UAAWb,EAAWpB,QAAS,CAAEF,MAAO","file":"static/js/43.479a4a05.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Appbar, Menu, Paragraph, Text, Button } from \"react-native-paper\";\nimport { StackHeaderProps } from \"@react-navigation/stack\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport { Dropzone, Query } from \"../graphql/schema\";\nimport { globalActions, useAppDispatch, useAppSelector } from \"../redux\";\nimport { View, StyleSheet } from \"react-native\";\n\nconst QUERY_DROPZONES = gql`\n  query QueryDropzonesCompact {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\ninterface IAppBar extends StackHeaderProps {\n  searchEnabled: boolean;\n  searchVisible: boolean;\n  setSearchVisible(visible: boolean): void;\n}\n\n\nfunction AppBar({ navigation, previous, scene }: StackHeaderProps) {\n  const [dropzoneMenuOpen, setDropzoneMenuOpen] = useState(false);\n  const { data } = useQuery<Query>(QUERY_DROPZONES);\n  const { currentDropzone, theme } = useAppSelector(state => state.global);\n  const dispatch = useAppDispatch();\n  \n  const hasRig = !!currentDropzone?.currentUser?.user?.rigs?.length;\n  const hasExitWeight = !!currentDropzone?.currentUser?.user?.exitWeight;\n\n  const showSetupWarning = !hasRig || !hasExitWeight;\n\n  return (\n    <>\n    <Appbar.Header>\n      {previous ? <Appbar.BackAction onPress={navigation.goBack} /> : null}\n      <Appbar.Content title={scene.descriptor.options.title} />\n      <Menu\n        onDismiss={() => setDropzoneMenuOpen(false)}\n        visible={dropzoneMenuOpen}\n        anchor={\n          <Text\n            onPress={() => setDropzoneMenuOpen(true)}\n            style={{ color: \"white\", marginRight: 8 }}\n          >\n            {currentDropzone?.name}\n          </Text>\n      }>\n        {\n          data?.dropzones?.edges?.map((edge) =>\n            <Menu.Item\n              title={edge?.node?.name}\n              onPress={() => {\n                dispatch(globalActions.setDropzone(edge?.node as Dropzone));\n                setDropzoneMenuOpen(false);\n              }}\n            />\n          )\n        }\n      </Menu>\n    </Appbar.Header>\n    { showSetupWarning && (\n      <View style={styles.warning}>\n        <Paragraph>\n          You need to complete your profile\n        </Paragraph>\n        <Button color=\"black\" mode=\"outlined\" onPress={() => navigation.navigate(\"Profile\")}>\n          Take me there\n        </Button>\n      </View>\n    )}\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  warning: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    height: 56,\n    width: \"100%\",\n    backgroundColor: \"#ffbb33\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: 32\n  },\n})\n\nexport default AppBar;","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport AppBar from '../AppBar';\nimport { useAppSelector } from '../../redux';\n\nconst ProfileScreen = React.lazy(() => import('../../screens/authenticated/profile/ProfileScreen'));\nconst RigScreen = React.lazy(() => import('../../screens/authenticated/rig/RigScreen'));\nconst UpdateUserScreen = React.lazy(() => import('../../screens/authenticated/profile/UpdateUserScreen'));\n\nexport type IProfileTabParams = {\n  ProfileScreen: {\n    userId: string,\n  };\n  RigScreen: undefined;\n  UpdateUserScreen: undefined;\n}\n\nconst Profile = createStackNavigator<IProfileTabParams>();\n\nexport default function ProfileTab() {\n  const { currentDropzone } = useAppSelector(state => state.global);\n  return (\n    <Profile.Navigator\n      screenOptions={{\n        headerShown: true,\n        header: (props) => <AppBar {...props} />,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      <Profile.Screen\n        name=\"ProfileScreen\"\n        component={ProfileScreen}\n        options={{ title: \"Profile\" }}\n        initialParams={{\n          userId: currentDropzone?.currentUser?.id,\n        }}\n      />\n      <Profile.Screen name=\"UpdateUserScreen\" component={UpdateUserScreen} options={{ title: \"Edit profile\" }} />\n      <Profile.Screen name=\"RigScreen\" component={RigScreen} options={{ title: \"Rig\" }} />\n    </Profile.Navigator>\n  );\n}\n"],"sourceRoot":""}