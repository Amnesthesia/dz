(this.webpackJsonp=this.webpackJsonp||[]).push([[3],{108:function(e,n,r){"use strict";r.d(n,"c",(function(){return I})),r.d(n,"o",(function(){return D})),r.d(n,"j",(function(){return U})),r.d(n,"h",(function(){return N})),r.d(n,"n",(function(){return M})),r.d(n,"b",(function(){return A})),r.d(n,"e",(function(){return $})),r.d(n,"f",(function(){return W})),r.d(n,"g",(function(){return L})),r.d(n,"a",(function(){return R})),r.d(n,"i",(function(){return B})),r.d(n,"k",(function(){return V})),r.d(n,"d",(function(){return Q})),r.d(n,"l",(function(){return J})),r.d(n,"m",(function(){return Y}));var t=r(28),a=r(166),l=r(8),o=r(325),i=r.n(o),c=r(254),s=r(112),u=r(143),d=r(157),f=r(158),m={isSearchVisible:!1,isSelectEnabled:!1,selectedUsers:[],searchText:""},p=Object(t.b)({name:"usersScreen",initialState:m,reducers:{setSelectEnabled:function(e,n){e.isSelectEnabled=n.payload},setSelected:function(e,n){e.selectedUsers=n.payload},setSearchText:function(e,n){e.searchText=n.payload},setSearchVisible:function(e,n){e.isSearchVisible=n.payload},reset:function(e){e.isSearchVisible=m.isSearchVisible,e.searchText=m.searchText}}}),g=r(114),v=r(227),b=r(228),y=r(229),h=r(231),E=r(241),S=r(232),O=r(242),w=r(243),C=r(9),j=r.n(C),k={fields:[],ok:!1},x=Object(t.b)({name:"rigInspectionForm",initialState:k,reducers:{setOk:function(e,n){e.ok=n.payload},setField:function(e,n){var r=j()(n.payload,2),t=r[0],a=r[1];console.log({item:a,index:t,fields:e.fields}),e.fields=e.fields.map((function(e,n){return n===t?a:e}))},setFields:function(e,n){try{e.fields=JSON.parse(n.payload)}catch(r){console.error("Failed to read rig inspection template",r.message,n.payload)}},reset:function(e){e.fields=k.fields,e.ok=k.ok}}}),z={original:null,fields:[]},P=Object(t.b)({name:"rigInspectionTemplateForm",initialState:z,reducers:{setFields:function(e,n){e.fields=n.payload},setOriginal:function(e,n){e.original=n.payload;try{e.fields=JSON.parse(n.payload.definition)}catch(r){console.log("Invalid json: ",n.payload.definition)}},reset:function(e){e.fields=z.fields,e.original=null}}}),F=r(244),T=r(245),I=(d.a.actions,f.a.actions,s.a.actions),D=p.actions,U=u.a.actions,N=(v.a.actions,g.a.actions,b.a.actions,y.a.actions,h.a.actions,E.a.actions),M=S.a.actions,A=O.a.actions,$=w.a.actions,W=x.actions,L=P.actions,R=F.a.actions,B=T.a.actions,q={key:"root",storage:"web"===l.a.OS?r(413).default:i.a,whitelist:["global","notifications"]},H=Object(c.a)(q,{global:s.a.reducer,notifications:u.a.reducer,login:d.a.reducer,signup:f.a.reducer,dropzoneForm:g.a.reducer,planeForm:v.a.reducer,ticketTypeForm:b.a.reducer,extraForm:y.a.reducer,loadForm:h.a.reducer,slotForm:E.a.reducer,slotsMultipleForm:T.a.reducer,userForm:S.a.reducer,dropzoneUserForm:O.a.reducer,rigForm:w.a.reducer,rigInspectionForm:x.reducer,rigInspectionTemplate:P.reducer,usersScreen:p.reducer,creditsForm:F.a.reducer}),V=Object(t.a)({reducer:H,middleware:Object(t.c)({serializableCheck:{ignoredActions:["persist/PERSIST"]}})}),Q=Object(c.b)(V),J=function(){return Object(a.b)()},Y=a.c},112:function(e,n,r){"use strict";var t=r(6),a=r.n(t),l=r(28),o=r(103),i=r(200),c=r(86),s=r(104);function u(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?u(Object(r),!0).forEach((function(n){a()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var f=d(d(d({},c.a),o.a),{},{colors:d(d({},c.a.colors),o.a.colors)}),m=d(d(d({},s.a),i.a),{},{colors:d(d({},s.a.colors),i.a.colors)}),p={currentUser:null,currentDropzone:null,permissions:[],credentials:null,theme:f,isDarkMode:!1};n.a=Object(l.b)({name:"global",initialState:p,reducers:{setCredentials:function(e,n){e.credentials=n.payload},setUser:function(e,n){e.currentUser=n.payload},setPermissions:function(e,n){e.permissions=n.payload},setPrimaryColor:function(e,n){e.theme.colors.primary=n.payload},setAccentColor:function(e,n){e.theme.colors.accent=n.payload},setDropzone:function(e,n){var r,t,a,l;(e.currentDropzone=n.payload,null!=(r=e.currentDropzone)&&r.primaryColor)&&(e.theme.colors.primary=null==(a=e.currentDropzone)?void 0:a.primaryColor);null!=(t=e.currentDropzone)&&t.secondaryColor&&(e.theme.colors.accent=null==(l=e.currentDropzone)?void 0:l.secondaryColor)},toggleDarkMode:function(e){var n,r,t,a;(e.isDarkMode=!e.isDarkMode,e.theme=e.isDarkMode?m:f,null!=(n=e.currentDropzone)&&n.primaryColor)&&(e.theme.colors.primary=null==(t=e.currentDropzone)?void 0:t.primaryColor);null!=(r=e.currentDropzone)&&r.secondaryColor&&(e.theme.colors.accent=null==(a=e.currentDropzone)?void 0:a.secondaryColor)},logout:function(e){for(var n in p){var r=n;n in e&&(e[r]=p[r])}}}})},114:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{federation:{value:null,error:null},name:{value:"",error:null},secondaryColor:{value:"",error:null},primaryColor:{value:"",error:null},banner:{value:"",error:null},isCreditSystemEnabled:{value:!1,error:null},isPublic:{value:!1,error:null}}};n.a=Object(l.b)({name:"dropzone",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];t in e.fields&&e.fields[t].error&&(e.fields[t].error=l)},setOriginal:function(e,n){for(var r in e.original=n.payload,n.payload)if(r in e.fields){var t=r;e.fields[t].value=n.payload[t]}},reset:function(e){e.fields=o.fields,e.original=null}}})},124:function(e,n,r){"use strict";r.d(n,"b",(function(){return t})),r.d(n,"c",(function(){return a}));var t="#00C851",a="#FF8800";n.a={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",success:t,error:"#ff4444",warning:a,info:"#0099CC"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff",success:t,error:"#ff4444",warning:a,info:"#0099CC"}}},143:function(e,n,r){"use strict";var t=r(28);n.a=Object(t.b)({name:"notifications",initialState:{queue:[]},reducers:{hideSnackbar:function(e){e.queue=e.queue.slice(1)},showSnackbar:function(e,n){e.queue.push(n.payload)}}})},157:function(e,n,r){"use strict";var t=r(28),a={fields:{email:{value:"",error:null},password:{value:"",error:null}}};n.a=Object(t.b)({name:"login",initialState:a,reducers:{setEmail:function(e,n){e.fields.email.value=n.payload},setPassword:function(e,n){e.fields.password.value=n.payload},setEmailError:function(e,n){e.fields.email.error=n.payload},setPasswordError:function(e,n){e.fields.password.error=n.payload},reset:function(e){e.fields=a.fields}}})},158:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={federation:null,fields:{email:{value:"",error:null},password:{value:"",error:null},passwordConfirmation:{value:"",error:null},exitWeight:{value:50,error:null},name:{value:"",error:null},phone:{value:"",error:null},license:{value:null,error:null}}};n.a=Object(l.b)({name:"login",initialState:o,reducers:{setFederation:function(e,n){e.federation=n.payload},setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},reset:function(e){e.fields=o.fields}}})},169:function(e,n,r){"use strict";r.d(n,"a",(function(){return s}));var t=r(0),a=r.n(t),l=r(80),o=r(1),i=r(188),c=r(20);function s(e){var n=Object(i.a)().height,r=Object(c.k)((function(e){return e.global})).theme;return a.a.createElement(l.a,{keyboardDismissMode:"on-drag",keyboardShouldPersistTaps:"handled",contentInsetAdjustmentBehavior:"always",style:[u.container,{backgroundColor:r.colors.surface,height:n-112},e.style],contentContainerStyle:[u.content,e.contentContainerStyle]},e.children)}var u=o.a.create({container:{flex:1},content:{paddingHorizontal:16,alignItems:"flex-start",flexGrow:1,paddingBottom:50}})},170:function(e,n,r){"use strict";r.d(n,"a",(function(){return u}));var t,a=r(71),l=r.n(a),o=r(49),i=r(72),c=r(20),s=Object(i.a)(t||(t=l()(["\nquery QueryPermissions($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor\n      secondaryColor\n      \n      currentUser {\n        id\n        role {\n          id\n          name\n        }\n        permissions\n      }\n\n    }\n  }"])));function u(e){var n,r,t,a=Object(c.k)((function(e){return e.global})).currentDropzone,l=Object(o.useQuery)(s,{variables:{dropzoneId:Number(null==a?void 0:a.id)},fetchPolicy:"cache-first"}).data;return(null==l||null==(n=l.dropzone)||null==(r=n.currentUser)||null==(t=r.permissions)?void 0:t.includes(e))||!1}},20:function(e,n,r){"use strict";var t=r(108);r.d(n,"a",(function(){return t.a})),r.d(n,"b",(function(){return t.b})),r.d(n,"c",(function(){return t.c})),r.d(n,"d",(function(){return t.e})),r.d(n,"e",(function(){return t.f})),r.d(n,"f",(function(){return t.g})),r.d(n,"g",(function(){return t.h})),r.d(n,"h",(function(){return t.i})),r.d(n,"i",(function(){return t.j})),r.d(n,"j",(function(){return t.l})),r.d(n,"k",(function(){return t.m})),r.d(n,"l",(function(){return t.n})),r.d(n,"m",(function(){return t.o}))},204:function(e,n,r){"use strict";function t(){return"light"}r.d(n,"a",(function(){return t}))},227:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{name:{value:"",error:null},registration:{value:"",error:null},minSlots:{value:0,error:null},maxSlots:{value:4,error:null},hours:{value:null,error:null},nextMaintenanceHours:{value:null,error:null}}};n.a=Object(l.b)({name:"Plane",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields.name.error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){e.original=n.payload,e.fields.hours.value=n.payload.hours,e.fields.minSlots.value=n.payload.minSlots,e.fields.maxSlots.value=n.payload.maxSlots,e.fields.name.value=n.payload.name,e.fields.registration.value=n.payload.registration,e.fields.nextMaintenanceHours.value=n.payload.nextMaintenanceHours},reset:function(e){e.fields=o.fields,e.original=null}}})},228:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{name:{value:"",error:null},cost:{value:null,error:null},altitude:{value:14e3,error:null},allowManifestingSelf:{value:!1,error:null},isTandem:{value:!1,error:null},extras:{value:[],error:null}}};n.a=Object(l.b)({name:"ticketTypeForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){e.original=n.payload,e.fields.altitude.value=n.payload.altitude,e.fields.cost.value=n.payload.cost,e.fields.allowManifestingSelf.value=n.payload.allowManifestingSelf,e.fields.name.value=n.payload.name},reset:function(e){e.fields=o.fields,e.original=null}}})},229:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{name:{value:"",error:null},cost:{value:null,error:null},ticketTypeIds:{value:[],error:null}}};n.a=Object(l.b)({name:"ExtraForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields.name.error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){e.original=n.payload,e.fields.ticketTypeIds.value=n.payload.ticketTypes.map((function(e){var n=e.id;return Number(n)})),e.fields.cost.value=n.payload.cost,e.fields.name.value=n.payload.name},reset:function(e){e.fields=o.fields,e.original=null}}})},231:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{name:{value:"",error:null},gca:{value:null,error:null},dispatchAt:{value:null,error:null},isOpen:{value:!0,error:null},loadMaster:{value:null,error:null},pilot:{value:null,error:null},plane:{value:null,error:null},maxSlots:{value:4,error:null}}};n.a=Object(l.b)({name:"loadForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){for(var r in e.original=n.payload,n.payload)if(r in e.fields){var t=r;e.fields[t].value=n.payload[t]}},reset:function(e){e.fields=o.fields,e.original=null}}})},232:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,federation:{value:null,error:null},fields:{exitWeight:{value:"",error:null},email:{value:"",error:null},phone:{value:"",error:null},name:{value:null,error:null},rigs:{value:[],error:null},license:{value:null,error:null}}};n.a=Object(l.b)({name:"userForm",initialState:o,reducers:{setFederation:function(e,n){e.federation.value=n.payload},setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){var r;for(var t in e.original=n.payload,e.federation.value=null==(r=n.payload.license)?void 0:r.federation,n.payload)if(t in e.fields){var a=t;e.fields[a].value=n.payload[a]}},reset:function(e){e.fields=o.fields,e.original=null}}})},241:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{jumpType:{value:null,error:null},extras:{value:[],error:null},load:{value:null,error:null},rig:{value:null,error:null},ticketType:{value:null,error:null},user:{value:null,error:null},exitWeight:{value:null,error:null},passengerName:{value:null,error:null},passengerExitWeight:{value:null,error:null}}};n.a=Object(l.b)({name:"slotForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){for(var r in e.original=n.payload,n.payload)if(r in e.fields){var t=r;e.fields[t].value=n.payload[t]}},reset:function(e){e.fields=o.fields,e.original=null}}})},242:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{role:{value:null,error:null},expiresAt:{value:null,error:null}}};n.a=Object(l.b)({name:"dropzoneUserForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){for(var r in e.original=n.payload,n.payload)if(r in e.fields){var t=r;e.fields[t].value=n.payload[t]}},reset:function(e){e.fields=o.fields,e.original=null}}})},243:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{make:{value:"",error:null},model:{value:"",error:null},serial:{value:"",error:null},repackExpiresAt:{value:null,error:null},canopySize:{value:null,error:null}}};n.a=Object(l.b)({name:"rigForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setOriginal:function(e,n){for(var r in e.original=n.payload,n.payload)if(r in e.fields){var t=r;e.fields[t].value=n.payload[t]}},reset:function(e){e.fields=o.fields,e.original=null}}})},244:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{amount:{value:null,error:null},status:{value:"deposit",error:null},message:{value:"",error:null}}};n.a=Object(l.b)({name:"creditsForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];t in e.fields&&e.fields[t].error&&(e.fields[t].error=l)},setOriginal:function(e,n){e.original=n.payload},reset:function(e){e.fields=o.fields,e.original=null}}})},245:function(e,n,r){"use strict";var t=r(9),a=r.n(t),l=r(28),o={original:null,fields:{jumpType:{value:null,error:null},extras:{value:[],error:null},load:{value:null,error:null},ticketType:{value:null,error:null},users:{value:[],error:null}}};n.a=Object(l.b)({name:"slotMultipleForm",initialState:o,reducers:{setField:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].value=l,e.fields[t].error=null},setFieldError:function(e,n){var r=a()(n.payload,2),t=r[0],l=r[1];e.fields[t].error=l},setFromSlots:function(e,n){var r,t,a;e.fields.users.value=n.payload.map((function(e){var n,r;return{id:Number(null==(n=e.user)?void 0:n.id),rigId:Number(null==(r=e.rig)?void 0:r.id),exitWeight:Number(e.exitWeight)}})),e.fields.jumpType.value=null==(r=n.payload.find((function(e){return e})))?void 0:r.jumpType,e.fields.load.value=null==(t=n.payload.find((function(e){return e})))?void 0:t.load,e.fields.extras.value=null==(a=n.payload.find((function(e){return e})))?void 0:a.extras},setDropzoneUsers:function(e,n){e.fields.users.value=n.payload.map((function(e){var n,r;return{id:Number(e.user.id),rigId:Number(null==e||null==(n=e.availableRigs)||null==(r=n.find((function(e){return e.id})))?void 0:r.id),exitWeight:Number(null==e?void 0:e.user.exitWeight)}}))},setOriginal:function(e,n){for(var r in e.original=n.payload,n.payload)if(r in e.fields){var t=r;e.fields[t].value=n.payload[t]}},reset:function(e){e.fields=o.fields,e.original=null}}})},256:function(e,n,r){"use strict";var t=r(0),a=r(248),l=r(20),o=r(143),i=r(285),c=o.a.actions;n.a=function(){var e=Object(l.k)((function(e){return e.notifications})),n=Object(l.j)(),r=Object(i.a)(),o=e.queue.length?e.queue[0]:null,s={info:{backgroundColor:r.info},success:{backgroundColor:r.success},error:{backgroundColor:r.error},warning:{backgroundColor:r.warning}};return t.createElement(a.a,{visible:!!o,onDismiss:function(){return n(c.hideSnackbar())},duration:3e3,action:null==o?void 0:o.action,style:!(null==o||!o.variant)&&s[o.variant]},null==o?void 0:o.message)}},258:function(e,n,r){"use strict";r.d(n,"a",(function(){return m}));var t=r(366),a=r(0),l=r.n(a),o=r(1),i=r(58),c=r(124),s=r(25),u=r.n(s),d=r(36);function f(e){return a.createElement(d.a,u()({},e,{style:[e.style,{fontFamily:"space-mono"}]}))}function m(e){var n=e.path;return l.a.createElement(d.b,null,l.a.createElement(d.b,{style:g.getStartedContainer},l.a.createElement(d.a,{style:g.getStartedText,lightColor:"rgba(0,0,0,0.8)",darkColor:"rgba(255,255,255,0.8)"},"Open up the code for this screen:"),l.a.createElement(d.b,{style:[g.codeHighlightContainer,g.homeScreenFilename],darkColor:"rgba(255,255,255,0.05)",lightColor:"rgba(0,0,0,0.05)"},l.a.createElement(f,null,n)),l.a.createElement(d.a,{style:g.getStartedText,lightColor:"rgba(0,0,0,0.8)",darkColor:"rgba(255,255,255,0.8)"},"Change any of the text, save the file, and your app will automatically update.")),l.a.createElement(d.b,{style:g.helpContainer},l.a.createElement(i.a,{onPress:p,style:g.helpLink},l.a.createElement(d.a,{style:g.helpLinkText,lightColor:c.a.light.tint},"Tap here if your app doesn't automatically update after making changes"))))}function p(){t.a("https://docs.expo.io/get-started/create-a-new-app/#opening-the-app-on-your-phonetablet")}var g=o.a.create({container:{flex:1,backgroundColor:"#fff"},developmentModeText:{marginBottom:20,fontSize:14,lineHeight:19,textAlign:"center"},contentContainer:{paddingTop:30},welcomeContainer:{alignItems:"center",marginTop:10,marginBottom:20},welcomeImage:{width:100,height:80,resizeMode:"contain",marginTop:3,marginLeft:-10},getStartedContainer:{alignItems:"center",marginHorizontal:50},homeScreenFilename:{marginVertical:7},codeHighlightText:{color:"rgba(96,100,109, 0.8)"},codeHighlightContainer:{borderRadius:3,paddingHorizontal:4},getStartedText:{fontSize:17,lineHeight:24,textAlign:"center"},helpContainer:{marginTop:15,marginHorizontal:20,alignItems:"center"},helpLink:{paddingVertical:15},helpLinkText:{textAlign:"center"}})},285:function(e,n,r){"use strict";var t=r(204),a=r(124);n.a=function(){var e=Object(t.a)();return a.a[e]}},309:function(e,n,r){"use strict";r.d(n,"a",(function(){return T}));var t,a=r(9),l=r.n(a),o=r(71),i=r.n(o),c=r(11),s=r.n(c),u=r(0),d=r.n(u),f=r(1),m=r(154),p=r(142),g=r(116),v=r(111),b=r(52),y=r(249),h=r(221),E=r(165),S=r(222),O=r(368),w=r(49),C=r(365),j=r(20),k=r(361),x=r.n(k),z=r(36),P=r(114).a.actions,F=Object(w.gql)(t||(t=i()(["\n  query QueryFederations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function T(){var e,n,r,t,a=Object(j.k)((function(e){return e})),o=a.dropzoneForm,i=a.global,c=Object(j.j)(),f=Object(w.useQuery)(F),k=f.data,T=(f.loading,Object(u.useState)(!1)),D=l()(T,2),U=D[0],N=D[1],M=Object(u.useState)(null),A=l()(M,2),$=A[0],W=A[1];Object(u.useEffect)((function(){var e,n;null==k||null==(e=k.federations)||!e.length||null!=(n=o.fields.federation)&&n.value||c(P.setField(["federation",k.federations[0]]))}),[JSON.stringify(null==k?void 0:k.federations)]);var L=Object(u.useCallback)((function(){var e;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.awrap(Object(O.a)({multiple:!1,type:"image"}));case 3:e=n.sent,c(P.setField(["banner",e.uri])),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}),[c]);return d.a.createElement(d.a.Fragment,null,d.a.createElement(m.a,null,d.a.createElement(p.a,{visible:!!$,onDismiss:function(){return W(null)}},d.a.createElement(p.a.Title,null,"Pick a ","primary"===$?"primary color":"secondary color"),d.a.createElement(p.a.Content,{style:{padding:20,height:400}},d.a.createElement(C.a,{onColorSelected:function(e){c("primary"===$?P.setField(["primaryColor",e]):P.setField(["secondaryColor",e]))},style:{flex:1},sliderComponent:x.a,defaultColor:("primary"===$?o.fields.primaryColor.value:o.fields.secondaryColor.value)||void 0,hideSliders:!0})),d.a.createElement(p.a.Actions,null,d.a.createElement(g.a,{onPress:function(){return W(null)}},"Cancel"),d.a.createElement(g.a,{disabled:"primary"===$&&!o.fields.primaryColor.value||"secondary"===$&&!o.fields.secondaryColor.value,onPress:function(){console.log({current:i.theme.colors.accent,next:o.fields.secondaryColor.value}),c("primary"===$?j.c.setPrimaryColor(o.fields.primaryColor.value):j.c.setAccentColor(o.fields.secondaryColor.value)),W(null)}},"Save")))),d.a.createElement(v.a,{style:{width:"100%",maxHeight:300,marginVertical:16}},d.a.createElement(v.a.Cover,{source:{uri:o.fields.banner.value||"https://picsum.photos/700"},resizeMode:"cover"}),d.a.createElement(v.a.Actions,{style:{justifyContent:"flex-end"}},d.a.createElement(g.a,{onPress:L},"Upload"))),d.a.createElement(v.a,{style:{width:"100%",marginVertical:16,paddingHorizontal:16}},d.a.createElement(b.b.Subheader,{style:I.subheader},"Dropzone"),d.a.createElement(y.a,{style:I.field,mode:"outlined",label:"Name",error:!!o.fields.name.error,value:o.fields.name.value||"",onChangeText:function(e){return c(P.setField(["name",e]))}}),d.a.createElement(h.a,{type:"error"},o.fields.name.error||""),d.a.createElement(b.b.Subheader,{style:I.subheader},"Federation"),d.a.createElement(E.a,{onDismiss:function(){return N(!1)},visible:U,anchor:d.a.createElement(E.a.Item,{onPress:function(){return N(!0)},title:(null==(e=o.fields)||null==(n=e.federation)||null==(r=n.value)?void 0:r.name)||"",icon:"parachute"})},null==k||null==(t=k.federations)?void 0:t.map((function(e){return d.a.createElement(E.a.Item,{title:e.name,onPress:function(){c(P.setField(["federation",e])),N(!1)}})}))),d.a.createElement(h.a,{type:"error"},o.fields.federation.error||""),d.a.createElement(b.b.Subheader,{style:I.subheader},"Branding"),d.a.createElement(b.b.Item,{title:"Primary color",onPress:function(){return W("primary")},left:function(){return d.a.createElement(z.b,{style:{width:24,height:24,backgroundColor:i.theme.colors.primary}})}}),d.a.createElement(b.b.Item,{title:"Secondary color",onPress:function(){return W("secondary")},left:function(){return d.a.createElement(z.b,{style:{width:24,height:24,backgroundColor:i.theme.colors.accent}})}}),d.a.createElement(b.b.Item,{title:"Use credit system",description:"Users will be charged credits when a load is marked as landed and can't manifest with insufficient funds.",onPress:function(){return c(P.setField(["isCreditSystemEnabled",!o.fields.isCreditSystemEnabled.value]))},left:function(){return d.a.createElement(S.a,{onPress:function(){return c(P.setField(["isCreditSystemEnabled",!o.fields.isCreditSystemEnabled.value]))},status:o.fields.isCreditSystemEnabled.value?"checked":"unchecked"})}}),d.a.createElement(b.b.Item,{title:"Public",description:"Your dropzone will not be available in the app if this is disabled",onPress:function(){return c(P.setField(["isPublic",!o.fields.isPublic.value]))},left:function(){return d.a.createElement(S.a,{onPress:function(){return c(P.setField(["isPublic",!o.fields.isPublic.value]))},status:o.fields.isPublic.value?"checked":"unchecked"})}})))}var I=f.a.create({fields:{flexGrow:1,display:"flex",width:"100%"},field:{marginBottom:8,width:"100%"},subheader:{paddingLeft:0}})},36:function(e,n,r){"use strict";r.d(n,"a",(function(){return m})),r.d(n,"b",(function(){return p}));var t=r(25),a=r.n(t),l=r(7),o=r.n(l),i=r(0),c=r(42),s=r(2),u=r(124),d=r(204);function f(e,n){var r=Object(d.a)(),t=e[r];return t||u.a[r][n]}function m(e){var n=e.style,r=e.lightColor,t=e.darkColor,l=o()(e,["style","lightColor","darkColor"]),s=f({light:r,dark:t},"text");return i.createElement(c.a,a()({style:[{color:s},n]},l))}function p(e){var n=e.style,r=e.lightColor,t=e.darkColor,l=o()(e,["style","lightColor","darkColor"]),c=f({light:r,dark:t},"background");return i.createElement(s.a,a()({style:[{backgroundColor:c},n]},l))}},362:function(e,n,r){"use strict";r.d(n,"a",(function(){return Rn}));var t=r(363),a=r(0),l=r.n(a),o=r(367),i=r(166),c=r(319),s=r(311),u=r(312),d=r(126),f=r(2),m=r(318),p=r(6),g=r.n(p),v=r(49),b=r(179),y=r(323),h=r(324),E=r(48),S=r(20);function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function w(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){g()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=Object(v.createHttpLink)({uri:E.a.manifest.extra.url});function j(e){var n=e.children,r=Object(S.k)((function(e){return e.global.credentials})),t=Object(S.j)(),o=Object(a.useMemo)((function(){return Object(h.a)((function(e){var n=e.graphQLErrors,r=e.networkError;if(null!=n&&n.some((function(e){var n;return"AUTHENTICATION_ERROR"===(null==(n=e.extensions)?void 0:n.code)})))return t(S.i.showSnackbar({message:"Session expires",variant:"error"})),void t(S.c.logout());n&&n.map((function(e){var n=e.message,r=e.locations,a=e.path;return t(S.i.showSnackbar({message:"[GraphQL error]: "+n+", "+r+", "+a,variant:"error"}))})),r&&t(S.i.showSnackbar({message:"[Network error]: "+r,variant:"error"}))}))}),[t]),i=Object(a.useMemo)((function(){return Object(y.a)((function(e,n){return{headers:w(w({},n.headers),null!=r&&r.accessToken?w({Authorization:"Bearer "+r.accessToken,"access-token":r.accessToken,"token-type":r.tokenType},r):{})}}))}),[JSON.stringify(r)]),c=Object(a.useMemo)((function(){return new v.ApolloClient({link:o.concat(i).concat(C),cache:new v.InMemoryCache})}),[i]);return l.a.createElement(b.ApolloProvider,{client:c},n)}var k=r(108),x=r(9),z=r.n(x),P=r(11),F=r.n(P),T=r(475),I=r(480),D=r(255);function U(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function N(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?U(Object(r),!0).forEach((function(n){g()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var M=r(256),A={prefixes:[r(364).a("/"),"dz://"],config:{screens:{Authenticated:{screens:{HomeScreen:"/home",LoadScreen:"/load/:load_id",PackingScreen:"/packing",ProfileScreen:"/user/:id",SetupScreen:"/dropzone/setup"}},Limbo:{screens:{DropzonesScreen:"/dropzones",CreateDropzoneScreen:"/dropzone/create"}},Unauthenticated:{screens:{LoginScreen:"/login",SignUpScreen:"/signup"}}}}},$=r(478),W=r(1),L=r(42),R=r(58);function B(e){var n=e.navigation;return a.createElement(f.a,{style:q.container},a.createElement(L.a,{style:q.title},"This screen doesn't exist."),a.createElement(R.a,{onPress:function(){return n.replace("Root")},style:q.link},a.createElement(L.a,{style:q.linkText},"Go to home screen!")))}var q=W.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),H=r(13),V=r(479),Q=r(351),J=r(71),Y=r.n(J),G=r(315),Z=r(302),_=r(165),K=r(121),X=r(303),ee=r(301),ne=r(116),re=r(40);function te(e){return l.a.createElement(f.a,{style:oe.warning},l.a.createElement(ee.a,null,e.title),e.action?l.a.createElement(ne.a,{color:"black",mode:"outlined",onPress:function(){return e.action()}},"Take me there"):null)}function ae(e){var n=e.credits,r=e.loading,t=e.isCreditSystemEnabled,a=e.isRigSetUp,o=e.isExitWeightDefined,i=e.isMembershipInDate,c=e.isReserveInDate,s=e.isRigInspectionComplete;if(e.loading)return null;var u=Object(re.useNavigation)();if(!o||!a){var d=[o?null:"exit weight",a?null:"at least one rig"].filter(Boolean);return l.a.createElement(te,{title:"You need to define "+d.join("and")+" in your profile",action:function(){return u.navigate("Profile")}})}return i?s?c?!t||n||r?null:l.a.createElement(te,{title:"You'll need to top up on credits before you can manifest"}):l.a.createElement(te,{title:"Your reserve repack is due. You cannot manifest if your repack is out of date."}):l.a.createElement(te,{title:"Your rig must be inspected before you can manifest at this dropzone"}):l.a.createElement(te,{title:"Your membership seems to be out of date",action:function(){return u.navigate("Profile")}})}var le,oe=W.a.create({warning:{flexDirection:"row",alignItems:"center",height:56,width:"100%",backgroundColor:"#ffbb33",justifyContent:"space-between",paddingHorizontal:32}}),ie=Object(v.gql)(le||(le=Y()(["\n  query QueryDropzone($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      isCreditSystemEnabled\n\n      currentUser {\n        id\n        credits\n        expiresAt\n        \n        rigInspections {\n          id\n          rig {\n            id\n            repackExpiresAt\n          }\n        }\n\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));W.a.create({warning:{flexDirection:"row",alignItems:"center",height:56,width:"100%",backgroundColor:"#ffbb33",justifyContent:"space-between",paddingHorizontal:32}});var ce=function(e){var n,r,t,o,i,c,s,u,d,f,m,p,g,b,y,h,E,O,w,C,j,k,x,P,F=e.navigation,T=e.previous,I=e.scene,D=Object(a.useState)(!1),U=z()(D,2),N=U[0],M=U[1],A=Object(S.k)((function(e){return e.global})).currentDropzone,$=Object(S.j)(),W=Object(v.useQuery)(ie,{variables:{dropzoneId:Number(A.id)}}),L=W.data,R=W.loading;return null==L||null==(n=L.dropzone)||n.isCreditSystemEnabled,l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a.Header,null,T?l.a.createElement(G.a.BackAction,{onPress:F.goBack}):null,l.a.createElement(G.a.Content,{title:I.descriptor.options.title,titleStyle:{fontWeight:"bold"}}),l.a.createElement(Z.a,{mode:"outlined"},"$"+((null==L||null==(r=L.dropzone)||null==(t=r.currentUser)?void 0:t.credits)||0)),l.a.createElement(_.a,{onDismiss:function(){return M(!1)},visible:N,anchor:l.a.createElement(K.a,{icon:"dots-vertical",color:"#FFFFFF",onPress:function(){return M(!0)}})},l.a.createElement(_.a.Item,{title:"Change dropzone",icon:"radar",onPress:function(){$(S.c.setDropzone(null)),M(!1)}}),l.a.createElement(X.a,null),l.a.createElement(_.a.Item,{title:"Log out",icon:"logout",onPress:function(){$(S.c.logout()),M(!1)}}))),l.a.createElement(ae,{credits:(null==L||null==(o=L.dropzone)||null==(i=o.currentUser)?void 0:i.credits)||0,loading:R,isCreditSystemEnabled:!(null==L||null==(c=L.dropzone)||!c.isCreditSystemEnabled),isExitWeightDefined:!(null==L||null==(s=L.dropzone)||null==(u=s.currentUser)||null==(d=u.user)||!d.exitWeight),isMembershipInDate:!(null==L||null==(f=L.dropzone)||null==(m=f.currentUser)||!m.expiresAt)&&(null==L||null==(p=L.dropzone)||null==(g=p.currentUser)?void 0:g.expiresAt)>(new Date).getTime()/1e3,isReserveInDate:!(null==L||null==(b=L.dropzone)||null==(y=b.currentUser)||null==(h=y.user)||null==(E=h.rigs)||!E.some((function(e){var n,r,t,a=null==(n=L.dropzone)||null==(r=n.currentUser)||null==(t=r.rigInspections)?void 0:t.map((function(n){var r;return(null==n||null==(r=n.rig)?void 0:r.id)===e.id})),l=(e.repackExpiresAt||0)>(new Date).getTime()/1e3;return a&&l}))),isRigInspectionComplete:!(null==L||null==(O=L.dropzone)||null==(w=O.currentUser)||null==(C=w.rigInspections)||!C.length),isRigSetUp:!(null==L||null==(j=L.dropzone)||null==(k=j.currentUser)||null==(x=k.user)||null==(P=x.rigs)||!P.length)}))},se=a.lazy((function(){return Promise.all([r.e(6),r.e(10)]).then(r.bind(null,534))})),ue=a.lazy((function(){return r.e(25).then(r.bind(null,516))})),de=a.lazy((function(){return r.e(20).then(r.bind(null,535))})),fe=a.lazy((function(){return Promise.all([r.e(1),r.e(13)]).then(r.bind(null,536))})),me=Object($.a)();function pe(){var e=Object(S.k)((function(e){return e.global}));return a.createElement(me.Navigator,{screenOptions:{headerShown:!(!e.credentials||!e.currentDropzone),header:function(e){return a.createElement(ce,e)},cardStyle:{flex:1}}},a.createElement(me.Screen,{name:"DropzoneScreen",component:se,options:{title:"Manifest"}}),a.createElement(me.Screen,{name:"LoadScreen",component:ue,options:{title:"Loads"}}),a.createElement(me.Screen,{name:"CreateLoadScreen",component:de,options:{title:"Create load"}}),a.createElement(me.Screen,{name:"ManifestGroupScreen",component:fe,options:{title:"Manifest group"}}))}r(258);var ge=r(36);W.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Object($.a)();var ve=a.lazy((function(){return Promise.all([r.e(0),r.e(2)]).then(r.bind(null,533))})),be=a.lazy((function(){return r.e(26).then(r.bind(null,517))})),ye=a.lazy((function(){return r.e(24).then(r.bind(null,537))})),he=Object($.a)();function Ee(){var e,n=Object(S.k)((function(e){return e.global})).currentDropzone;return a.createElement(he.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(ce,e)},cardStyle:{flex:1}}},a.createElement(he.Screen,{name:"ProfileScreen",component:ve,options:{title:"Profile"},initialParams:{userId:null==n||null==(e=n.currentUser)?void 0:e.id}}),a.createElement(he.Screen,{name:"UpdateUserScreen",component:ye,options:{title:"Edit profile"}}),a.createElement(he.Screen,{name:"RigScreen",component:be,options:{title:"Rig"}}))}var Se=a.lazy((function(){return r.e(28).then(r.bind(null,518))})),Oe=a.lazy((function(){return r.e(27).then(r.bind(null,519))})),we=a.lazy((function(){return r.e(21).then(r.bind(null,520))})),Ce=a.lazy((function(){return r.e(16).then(r.bind(null,521))})),je=a.lazy((function(){return r.e(17).then(r.bind(null,522))})),ke=a.lazy((function(){return r.e(23).then(r.bind(null,523))})),xe=a.lazy((function(){return r.e(12).then(r.bind(null,524))})),ze=a.lazy((function(){return Promise.all([r.e(0),r.e(9)]).then(r.bind(null,538))})),Pe=a.lazy((function(){return r.e(18).then(r.bind(null,525))})),Fe=a.lazy((function(){return r.e(19).then(r.bind(null,526))})),Te=a.lazy((function(){return Promise.all([r.e(1),r.e(14)]).then(r.bind(null,527))})),Ie=a.lazy((function(){return Promise.all([r.e(1),r.e(15)]).then(r.bind(null,528))})),De=a.lazy((function(){return r.e(11).then(r.bind(null,529))})),Ue=Object($.a)();function Ne(){return a.createElement(Ue.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(ce,e)},cardStyle:{flex:1}}},a.createElement(Ue.Screen,{name:"SettingsScreen",component:Se,options:{title:"Settings"}}),a.createElement(Ue.Screen,{name:"DropzoneSettingsScreen",component:Oe}),a.createElement(Ue.Screen,{name:"UpdateDropzoneScreen",component:ke}),a.createElement(Ue.Screen,{name:"PlanesScreen",component:xe,options:{title:"Planes"}}),a.createElement(Ue.Screen,{name:"CreatePlaneScreen",component:Ce,options:{title:"New plane"}}),a.createElement(Ue.Screen,{name:"UpdatePlaneScreen",component:je,options:{title:"Edit plane"}}),a.createElement(Ue.Screen,{name:"TicketTypesScreen",component:we,options:{title:"Ticket types"}}),a.createElement(Ue.Screen,{name:"CreateTicketTypeScreen",component:Pe,options:{title:"New ticket type"}}),a.createElement(Ue.Screen,{name:"UpdateTicketTypeScreen",component:Fe,options:{title:"Edit ticket type"}}),a.createElement(Ue.Screen,{name:"CreateExtraScreen",component:Te,options:{title:"Create ticket add-on"}}),a.createElement(Ue.Screen,{name:"UpdateExtraScreen",component:Ie,options:{title:"Update ticket add-on"}}),a.createElement(Ue.Screen,{name:"ExtrasScreen",component:De,options:{title:"Ticket add-ons"}}),a.createElement(Ue.Screen,{name:"RigInspectionTemplateScreen",component:ze,options:{title:"Rig Inspection Form"}}))}var Me=r(25),Ae=r.n(Me),$e=a.lazy((function(){return r.e(22).then(r.bind(null,530))})),We=a.lazy((function(){return Promise.all([r.e(7),r.e(29)]).then(r.bind(null,531))})),Le=a.lazy((function(){return Promise.all([r.e(0),r.e(8)]).then(r.bind(null,539))})),Re=a.lazy((function(){return Promise.all([r.e(0),r.e(2)]).then(r.bind(null,533))})),Be=Object($.a)();function qe(){var e=Object(S.k)((function(e){return e.usersScreen})),n=e.isSearchVisible,r=e.searchText,t=Object(S.j)();return a.createElement(Be.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(We,Ae()({},e,{searchText:r,searchVisible:n,setSearchVisible:function(e){return t(S.m.setSearchVisible(e))},onSearch:function(e){return t(S.m.setSearchText(e))}}))},cardStyle:{flex:1}}},a.createElement(Be.Screen,{name:"UsersScreen",component:$e,options:{title:"Dropzone users"}}),a.createElement(Be.Screen,{name:"UserProfileScreen",component:Re,options:{title:"User"}}),a.createElement(Be.Screen,{name:"RigInspectionScreen",component:Le,options:{title:"Inspection"}}))}var He=r(170),Ve=Object(V.a)();function Qe(){var e=Object(H.b)(),n=Object(He.a)("readUser"),r=(Object(He.a)("createPackjob"),Object(He.a)("updateDropzone"));return a.createElement(Ve.Navigator,{initialRouteName:"Manifest",tabBarOptions:{activeTintColor:"#FFFFFF",inactiveBackgroundColor:e.colors.primary,activeBackgroundColor:e.colors.primary,inactiveTintColor:"#CCCCCC",showLabel:!1,style:{backgroundColor:e.colors.primary}}},a.createElement(Ve.Screen,{name:"Manifest",component:pe,options:{tabBarIcon:function(e){e.focused;var n=e.color,r=e.size;return a.createElement(Q.a,{name:"airplane",color:n,size:r})},unmountOnBlur:!0}}),a.createElement(Ve.Screen,{name:"Profile",component:Ee,options:{tabBarIcon:function(e){var n=e.size,r=e.color;e.focused;return a.createElement(Q.a,{size:n,color:r,name:"account-circle"})},unmountOnBlur:!0}}),!1,n&&a.createElement(Ve.Screen,{name:"Users",component:qe,options:{tabBarIcon:function(e){var n=e.size,r=e.color;e.focused;return a.createElement(Q.a,{size:n,color:r,name:"account-group"})},unmountOnBlur:!0}}),r&&a.createElement(Ve.Screen,{name:"Settings",component:Ne,options:{tabBarIcon:function(e){var n=e.size,r=e.color;e.focused;return a.createElement(Q.a,{size:n,color:r,name:"account-cog"})}}}))}var Je,Ye=r(72),Ge=r(122),Ze=r(29),_e=r(129),Ke=r(111),Xe=r(317),en=r(477),nn=Object(Ye.a)(Je||(Je=Y()(["\n  query QueryDropzones {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n          banner\n          ticketTypes {\n            id\n            name\n            cost\n            allowManifestingSelf\n            currency\n          }\n          planes {\n            id\n            name,\n            registration,\n            minSlots,\n            maxSlots,\n          }\n        }\n      }\n    }\n  }\n"])));function rn(){var e,n=Object(S.j)(),r=Object(v.useQuery)(nn),t=r.data,l=r.loading,o=r.refetch,i=Object(re.useNavigation)();return a.createElement(en.a,{style:an.container},a.createElement(Ge.a,{data:(null==t||null==(e=t.dropzones)?void 0:e.edges)||[],numColumns:2,refreshing:l,onRefresh:function(){return o()},style:{flex:1},contentContainerStyle:{flexGrow:1},ListEmptyComponent:function(){return a.createElement(ge.b,{style:an.empty},a.createElement(_e.a,null,"No dropzones?"),a.createElement(ee.a,null,"You can set one up!"))},renderItem:function(e){var r,t,l=e.item;return a.createElement(Ke.a,{style:{width:Ze.a.get("window").width/2-32,margin:8},onPress:function(){return F.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:null!=l&&l.node&&n(S.c.setDropzone(l.node));case 1:case"end":return e.stop()}}),null,null,null,Promise)}},a.createElement(Ke.a.Cover,{source:{uri:null==l||null==(r=l.node)?void 0:r.banner}}),a.createElement(Ke.a.Content,null,a.createElement(_e.a,null,null==l||null==(t=l.node)?void 0:t.name)))}}),a.createElement(Xe.a,{style:an.fab,small:!0,icon:"plus",onPress:function(){return i.navigate("CreateDropzoneScreen")},label:"Create dropzone"}))}var tn,an=W.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:32,right:16,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),ln=r(112),on=r(114),cn=r(309);function sn(e){return{message:e,pattern:/.{1,}/}}function un(e,n){return{message:e,callback:n}}function dn(e,n){var r=n.getPayload,t=n.fieldErrorMap,l=n.validates;return function(o){var i=o.onFieldError,c=o.onSuccess,s=o.onError,u=Object(v.useMutation)(e),d=z()(u,2),f=d[0],m=d[1],p=m.data,g=m.loading;m.error;return{loading:g,mutate:Object(a.useCallback)((function(e){var a,u,d,m,p,g;return F.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(function(){var r=!1;return l&&Object.keys(e).forEach((function(t){var a,o=t;o in(n.validates||{})&&(null==(a=l[o])||a.forEach((function(n){n.pattern?n.pattern.test(""+e[o])||(r=!0,i&&i(o,n.message)):n.callback&&!n.callback(e)&&(r=!0,i&&i(o,n.message))})))})),!r}()){v.next=3;break}return v.abrupt("return");case 3:return v.prev=3,v.next=6,F.a.awrap(f({variables:e}));case 6:if(m=v.sent,null==(p=r(m.data))||null==(a=p.fieldErrors)||a.map((function(e){var r=e.field,a=e.message,l=r in(t||{})?n.fieldErrorMap[r]:r;o.onFieldError&&o.onFieldError(""+l,a)})),null==p||null==(u=p.errors)||!u.length||!s){v.next=12;break}return null==(g=p.errors)||g.map((function(e){return s(e)})),v.abrupt("return");case 12:return null!=p&&null!=(d=p.fieldErrors)&&d.length||c(p),v.abrupt("return",p);case 16:v.prev=16,v.t0=v.catch(3),s&&s(v.t0.message);case 19:return v.abrupt("return");case 20:case"end":return v.stop()}}),null,null,[[3,16]],Promise)}),[i,s,c,,f,r,JSON.stringify(p)])}}}var fn=dn(Object(Ye.a)(tn||(tn=Y()(["\nmutation CreateDropzone(\n  $name: String!,\n  $banner: String!,\n  $federationId: Int!\n){\n  createDropzone(input: { attributes: { name: $name, banner: $banner, federationId: $federationId }}) {\n    dropzone {\n      id\n      name\n      banner\n\n      federation {\n        id\n        name\n      }\n    }\n  }\n}\n"]))),{getPayload:function(e){return e.createDropzone},fieldErrorMap:{federation:"federationId"},validates:{name:[sn("Name is required")]}}),mn=r(169),pn=on.a.actions,gn=ln.a.actions;function vn(){var e=Object(S.k)((function(e){return e.dropzoneForm})),n=Object(S.j)(),r=(Object(re.useNavigation)(),fn({onError:function(e){return n(S.i.showSnackbar({message:e,variant:"error"}))},onFieldError:function(e,r){return n(pn.setFieldError([e,r]))},onSuccess:function(e){return n(gn.setDropzone(e.dropzone))}}));return a.createElement(mn.a,{contentContainerStyle:{paddingHorizontal:32}},a.createElement(cn.a,null),a.createElement(ge.b,{style:bn.fields},a.createElement(ne.a,{mode:"contained",disabled:r.loading,loading:r.loading,onPress:function(){return r.mutate({name:e.fields.name.value,banner:e.fields.banner.value,federationId:Number(e.fields.federation.value.id)})}},"Save")))}var bn=W.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%"},field:{marginBottom:8}}),yn=Object($.a)();function hn(){return a.createElement(yn.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"Dropzones"},a.createElement(yn.Screen,{name:"DropzonesScreen",component:rn}),a.createElement(yn.Screen,{name:"CreateDropzoneScreen",component:vn}))}var En,Sn=r(249),On=r(221),wn=r(31),Cn=r(157).a.actions,jn=Object(v.gql)(En||(En=Y()(["\n  mutation UserLogin($email: String!, $password: String!) {\n    userLogin(email: $email, password: $password) {\n      authenticatable {\n        id\n        email\n        name\n        phone\n        createdAt\n        updatedAt\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"])));function kn(){var e=Object(S.k)((function(e){return e.login})),n=Object(S.j)(),r=Object(wn.useNavigation)(),t=Object(v.useMutation)(jn),o=z()(t,2),i=o[0],c=o[1],s=Object(a.useCallback)((function(){var r,t,a,l,o,c,s;return F.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(r=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),t=!1,e.fields.email.value||(t=!0,n(Cn.setEmailError("Email is required"))),e.fields.password.value||(t=!0,n(Cn.setPasswordError("Password is required"))),r.test(e.fields.email.value)||(t=!0,n(Cn.setEmailError("Please enter a valid email"))),t){u.next=17;break}return u.prev=6,u.next=9,F.a.awrap(i({variables:{email:e.fields.email.value,password:e.fields.password.value}}));case 9:s=u.sent,console.log({result:s}),null!=s&&null!=(a=s.data)&&null!=(l=a.userLogin)&&l.authenticatable&&null!=s&&null!=(o=s.data)&&null!=(c=o.userLogin)&&c.credentials&&(n(S.c.setCredentials(s.data.userLogin.credentials)),n(S.c.setUser(s.data.userLogin.authenticatable))),u.next=17;break;case 14:u.prev=14,u.t0=u.catch(6),n(S.i.showSnackbar({message:u.t0.message,variant:"error"}));case 17:case"end":return u.stop()}}),null,null,[[6,14]],Promise)}),[i,JSON.stringify(e.fields)]);return l.a.createElement(ge.b,{style:Pn.container},l.a.createElement(ge.a,{style:Pn.title},"Sign in"),l.a.createElement(ge.b,{style:Pn.fields},l.a.createElement(Sn.a,{label:"Email",mode:"outlined",value:e.fields.email.value,onChangeText:function(e){n(Cn.setEmail(e))}}),l.a.createElement(On.a,{type:"error"},e.fields.email.error||" "),l.a.createElement(Sn.a,{label:"Password",mode:"outlined",value:e.fields.password.value,secureTextEntry:!0,onChangeText:function(e){n(Cn.setPassword(e))},error:!!e.fields.password.error}),l.a.createElement(On.a,{type:"error"},e.fields.password.error||" "),l.a.createElement(ne.a,{mode:"contained",style:Pn.button,onPress:s,loading:c.loading},"Log in"),l.a.createElement(ne.a,{style:Pn.button,onPress:function(){return r.navigate("SignUpScreen")}},"Sign up")))}var xn,zn,Pn=W.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{marginBottom:10,width:"100%",padding:96},button:{marginTop:10,width:"100%"}}),Fn=r(158),Tn=dn(Object(Ye.a)(xn||(xn=Y()(["\n  mutation UserSignUp(\n    $email: String!,\n    $password: String!,\n    $passwordConfirmation: String!\n    $name: String!\n    $phone: String!\n    $exitWeight: Float!\n    $licenseId: Int\n  ){\n    userSignUp(\n      email: $email,\n      password: $password,\n      passwordConfirmation: $passwordConfirmation,\n      exitWeight: $exitWeight,\n      name: $name,\n      phone: $phone,\n      licenseId: $licenseId\n    ) {\n      authenticatable {\n        createdAt,\n        email,\n        id,\n        name,\n        phone,\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.userSignUp},fieldErrorMap:{license:"licenseId"},validates:{name:[sn("Name is required")],email:[(zn="Please enter a valid email",{message:zn,pattern:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})],passwordConfirmation:[un("Password must have 1 uppercase, 1 lowercase, 1 digit and be at least 8 characters",(function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}.*$/.test(e.passwordConfirmation)})),un("Passwords don't match",(function(e){return e.password===e.passwordConfirmation}))]}}),In=Fn.a.actions,Dn=ln.a.actions;function Un(){var e,n,r=Object(S.k)((function(e){return e.signup})),t=Object(S.j)(),l=Tn({onSuccess:function(e){e.credentials&&(t(Dn.setCredentials(e.credentials)),t(Dn.setUser(e.authenticatable)))},onFieldError:function(e,n){return t(In.setFieldError([e,n]))}}),o=l.loading,i=l.mutate;return a.createElement(mn.a,{contentContainerStyle:{padding:48,alignItems:"center"}},a.createElement(ge.a,{style:Nn.title},"Sign up"),a.createElement(ge.b,{style:Nn.fields},a.createElement(Sn.a,{style:Nn.field,mode:"outlined",label:"Name",error:!!r.fields.name.error,value:r.fields.name.value,onChangeText:function(e){return t(In.setField(["name",e]))}}),a.createElement(On.a,{type:"error"},r.fields.name.error||""),a.createElement(Sn.a,{style:Nn.field,mode:"outlined",label:"Exit weight",error:!!r.fields.exitWeight.error,value:(null==(e=r.fields.exitWeight)||null==(n=e.value)?void 0:n.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(Sn.a.Affix,{text:"kg"})},onChangeText:function(e){return!e||/\d+/.test(e)?t(In.setField(["exitWeight",parseFloat(e||"0")])):null}}),a.createElement(On.a,{type:r.fields.exitWeight.error?"error":"info"},r.fields.exitWeight.error||""),a.createElement(Sn.a,{style:Nn.field,mode:"outlined",label:"Email",error:!!r.fields.email.error,value:r.fields.email.value,onChangeText:function(e){return t(In.setField(["email",e]))}}),a.createElement(On.a,{type:"error"},r.fields.email.error||""),a.createElement(Sn.a,{style:Nn.field,mode:"outlined",label:"Phone",error:!!r.fields.phone.error,value:r.fields.phone.value,onChangeText:function(e){return t(In.setField(["phone",e]))}}),a.createElement(On.a,{type:"error"},r.fields.phone.error||""),a.createElement(Sn.a,{style:Nn.field,mode:"outlined",label:"Password",error:Boolean(r.fields.password.error||r.fields.passwordConfirmation.error),textContentType:"password",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:r.fields.password.value,onChangeText:function(e){return t(In.setField(["password",e]))}}),a.createElement(On.a,{type:"error"},r.fields.password.error||""),a.createElement(Sn.a,{style:Nn.field,mode:"outlined",label:"Repeat password",error:Boolean(r.fields.password.error||r.fields.passwordConfirmation.error),textContentType:"password",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:r.fields.passwordConfirmation.value,onChangeText:function(e){return t(In.setField(["passwordConfirmation",e]))}}),a.createElement(On.a,{type:"error"},r.fields.passwordConfirmation.error||""),a.createElement(ne.a,{mode:"contained",onPress:function(){var e,n;return i({email:r.fields.email.value,name:r.fields.name.value,exitWeight:r.fields.exitWeight.value,password:r.fields.password.value,passwordConfirmation:r.fields.passwordConfirmation.value,licenseId:Number(null==(e=r.fields.license)||null==(n=e.value)?void 0:n.id)||null,phone:r.fields.phone.value})},loading:o},"Sign up")))}var Nn=W.a.create({container:{flex:1},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%",maxWidth:400},field:{marginBottom:8}}),Mn=Object($.a)();function An(){return a.createElement(Mn.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"LoginScreen"},a.createElement(Mn.Screen,{name:"LoginScreen",component:kn}),a.createElement(Mn.Screen,{name:"SignUpScreen",component:Un}))}var $n=Object($.a)();function Wn(){var e=Object(k.m)((function(e){return e.global}));return a.createElement($n.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},e.credentials?e.currentDropzone?a.createElement($n.Screen,{name:"Authenticated",component:Qe}):a.createElement($n.Screen,{name:"Dropzones",component:hn}):a.createElement($n.Screen,{name:"Unauthenticated",component:An}),a.createElement($n.Screen,{name:"NotFound",component:B,options:{title:"Oops!"}}))}function Ln(){var e,n,r=Object(k.m)((function(e){return e.global}));return l.a.createElement(a.Suspense,{fallback:l.a.createElement(f.a,{style:{flex:1,flexGrow:1}},l.a.createElement(s.a,{indeterminate:!0,color:null==r||null==(e=r.theme)||null==(n=e.colors)?void 0:n.accent,visible:!0}))},l.a.createElement(j,null,l.a.createElement(u.a,{theme:r.theme},l.a.createElement(o.b,null,l.a.createElement(m.a,{linking:A,theme:r.theme},l.a.createElement(Wn,null)),l.a.createElement(t.a,null),l.a.createElement(M.a,null)))))}function Rn(){return function(){var e=a.useState(!1),n=z()(e,2),t=n[0],l=n[1];return a.useEffect((function(){F.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D.b(),e.next=4,F.a.awrap(I.b(N(N({},T.a.font),{},{"space-mono":r(429)})));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.prev=8,l(!0),D.a(),e.finish(8);case 12:case"end":return e.stop()}}),null,null,[[0,6,8,12]],Promise)}),[]),t}()?l.a.createElement(i.a,{store:k.k},l.a.createElement(c.a,{persistor:k.d,loading:l.a.createElement(f.a,{style:{flex:1,justifyContent:"center",alignItems:"center"}},l.a.createElement(d.a,{size:"large"}))},l.a.createElement(Ln,null))):null}},388:function(e,n,r){r(389),e.exports=r(470)},389:function(e,n){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},429:function(e,n,r){e.exports=r.p+"./fonts/SpaceMono-Regular.ttf"},445:function(e,n){}},[[388,4,5]]]);
//# sourceMappingURL=app.02177852.chunk.js.map