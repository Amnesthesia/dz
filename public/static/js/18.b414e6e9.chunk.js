(this.webpackJsonp=this.webpackJsonp||[]).push([[18],{483:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(143),a=t(257),i=r.a.actions;a.a},498:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(0),a=t(1),i=t(250),o=t(221),l=t(21),s=t(227).a.actions;function u(){var e,n,t,a,u=Object(l.l)((function(e){return e.planeForm})),m=Object(l.k)();return r.createElement(r.Fragment,null,r.createElement(i.a,{style:d.field,mode:"outlined",label:"Name",error:!!u.fields.name.error,value:u.fields.name.value,onChangeText:function(e){return m(s.setField(["name",e]))}}),r.createElement(o.a,{type:u.fields.name.error?"error":"info"},u.fields.name.error||""),r.createElement(i.a,{style:d.field,mode:"outlined",label:"Registration",error:!!u.fields.registration.error,value:u.fields.registration.value,onChangeText:function(e){return m(s.setField(["registration",e]))}}),r.createElement(o.a,{type:u.fields.registration.error?"error":"info"},u.fields.registration.error||""),r.createElement(i.a,{style:d.field,mode:"outlined",label:"hours",error:!!u.fields.hours.error,value:null==(e=u.fields.hours)||null==(n=e.value)?void 0:n.toString(),placeholder:"Optional",onChangeText:function(e){return m(s.setField(["hours",Number(e)]))}}),r.createElement(o.a,{type:u.fields.hours.error?"error":"info"},u.fields.hours.error||""),r.createElement(i.a,{style:d.field,mode:"outlined",label:"Min slots",error:!!u.fields.minSlots.error,value:null==(t=u.fields.minSlots.value)?void 0:t.toString(),keyboardType:"number-pad",onChangeText:function(e){return m(s.setField(["minSlots",Number(e)]))}}),r.createElement(o.a,{type:u.fields.minSlots.error?"error":"info"},u.fields.minSlots.error||"Minimum tickets required to send it"),r.createElement(i.a,{style:d.field,mode:"outlined",label:"Max slots",error:!!u.fields.maxSlots.error,value:null==(a=u.fields.maxSlots)?void 0:a.value.toString(),keyboardType:"number-pad",onChangeText:function(e){return m(s.setField(["maxSlots",Number(e)]))}}),r.createElement(o.a,{type:u.fields.maxSlots.error?"error":"info"},u.fields.maxSlots.error||"Maximum amount of jumpers who can be manifested on one load"))}var d=a.a.create({fields:{width:"100%",flex:1},field:{width:"100%",marginBottom:8}})},525:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return M}));var r,a=t(9),i=t.n(a),o=t(71),l=t.n(o),s=t(11),u=t.n(s),d=t(0),m=t(1),c=t(116),f=t(49),g=t(21),v=t(36),p=t(483),S=t(112),h=t(227),b=t(498),x=t(40),y=t(169),E=t(352),k=h.a.actions,$=(S.a.actions,Object(f.gql)(r||(r=l()(["\n  mutation UpdatePlane(\n    $id: Int!,\n    $name: String!,\n    $registration: String!,\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    updatePlane(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        registration: $registration,\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))));function M(){var e=Object(g.l)((function(e){return e})),n=e.planeForm,t=(e.global,Object(g.k)()),r=Object(x.useNavigation)(),a=Object(x.useRoute)().params.plane;d.useEffect((function(){t(k.setOriginal(a))}),[null==a?void 0:a.id]);var o=Object(f.useMutation)($),l=i()(o,2),s=l[0],m=l[1],S=d.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,t(k.setFieldError(["name","Name is too short"]))),n.fields.registration.value.length<3&&(e=!0,t(k.setFieldError(["registration","Registration is too short"]))),n.fields.maxSlots.value||(e=!0,t(k.setFieldError(["maxSlots","Max slots must be specified"]))),!e}),[JSON.stringify(n.fields),t]),h=d.useCallback((function(){var e,a,i,o,l,d,m,c,f,g,v;return u.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(e=n.fields,a=e.name,i=e.registration,o=e.maxSlots,l=e.minSlots,d=e.hours,m=e.nextMaintenanceHours,!S()){h.next=12;break}return h.prev=2,h.next=5,u.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,registration:i.value,minSlots:l.value,maxSlots:o.value,hours:d.value,nextMaintenanceHours:m.value}}));case 5:g=h.sent,null!=(c=g.data)&&null!=(f=c.updatePlane)&&f.plane&&(v=g.data.updatePlane.plane,t(p.a.showSnackbar({message:"Saved plane "+v.name,variant:"success"})),r.goBack()),h.next=12;break;case 9:h.prev=9,h.t0=h.catch(2),t(p.a.showSnackbar({message:h.t0.message,variant:"error"}));case 12:case"end":return h.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return d.createElement(y.a,{contentContainerStyle:O.content},d.createElement(E.a,{name:"airplane",size:100,color:"#999999",style:{alignSelf:"center"}}),d.createElement(b.a,null),d.createElement(v.b,{style:O.actions},d.createElement(c.a,{mode:"contained",disabled:m.loading,onPress:h,loading:m.loading},"Save")))}var O=m.a.create({content:{paddingHorizontal:48},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},actions:{width:"100%",marginBottom:16},field:{marginBottom:8}})}}]);
//# sourceMappingURL=18.b414e6e9.chunk.js.map