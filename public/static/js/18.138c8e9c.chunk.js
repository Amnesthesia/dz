(this.webpackJsonp=this.webpackJsonp||[]).push([[18],{194:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={};n.r(r),n.d(r,"Accordion",(function(){return E})),n.d(r,"AccordionGroup",(function(){return b})),n.d(r,"Icon",(function(){return w})),n.d(r,"Item",(function(){return D})),n.d(r,"Section",(function(){return J})),n.d(r,"Subheader",(function(){return T}));var i=n(6),l=n.n(i),a=n(33),o=n.n(a),c=n(0),s=n(5),u=n(4),d=n(31),f=n(193),m=n(87),g=n(119),p=n(38),v=c.createContext(null),h=function(e){var t=e.expandedId,n=e.onAccordionPress,r=e.children,i=c.useState(void 0),a=l()(i,2),o=a[0],s=a[1];return c.createElement(v.Provider,{value:{expandedId:t||o,onAccordionPress:n||function(e){s((function(t){return t===e?void 0:e}))}}},r)};h.displayName="List.AccordionGroup";var b=h,y=function(e){var t=e.left,n=e.right,r=e.title,i=e.description,a=e.children,u=e.theme,p=e.titleStyle,h=e.descriptionStyle,b=e.titleNumberOfLines,y=void 0===b?1:b,E=e.descriptionNumberOfLines,j=void 0===E?2:E,x=e.style,S=e.id,w=e.testID,P=e.onPress,L=e.onLongPress,k=e.expanded,I=c.useState(k||!1),C=l()(I,2),F=C[0],N=C[1],z=o()(u.colors.text).alpha(.87).rgb().string(),W=o()(u.colors.text).alpha(.54).rgb().string(),D=void 0!==k?k:F,$=c.useContext(v);if(null!==$&&!S)throw new Error("List.Accordion is used inside a List.AccordionGroup without specifying an id prop.");var M=$?$.expandedId===S:D,A=$&&void 0!==S?function(){return $.onAccordionPress(S)}:function(){null===P||void 0===P||P(),void 0===k&&N((function(e){return!e}))};return c.createElement(s.a,null,c.createElement(f.a,{style:[O.container,x],onPress:A,onLongPress:L,accessibilityTraits:"button",accessibilityComponentType:"button",accessibilityRole:"button",testID:w,borderless:!0},c.createElement(s.a,{style:O.row,pointerEvents:"none"},t?t({color:M?u.colors.primary:W}):null,c.createElement(s.a,{style:[O.item,O.content]},c.createElement(g.a,{selectable:!1,numberOfLines:y,style:[O.title,{color:M?u.colors.primary:z},p]},r),i&&c.createElement(g.a,{selectable:!1,numberOfLines:j,style:[O.description,{color:W},h]},i)),c.createElement(s.a,{style:[O.item,i?O.multiline:void 0]},n?n({isExpanded:M}):c.createElement(m.b,{name:M?"chevron-up":"chevron-down",color:z,size:24,direction:d.a.isRTL?"rtl":"ltr"})))),M?c.Children.map(a,(function(e){return t&&c.isValidElement(e)&&!e.props.left&&!e.props.right?c.cloneElement(e,{style:[O.child,e.props.style]}):e})):null)};y.displayName="List.Accordion";var O=u.a.create({container:{padding:8},row:{flexDirection:"row",alignItems:"center"},multiline:{height:40,alignItems:"center",justifyContent:"center"},title:{fontSize:16},description:{fontSize:14},item:{margin:8},child:{paddingLeft:64},content:{flex:1,justifyContent:"center"}}),E=Object(p.c)(y),j=n(195),x=function(e){var t=e.icon,n=e.color,r=e.style;return c.createElement(s.a,{style:[S.item,r],pointerEvents:"box-none"},c.createElement(j.a,{source:t,size:24,color:n}))},S=u.a.create({item:{margin:8,height:40,width:40,alignItems:"center",justifyContent:"center"}});x.displayName="List.Icon";var w=x,P=n(7),L=n.n(P),k=n(13),I=n.n(k);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=function(e){var t=e.left,n=e.right,r=e.title,i=e.description,l=e.onPress,a=e.theme,u=e.style,d=e.titleStyle,m=e.titleNumberOfLines,p=void 0===m?1:m,v=e.descriptionNumberOfLines,h=void 0===v?2:v,b=e.titleEllipsizeMode,y=e.descriptionEllipsizeMode,O=e.descriptionStyle,E=I()(e,["left","right","title","description","onPress","theme","style","titleStyle","titleNumberOfLines","descriptionNumberOfLines","titleEllipsizeMode","descriptionEllipsizeMode","descriptionStyle"]),j=o()(a.colors.text).alpha(.87).rgb().string(),x=o()(a.colors.text).alpha(.54).rgb().string();return c.createElement(f.a,N({},E,{style:[W.container,u],onPress:l}),c.createElement(s.a,{style:W.row},t?t({color:x,style:i?W.iconMarginLeft:F(F({},W.iconMarginLeft),W.marginVerticalNone)}):null,c.createElement(s.a,{style:[W.item,W.content]},c.createElement(g.a,{selectable:!1,ellipsizeMode:b,numberOfLines:p,style:[W.title,{color:j},d]},r),i?function(e,t){return"function"===typeof t?t({selectable:!1,ellipsizeMode:y,color:e,fontSize:W.description.fontSize}):c.createElement(g.a,{selectable:!1,numberOfLines:h,ellipsizeMode:y,style:[W.description,{color:e},O]},t)}(x,i):null),n?n({color:x,style:i?W.iconMarginRight:F(F({},W.iconMarginRight),W.marginVerticalNone)}):null))};z.displayName="List.Item";var W=u.a.create({container:{padding:8},row:{flexDirection:"row"},title:{fontSize:16},description:{fontSize:14},marginVerticalNone:{marginVertical:0},iconMarginLeft:{marginLeft:0,marginRight:16},iconMarginRight:{marginRight:0},item:{marginVertical:6,paddingLeft:8},content:{flex:1,justifyContent:"center"}}),D=Object(p.c)(z);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){L()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var R=function(e){var t=e.style,n=e.theme,r=I()(e,["style","theme"]),i=n.colors,l=n.fonts.medium,a=o()(i.text).alpha(.54).rgb().string();return c.createElement(g.a,A({numberOfLines:1},r,{style:[V.container,M({color:a},l),t]}))};R.displayName="List.Subheader";var V=u.a.create({container:{paddingHorizontal:16,paddingVertical:13}}),T=Object(p.c)(R);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var B=function(e){var t=e.children,n=e.title,r=e.titleStyle,i=e.style,l=I()(e,["children","title","titleStyle","style"]);return c.createElement(s.a,q({},l,{style:[U.container,i]}),n?c.createElement(T,{style:r},n):null,t)};B.displayName="List.Section";var U=u.a.create({container:{marginVertical:8}}),J=Object(p.c)(B)},404:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g}));var r=n(27),i=n.n(r),l=n(13),a=n.n(l),o=n(0),c=n(59),s=n(5),u=n(197),d=n(200);function f(e,t){var n=Object(d.a)(),r=e[n];return r||u.a[n][t]}function m(e){var t=e.style,n=e.lightColor,r=e.darkColor,l=a()(e,["style","lightColor","darkColor"]),s=f({light:n,dark:r},"text");return o.createElement(c.a,i()({style:[{color:s},t]},l))}function g(e){var t=e.style,n=e.lightColor,r=e.darkColor,l=a()(e,["style","lightColor","darkColor"]),c=f({light:n,dark:r},"background");return o.createElement(s.a,i()({style:[{backgroundColor:c},t]},l))}},408:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),i=n.n(r),l=n(89),a=n(4),o=n(409),c=n(60);function s(e){var t=Object(o.a)().height,n=Object(c.h)((function(e){return e.global})).theme;return i.a.createElement(l.a,{style:[u.container,{backgroundColor:n.colors.surface,height:t-112},e.style],contentContainerStyle:[u.content,e.contentContainerStyle]},e.children)}var u=a.a.create({container:{flex:1},content:{paddingHorizontal:16,alignItems:"flex-start",flexGrow:1,paddingBottom:50}})},409:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(53),i=n(0);function l(){var e=Object(i.useState)((function(){return r.a.get("window")})),t=e[0],n=e[1];return Object(i.useEffect)((function(){function e(e){var t=e.window;n(t)}return r.a.addEventListener("change",e),n(r.a.get("window")),function(){r.a.removeEventListener("change",e)}}),[]),t}},412:function(e,t,n){"use strict";var r=n(13),i=n.n(r),l=n(0),a=n(33),o=n.n(a),c=n(8),s=n(4),u=n(442),d=n(38);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=s.a.create({text:{fontSize:12,paddingVertical:4},padding:{paddingHorizontal:12}});t.a=Object(d.c)((function(e){var t=e.style,n=e.type,r=void 0===n?"info":n,a=e.visible,s=void 0===a||a,d=e.theme,g=e.onLayout,p=e.padding,v=void 0===p?"normal":p,h=i()(e,["style","type","visible","theme","onLayout","padding"]),b=l.useRef(new c.a.Value(s?1:0)).current,y=l.useRef(0).current,O=d.animation.scale;l.useEffect((function(){s?c.a.timing(b,{toValue:1,duration:150*O,useNativeDriver:!0}).start():c.a.timing(b,{toValue:0,duration:180*O,useNativeDriver:!0}).start()}),[s,O,b]);var E=d.colors,j=d.dark,x="error"===r?E.error:o()(E.text).alpha(j?.7:.54).rgb().string();return l.createElement(u.a,f({onLayout:function(e){null===g||void 0===g||g(e),y=e.nativeEvent.layout.height},style:[m.text,"none"!==v?m.padding:{},{color:x,opacity:b,transform:s&&"error"===r?[{translateY:b.interpolate({inputRange:[0,1],outputRange:[-y/2,0]})}]:[]},t]},h),h.children)}))},420:function(e,t,n){"use strict";var r=n(13),i=n.n(r),l=n(0),a=n(33),o=n.n(a),c=n(4),s=n(5),u=n(38),d=n(32);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=c.a.create({light:{backgroundColor:o()(d.a).alpha(.12).rgb().string(),height:c.a.hairlineWidth},dark:{backgroundColor:o()(d.h).alpha(.12).rgb().string(),height:c.a.hairlineWidth},inset:{marginLeft:72}});t.a=Object(u.c)((function(e){var t=e.inset,n=e.style,r=e.theme,a=i()(e,["inset","style","theme"]),o=r.dark;return l.createElement(s.a,f({},a,{style:[o?m.dark:m.light,t&&m.inset,n]}))}))},426:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(103),i=n(205),l=r.a.actions;i.a},531:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var r,i,l=n(6),a=n.n(l),o=n(405),c=n.n(o),s=n(10),u=n.n(s),d=n(0),f=n.n(d),m=n(4),g=n(203),p=n(120),v=n(60),h=n(404),b=n(426),y=n(161),O=n(170),E=n(428),j=n(412),x=n(420),S=n(88),w=n(194),P=n(419),L=Object(S.a)(r||(r=c()(["\n  query Licenses($federationId: Int) {\n    licenses(federationId: $federationId) {\n      id\n      name\n\n      federation {\n        id\n        name\n      }\n\n    }\n  }\n"])));function k(e){var t,n,r=Object(d.useState)(!1),i=a()(r,2),l=i[0],o=i[1],c=(Object(v.h)((function(e){return e.global})),Object(p.useQuery)(L,{variables:{federationId:e.federationId}})),s=c.data;c.loading,c.refetch;return f.a.createElement(f.a.Fragment,null,f.a.createElement(w.a.Subheader,null,"License"),f.a.createElement(P.a,{onDismiss:function(){return o(!1)},visible:l,anchor:f.a.createElement(w.a.Item,{onPress:function(){o(!0)},title:(null==(t=e.value)?void 0:t.name)||"Please select a license",description:e.required?null:"Optional"})},null==s||null==(n=s.licenses)?void 0:n.map((function(t){return f.a.createElement(w.a.Item,{onPress:function(){o(!1),e.onSelect(t)},title:t.name||"-"})}))))}var I=Object(S.a)(i||(i=c()(["\n  query Federations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function C(e){var t,n,r=Object(d.useState)(!1),i=a()(r,2),l=i[0],o=i[1],c=Object(p.useQuery)(I).data;return Object(d.useEffect)((function(){var t;1!==(null==c||null==(t=c.federations)?void 0:t.length)||e.value||e.onSelect(c.federations[0])}),[JSON.stringify(null==c?void 0:c.federations)]),f.a.createElement(f.a.Fragment,null,f.a.createElement(w.a.Subheader,null,"Federation"),f.a.createElement(P.a,{onDismiss:function(){return o(!1)},visible:l,anchor:f.a.createElement(w.a.Item,{onPress:function(){o(!0)},title:(null==(t=e.value)?void 0:t.name)||"Please select federation",description:e.required?null:"Optional"})},null==c||null==(n=c.federations)?void 0:n.map((function(t){return f.a.createElement(w.a.Item,{onPress:function(){o(!1),e.onSelect(t)},title:t.name||"-"})}))))}var F=O.a.actions;function N(){var e,t,n,r,i,l,a,o,c,s,u,f,m,g,p,h,b,y,O,S,w,P,L,I,N,z,D,$=Object(v.h)((function(e){return e.userForm})),M=Object(v.g)(),A=Object(v.h)((function(e){return e.global}));d.useEffect((function(){var e;$.original&&($.fields.exitWeight.value||M(F.setField(["exitWeight",$.original.exitWeight||"60"])),!$.fields.rigs.value&&null!=(e=$.original)&&e.id&&M(F.setField(["rigs",$.original.rigs])))}),[null==(e=$.original)?void 0:e.id]);null==$||null==(t=$.original)||t.id,null==$||null==(n=$.original)||n.id,null==(r=A.currentUser)||r.id;return d.createElement(d.Fragment,null,d.createElement(E.a,{style:W.field,mode:"outlined",label:"Name",error:!!$.fields.name.error,value:(null==(i=$.fields.name)||null==(l=i.value)?void 0:l.toString())||"",onChangeText:function(e){return M(F.setField(["name",e]))}}),d.createElement(j.a,{type:$.fields.name.error?"error":"info"},$.fields.name.error||" "),d.createElement(E.a,{style:W.field,mode:"outlined",label:"Email",error:!!$.fields.email.error,value:(null==(a=$.fields.email)||null==(o=a.value)?void 0:o.toString())||"",onChangeText:function(e){return M(F.setField(["email",e]))}}),d.createElement(j.a,{type:$.fields.email.error?"error":"info"},$.fields.email.error||" "),d.createElement(E.a,{style:W.field,mode:"outlined",label:"Phone",error:!!$.fields.phone.error,value:(null==(c=$.fields.phone)||null==(s=c.value)?void 0:s.toString())||"",onChangeText:function(e){return M(F.setField(["phone",e]))}}),d.createElement(j.a,{type:$.fields.phone.error?"error":"info"},$.fields.phone.error||""),d.createElement(E.a,{style:W.field,mode:"outlined",label:"Exit weight",error:!!$.fields.exitWeight.error,value:(null==(u=$.fields.exitWeight)||null==(f=u.value)?void 0:f.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return d.createElement(E.a.Affix,{text:"kg"})},onChangeText:function(e){return M(F.setField(["exitWeight",e]))}}),d.createElement(j.a,{type:$.fields.exitWeight.error?"error":"info"},$.fields.exitWeight.error||""),d.createElement(x.a,null),d.createElement(C,{value:(null==$||null==(m=$.fields)||null==(g=m.license)||null==(p=g.value)?void 0:p.federation)||$.federation.value,onSelect:function(e){return M(F.setFederation(e))},required:!0}),d.createElement(j.a,{type:$.federation.error?"error":"info"},$.federation.error||""),((null==$||null==(h=$.fields)||null==(b=h.license)||null==(y=b.value)||null==(O=y.federation)?void 0:O.id)||(null==$||null==(S=$.federation)||null==(w=S.value)?void 0:w.id))&&d.createElement(d.Fragment,null,d.createElement(k,{value:$.fields.license.value,federationId:Number((null==$||null==(P=$.fields)||null==(L=P.license)||null==(I=L.value)||null==(N=I.federation)?void 0:N.id)||(null==(z=$.federation)||null==(D=z.value)?void 0:D.id)),onSelect:function(e){return M(F.setField(["license",e]))},required:!0}),d.createElement(j.a,{type:$.fields.license.error?"error":"info"},$.fields.license.error||"")))}var z,W=m.a.create({fields:{flex:1,width:"100%",paddingTop:32},field:{marginBottom:8,width:"100%"},ticketAddons:{marginBottom:8}}),D=n(73),$=n(408),M=O.a.actions,A=(y.a.actions,Object(p.gql)(z||(z=c()(["\n  mutation UpdateUser(\n    $id: Int,\n    $name: String,\n    $phone: String,\n    $email: String,\n    $licenseId: Int,\n    $exitWeight: Float,\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        phone: $phone,\n        email: $email,\n        licenseId: $licenseId,\n        exitWeight: $exitWeight,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))));function R(){var e=Object(v.h)((function(e){return e})),t=e.userForm,n=(e.global,Object(v.g)()),r=Object(D.useNavigation)(),i=Object(D.useRoute)().params.user;d.useEffect((function(){n(M.setOriginal(i))}),[null==i?void 0:i.id]);var l=Object(p.useMutation)(A),o=a()(l,2),c=o[0],s=o[1],f=d.useCallback((function(){var e,r,i,l,a,o,c,s,u,d=!1,f=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=t.fields.name)||null==(r=e.value)?void 0:r.length)||0)<3&&(d=!0,n(M.setFieldError(["name","Name is too short"]))),((null==(i=t.fields.email)||null==(l=i.value)?void 0:l.length)||0)<3&&(d=!0,n(M.setFieldError(["email","Email is too short"]))),((null==(a=t.fields.phone)||null==(o=a.value)?void 0:o.length)||0)<3&&(d=!0,n(M.setFieldError(["phone","Phone number is too short"]))),f.test((null==(c=t.fields)||null==(s=c.email)?void 0:s.value)||"")||(d=!0,n(M.setFieldError(["email","Please enter a valid email"]))),((null==(u=t.fields.exitWeight)?void 0:u.value)||0)<30&&(d=!0,n(M.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[JSON.stringify(t.fields),n]),m=d.useCallback((function(){var e,i,l,a,o,s,d,m,g,p,h,y,O;return u.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:if(e=t.fields,i=e.name,l=e.license,a=e.phone,o=e.email,s=e.exitWeight,!f()){E.next=12;break}return E.prev=2,E.next=5,u.a.awrap(c({variables:{id:Number(t.original.id),name:i.value,licenseId:null!=(d=l.value)&&d.id?Number(l.value.id):null,phone:a.value,exitWeight:parseFloat(s.value),email:o.value}}));case 5:p=E.sent,null!=(m=p.data)&&null!=(g=m.updateUser)&&g.user&&(h=p.data.updateUser,y=h.fieldErrors,O=h.errors,y?null==y||y.map((function(e){var t=e.field,r=e.message;switch(t){case"name":return n(v.i.setFieldError(["name",r]));case"exit_weight":return n(v.i.setFieldError(["exitWeight",r]));case"license_id":return n(v.i.setFieldError(["license",r]));case"phone":return n(v.i.setFieldError(["phone",r]));case"email":return n(v.i.setFieldError(["email",r]))}})):null!=O&&O.length?O.map((function(e){return n(b.a.showSnackbar({message:e,variant:"error"}))})):(n(b.a.showSnackbar({message:"Profile has been updated",variant:"success"})),r.goBack(),n(v.i.reset()))),E.next=12;break;case 9:E.prev=9,E.t0=E.catch(2),n(b.a.showSnackbar({message:E.t0.message,variant:"error"}));case 12:case"end":return E.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(t.fields),n,c]);return d.createElement($.a,{contentContainerStyle:{paddingHorizontal:48}},d.createElement(N,null),d.createElement(h.b,{style:V.fields},d.createElement(g.a,{mode:"contained",disabled:s.loading,onPress:m,loading:s.loading},"Save")))}var V=m.a.create({container:{flex:1,alignItems:"center",paddingTop:56},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%",marginBottom:16},field:{marginBottom:8}})}}]);
//# sourceMappingURL=18.138c8e9c.chunk.js.map