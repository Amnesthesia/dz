{"version":3,"sources":["redux/global.ts","components/notifications/slice.ts","screens/unauthenticated/login/slice.ts","screens/unauthenticated/signup/slice.ts","screens/authenticated/users/slice.ts","components/forms/dropzone/slice.tsx","components/forms/plane/slice.tsx","components/forms/ticket_type/slice.tsx","components/forms/extra/slice.tsx","components/forms/load/slice.tsx","components/forms/slot/slice.tsx","components/forms/user/slice.tsx","components/forms/dropzone_user/slice.tsx","components/forms/rig/slice.tsx","redux/store.ts","graphql/Apollo.tsx","constants/Colors.ts","hooks/usePalette.ts","components/notifications/Notifications.tsx","navigation/Routes.ts","screens/NotFoundScreen.tsx","components/JumpTypeSelect.tsx","components/TicketTypeSelect.tsx","hooks/useRestriction.ts","components/RigSelect.tsx","components/forms/slot/SlotForm.tsx","components/dialogs/ManifestUserDialog.tsx","components/Themed.tsx","components/NoResults.tsx","screens/authenticated/manifest/GetStarted.tsx","components/GcaChip.tsx","components/LoadMasterChip.tsx","components/PilotChip.tsx","components/PlaneChip.tsx","screens/authenticated/manifest/LoadCard.tsx","screens/authenticated/manifest/ManifestScreen.tsx","components/StyledText.tsx","components/EditScreenInfo.tsx","screens/authenticated/load/LoadScreen.tsx","components/notifications/index.ts","components/PlaneSelect.tsx","graphql/hooks/useQueryDropzoneUsers.ts","graphql/createQuery.tsx","components/DropzoneUserSelect.tsx","components/forms/load/LoadForm.tsx","screens/authenticated/load/CreateLoadScreen.tsx","navigation/AppBar.tsx","navigation/tabs/manifest.tsx","screens/authenticated/packing/PackingScreen.tsx","navigation/tabs/packing.tsx","components/DatePicker.web.tsx","components/forms/rig/RigForm.tsx","components/dialogs/RigDialog.tsx","components/ScrollableScreen.tsx","components/RoleSelect.tsx","components/forms/dropzone_user/DropzoneUserForm.tsx","components/dialogs/DropzoneUserDialog.tsx","screens/authenticated/profile/ProfileScreen.tsx","screens/authenticated/rig/RigScreen.tsx","components/LicenseSelect.tsx","components/FederationSelect.tsx","components/forms/user/UserForm.tsx","screens/authenticated/profile/UpdateUserScreen.tsx","navigation/tabs/profile.tsx","screens/authenticated/settings/SettingsScreen.tsx","screens/authenticated/settings/DropzoneSettingsScreen.tsx","screens/authenticated/ticket_types/TicketTypesScreen.tsx","components/forms/plane/PlaneForm.tsx","screens/authenticated/planes/CreatePlaneScreen.tsx","screens/authenticated/planes/UpdatePlaneScreen.tsx","components/forms/dropzone/DropzoneForm.tsx","screens/authenticated/dropzones/UpdateDropzoneScreen.tsx","screens/authenticated/planes/PlanesScreen.tsx","components/forms/ticket_type/TicketTypeForm.tsx","screens/authenticated/ticket_types/CreateTicketTypeScreen.tsx","screens/authenticated/ticket_types/UpdateTicketTypeScreen.tsx","components/forms/extra/ExtraForm.tsx","screens/authenticated/extras/CreateExtraScreen.tsx","screens/authenticated/extras/UpdateExtraScreen.tsx","screens/authenticated/extras/ExtrasScreen.tsx","navigation/tabs/settings.tsx","screens/authenticated/users/UsersScreen.tsx","screens/authenticated/users/AppBar.tsx","screens/authenticated/rig/UserRigScreen.tsx","navigation/tabs/users.tsx","navigation/Authenticated.tsx","screens/authenticated/dropzones/DropzonesScreen.tsx","graphql/createMutation.tsx","graphql/hooks/useMutationCreateDropzone.ts","screens/authenticated/dropzones/CreateDropzoneScreen.tsx","navigation/LimboRoutes.tsx","screens/unauthenticated/login/LoginScreen.tsx","graphql/hooks/useMutationSignUp.tsx","screens/unauthenticated/signup/SignUpScreen.tsx","navigation/Unauthenticated.tsx","navigation/RootNavigator.tsx","App.tsx","hooks/useCachedResources.ts","assets/fonts/SpaceMono-Regular.ttf"],"names":["CombinedDefaultTheme","PaperDefaultTheme","NavigationDefaultTheme","colors","CombinedDarkTheme","PaperDarkTheme","NavigationDarkTheme","initialState","currentUser","currentDropzone","permissions","credentials","theme","isDarkMode","createSlice","name","reducers","setCredentials","state","action","payload","setUser","setPermissions","setPrimaryColor","primary","setAccentColor","accent","setDropzone","primaryColor","secondaryColor","toggleDarkMode","logout","key","typedKey","queue","hideSnackbar","slice","showSnackbar","push","fields","email","value","error","password","setEmail","setPassword","setEmailError","setPasswordError","reset","federation","passwordConfirmation","exitWeight","phone","license","setFederation","setField","field","setFieldError","isSearchVisible","searchText","setSearchText","setSearchVisible","original","banner","isCreditSystemEnabled","isPublic","setOriginal","registration","minSlots","maxSlots","hours","nextMaintenanceHours","cost","altitude","allowManifestingSelf","extraIds","ticketTypeIds","ticketTypes","map","id","Number","gca","dispatchAt","isOpen","loadMaster","pilot","plane","jumpType","extras","load","rig","ticketType","user","rigs","role","credits","expiresAt","make","model","serial","repackExpiresAt","canopySize","globalActions","loginSlice","actions","signUpSlice","globalSlice","usersActions","usersSlice","snackbarActions","notificationSlice","slotForm","planeFormSlice","dropzoneFormSlice","ticketTypeFormSlice","extraFormSlice","loadFormSlice","slotFormSlice","userForm","userFormSlice","dropzoneUserForm","dropzoneUserFormSlice","rigForm","rigFormSlice","persistConfig","storage","Platform","OS","MMKV","whitelist","console","log","localStorage","reducer","persistCombineReducers","global","notifications","login","signup","dropzoneForm","planeForm","ticketTypeForm","extraForm","loadForm","usersScreen","store","configureStore","persistor","persistStore","useAppDispatch","useDispatch","useAppSelector","useSelector","httpLink","createHttpLink","uri","Apollo","children","dispatch","errorLink","useMemo","onError","graphQLErrors","networkError","message","locations","path","variant","statusCode","authLink","setContext","_","headers","accessToken","tokenType","JSON","stringify","client","ApolloClient","link","concat","cache","InMemoryCache","light","text","background","tint","tabIconDefault","tabIconSelected","success","warning","info","dark","usePalette","MyComponent","StyleSheet","create","container","flex","justifyContent","palette","notification","length","variantStyle","backgroundColor","Snackbar","visible","onDismiss","duration","style","prefixes","Linking","config","screens","Authenticated","HomeScreen","LoadScreen","PackingScreen","ProfileScreen","SetupScreen","Limbo","DropzonesScreen","CreateDropzoneScreen","Unauthenticated","LoginScreen","SignUpScreen","NotFoundScreen","navigation","View","styles","Text","title","TouchableOpacity","onPress","replace","linkText","alignItems","padding","fontSize","fontWeight","marginTop","paddingVertical","color","QUERY_JUMP_TYPES","gql","JumpTypeSelect","props","useState","isMenuOpen","setMenuOpen","useQuery","variables","allowedForUserId","userId","data","loading","refetch","Subheader","Menu","anchor","Item","description","required","jumpTypes","onSelect","QUERY_TICKET_TYPES","TicketTypeSelect","globalState","dropzoneId","QUERY_PERMISSIONS","useRestriction","permission","fetchPolicy","dropzone","includes","QUERY_RIGS","RigSelect","left","Icon","icon","SlotForm","React","isEdit","allowedToManifestOthers","ScrollView","contentContainerStyle","flexGrow","HelperText","type","horizontal","ticketAddons","extra","Chip","selected","some","filter","Divider","TextInput","mode","label","toString","keyboardType","right","Affix","onChangeText","newValue","marginBottom","MUTATION_CREATE_SLOT","ManifestUserDialog","useMutation","mutationCreateSlot","mutationData","validate","useCallback","hasErrors","onManifest","a","async","jumpTypeId","loadId","rigId","ticketTypeId","result","createSlot","fieldErrors","errors","onSuccess","Portal","Dialog","open","ProgressBar","indeterminate","Title","Content","Actions","Button","onClose","useThemeColor","colorName","colorFromProps","Colors","lightColor","darkColor","otherProps","NoResults","subtitle","empty","Paragraph","textAlign","display","fab","position","margin","bottom","width","height","GetStarted","hasPlanes","hasTicketTypes","separator","marginVertical","QUERY_DROPZONE_USERS","GCAChip","marginHorizontal","dropzoneUsers","edges","edge","node","LoadMasterChip","allowed","slots","slot","PilotChip","QUERY_PLANES","PlaneChip","planes","QUERY_LOAD","MUTATION_UPDATE_LOAD","LoadCard","isExpanded","setExpanded","useNavigation","loadNumber","canManifest","mutationUpdateLoad","mutation","updatePilot","pilotId","updateGCA","gcaId","updatePlane","planeId","updateLoadMaster","lm","loadMasterId","canEditSelf","canEditOthers","getSlotPressAction","onSlotPress","Card","elevation","undefined","overflow","flexDirection","DataTable","Header","Row","numeric","Cell","Array","from","v","i","disabled","QUERY_DROPZONE","ManifestScreen","isDialogOpen","setDialogOpen","earliestTimestamp","startOfDay","Date","getTime","isSetupComplete","canCreateLoad","Dimensions","get","loads","numColumns","refreshing","onRefresh","renderItem","item","index","isFull","FAB","small","navigate","MonoText","fontFamily","EditScreenInfo","getStartedContainer","getStartedText","codeHighlightContainer","homeScreenFilename","helpContainer","handleHelpPress","helpLink","helpLinkText","WebBrowser","developmentModeText","lineHeight","contentContainer","paddingTop","welcomeContainer","welcomeImage","resizeMode","marginLeft","codeHighlightText","borderRadius","paddingHorizontal","PlaneSelect","createQuery","query","options","getPayload","opts","previousData","transformedData","useEffect","showSnackbarErrors","DropzoneUserSelect","useQueryDropzoneUsers","requiredPermissions","LoadForm","Checkbox","status","dzUser","MUTATION_CREATE_LOAD","CreateLoadScreen","mutationCreateLoad","hasError","onSave","createLoad","snackbar","goBack","QUERY_DROPZONES","AppBar","previous","scene","dropzoneMenuOpen","setDropzoneMenuOpen","hasRig","hasExitWeight","showSetupWarning","Appbar","BackAction","descriptor","marginRight","dropzones","Manifest","createStackNavigator","ManifestTab","Navigator","screenOptions","headerShown","header","cardStyle","Screen","component","Packing","PackingTab","DatePicker","setOpen","date","onChange","timestamp","format","selectedDays","onDayClick","RigForm","time","MUTATION_CREATE_RIG","MUTATION_UPDATE_RIG","RigDialog","mutationCreateRig","createData","mutationUpdateRig","updateData","response","updateRig","createRig","ScrollableScreen","setHeight","addEventListener","window","removeEventListener","content","QUERY_ROLES","RoleSelect","paddingLeft","roles","DropzoneUserForm","canUpdateRole","newRole","MUTATION_EDIT_DROPZONE_USER","DropzoneUserDialog","mutationUpdateDropzoneUser","userRoleId","dropzoneUserId","QUERY_DROPZONE_USER","rigDialogOpen","setRigDialogOpen","dropzoneUserDialogOpen","setDropzoneUserDialogOpen","route","useRoute","isSelf","params","getRigPressAction","card","dropzoneUser","paddingBottom","spacer","RigScreen","QUERY_LICENSES","LicenseSelect","federationId","licenses","QUERY_FEDERATIONS","FederationSelect","federations","MUTATION_CREATE_USER","UpdateUserScreen","mutationUpdateUser","emailRegex","RegExp","test","licenseId","parseFloat","updateUser","Profile","ProfileTab","initialParams","SettingsScreen","Section","DropzoneSettingsScreen","QUERY_TICKET_TYPE","MUTATION_UPDATE_TICKET_TYPE","TicketTypesScreen","mutationUpdateTicketType","refreshControl","RefreshControl","Switch","onValueChange","DropzoneForm","placeholder","MUTATION_CREATE_PLANE","CreatePlaneScreen","mutationCreatePlane","createPlane","UpdatePlaneScreen","mutationUpdatePlane","federationMenuOpen","setFederationMenuOpen","colorPicker","setColorPicker","onPickImage","getDocumentAsync","multiple","onColorSelected","sliderComponent","SliderComponent","defaultColor","hideSliders","current","next","maxHeight","Cover","source","subheader","MUTATION_UPDATE_DROPZONE","UpdateDropzoneScreen","mutationUpdateDropzone","updateDropzone","PlanesScreen","FlatList","ListEmptyComponent","QUERY_EXTRAS","TicketTypeForm","altitudeMenuOpen","setAltitudeMenuOpen","xor","MUTATION_CREATE_TICKET_TYPE","CreateTicketTypeScreen","mutationCreateTicketType","createTicketType","UpdateTicketTypeScreen","updateTicketType","ExtraForm","ticket","MUTATION_CREATE_extra","CreateExtraScreen","mutationCreateExtra","createExtra","MUTATION_UPDATE_EXTRA","UpdateExtraScreen","mutationUpdateExtra","updateExtra","ExtrasScreen","Settings","SettingsTab","TicketTypeSettingsScreen","UsersScreen","search","isFocused","useIsFocused","inputContainer","input","borderColor","onSearch","searchVisible","MaterialIcons","size","UserRigScreen","BottomTab","createMaterialBottomTabNavigator","AuthenticatedTabBar","useTheme","canViewUsers","canCreatePacks","canManageDropzone","initialRouteName","tabBarIcon","UsersTab","isRequired","pattern","validates","callback","createMutation","fieldErrorMap","onFieldError","mutate","Object","keys","forEach","x","variable","validator","fieldName","createDropzone","SignupScreen","useMutationCreateDropzone","e","Stack","MUTATION_LOG_IN","mutationLogin","onLogin","userLogin","authenticatable","secureTextEntry","button","userSignUp","useMutationSignUp","onSignUp","Boolean","textContentType","passwordRules","RootNavigator","AuthenticatedRoutes","LimboRoutes","UnauthenticatedRoutes","NavigationContainer","linking","LinkingConfiguration","StatusBar","Notifications","App","isLoadingComplete","setLoadingComplete","SplashScreen","Font","Ionicons","font","require","warn","useCachedResources","ActivityIndicator","module","exports"],"mappings":"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","file":"static/js/app.62a89e82.chunk.js","sourcesContent":["import { Credential, User, Dropzone } from \"../graphql/schema\";\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  DarkTheme as NavigationDarkTheme,\n  DefaultTheme as NavigationDefaultTheme,\n} from '@react-navigation/native';\nimport {\n  DarkTheme as PaperDarkTheme,\n  DefaultTheme as PaperDefaultTheme,\n} from 'react-native-paper';\n\nconst CombinedDefaultTheme = {\n  ...PaperDefaultTheme,\n  ...NavigationDefaultTheme,\n  colors: {\n    ...PaperDefaultTheme.colors,\n    ...NavigationDefaultTheme.colors,\n  },\n};\nconst CombinedDarkTheme = {\n  ...PaperDarkTheme,\n  ...NavigationDarkTheme,\n  colors: {\n    ...PaperDarkTheme.colors,\n    ...NavigationDarkTheme.colors,\n  },\n};\n\ninterface IGlobalState {\n  currentUser: User | null;\n  credentials: Credential | null;\n  currentDropzone: Dropzone | null;\n  permissions: string[];\n\n  theme: typeof CombinedDarkTheme | typeof CombinedDefaultTheme,\n  isDarkMode: boolean;\n}\n\nconst initialState: IGlobalState = {\n  currentUser: null,\n  currentDropzone: null,\n  permissions: [],\n  credentials: null,\n  theme: CombinedDefaultTheme,\n  isDarkMode: false,\n};\nexport default createSlice({\n  name: 'global',\n  initialState,\n  reducers: {\n    setCredentials: (state: IGlobalState, action: PayloadAction<Credential>) => {\n      state.credentials = action.payload;\n    },\n    setUser: (state: IGlobalState, action: PayloadAction<User>) => {\n      state.currentUser = action.payload;\n    },\n    setPermissions: (state: IGlobalState, action: PayloadAction<string[]>) => {\n      state.permissions = action.payload;\n    },\n    setPrimaryColor: (state: IGlobalState, action: PayloadAction<string>) => {\n      state.theme.colors.primary = action.payload;\n    },\n    setAccentColor: (state: IGlobalState, action: PayloadAction<string>) => {\n      state.theme.colors.accent = action.payload;\n    },\n    setDropzone: (state: IGlobalState, action: PayloadAction<Dropzone>) => {\n      state.currentDropzone = action.payload;\n\n      if (state.currentDropzone?.primaryColor) {\n        state.theme.colors.primary = state.currentDropzone?.primaryColor;\n      }\n\n      if (state.currentDropzone?.secondaryColor) {\n        state.theme.colors.accent = state.currentDropzone?.secondaryColor;\n      }\n    },\n    toggleDarkMode: (state: IGlobalState) => {\n      state.isDarkMode = !state.isDarkMode;\n      state.theme = state.isDarkMode ? CombinedDarkTheme : CombinedDefaultTheme;\n      \n      if (state.currentDropzone?.primaryColor) {\n        state.theme.colors.primary = state.currentDropzone?.primaryColor;\n      }\n\n      if (state.currentDropzone?.secondaryColor) {\n        state.theme.colors.accent = state.currentDropzone?.secondaryColor;\n      }\n    },\n    logout: (state: IGlobalState) => {\n      for(const key in initialState) {\n        const typedKey = key as keyof IGlobalState;\n        if (key in state) {\n          (state[typedKey] as any) = initialState[typedKey];\n        }\n      }\n    }\n  }\n});\n\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Snackbar } from \"react-native-paper\";\n\ninterface INotification {\n  message: string;\n  variant?: \"error\" | \"success\";\n  action?: {\n    label: string;\n    onPress: () => void;\n  }\n}\ninterface INotificationState {\n  queue: INotification[];\n}\n\nexport default createSlice({\n  name: 'notifications',\n  initialState: {\n    queue: []\n  } as INotificationState,\n  reducers: {\n    hideSnackbar: (state: INotificationState) => {\n      state.queue = state.queue.slice(1);\n    },\n    showSnackbar: (state: INotificationState, action: PayloadAction<INotification>) => {\n      state.queue.push(action.payload);\n    }\n  }\n});\n\n\n","import { PayloadAction, createSlice } from \"@reduxjs/toolkit\";\n\ninterface ILoginScreenState {\n  fields: {\n    email: {\n      value: string,\n      error: string | null,\n    },\n    password: {\n      value: string,\n      error: string | null,\n    },\n  }\n}\n\nconst initialState = {\n  fields: {\n    email: {\n      value: \"\",\n      error: null,\n    },\n    password: {\n      value: \"\",\n      error: null,\n    }\n  }\n} as ILoginScreenState;\n\nexport default createSlice({\n  name: 'login',\n  initialState,\n  reducers: {\n    setEmail: (state: ILoginScreenState, action: PayloadAction<string>) => {\n      state.fields.email.value = action.payload;\n    },\n    setPassword: (state: ILoginScreenState, action: PayloadAction<string>) => {\n      state.fields.password.value = action.payload;\n    },\n    setEmailError: (state: ILoginScreenState, action: PayloadAction<string>) => {\n      state.fields.email.error = action.payload;\n    },\n    setPasswordError: (state: ILoginScreenState, action: PayloadAction<string>) => {\n      state.fields.password.error = action.payload;\n    },\n    reset: (state: ILoginScreenState) => {\n      state.fields = initialState.fields;\n    }\n  }\n});\n\n","import { PayloadAction, createSlice } from \"@reduxjs/toolkit\";\nimport { Federation, License } from \"../../../graphql/schema\";\n\ninterface ISignUpScreenState {\n  federation?: Federation | null,\n  fields: {\n    name: {\n      value: string,\n      error: string | null,\n    },\n    phone: {\n      value: string,\n      error: string | null,\n    },\n    email: {\n      value: string,\n      error: string | null,\n    },\n    exitWeight: {\n      value: number,\n      error: string | null,\n    },\n    password: {\n      value: string,\n      error: string | null,\n    },\n    passwordConfirmation: {\n      value: string,\n      error: string | null,\n    },\n    license: {\n      value: License | null,\n      error: string | null,\n    },\n  }\n}\n\nconst initialState = {\n  federation: null,\n  fields: {\n    email: {\n      value: \"\",\n      error: null,\n    },\n    password: {\n      value: \"\",\n      error: null,\n    },\n    passwordConfirmation: {\n      value: \"\",\n      error: null,\n    },\n    exitWeight: {\n      value: 50,\n      error: null,\n    },\n    name: {\n      value: \"\",\n      error: null,\n    },\n    phone: {\n      value: \"\",\n      error: null,\n    },\n    license: {\n      value: null,\n      error: null,\n    }\n  }\n} as ISignUpScreenState;\n\nexport default createSlice({\n  name: 'login',\n  initialState,\n  reducers: {\n    setFederation: (state: ISignUpScreenState, action: PayloadAction<Federation>) => {\n      state.federation = action.payload;\n    },\n    setField: <T extends keyof ISignUpScreenState[\"fields\"]>(state: ISignUpScreenState, action: PayloadAction<[T, ISignUpScreenState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof ISignUpScreenState[\"fields\"]>(state: ISignUpScreenState, action: PayloadAction<[T, ISignUpScreenState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n    \n    reset: (state: ISignUpScreenState) => {\n      state.fields = initialState.fields;\n    },\n  }\n});\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\n\ninterface IUserScreenState {\n  isSearchVisible: boolean;\n  searchText: string;\n}\n\nconst initialState: IUserScreenState = {\n  isSearchVisible: false,\n  searchText: \"\",\n};\n\n\nexport default createSlice({\n  name: 'usersScreen',\n  initialState,\n  reducers: {\n    \n    setSearchText: (state: IUserScreenState, action: PayloadAction<string>) => {\n      state.searchText = action.payload;\n    },\n\n    setSearchVisible: (state: IUserScreenState, action: PayloadAction<boolean>) => {\n      state.isSearchVisible = action.payload;\n    },\n    \n    reset: (state: IUserScreenState) => {\n      state.isSearchVisible = initialState.isSearchVisible;\n      state.searchText = initialState.searchText;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Dropzone, Federation } from \"../../../graphql/schema\";\n\ntype Fields = Pick<\n  Dropzone,\n  | \"federation\"\n  | \"name\"\n  | \"secondaryColor\"\n  | \"primaryColor\"\n  | \"banner\"\n  | \"isPublic\"\n  | \"isCreditSystemEnabled\"\n>;\n\ninterface IDropzoneEditState {\n  original: Dropzone | null;\n  fields: {\n    [K in keyof Fields] - ?: {\n      value: Dropzone[K] | null;\n      error: string | null;\n    }\n  }\n}\n\nconst initialState: IDropzoneEditState = {\n  original: null,\n  fields: {\n    federation: {\n      value: null,\n      error: null,\n    },\n    name: {\n      value: \"\",\n      error: null,\n    },\n    secondaryColor: {\n      value: \"\",\n      error: null,\n    },\n    primaryColor: {\n      value: \"\",\n      error: null,\n    },\n    banner: {\n      value: \"\",\n      error: null\n    },\n    isCreditSystemEnabled: {\n      value: false,\n      error: null,\n    },\n    isPublic: {\n      value: false,\n      error: null,\n    }\n  }\n};\n\nexport default createSlice({\n  name: 'dropzone',\n  initialState,\n  reducers: {\n    setField: <T extends keyof IDropzoneEditState[\"fields\"]>(state: IDropzoneEditState, action: PayloadAction<[T, IDropzoneEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof IDropzoneEditState[\"fields\"]>(state: IDropzoneEditState, action: PayloadAction<[string, string]>) => {\n      const [field, error] = action.payload;\n\n      if (field in state.fields && (state.fields[field as T]).error) {\n        state.fields[field as T].error = error;\n      }\n    },\n\n    setOriginal: (state: IDropzoneEditState, action: PayloadAction<Dropzone>) => {\n      state.original = action.payload;\n      for (const key in action.payload) {\n        if (key in state.fields) {\n          const typedKey = key as keyof typeof initialState[\"fields\"];\n          state.fields[typedKey].value = action.payload[typedKey];\n        }\n      }\n    },\n    \n    reset: (state: IDropzoneEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Plane } from \"../../../graphql/schema\";\n\ninterface IPlaneEditState {\n  original: Plane | null;\n  fields: {\n    name: {\n      value: string;\n      error: string | null;\n    },\n    registration: {\n      value: string;\n      error: string | null;\n    },\n    minSlots: {\n      value: number;\n      error: string | null;\n    },\n    maxSlots: {\n      value: number;\n      error: string | null;\n    },\n    hours: {\n      value: number | null;\n      error: string | null;\n    },\n    nextMaintenanceHours: {\n      value: number | null;\n      error: string | null;\n    },\n  }\n}\n\nconst initialState: IPlaneEditState = {\n  original: null,\n  fields: {\n    name: {\n      value: \"\",\n      error: null,\n    },\n    registration: {\n      value: \"\",\n      error: null\n    },\n    minSlots: {\n      value: 0,\n      error: null\n    },\n    maxSlots: {\n      value: 4,\n      error: null\n    },\n    hours: {\n      value: null,\n      error: null\n    },\n    nextMaintenanceHours: {\n      value: null,\n      error: null\n    }\n  }\n};\n\nexport default createSlice({\n  name: 'Plane',\n  initialState,\n  reducers: {\n    setField: <T extends  keyof IPlaneEditState[\"fields\"]>(state: IPlaneEditState, action: PayloadAction<[T, IPlaneEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields.name.error = null;\n    },\n    setFieldError: <T extends  keyof IPlaneEditState[\"fields\"]>(state: IPlaneEditState, action: PayloadAction<[T, IPlaneEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: IPlaneEditState, action: PayloadAction<Plane>) => {\n      state.original = action.payload;\n      state.fields.hours.value = action.payload.hours!;\n      state.fields.minSlots.value = action.payload.minSlots!;\n      state.fields.maxSlots.value = action.payload.maxSlots!;\n      state.fields.name.value = action.payload.name!;\n      state.fields.registration.value = action.payload.registration!;\n      state.fields.nextMaintenanceHours.value = action.payload.nextMaintenanceHours!;\n    },\n    \n    reset: (state: IPlaneEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { TicketType } from \"../../../graphql/schema\";\n\ninterface ITicketTypeEditState {\n  original: TicketType | null;\n  fields: {\n    name: {\n      value: string;\n      error: string | null;\n    },\n    cost: {\n      value: number | null;\n      error: string | null;\n    },\n    altitude: {\n      value: number;\n      error: string | null;\n    },\n    allowManifestingSelf: {\n      value: boolean;\n      error: string | null;\n    },\n    extraIds: {\n      value: number[];\n      error: string | null;\n    }\n  }\n}\n\nconst initialState: ITicketTypeEditState = {\n  original: null,\n  fields: {\n    name: {\n      value: \"\",\n      error: null,\n    },\n    cost: {\n      value: null,\n      error: null,\n    },\n    altitude: {\n      value: 14000,\n      error: null,\n    },\n    allowManifestingSelf: {\n      value: false,\n      error: null,\n    },\n    extraIds: {\n      value: [],\n      error: null,\n    },\n  }\n};\n\nexport default createSlice({\n  name: 'ticketTypeForm',\n  initialState,\n  reducers: {\n    setField: <T extends  keyof ITicketTypeEditState[\"fields\"]>(state: ITicketTypeEditState, action: PayloadAction<[T, ITicketTypeEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof ITicketTypeEditState[\"fields\"]>(state: ITicketTypeEditState, action: PayloadAction<[T, ITicketTypeEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: ITicketTypeEditState, action: PayloadAction<TicketType>) => {\n      state.original = action.payload;\n      state.fields.altitude.value = action.payload.altitude!;\n      state.fields.cost.value = action.payload.cost!;\n      state.fields.allowManifestingSelf.value = action.payload.allowManifestingSelf!;\n      state.fields.name.value = action.payload.name!;\n    },\n    \n    reset: (state: ITicketTypeEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Extra } from \"../../../graphql/schema\";\n\ninterface IExtraEditState {\n  original: Extra | null;\n  fields: {\n    name: {\n      value: string;\n      error: string | null;\n    },\n    cost: {\n      value: number | null;\n      error: string | null;\n    },\n    ticketTypeIds: {\n      value: number[],\n      error: null,\n    }\n  }\n}\n\nconst initialState: IExtraEditState = {\n  original: null,\n  fields: {\n    name: {\n      value: \"\",\n      error: null,\n    },\n    cost: {\n      value: null,\n      error: null,\n    },\n    ticketTypeIds: {\n      value: [],\n      error: null,\n    }\n  }\n};\n\nexport default createSlice({\n  name: 'ExtraForm',\n  initialState,\n  reducers: {\n    setField: <T extends  keyof IExtraEditState[\"fields\"]>(state: IExtraEditState, action: PayloadAction<[T, IExtraEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields.name.error = null;\n    },\n    setFieldError: <T extends  keyof IExtraEditState[\"fields\"]>(state: IExtraEditState, action: PayloadAction<[T, IExtraEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: IExtraEditState, action: PayloadAction<Extra>) => {\n      state.original = action.payload;\n      state.fields.ticketTypeIds.value = action.payload.ticketTypes.map(({ id }) => Number(id));\n      state.fields.cost.value = action.payload.cost;\n      state.fields.name.value = action.payload.name!;\n    },\n    \n    reset: (state: IExtraEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Load } from \"../../../graphql/schema\";\n\n\ntype Fields = Pick<\n  Load,\n  | \"name\"\n  | \"gca\"\n  | \"dispatchAt\"\n  | \"isOpen\"\n  | \"loadMaster\"\n  | \"pilot\"\n  | \"maxSlots\"\n  | \"plane\"\n>;\n\ninterface ILoadEditState {\n  original: Load | null;\n  fields: {\n    [K in keyof Fields] - ?: {\n      value: Load[K] | null;\n      error: string | null;\n    }\n  }\n}\n\nconst initialState: ILoadEditState = {\n  original: null,\n  fields: {\n    name: {\n      value: \"\",\n      error: null,\n    },\n    gca: {\n      value: null,\n      error: null,\n    },\n    dispatchAt: {\n      value: null,\n      error: null,\n    },\n    isOpen: {\n      value: true,\n      error: null,\n    },\n    loadMaster: {\n      value: null,\n      error: null,\n    },\n    pilot: {\n      value: null,\n      error: null,\n    },\n    plane: {\n      value: null,\n      error: null,\n    },\n    maxSlots: {\n      value: 4,\n      error: null,\n    },\n  }\n};\n\n\nexport default createSlice({\n  name: 'loadForm',\n  initialState,\n  reducers: {\n    setField: <T extends keyof ILoadEditState[\"fields\"]>(state: ILoadEditState, action: PayloadAction<[T, ILoadEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof ILoadEditState[\"fields\"]>(state: ILoadEditState, action: PayloadAction<[T, ILoadEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: ILoadEditState, action: PayloadAction<Load>) => {\n      state.original = action.payload;\n      for (const key in action.payload) {\n        if (key in state.fields) {\n          const typedKey = key as keyof typeof initialState[\"fields\"];\n          state.fields[typedKey].value = action.payload[typedKey];\n        }\n      }\n    },\n    \n    reset: (state: ILoadEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Slot } from \"../../../graphql/schema\";\n\n\ntype Fields = Pick<\n  Slot,\n  | \"jumpType\"\n  | \"load\"\n  | \"ticketType\"\n  | \"rig\"\n  | \"user\"\n  | \"exitWeight\"\n  | \"extras\"\n>;\n\ninterface ISlotEditState {\n  original: Slot | null;\n  fields: {\n    [K in keyof Fields] - ?: {\n      value: Slot[K] | null;\n      error: string | null;\n    }\n  }\n}\n\nconst initialState: ISlotEditState = {\n  original: null,\n  fields: {\n    jumpType: {\n      value: null,\n      error: null,\n    },\n    extras: {\n      value: [],\n      error: null,\n    },\n    load: {\n      value: null,\n      error: null,\n    },\n    rig: {\n      value: null,\n      error: null,\n    },\n    ticketType: {\n      value: null,\n      error: null,\n    },\n    user: {\n      value: null,\n      error: null,\n    },\n    exitWeight: {\n      value: null,\n      error: null,\n    },\n  }\n};\n\n\nexport default createSlice({\n  name: 'slotForm',\n  initialState,\n  reducers: {\n    setField: <T extends keyof ISlotEditState[\"fields\"]>(state: ISlotEditState, action: PayloadAction<[T, ISlotEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof ISlotEditState[\"fields\"]>(state: ISlotEditState, action: PayloadAction<[T, ISlotEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: ISlotEditState, action: PayloadAction<Slot>) => {\n      state.original = action.payload;\n      for (const key in action.payload) {\n        if (key in state.fields) {\n          const typedKey = key as keyof typeof initialState[\"fields\"];\n          state.fields[typedKey].value = action.payload[typedKey];\n        }\n      }\n    },\n    \n    reset: (state: ISlotEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Federation, User } from \"../../../graphql/schema\";\n\n\ntype Fields = Pick<\n  User,\n  | \"exitWeight\"\n  | \"rigs\"\n  | \"name\"\n  | \"phone\"\n  | \"email\"\n  | \"license\"\n>;\n\ninterface IUserEditState {\n  original: User | null;\n  federation: {\n    value: Federation | null,\n    error: null,\n  },\n  fields: {\n    [K in keyof Fields] - ?: {\n      value: User[K] | null;\n      error: string | null;\n    }\n  }\n}\n\nconst initialState: IUserEditState = {\n  original: null,\n  federation: {\n    value: null,\n    error: null,\n  },\n  fields: {\n    exitWeight: {\n      value: \"\",\n      error: null,\n    },\n    email: {\n      value: \"\",\n      error: null,\n    },\n    phone: {\n      value: \"\",\n      error: null,\n    },\n    name: {\n      value: null,\n      error: null,\n    },\n    rigs: {\n      value: [],\n      error: null,\n    },\n    license: {\n      value: null,\n      error: null,\n    }\n  }\n};\n\n\nexport default createSlice({\n  name: 'userForm',\n  initialState,\n  reducers: {\n    setFederation: (state: IUserEditState, action: PayloadAction<Federation>) => {\n      state.federation.value = action.payload;\n    },\n    setField: <T extends keyof IUserEditState[\"fields\"]>(state: IUserEditState, action: PayloadAction<[T, IUserEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof IUserEditState[\"fields\"]>(state: IUserEditState, action: PayloadAction<[T, IUserEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: IUserEditState, action: PayloadAction<User>) => {\n      state.original = action.payload;\n      state.federation.value = action.payload.license?.federation!;\n      for (const key in action.payload) {\n        if (key in state.fields) {\n          const typedKey = key as keyof typeof initialState[\"fields\"];\n          state.fields[typedKey].value = action.payload[typedKey];\n        }\n      }\n    },\n    \n    reset: (state: IUserEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { DropzoneUser } from \"../../../graphql/schema\";\n\n\ntype Fields = Pick<\n  DropzoneUser,\n  | \"credits\"\n  | \"role\"\n  | \"expiresAt\"\n>;\n\ninterface IDropzoneUserEditState {\n  original: DropzoneUser | null;\n  fields: {\n    [K in keyof Fields] - ?: {\n      value: DropzoneUser[K] | null;\n      error: string | null;\n    }\n  }\n}\n\nconst initialState: IDropzoneUserEditState = {\n  original: null,\n  fields: {\n    role: {\n      value: null,\n      error: null,\n    },\n    credits: {\n      value: 0,\n      error: null,\n    },\n    expiresAt: {\n      value: null,\n      error: null,\n    },\n  }\n};\n\n\nexport default createSlice({\n  name: 'dropzoneUserForm',\n  initialState,\n  reducers: {\n    setField: <T extends keyof IDropzoneUserEditState[\"fields\"]>(state: IDropzoneUserEditState, action: PayloadAction<[T, IDropzoneUserEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof IDropzoneUserEditState[\"fields\"]>(state: IDropzoneUserEditState, action: PayloadAction<[T, IDropzoneUserEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: IDropzoneUserEditState, action: PayloadAction<DropzoneUser>) => {\n      state.original = action.payload;\n      for (const key in action.payload) {\n        if (key in state.fields) {\n          const typedKey = key as keyof typeof initialState[\"fields\"];\n          state.fields[typedKey].value = action.payload[typedKey];\n        }\n      }\n    },\n    \n    reset: (state: IDropzoneUserEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Rig } from \"../../../graphql/schema\";\n\n\ntype Fields = Pick<\n  Rig,\n  | \"make\"\n  | \"model\"\n  | \"serial\"\n  | \"canopySize\"\n  | \"repackExpiresAt\"\n>;\n\ninterface IRigEditState {\n  original: Rig | null;\n  fields: {\n    [K in keyof Fields] - ?: {\n      value: Rig[K] | null;\n      error: string | null;\n    }\n  }\n}\n\nconst initialState: IRigEditState = {\n  original: null,\n  fields: {\n    make: {\n      value: \"\",\n      error: null,\n    },\n    model: {\n      value: \"\",\n      error: null,\n    },\n    serial: {\n      value: \"\",\n      error: null,\n    },\n    repackExpiresAt: {\n      value: null,\n      error: null,\n    },\n    canopySize: {\n      value: null,\n      error: null,\n    },\n  }\n};\n\n\nexport default createSlice({\n  name: 'rigForm',\n  initialState,\n  reducers: {\n    setField: <T extends keyof IRigEditState[\"fields\"]>(state: IRigEditState, action: PayloadAction<[T, IRigEditState[\"fields\"][T][\"value\"]]>) => {\n      const [field, value] = action.payload;\n\n      state.fields[field].value = value;\n      state.fields[field].error = null;\n    },\n    setFieldError: <T extends  keyof IRigEditState[\"fields\"]>(state: IRigEditState, action: PayloadAction<[T, IRigEditState[\"fields\"][T][\"error\"]]>) => {\n      const [field, error] = action.payload;\n\n      state.fields[field].error = error;\n    },\n\n    setOriginal: (state: IRigEditState, action: PayloadAction<Rig>) => {\n      state.original = action.payload;\n      for (const key in action.payload) {\n        if (key in state.fields) {\n          const typedKey = key as keyof typeof initialState[\"fields\"];\n          state.fields[typedKey].value = action.payload[typedKey];\n        }\n      }\n    },\n    \n    reset: (state: IRigEditState) => {\n      state.fields = initialState.fields;\n      state.original = null;\n    },\n  }\n});\n\n\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { useDispatch, useSelector, TypedUseSelectorHook } from 'react-redux'\nimport MMKV from \"react-native-mmkv-storage\";\nimport { persistStore, persistCombineReducers } from \"redux-persist\";\nimport storage from 'redux-persist/lib/storage';\n\nimport globalSlice from \"./global\";\nimport { Platform } from \"react-native\";\nimport notificationSlice from \"../components/notifications/slice\";\n\nimport loginSlice from \"../screens/unauthenticated/login/slice\";\nimport signUpSlice from \"../screens/unauthenticated/signup/slice\";\nimport usersSlice from \"../screens/authenticated/users/slice\";\nimport dropzoneFormSlice from \"../components/forms/dropzone/slice\";\nimport planeFormSlice from \"../components/forms/plane/slice\";\nimport ticketTypeFormSlice from \"../components/forms/ticket_type/slice\";\nimport extraFormSlice from \"../components/forms/extra/slice\";\nimport loadFormSlice from \"../components/forms/load/slice\";\nimport slotFormSlice from \"../components/forms/slot/slice\";\nimport userFormSlice from \"../components/forms/user/slice\";\nimport dropzoneUserFormSlice from \"../components/forms/dropzone_user/slice\";\nimport rigFormSlice from \"../components/forms/rig/slice\";\n\n// Re-export actions:\nexport const { actions: loginActions } = loginSlice;\nexport const { actions: signUpActions } = signUpSlice;\nexport const { actions: globalActions } = globalSlice;\nexport const { actions: usersActions } = usersSlice;\nexport const { actions: snackbarActions } = notificationSlice;\nexport const { actions: planeForm } = planeFormSlice;\nexport const { actions: dropzoneForm } = dropzoneFormSlice;\nexport const { actions: ticketTypeForm } = ticketTypeFormSlice;\nexport const { actions: extraForm } = extraFormSlice;\nexport const { actions: loadForm } = loadFormSlice;\nexport const { actions: slotForm } = slotFormSlice;\nexport const { actions: userForm } = userFormSlice;\nexport const { actions: dropzoneUserForm } = dropzoneUserFormSlice;\nexport const { actions: rigForm } = rigFormSlice;\n\nconst persistConfig = {\n  key: 'root',\n  storage: Platform.OS === \"web\" ? storage : MMKV(),\n  whitelist: [\"global\", \"notifications\"],\n};\n\nconsole.log({ localStorage, MMKV });\n\nconst reducer = persistCombineReducers(persistConfig, {\n    global: globalSlice.reducer,\n    notifications: notificationSlice.reducer,\n    login: loginSlice.reducer,\n    signup: signUpSlice.reducer,\n    dropzoneForm: dropzoneFormSlice.reducer,\n    planeForm: planeFormSlice.reducer,\n    ticketTypeForm: ticketTypeFormSlice.reducer,\n    extraForm: extraFormSlice.reducer,\n    loadForm: loadFormSlice.reducer,\n    slotForm: slotFormSlice.reducer,\n    userForm: userFormSlice.reducer,\n    dropzoneUserForm: dropzoneUserFormSlice.reducer,\n    rigForm: rigFormSlice.reducer,\n    usersScreen: usersSlice.reducer,\n  });\n\nexport const store = configureStore({\n  reducer\n});\nexport const persistor = persistStore(store);\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\n","import { ApolloClient, createHttpLink, InMemoryCache, ServerError } from '@apollo/client';\nimport { ApolloProvider } from '@apollo/client/react';\n\nimport { setContext } from '@apollo/client/link/context';\nimport { onError } from \"@apollo/client/link/error\";\nimport React, { useCallback, useMemo } from 'react';\nimport { globalActions, snackbarActions, useAppDispatch, useAppSelector } from '../redux';\n\nconst httpLink = createHttpLink({\n  // uri: 'http://127.0.0.1:3000/graphql',\n  uri: 'https://deezed.herokuapp.com/graphql',\n});\n\n\n\nexport default function Apollo({ children }: { children: React.ReactNode }) {\n\n  const credentials = useAppSelector(state => state.global.credentials);\n  const dispatch = useAppDispatch();\n  // Log any GraphQL errors or network error that occurred\n  const errorLink = useMemo(() =>\n    onError(({ graphQLErrors, networkError }) => {\n    if (graphQLErrors)\n      graphQLErrors.map(({ message, locations, path }) =>\n        dispatch(\n          snackbarActions.showSnackbar({ message: `[GraphQL error]: ${message}, ${locations}, ${path}`, variant: \"error\" })\n        )\n      );\n    if (networkError) {\n      dispatch(\n        snackbarActions.showSnackbar({ message: `[Network error]: ${networkError}`, variant: \"error\" })\n      )\n    }\n\n    if (\n      networkError &&\n      networkError.name ==='ServerError' &&\n      (networkError as ServerError).statusCode === 401\n    ) {\n      dispatch(\n        globalActions.logout()\n      );\n    }\n  }),\n  [dispatch]);\n\n  const authLink = useMemo(\n    () => setContext((_, { headers }) => {\n      return {\n        \n        headers: {\n          ...headers,\n          ...credentials?.accessToken ? {\n            \"Authorization\": `Bearer ${credentials.accessToken}`,\n            \"access-token\": credentials.accessToken,\n            \"token-type\": credentials.tokenType,\n            ...credentials,\n          } : {},\n        }\n      }\n    }),\n    [JSON.stringify(credentials)],\n  );\n  \n  const client = useMemo(() =>\n    new ApolloClient({\n      link: errorLink.concat(authLink).concat(httpLink),\n      cache: new InMemoryCache(),\n    }),\n    [authLink]\n  );\n\n  return (\n    <ApolloProvider client={client}>\n      {children}\n    </ApolloProvider>\n  )\n}","const tintColorLight = '#2f95dc';\nconst tintColorDark = '#fff';\nconst successColor = \"#00C851\";\nconst errorColor = \"#ff4444\";\nconst warningColor = \"#FF8800\";\nconst infoColor = \"#0099CC\";\n\nexport default {\n  light: {\n    text: '#000',\n    background: '#fff',\n    tint: tintColorLight,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorLight,\n    success: successColor,\n    error: errorColor,\n    warning: warningColor,\n    info: infoColor,\n  },\n  dark: {\n    text: '#fff',\n    background: '#000',\n    tint: tintColorDark,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorDark,\n    success: successColor,\n    error: errorColor,\n    warning: warningColor,\n    info: infoColor,\n  },\n};\n","import useColorScheme from \"./useColorScheme\";\nimport colors from \"../constants/Colors\";\n\nfunction usePalette() {\n  const colorScheme = useColorScheme();\n\n  return colors[colorScheme];\n}\n\nexport default usePalette;","\nimport * as React from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport { Button, Snackbar } from 'react-native-paper';\nimport { useAppSelector, useAppDispatch } from '../../redux';\n\nimport slice from \"./slice\";\nimport usePalette from '../../hooks/usePalette';\nconst { actions } = slice;\n\nconst MyComponent = () => {\n\n  const state = useAppSelector(state => state.notifications);\n  const dispatch = useAppDispatch();\n  const palette = usePalette();\n\n  const notification = state.queue.length ? state.queue[0] : null;\n\n  const variantStyle = {\n    info: { backgroundColor: palette.info },\n    success: { backgroundColor: palette.success },\n    error: { backgroundColor: palette.error },\n    warning: { backgroundColor: palette.warning },\n  };\n\n\n  return (\n    <Snackbar\n      visible={!!notification}\n      onDismiss={() =>\n        dispatch(actions.hideSnackbar())\n      }\n      duration={3000}\n      action={notification?.action}\n      style={!!notification?.variant && variantStyle[notification.variant]}\n    >\n      { notification?.message }\n    </Snackbar>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'space-between',\n  },\n});\n\nexport default MyComponent;","import * as Linking from 'expo-linking';\n\nexport default {\n  prefixes: [Linking.makeUrl('/'), \"dz://\"],\n  config: {\n    screens: {\n      Authenticated: {\n        screens: {\n          HomeScreen: \"/home\",\n          LoadScreen: \"/load/:load_id\",\n          PackingScreen: \"/packing\",\n          ProfileScreen: \"/user/:id\",\n          SetupScreen: \"/dropzone/setup\",\n        }\n      },\n      Limbo: {\n        screens: {\n          DropzonesScreen: \"/dropzones\",\n          CreateDropzoneScreen: \"/dropzone/create\",\n        }\n      },\n      Unauthenticated: {\n        screens: {\n          LoginScreen: \"/login\",\n          SignUpScreen: \"/signup\",\n        }\n      },\n      //FIXME: Remove in release\n      // NotFound: '*',\n    },\n  },\n};\n","import { StackScreenProps } from '@react-navigation/stack';\nimport * as React from 'react';\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\n\nimport { RootStackParamList } from '../types';\n\nexport default function NotFoundScreen({\n  navigation,\n}: StackScreenProps<RootStackParamList, 'NotFound'>) {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>This screen doesn't exist.</Text>\n      <TouchableOpacity onPress={() => navigation.replace('Root')} style={styles.link}>\n        <Text style={styles.linkText}>Go to home screen!</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#2e78b7',\n  },\n});\n","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { JumpType, Query } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\n\ninterface IJumpTypeSelect {\n  value?: JumpType | null;\n  required?: boolean;\n  userId?: number | null;\n  onSelect(jt: JumpType): void;\n}\n\nconst QUERY_JUMP_TYPES = gql`\n  query JumpTypes($allowedForUserId: Int) {\n    jumpTypes(allowedForUserId: $allowedForUserId) {\n      id\n      name\n    }\n  }\n`;\n\nexport default function JumpTypeSelect(props: IJumpTypeSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data, loading, refetch } = useQuery<Query>(QUERY_JUMP_TYPES, {\n    variables: {\n      allowedForUserId: props.userId,\n    }\n  });\n  return (\n    <>\n    <List.Subheader>\n      Jump type\n    </List.Subheader>\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <List.Item\n          onPress={() => {\n            setMenuOpen(true);\n          }}\n          title={\n            props.value?.name || \"Please select jump type\"\n          }\n          description={!props.required ? \"Optional\" : null}\n        />\n      }>\n      {\n        data?.jumpTypes?.map((jumpType) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(jumpType);\n            }}\n            title={\n              jumpType.name || \"-\"\n            }\n          />\n        )\n      }\n    </Menu>\n    </>\n  )\n}","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { TicketType, Query } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\n\ninterface ITicketTypeSelect {\n  value?: TicketType | null;\n  required?: boolean;\n  allowManifestingSelf?: boolean | null;\n  onSelect(jt: TicketType): void;\n}\n\nconst QUERY_TICKET_TYPES = gql`\n  query TicketTypes($allowManifestingSelf: Boolean, $dropzoneId: Int!) {\n    ticketTypes(allowManifestingSelf: $allowManifestingSelf, dropzoneId: $dropzoneId) {\n      id\n      name\n\n      extras {\n        id\n        name\n        cost\n      }\n    }\n  }\n`;\n\nexport default function TicketTypeSelect(props: ITicketTypeSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data, loading, refetch } = useQuery<Query>(QUERY_TICKET_TYPES, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n      allowManifestingSelf: props.allowManifestingSelf,\n    }\n  });\n  return (\n    <>\n      <List.Subheader>\n        Ticket\n      </List.Subheader>\n      <Menu\n        onDismiss={() => setMenuOpen(false)}\n        visible={isMenuOpen}\n        anchor={\n          <List.Item\n            onPress={() => {\n              setMenuOpen(true);\n            }}\n            title={\n              props.value?.name || \"Please select ticket type\"\n            }\n            description={!props.required ? \"Optional\" : null}\n          />\n        }>\n        {\n          data?.ticketTypes?.map((ticketType) => \n            <List.Item\n              onPress={() => {\n                setMenuOpen(false);\n                props.onSelect(ticketType);\n              }}\n              title={\n                ticketType.name || \"-\"\n              }\n            />\n          )\n        }\n      </Menu>\n    </>\n  )\n}","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport { useAppSelector } from \"../redux\";\n\nconst QUERY_PERMISSIONS = gql`\nquery QueryPermissions($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor\n      secondaryColor\n      \n      currentUser {\n        id\n        role {\n          id\n          name\n        }\n        permissions\n      }\n\n    }\n  }`;\n\nexport default function useRestriction(permission: string): boolean {\n  const { currentDropzone } = useAppSelector(state => state.global);\n  const { data } = useQuery(QUERY_PERMISSIONS, {\n    variables: {\n      dropzoneId: Number(currentDropzone?.id)\n    },\n    fetchPolicy: \"cache-first\"\n  });\n\n  return data?.dropzone?.currentUser?.permissions?.includes(permission as any) || false;\n}","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { Rig, Query } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\ninterface IRigSelect {\n  dropzoneId?: number;\n  userId?: number;\n  value?: Rig | null;\n  required?: boolean;\n  onSelect(rig: Rig): void;\n}\n\n\nconst QUERY_RIGS = gql`\n  query QueryRigs(\n    $dropzoneId: Int\n    $userId: Int\n  ) {\n    rigs(dropzoneId: $dropzoneId, userId: $userId) {\n      id\n      make\n      model\n      canopySize\n      serial\n    }\n  }\n`;\n\nexport default function RigSelect(props: IRigSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data } = useQuery<Query>(QUERY_RIGS, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n    }\n  });\n  return (\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <List.Item\n          onPress={() => {\n            setMenuOpen(true);\n          }}\n          title={\n            props.value\n            ? `${props.value?.make} ${props.value?.model} (${props.value?.canopySize || \"?\"}sqft)`\n            : 'Select rig'\n          }\n          description={!props.required ? \"Optional\" : null}\n          left={() => <List.Icon icon=\"parachute\" />}\n        />\n      }>\n      {\n        data?.rigs?.map((rig) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(rig);\n            }}\n            title={\n              `${props.value?.make} ${props.value?.model}`\n            }\n            description={\n              `${props.value?.canopySize} sqft`\n            }\n          />\n        )\n      }\n    </Menu>\n  )\n}","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, Divider, Chip, List } from 'react-native-paper';\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\n\nimport slice from \"./slice\";\nimport JumpTypeSelect from '../../JumpTypeSelect';\nimport TicketTypeSelect from '../../TicketTypeSelect';\nimport useRestriction from '../../../hooks/useRestriction';\nimport RigSelect from '../../RigSelect';\n\nconst { actions } = slice;\nexport default function SlotForm() {\n  const state = useAppSelector(state => state.slotForm);\n  const dispatch = useAppDispatch();\n  const globalState = useAppSelector(state => state.global);\n\n  React.useEffect(() => {\n    if (state.fields.user?.value) {\n      if (!state.fields.exitWeight.value) {\n        dispatch(\n          actions.setField([\"exitWeight\", Number(state.fields.user.value.exitWeight || 60)])\n        );\n      }\n\n      if (!state.fields.rig.value && state.fields.user.value.rigs?.length) {\n        dispatch(\n          actions.setField([\"rig\", state.fields.user.value.rigs[0]])\n        );\n      }\n\n    }\n  }, [state.fields?.user?.value?.id]);\n\n  const isEdit = state?.original?.id;\n  const isSelf = state?.fields?.user?.value?.id === globalState.currentUser?.id;\n\n  \n  const allowedToManifestSelf = useRestriction(\n    isEdit ? \"updateSlot\" : \"createSlot\"\n  );\n\n  const allowedToManifestOthers = useRestriction(\n    isEdit ? \"updateUserSlot\" : \"createUserSlot\"\n  )\n  console.log(\"Fields\", state.fields);\n\n  return ( \n    <ScrollView style={styles.fields} contentContainerStyle={{ flexGrow: 1}}>\n      \n      <JumpTypeSelect\n        value={state.fields.jumpType.value}\n        required\n        userId={Number(state?.fields?.user?.value?.id) || null}\n        onSelect={(value) => dispatch(actions.setField([\"jumpType\", value]))}\n      />\n      <HelperText type={!!state.fields.jumpType.error ? \"error\" : \"info\"}>\n        { state.fields.jumpType.error || \"\" }\n      </HelperText>\n\n      <TicketTypeSelect\n        value={state.fields.ticketType.value}\n        required\n        allowManifestingSelf={!allowedToManifestOthers}\n        onSelect={(value) => dispatch(actions.setField([\"ticketType\", value]))}\n      />\n      <HelperText type={!!state.fields.ticketType.error ? \"error\" : \"info\"}>\n        { state.fields.ticketType.error || \"\" }\n      </HelperText>\n\n      {\n        state?.fields?.ticketType?.value?.extras?.length && (\n          <List.Subheader>\n            Ticket addons\n          </List.Subheader>\n        )\n      }\n      <ScrollView horizontal style={styles.ticketAddons}>\n        {state?.fields?.ticketType?.value?.extras?.map((extra) =>\n          <Chip\n            selected={state?.fields?.extras.value?.some(({id}) => id === extra.id)}\n            onPress={\n              state?.fields?.extras.value?.some(({id}) => id === extra.id)\n              ? () => dispatch(actions.setField([\"extras\", state?.fields?.extras.value?.filter(({ id }) => id !== extra.id)]))\n              : () => dispatch(actions.setField([\"extras\", [...(state?.fields?.extras?.value || []), extra]]))\n            }\n          >\n            {`${extra.name} ($${extra.cost})`}\n          </Chip>\n        )}\n      </ScrollView>\n      <Divider />\n      <RigSelect\n        value={state.fields.rig.value}\n        userId={Number(state.fields.user?.value?.id)}\n        dropzoneId={Number(globalState.currentDropzone?.id)}\n        onSelect={(value) => dispatch(actions.setField([\"jumpType\", value]))}\n      />\n      <HelperText type={!!state.fields.rig.error ? \"error\" : \"info\"}>\n        { state.fields.rig.error || \"\" }\n      </HelperText>\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Exit weight\"\n        error={!!state.fields.exitWeight.error}\n        value={state.fields.exitWeight?.value?.toString() || \"\"}\n        keyboardType=\"numbers-and-punctuation\"\n        right={() => <TextInput.Affix text=\"kg\" />}\n        onChangeText={(newValue) => dispatch(actions.setField([\"exitWeight\", Number(newValue)]))}\n      />\n      \n      <HelperText type={!!state.fields.exitWeight.error ? \"error\" : \"info\"}>\n        { state.fields.exitWeight.error || \"\" }\n      </HelperText>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    flex: 1,\n    \n  },\n  field: {\n    marginBottom: 8,\n  },\n  ticketAddons: {\n    marginBottom: 8\n  }\n});\n","import { gql, useMutation } from \"@apollo/client\";\nimport React, { useCallback, useEffect } from \"react\";\nimport { Button, Dialog, Portal, ProgressBar } from \"react-native-paper\";\nimport { Load, Mutation, User } from \"../../graphql/schema\";\nimport usePalette from \"../../hooks/usePalette\";\nimport { slotForm, snackbarActions, useAppDispatch, useAppSelector } from \"../../redux\";\nimport SlotForm from \"../forms/slot/SlotForm\";\ninterface IManifestUserDialog {\n  open?: boolean;\n  onClose(): void;\n  onSuccess(): void;\n}\n\nconst MUTATION_CREATE_SLOT = gql`\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $rigId: Int\n    $ticketTypeId: Int\n    $userId: Int\n    $exitWeight: Float\n  ) {\n    createSlot(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          rigId: $rigId\n          ticketTypeId: $ticketTypeId\n          userId: $userId\n          exitWeight: $exitWeight\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      slot {\n        id\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n        exitWeight\n        load {\n          id\n          name\n          createdAt\n          dispatchAt\n          hasLanded\n          maxSlots\n          isFull\n          isOpen\n          plane {\n            id\n            name\n          }\n          gca {\n            id\n            user {\n              id\n              name\n            }\n          }\n          pilot {\n            id\n            user {\n              id\n              name\n            }\n          }\n          loadMaster {\n            id\n            user {\n              id\n              name\n            }\n          }\n          slots {\n            id\n            createdAt\n            user {\n              id\n              name\n            }\n            ticketType {\n              id\n              name\n              altitude\n            }\n            jumpType {\n              id\n              name\n            }\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function ManifestUserDialog(props: IManifestUserDialog) {\n  const dispatch = useAppDispatch();\n  const state = useAppSelector(state => state.slotForm);\n  const globalState = useAppSelector(state => state.global);\n  const [mutationCreateSlot, mutationData] = useMutation<Mutation>(MUTATION_CREATE_SLOT);\n\n  const validate = useCallback(() => {\n    let hasErrors = false;\n    if (!state.fields.jumpType.value?.id) {\n      hasErrors = true;\n      dispatch(\n        slotForm.setFieldError([\"jumpType\", \"You must specify the type of jump\"])\n      );\n    }\n\n    if (!state.fields.ticketType.value?.id) {\n      hasErrors = true;\n      dispatch(\n        slotForm.setFieldError([\"ticketType\", \"You must select a ticket type to manifest\"])\n      );\n    }\n\n    return !hasErrors;\n  }, [JSON.stringify(state.fields)]);\n  const onManifest = useCallback(async () => {\n\n    if (!validate()) {\n      return;\n    }\n    try {\n      const result = await mutationCreateSlot({\n        variables: {\n          jumpTypeId: Number(state.fields.jumpType.value?.id),\n          extraIds: state.fields.extras?.value?.map(({ id }) => Number(id)),\n          loadId: Number(state.fields.load.value?.id),\n          rigId: !state.fields.rig.value?.id ? null : Number(state.fields.rig.value?.id),\n          ticketTypeId: Number(state.fields.ticketType?.value?.id),\n          userId: Number(state.fields.user?.value?.id),\n          exitWeight: state.fields.exitWeight.value,\n        }\n      });\n\n      result.data?.createSlot?.fieldErrors?.map(({ field, message }) => {\n        switch (field) {\n          case \"jump_type\":\n            return dispatch(slotForm.setFieldError([\"jumpType\", message]));\n          case \"load\":\n            return dispatch(slotForm.setFieldError([\"load\", message]));\n          case \"ticket_type\":\n            return dispatch(slotForm.setFieldError([\"ticketType\", message]));\n          case \"rig\":\n            return dispatch(slotForm.setFieldError([\"rig\", message]));\n          case \"user\":\n            return dispatch(slotForm.setFieldError([\"user\", message]));\n          case \"exit_weight\":\n            return dispatch(slotForm.setFieldError([\"exitWeight\", message]));\n        }\n      });\n      if (result?.data?.createSlot?.errors?.length) {\n        return dispatch(snackbarActions.showSnackbar({ message: result?.data?.createSlot?.errors[0], variant: \"error\" }));\n      }\n      if (!result.data?.createSlot?.fieldErrors?.length) {\n        props.onSuccess();\n      }\n\n    } catch(error) {\n      dispatch(snackbarActions.showSnackbar({ message: error.message, variant: \"error\" }));\n    } \n  }, [JSON.stringify(state.fields), mutationCreateSlot, props.onSuccess])\n  \n  return (\n    <Portal>\n      <Dialog visible={!!props.open}>\n        <ProgressBar indeterminate visible={mutationData.loading} color={globalState.theme.colors.accent} />\n        <Dialog.Title>\n          {`Manifest ${state?.fields?.user?.value?.name} on ${state.fields.load?.value?.name}`}\n        </Dialog.Title>\n        <Dialog.Content>\n          <SlotForm />\n        </Dialog.Content>\n        <Dialog.Actions style={{ justifyContent: \"flex-end\"}}>\n          <Button\n            onPress={() => {\n              dispatch(slotForm.reset());\n              props.onClose();\n            }}\n          >\n            Cancel\n          </Button>\n          <Button onPress={onManifest}>\n            Manifest\n          </Button>\n        </Dialog.Actions>\n      </Dialog>\n    </Portal>\n  )\n}","import * as React from 'react';\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\n\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\n\nexport function useThemeColor(\n  props: { light?: string; dark?: string },\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\n) {\n  const theme = useColorScheme();\n  const colorFromProps = props[theme];\n\n  if (colorFromProps) {\n    return colorFromProps;\n  } else {\n    return Colors[theme][colorName];\n  }\n}\n\ntype ThemeProps = {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport type TextProps = ThemeProps & DefaultText['props'];\nexport type ViewProps = ThemeProps & DefaultView['props'];\n\nexport function Text(props: TextProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\n\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\n}\n\nexport function View(props: ViewProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\n\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","import React from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { Paragraph, Title } from \"react-native-paper\";\nimport { View } from \"./Themed\";\n\nexport default function NoResults({ title, subtitle }: { title: string, subtitle: string}) {\n  return (\n    <View style={styles.empty}>\n      <Title>{title}</Title>\n      <Paragraph style={{ textAlign: \"center\" }}>\n        {subtitle}\n      </Paragraph>\n    </View>\n  )\n}\n\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 8,\n    display: \"flex\"\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n  empty: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    height: \"100%\"\n  }\n});","import { useQuery } from '@apollo/client';\nimport { Ionicons, MaterialIcons } from '@expo/vector-icons';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { List, Menu } from 'react-native-paper';\n\nimport { Text, View } from '../../../components/Themed';\nimport { Query } from '../../../graphql/schema';\nimport usePalette from '../../../hooks/usePalette';\nimport { useAppSelector } from '../../../redux';\n\n\ninterface IGetStartedProps {\n  hasPlanes: boolean;\n  hasTicketTypes: boolean;\n  isPublic: boolean;\n}\nexport default function GetStarted({\n  hasPlanes,\n  hasTicketTypes,\n  isPublic,\n}: IGetStartedProps) {\n  const palette = usePalette();\n\n  return (\n      <View style={{ width: \"70%\"}}>\n      <Text style={styles.title}>Set up dropzone</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n        <List.Item\n          title=\"Create dropzone\"\n          left={\n            () =>\n              <List.Icon\n                color={palette.success}\n                icon=\"check\"\n              />\n          }\n        >\n        </List.Item>\n        <List.Item\n          title=\"Add a plane\"\n          left={\n            () =>\n              !hasPlanes ?\n                <List.Icon\n                  color={palette.error}\n                  icon=\"close\"\n                /> :\n                <List.Icon\n                  color={palette.success}\n                  icon=\"check\"\n                />\n          }\n        />\n        <List.Item\n          title=\"Configure jump tickets\"\n          left={\n            () =>\n            !hasTicketTypes ?\n              <List.Icon\n                color={palette.error}\n                icon=\"close\"\n              /> :\n              <List.Icon\n                color={palette.success}\n                icon=\"check\"\n              />\n          }\n        />\n      </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport { values } from \"lodash\";\nimport React, { useState } from \"react\";\nimport { Chip, List, Menu } from \"react-native-paper\";\nimport { DropzoneUser, Plane, Query, User } from \"../graphql/schema\";\nimport useRestriction from \"../hooks/useRestriction\";\nimport { useAppSelector } from \"../redux\";\n\ninterface IGCAChipSelect {\n  dropzoneId: number;\n  value?: User | null;\n  onSelect(user: User): void;\n}\n\n\n\nconst QUERY_DROPZONE_USERS = gql`\n  query QueryDropzoneUsers(\n    $dropzoneId: Int!\n    $permissions: [Permission!]\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function GCAChip(props: IGCAChipSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data } = useQuery<Query>(QUERY_DROPZONE_USERS, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n      permissions: [\"actAsGCA\"]\n    }\n  });\n  const allowed = useRestriction(\"updateLoad\");\n\n  return (\n    !allowed ?\n    <Chip mode=\"outlined\" icon=\"radio-handheld\">\n      {props.value?.name || \"No gca\"}\n    </Chip> : (\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <Chip\n          mode=\"outlined\"\n          icon=\"radio-handheld\"\n          style={{ marginHorizontal: 4 }}\n          onPress={() => setMenuOpen(true)}\n        >\n          {props.value?.id ? props.value?.name : \"No gca\"}\n        </Chip>\n      }>\n      {\n        data?.dropzone?.dropzoneUsers?.edges?.map((edge) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(edge?.node?.user as User);\n            }}\n            title={\n              edge?.node?.user?.name\n            }\n          />\n        )\n      }\n    </Menu>\n  ))\n}","import { values } from \"lodash\";\nimport React, { useState } from \"react\";\nimport { Chip, List, Menu } from \"react-native-paper\";\nimport { Slot, User } from \"../graphql/schema\";\nimport useRestriction from \"../hooks/useRestriction\";\n\ninterface ILoadMasterChipSelect {\n  dropzoneId: number;\n  value?: User | null;\n  slots: Slot[];\n  onSelect(user: User): void;\n}\n\n\n\n\nexport default function LoadMasterChip(props: ILoadMasterChipSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const allowed = useRestriction(\"updateLoad\");\n\n  return (\n    !allowed ?\n    <Chip mode=\"outlined\" icon=\"radio-handheld\">\n      {props.value?.name || \"No loadmaster\"}\n    </Chip> : (\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <Chip\n          mode=\"outlined\"\n          icon=\"parachute\"\n          style={{ marginHorizontal: 4 }}\n          onPress={() => allowed && setMenuOpen(true)}\n        >\n          {props.value?.id ? props.value?.name : \"No loadmaster\"}\n        </Chip>\n      }>\n      {\n        props.slots?.map((slot) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(slot.user as User);\n            }}\n            title={\n              slot?.user?.name\n            }\n          />\n        )\n      }\n    </Menu>\n  ))\n}","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport { values } from \"lodash\";\nimport React, { useState } from \"react\";\nimport { Chip, List, Menu } from \"react-native-paper\";\nimport { DropzoneUser, Plane, Query, User } from \"../graphql/schema\";\nimport useRestriction from \"../hooks/useRestriction\";\nimport { useAppSelector } from \"../redux\";\n\ninterface IPilotChipSelect {\n  dropzoneId: number;\n  value?: User | null;\n  onSelect(user: User): void;\n}\n\n\n\nconst QUERY_DROPZONE_USERS = gql`\n  query QueryDropzoneUsers(\n    $dropzoneId: Int!\n    $permissions: [Permission!]\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function PilotChip(props: IPilotChipSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data } = useQuery<Query>(QUERY_DROPZONE_USERS, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n      permissions: [\"actAsPilot\"]\n    }\n  });\n  const allowed = useRestriction(\"updateLoad\");\n\n  return (\n    !allowed ?\n    <Chip mode=\"outlined\" icon=\"radio-handheld\">\n      {props.value?.name || \"No pilot\"}\n    </Chip> : (\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <Chip\n          mode=\"outlined\"\n          icon=\"airplane-takeoff\"\n          style={{ marginHorizontal: 4 }}\n          onPress={() => setMenuOpen(true)}\n        >\n        {props.value?.id ? props.value?.name : \"No pilot\"}\n        </Chip>\n      }>\n      {\n        data?.dropzone?.dropzoneUsers?.edges?.map((edge) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(edge?.node?.user as User);\n            }}\n            title={\n              edge?.node?.user?.name\n            }\n          />\n        )\n      }\n    </Menu>\n  ))\n}","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { Chip, List, Menu } from \"react-native-paper\";\nimport { DropzoneUser, Plane, Query } from \"../graphql/schema\";\nimport useRestriction from \"../hooks/useRestriction\";\nimport { useAppSelector } from \"../redux\";\n\ninterface IPlaneChipSelect {\n  dropzoneId: number;\n  value?: Plane | null;\n  onSelect(dzUser: Plane): void;\n}\n\n\nconst QUERY_PLANES = gql`\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n`;\n\nexport default function PlaneChip(props: IPlaneChipSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data } = useQuery<Query>(QUERY_PLANES, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n    }\n  });\n  const allowed = useRestriction(\"updateLoad\");\n\n  return (\n    !allowed ?\n    <Chip mode=\"outlined\" icon=\"airplane-takeoff\">\n      {props.value?.name || \"No plane\"}\n    </Chip> : (\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <Chip\n          mode=\"outlined\"\n          icon=\"airplane\"\n          style={{ marginHorizontal: 4 }}\n          onPress={() => allowed && setMenuOpen(true)}\n        >\n          {props.value?.name || \"No plane\"}\n        </Chip>\n      }>\n      {\n        data?.planes?.map((plane) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(plane as Plane);\n            }}\n            title={\n              plane.name\n            }\n          />\n        )\n      }\n    </Menu>\n  ))\n}","import { gql, useMutation, useQuery } from '@apollo/client';\nimport { Ionicons, MaterialIcons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/core';\nimport * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { ScrollView } from 'react-native';\nimport { Button, Card, Chip, DataTable, ProgressBar, TouchableRipple } from 'react-native-paper';\nimport GCAChip from '../../../components/GcaChip';\nimport LoadMasterChip from '../../../components/LoadMasterChip';\nimport PilotChip from '../../../components/PilotChip';\nimport PlaneChip from '../../../components/PlaneChip';\n\nimport { Text, View } from '../../../components/Themed';\nimport { Query, Load, Mutation, User, Plane, Slot } from '../../../graphql/schema';\nimport useRestriction from '../../../hooks/useRestriction';\nimport { useAppSelector } from '../../../redux';\n\ninterface ILoadCard {\n  load: Load;\n  loadNumber: number;\n  canManifest: boolean;\n  onSlotPress(slot: Slot): void;\n  onSlotLongPress?(slot: Slot): void;\n  onManifest(): void;\n}\n\n\nconst QUERY_LOAD = gql`\n  query QueryLoad($id: Int!) {\n    load(id: $id) {\n      id\n      name\n      createdAt\n      dispatchAt\n      hasLanded\n      maxSlots\n      isFull\n      isOpen\n      plane {\n        id\n        name\n      }\n      gca {\n        id\n        user {\n          id\n          name\n        }\n      }\n      pilot {\n        id\n        user {\n          id\n          name\n        }\n      }\n      loadMaster {\n        id\n        user {\n          id\n          name\n        }\n      }\n      slots {\n        id\n        createdAt\n        exitWeight\n        user {\n          id\n          name\n        }\n        ticketType {\n          id\n          name\n          altitude\n\n          extras {\n            id\n            name\n            cost\n          }\n        }\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\nconst MUTATION_UPDATE_LOAD = gql`\n  mutation UpdateLoad(\n    $id: Int!,\n    $pilotId: Int,\n    $gcaId: Int,\n    $planeId: Int,\n    $isOpen: Boolean,\n  ){\n    updateLoad(input: {\n      id: $id\n      attributes: {\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        planeId: $planeId,\n        isOpen: $isOpen,\n      }\n    }) {\n      load {\n        id\n        name\n        createdAt\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          exitWeight\n          user {\n            id\n            name\n          }\n          ticketType {\n            id\n            name\n            altitude\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`;\n\n\nexport default function LoadCard(props: ILoadCard) {\n  const state = useAppSelector(state => state.global);\n  const [isExpanded, setExpanded] = React.useState(false);\n\n  const navigation = useNavigation();\n  const { load, loadNumber, onManifest, canManifest } = props;\n  const { data, loading } = useQuery<Query>(QUERY_LOAD, {\n    variables: {\n      id: Number(load.id),\n    },\n    // pollInterval: 30000,\n  });\n\n  const [mutationUpdateLoad, mutation] = useMutation<Mutation>(MUTATION_UPDATE_LOAD);\n  const updatePilot = React.useCallback(async (pilot: User) => {\n    try {\n      await mutationUpdateLoad({ variables: { id: Number(load.id), pilotId: Number(pilot.id) }});\n    } catch (e) {\n\n    }\n  }, [mutationUpdateLoad, JSON.stringify(load)]);\n\n  const updateGCA = React.useCallback(async (gca: User) => {\n    try {\n      await mutationUpdateLoad({ variables: { id: Number(load.id), gcaId: Number(gca.id) }});\n    } catch (e) {\n\n    }\n  }, [mutationUpdateLoad, JSON.stringify(load)]);\n\n  const updatePlane = React.useCallback(async (plane: Plane) => {\n    try {\n      await mutationUpdateLoad({ variables: { id: Number(load.id), planeId: Number(plane.id) }});\n    } catch (e) {\n\n    }\n  }, [mutationUpdateLoad, JSON.stringify(load)]);\n\n  const updateLoadMaster = React.useCallback(async (lm: User) => {\n    try {\n      await mutationUpdateLoad({ variables: { id: Number(load.id), loadMasterId: Number(lm.id) }});\n    } catch (e) {\n\n    }\n  }, [mutationUpdateLoad, JSON.stringify(load)]);\n\n  const canEditSelf = useRestriction(\"updateSlot\");\n  const canEditOthers = useRestriction(\"updateUserSlot\");\n\n  const getSlotPressAction = React.useCallback((slot: Slot) => {\n\n    if (slot?.user?.id !== state.currentUser?.id && !canEditOthers) {\n      return;\n    }\n    return () => {\n      if (slot.user?.id === state.currentUser?.id) {\n        if (canEditSelf) {\n          props.onSlotPress(slot);\n        }\n      } else if (canEditOthers) {\n        props.onSlotPress(slot);\n      }\n    }\n  }, [JSON.stringify(load), canEditOthers, props.onSlotPress]);\n\n  React.useEffect(() => {\n    if (data?.load?.maxSlots && data?.load?.maxSlots < 5 && !isExpanded) {\n      setExpanded(true);\n    }\n  }, [data?.load?.maxSlots]);\n\n  \n\n  return (\n  <Card style={{ marginVertical: 16 }} elevation={3}>\n    <Card.Title\n      title={`Load ${loadNumber}`}\n      subtitle={load.name}\n    />\n    <ProgressBar\n      visible={loading || mutation.loading}\n      color={state.theme.colors.accent}\n    />\n    <Card.Content style={{ marginVertical: 8, height: isExpanded ? undefined : 300, overflow: \"hidden\" }}>\n      <View style={{ flexDirection: \"row\"}}>\n        <ScrollView horizontal>\n          <PlaneChip\n            dropzoneId={Number(state.currentDropzone?.id)}\n            value={data?.load?.plane}\n            onSelect={updatePlane}\n          />\n          <GCAChip\n            dropzoneId={Number(state.currentDropzone?.id)}\n            value={data?.load?.gca?.user}\n            onSelect={updateGCA}\n          />\n          <PilotChip\n            dropzoneId={Number(state.currentDropzone?.id)}\n            value={data?.load?.pilot?.user}\n            onSelect={updatePilot}\n          />\n          <LoadMasterChip\n            dropzoneId={Number(state.currentDropzone?.id)}\n            value={data?.load?.loadMaster?.user}\n            slots={load.slots || []}\n            onSelect={updateLoadMaster}\n          />\n        </ScrollView>\n      </View>\n      <DataTable>\n        <DataTable.Header style={{ width: \"100%\"}}>\n          <DataTable.Row style={{ width: \"100%\"}}>\n            <DataTable.Title>Name</DataTable.Title>\n            <DataTable.Title numeric>Exit weight</DataTable.Title>\n            <DataTable.Title numeric>Jump type</DataTable.Title>\n            <DataTable.Title numeric>Altitude</DataTable.Title>\n          </DataTable.Row>\n        </DataTable.Header>\n          {\n            data?.load?.slots?.map(slot => {\n              \n              return (\n                <DataTable.Row onPress={getSlotPressAction(slot)}>\n                  <DataTable.Cell onPress={getSlotPressAction(slot)}>{slot?.user?.name}</DataTable.Cell>\n                  <DataTable.Cell numeric onPress={getSlotPressAction(slot)}>{slot?.exitWeight}</DataTable.Cell>\n                  <DataTable.Cell numeric onPress={getSlotPressAction(slot)}>{slot?.jumpType?.name}</DataTable.Cell>\n                  <DataTable.Cell numeric onPress={getSlotPressAction(slot)}>{slot?.ticketType?.altitude}</DataTable.Cell>\n                </DataTable.Row>\n              )\n            })\n          }\n          {\n            Array.from({length: (load?.maxSlots || 0) - (load?.slots?.length || 0)}, (v, i) => i).map(() =>\n            <DataTable.Row>\n              <DataTable.Cell>- Available -</DataTable.Cell>\n              <DataTable.Cell numeric>-</DataTable.Cell>\n              <DataTable.Cell numeric>-</DataTable.Cell>\n              <DataTable.Cell numeric>-</DataTable.Cell>\n            </DataTable.Row>\n            )\n          }\n      </DataTable>\n    </Card.Content>\n    <Card.Actions style={{ justifyContent: \"flex-end\" }}>\n      { data?.load?.maxSlots && data?.load?.maxSlots < 5 ? null :\n        <Button onPress={() => setExpanded(!isExpanded)}>\n          { isExpanded ? \"Show less\" : \"Show more\" }\n        </Button>\n      }\n      <Button mode=\"contained\" onPress={() => onManifest()} disabled={!canManifest}>\n        Manifest\n      </Button>\n    </Card.Actions>\n  </Card>\n                      \n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginVertical: 8,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n});\n","import { useQuery } from '@apollo/client';\nimport { useNavigation } from '@react-navigation/core';\nimport { startOfDay } from 'date-fns';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { Dimensions, StyleSheet } from 'react-native';\nimport { FlatList } from 'react-native-gesture-handler';\nimport { FAB, ProgressBar } from 'react-native-paper';\nimport ManifestUserDialog from '../../../components/dialogs/ManifestUserDialog';\n\nimport NoResults from '../../../components/NoResults';\nimport { View } from '../../../components/Themed';\nimport { Query } from '../../../graphql/schema';\nimport useRestriction from '../../../hooks/useRestriction';\nimport { globalActions, slotForm, useAppDispatch, useAppSelector } from '../../../redux';\nimport GetStarted from './GetStarted';\nimport LoadCard from './LoadCard';\n\nconst QUERY_DROPZONE = gql`\n  query QueryDropzone($dropzoneId: Int!, $earliestTimestamp: Int) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor,\n      secondaryColor,\n      planes {\n        id\n        name\n        registration\n      }\n      ticketTypes {\n        id\n        name\n      }\n\n      currentUser {\n        id\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n\n      loads(earliestTimestamp: $earliestTimestamp) {\n        edges {\n          node {\n            id\n            name\n            isOpen\n            maxSlots\n            isFull\n          }\n        }\n      }\n    }\n  }\n`;\n\n\n\nexport default function ManifestScreen() {\n  const state = useAppSelector(state => state.global);\n  const [isDialogOpen, setDialogOpen] = React.useState(false);\n  const dispatch = useAppDispatch();\n  const { data, loading, refetch } = useQuery<Query>(QUERY_DROPZONE, {\n    variables: {\n      dropzoneId: Number(state.currentDropzone?.id),\n      earliestTimestamp: startOfDay(new Date()).getTime() / 1000\n    },\n    fetchPolicy: \"no-cache\"\n  });\n\n  const navigation = useNavigation();\n\n  const hasPlanes = !!data?.dropzone?.planes?.length;\n  const hasTicketTypes = !!data?.dropzone?.ticketTypes?.length;\n  const isPublic = !!data?.dropzone?.isPublic;\n  const isSetupComplete = hasPlanes && hasTicketTypes;\n\n  React.useEffect(() => {\n    if (data?.dropzone?.id) {\n      dispatch(globalActions.setDropzone(data.dropzone));\n    \n      dispatch(\n        globalActions.setUser({\n          ...state?.currentUser,\n          ...(data?.dropzone?.currentUser.user || {})\n        })\n      );\n    }\n  }, [JSON.stringify(data?.dropzone)]);\n\n  React.useEffect(() => {\n    if (data?.dropzone?.primaryColor && data?.dropzone?.primaryColor !== state.theme?.colors?.primary) {\n      dispatch(globalActions.setPrimaryColor(data.dropzone.primaryColor));\n    }\n\n    if (data?.dropzone?.secondaryColor && data?.dropzone?.secondaryColor !== state.theme?.colors?.accent) {\n      dispatch(globalActions.setPrimaryColor(data.dropzone.secondaryColor));\n    }\n  }, [\n    data?.dropzone?.primaryColor,\n    data?.dropzone?.secondaryColor\n  ])\n\n  const allowed = useRestriction(\"createSlot\");\n  const canCreateLoad = useRestriction(\"createLoad\");\n\n  return (\n    <>\n    \n    <ManifestUserDialog\n      open={isDialogOpen}\n      onClose={() => setDialogOpen(false)}\n      onSuccess={() => setDialogOpen(false)}\n    />\n    <ProgressBar visible={loading} indeterminate color={state.theme.colors.accent} />\n      <View style={styles.container}>\n        \n        {\n          !loading && (\n            !isSetupComplete\n              ? <GetStarted {...{ hasPlanes, hasTicketTypes, isPublic }}/>\n                : <View style={{ width: \"100%\", flex: 1,  height: Dimensions.get(\"window\").height }}>\n                  { (data?.dropzone?.loads?.edges?.length || 0) < 1\n                    ? <NoResults\n                        title=\"No loads so far today\"\n                        subtitle=\"How's the weather?\"\n                      />\n                    : <FlatList\n                        style={{ flex: 1, height: Dimensions.get(\"window\").height }}\n                        contentContainerStyle={{ flexGrow: 1 }}\n                        numColumns={1}\n                        data={data?.dropzone?.loads?.edges || []}\n                        refreshing={loading}\n                        onRefresh={refetch}\n                        renderItem={({ item: edge, index }) =>\n                          !edge?.node ? null : (\n                            <LoadCard\n                              key={`load-${edge.node.id}`}\n                              load={edge.node}\n                              canManifest={allowed && edge?.node?.isOpen && !edge?.node?.isFull}\n                              loadNumber={(data?.dropzone?.loads?.edges?.length || 0) - index}\n                              onSlotPress={(slot) => {\n                                dispatch(slotForm.setOriginal(slot));\n                                dispatch(\n                                  slotForm.setField([\"load\", edge.node!])\n                                );\n                                setDialogOpen(true);\n                              }}\n                              onManifest={() => {\n                                dispatch(\n                                  slotForm.setField([\"user\", state.currentUser])\n                                );\n                                dispatch(\n                                  slotForm.setField([\"load\", edge.node!])\n                                );\n                                setDialogOpen(true);\n                              }}\n                            />\n                        )}\n                    />\n                  }\n\n                </View>\n        )}\n        { canCreateLoad && isSetupComplete && (\n          <FAB\n            style={styles.fab}\n            small\n            icon=\"plus\"\n            onPress={() => navigation.navigate(\"CreateLoadScreen\")}\n            label=\"New load\"\n          />\n        )}\n      </View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n});\n","import * as React from 'react';\n\nimport { Text, TextProps } from './Themed';\n\nexport function MonoText(props: TextProps) {\n  return <Text {...props} style={[props.style, { fontFamily: 'space-mono' }]} />;\n}\n","import * as WebBrowser from 'expo-web-browser';\nimport React from 'react';\nimport { StyleSheet, TouchableOpacity } from 'react-native';\n\nimport Colors from '../constants/Colors';\nimport { MonoText } from './StyledText';\nimport { Text, View } from './Themed';\n\nexport default function EditScreenInfo({ path }: { path: string }) {\n  return (\n    <View>\n      <View style={styles.getStartedContainer}>\n        <Text\n          style={styles.getStartedText}\n          lightColor=\"rgba(0,0,0,0.8)\"\n          darkColor=\"rgba(255,255,255,0.8)\">\n          Open up the code for this screen:\n        </Text>\n\n        <View\n          style={[styles.codeHighlightContainer, styles.homeScreenFilename]}\n          darkColor=\"rgba(255,255,255,0.05)\"\n          lightColor=\"rgba(0,0,0,0.05)\">\n          <MonoText>{path}</MonoText>\n        </View>\n\n        <Text\n          style={styles.getStartedText}\n          lightColor=\"rgba(0,0,0,0.8)\"\n          darkColor=\"rgba(255,255,255,0.8)\">\n          Change any of the text, save the file, and your app will automatically update.\n        </Text>\n      </View>\n\n      <View style={styles.helpContainer}>\n        <TouchableOpacity onPress={handleHelpPress} style={styles.helpLink}>\n          <Text style={styles.helpLinkText} lightColor={Colors.light.tint}>\n            Tap here if your app doesn't automatically update after making changes\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nfunction handleHelpPress() {\n  WebBrowser.openBrowserAsync(\n    'https://docs.expo.io/get-started/create-a-new-app/#opening-the-app-on-your-phonetablet'\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  developmentModeText: {\n    marginBottom: 20,\n    fontSize: 14,\n    lineHeight: 19,\n    textAlign: 'center',\n  },\n  contentContainer: {\n    paddingTop: 30,\n  },\n  welcomeContainer: {\n    alignItems: 'center',\n    marginTop: 10,\n    marginBottom: 20,\n  },\n  welcomeImage: {\n    width: 100,\n    height: 80,\n    resizeMode: 'contain',\n    marginTop: 3,\n    marginLeft: -10,\n  },\n  getStartedContainer: {\n    alignItems: 'center',\n    marginHorizontal: 50,\n  },\n  homeScreenFilename: {\n    marginVertical: 7,\n  },\n  codeHighlightText: {\n    color: 'rgba(96,100,109, 0.8)',\n  },\n  codeHighlightContainer: {\n    borderRadius: 3,\n    paddingHorizontal: 4,\n  },\n  getStartedText: {\n    fontSize: 17,\n    lineHeight: 24,\n    textAlign: 'center',\n  },\n  helpContainer: {\n    marginTop: 15,\n    marginHorizontal: 20,\n    alignItems: 'center',\n  },\n  helpLink: {\n    paddingVertical: 15,\n  },\n  helpLinkText: {\n    textAlign: 'center',\n  },\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport EditScreenInfo from '../../../components/EditScreenInfo';\nimport { Text, View } from '../../../components/Themed';\n\nexport default function LoadScreen() {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Tab One</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n      <EditScreenInfo path=\"/screens/LoadScreen.tsx\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import slice from \"./slice\";\nimport Notifications from \"./Notifications\";\n\nconst { actions } = slice;\n\nexport { actions };\nexport default Notifications;\n","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { Plane, Query } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\ninterface IPlaneSelect {\n  dropzoneId: number;\n  value?: Plane | null;\n  required?: boolean;\n  onSelect(plane: Plane): void;\n}\n\n\nconst QUERY_PLANES = gql`\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n`;\n\nexport default function PlaneSelect(props: IPlaneSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data, loading, refetch } = useQuery<Query>(QUERY_PLANES, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n    }\n  });\n  return (\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <List.Item\n          onPress={() => {\n            setMenuOpen(true);\n          }}\n          title={\n            props.value?.name || \"No plane selected\"\n          }\n          description={!props.required ? \"Optional\" : null}\n          left={() => <List.Icon icon=\"airplane\" />}\n        />\n      }>\n      {\n        data?.planes?.map((plane) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(plane);\n            }}\n            title={\n              plane.name || \"-\"\n            }\n            description={\n              plane.registration\n            }\n          />\n        )\n      }\n    </Menu>\n  )\n}","import gql from \"graphql-tag\";\nimport { createQuery } from \"../createQuery\";\nimport { Query } from \"../schema\";\n\n\nconst QUERY_DROPZONE_USERS = gql`\nquery QueryDropzoneUsers(\n  $dropzoneId: Int!\n  $permissions: [Permission!]\n) {\n  dropzone(id: $dropzoneId) {\n    id\n    name\n\n    dropzoneUsers(permissions: $permissions) {\n      edges {\n        node {\n          id\n          role {\n            id\n            name\n          }\n          user {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n}\n`;\n\nexport default createQuery<Query[\"dropzone\"][\"dropzoneUsers\"], {\n  dropzoneId: number,\n  permissions: string[],\n }>(QUERY_DROPZONE_USERS, {\n   getPayload: (query) => query?.dropzone?.dropzoneUsers,\n });","import { DocumentNode, useQuery } from \"@apollo/client\";\nimport { Maybe } from \"graphql/jsutils/Maybe\";\nimport { useCallback, useEffect, useMemo } from \"react\";\nimport { FieldError, Query } from \"../graphql/schema\";\nimport { snackbarActions, useAppDispatch } from \"../redux\";\n\nexport interface IAppQuery<Payload, InputType> {\n  data: Maybe<Payload>,\n  loading: boolean;\n  refetch(variables?: InputType): void;\n}\n\nexport interface IAppQueryProps<Payload, InputType> {\n  onError?(message: string): void;\n  showSnackbarErrors?: boolean;\n  variables?: InputType;\n}\n\nexport function createQuery<Payload extends {}, InputType extends {}>(\n  query: DocumentNode,\n  options: {\n    getPayload(query?: Query): Maybe<Payload>;\n  }\n) {\n  const { getPayload } = options;\n\n  return function useAppQuery(opts: IAppQueryProps<Payload, InputType>): IAppQuery<Payload, InputType> {\n    const { variables, onError } = opts\n    const dispatch = useAppDispatch();\n    \n    const { data, loading, previousData, refetch, error } = useQuery(query, {\n      variables,\n    });\n\n    const transformedData = useMemo(() => getPayload(data), [JSON.stringify(data)]);\n\n    useEffect(() => {\n      const hasChanged = JSON.stringify(previousData) !== JSON.stringify(data);\n      if (error?.message) {\n        if (opts.showSnackbarErrors !== false) {\n          dispatch(\n            snackbarActions.showSnackbar({ message: error.message, variant: \"error\" })\n          );\n        }\n\n        onError!(error.message);\n      }\n      \n    }, [opts.onError, error?.message])\n    \n\n    return {\n      loading,\n      data: transformedData,\n      refetch,\n    }    \n  }\n}","import React, { useState } from \"react\";\nimport { List, Menu, Title } from \"react-native-paper\";\nimport useQueryDropzoneUsers from \"../graphql/hooks/useQueryDropzoneUsers\";\nimport { DropzoneUser } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\ninterface IDropzoneUserSelect {\n  dropzoneId: number;\n  requiredPermissions: string[];\n  value: DropzoneUser | null;\n  required?: boolean;\n  label: string;\n  onSelect(dzUser: DropzoneUser): void;\n}\n\n\n\n\nexport default function DropzoneUserSelect(props: IDropzoneUserSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data, loading, refetch } = useQueryDropzoneUsers({\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n      permissions: props.requiredPermissions\n    }\n  });\n\n  return (\n    <>\n      <Title>{props.label}</Title>\n      <Menu\n        onDismiss={() => setMenuOpen(false)}\n        visible={isMenuOpen}\n        anchor={\n          <List.Item\n            onPress={() => {\n              setMenuOpen(true);\n            }}\n            title={\n              props.value?.user?.id ? props.value?.user.name : \"No user selected\"\n            }\n            description={!props.required ? \"Optional\" : null}\n          />\n        }>\n        {\n          data?.edges?.map((edge) => \n            <List.Item\n              onPress={() => {\n                setMenuOpen(false);\n                props.onSelect(edge?.node as DropzoneUser);\n              }}\n              title={\n                edge?.node?.user?.name || \"-\"\n              }\n              description={\n                edge?.node?.role?.name || null\n              }\n            />\n          )\n        }\n      </Menu>\n    </>\n  )\n}","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, Checkbox, Menu, List, Divider } from 'react-native-paper';\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\n\nimport slice from \"./slice\";\nimport PlaneSelect from '../../PlaneSelect';\nimport DropzoneUserSelect from '../../DropzoneUserSelect';\n\nconst { actions } = slice;\n\n\n\nexport default function LoadForm() {\n  const state = useAppSelector(state => state.loadForm);\n  const dispatch = useAppDispatch();\n  const globalState = useAppSelector(state => state.global);\n\n\n  return ( \n    <ScrollView style={styles.fields} contentContainerStyle={{ paddingTop: 200 }}>\n      \n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Name\"\n        error={!!state.fields.name.error}\n        value={state.fields.name.value || \"\"}\n        onChangeText={(newValue) => dispatch(actions.setField([\"name\", newValue]))}\n      />\n      <HelperText type={!!state.fields.name.error ? \"error\" : \"info\"}>\n        { state.fields.name.error || \"\" }\n      </HelperText>\n\n      <PlaneSelect\n        value={state.fields.plane.value}\n        onSelect={(value) => {\n          dispatch(actions.setField([\"plane\", value]));\n          dispatch(actions.setField([\"maxSlots\", value.maxSlots]));\n        }}\n        dropzoneId={Number(globalState.currentDropzone?.id)}\n      />\n      <HelperText type={!!state.fields.plane.error ? \"error\" : \"info\"}>\n        { state.fields.plane.error || \"\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Slots\"\n        error={!!state.fields.maxSlots.value}\n        value={state.fields.maxSlots?.value?.toString()}\n        onChangeText={(newValue) => dispatch(actions.setField([\"maxSlots\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.maxSlots.error ? \"error\" : \"info\"}>\n        { state.fields.maxSlots.error || \"\" }\n      </HelperText>\n\n      \n      <Checkbox.Item\n        label=\"Allow public manifesting\"\n        status={!!state.fields.isOpen.value\n          ? \"checked\"\n          : \"unchecked\"\n        }\n        onPress={\n          () => dispatch(actions.setField([\"isOpen\", !state.fields.isOpen.value]))\n        }\n      />\n\n      <Divider />\n      <DropzoneUserSelect\n        label=\"GCA\"\n        onSelect={dzUser => dispatch(actions.setField([\"gca\", dzUser]))}\n        dropzoneId={Number(globalState.currentDropzone?.id)}\n        value={state.fields.gca.value || null}\n        requiredPermissions={[\"actAsGCA\"]}\n        required\n      />\n      <HelperText type={!!state.fields.gca.error ? \"error\" : \"info\"}>\n        { state.fields.gca.error || \"\" }\n      </HelperText>\n      \n      <DropzoneUserSelect\n        label=\"Pilot\"\n        onSelect={dzUser => dispatch(actions.setField([\"pilot\", dzUser]))}\n        dropzoneId={Number(globalState.currentDropzone?.id)}\n        value={state.fields.pilot.value || null}\n        requiredPermissions={[\"actAsPilot\"]}\n      />\n      <HelperText type={!!state.fields.pilot.error ? \"error\" : \"info\"}>\n        { state.fields.pilot.error || \"\" }\n      </HelperText>\n\n      \n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    width: \"70%\",\n    flex: 1,\n    \n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm } from '../../../redux';\nimport { useNavigation } from '@react-navigation/core';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/load/slice\";\nimport { Mutation } from '../../../graphql/schema';\nimport LoadForm from '../../../components/forms/load/LoadForm';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_CREATE_LOAD = gql`\n  mutation CreateLoad(\n    $name: String,\n    $pilotId: Int,\n    $gcaId: Int,\n    $maxSlots: Int!,\n    $planeId: Int,\n    $isOpen: Boolean,\n  ){\n    createLoad(input: {\n      attributes: {\n        name: $name,\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        maxSlots: $maxSlots,\n        planeId: $planeId,\n        isOpen: $isOpen,\n      }\n    }) {\n      load {\n        id\n        name\n        pilot {\n          id\n          user {\n            id \n            name\n          }\n        }\n        gca {\n          id\n          user {\n            id \n            name\n          }\n        }\n        maxSlots\n        isOpen\n      }\n      fieldErrors {\n        field,\n        message\n      }\n      errors\n    }\n  }\n`;\n\nexport default function CreateLoadScreen() {\n  const { loadForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n\n  const [mutationCreateLoad, data] = useMutation<Mutation>(MUTATION_CREATE_LOAD);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    if ((state.fields.name?.value?.length || 0) < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (state.fields.maxSlots.value! < 1) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"maxSlots\", \"Please specify amount of allowed jumpers\"])\n      );\n    }\n\n    if (!state.fields.plane.value) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"plane\", \"What plane is flying this load?\"])\n      );\n    }\n\n    if (!state.fields.gca.value) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"gca\", \"You must have a GCA for this load\"])\n      );\n    }\n\n    return !hasError;\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, gca, loadMaster, plane, maxSlots, pilot, isOpen } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationCreateLoad({\n          variables: {\n            dropzoneId: Number(globalState.currentDropzone?.id),\n            name: name.value,\n            maxSlots: maxSlots.value,\n            planeId: plane.value?.id ? Number(plane.value?.id) : null,\n            pilotId: pilot.value?.id ? Number(plane.value?.id) : null,\n            gcaId: gca.value?.user?.id ? Number(gca.value?.user?.id) : null,\n            isOpen: !!isOpen.value\n          }\n        });\n        \n        result.data?.createLoad?.fieldErrors?.map(({ field, message }) => {\n          switch (field) {\n            case \"name\":\n              return dispatch(actions.setFieldError([\"name\", message]));\n            case \"maxSlots\":\n              return dispatch(actions.setFieldError([\"maxSlots\", message]));\n            case \"plane\":\n              return dispatch(actions.setFieldError([\"plane\", message]));\n            case \"gca\":\n              return dispatch(actions.setFieldError([\"gca\", message]));\n            case \"is_open\":\n              return dispatch(actions.setFieldError([\"isOpen\", message]));\n            case \"pilot\":\n              return dispatch(actions.setFieldError([\"pilot\", message]));\n          }\n        });\n\n        if (result?.data?.createLoad?.errors?.length) {\n          return dispatch(\n            snackbar.showSnackbar({ message: result.data.createLoad.errors[0], variant: \"error\" })\n          );\n        }\n\n        if (result.data?.createLoad?.load) {\n          const { load } = result.data.createLoad;\n          dispatch(\n            snackbar.showSnackbar({ message: `Load ${load.name} created`, variant: \"success\" })\n          );\n\n          if (!result.data?.createLoad?.fieldErrors) {\n            navigation.goBack();\n          }\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationCreateLoad]);\n\n  return (\n    <View style={styles.container}>\n        <LoadForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import React, { useState } from \"react\";\nimport { Appbar, Menu, Paragraph, Text, Button } from \"react-native-paper\";\nimport { StackHeaderProps } from \"@react-navigation/stack\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport { Dropzone, Query } from \"../graphql/schema\";\nimport { globalActions, useAppDispatch, useAppSelector } from \"../redux\";\nimport { View, StyleSheet } from \"react-native\";\n\nconst QUERY_DROPZONES = gql`\n  query QueryDropzonesCompact {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\ninterface IAppBar extends StackHeaderProps {\n  searchEnabled: boolean;\n  searchVisible: boolean;\n  setSearchVisible(visible: boolean): void;\n}\n\n\nfunction AppBar({ navigation, previous, scene }: StackHeaderProps) {\n  const [dropzoneMenuOpen, setDropzoneMenuOpen] = useState(false);\n  const { data } = useQuery<Query>(QUERY_DROPZONES);\n  const { currentDropzone, theme } = useAppSelector(state => state.global);\n  const dispatch = useAppDispatch();\n  \n  const hasRig = !!currentDropzone?.currentUser?.user?.rigs?.length;\n  const hasExitWeight = !!currentDropzone?.currentUser?.user?.exitWeight;\n\n  const showSetupWarning = !hasRig || !hasExitWeight;\n\n  return (\n    <>\n    <Appbar.Header>\n      {previous ? <Appbar.BackAction onPress={navigation.goBack} /> : null}\n      <Appbar.Content title={scene.descriptor.options.title} />\n      <Menu\n        onDismiss={() => setDropzoneMenuOpen(false)}\n        visible={dropzoneMenuOpen}\n        anchor={\n          <Text\n            onPress={() => setDropzoneMenuOpen(true)}\n            style={{ color: \"white\", marginRight: 8 }}\n          >\n            {currentDropzone?.name}\n          </Text>\n      }>\n        {\n          data?.dropzones?.edges?.map((edge) =>\n            <Menu.Item\n              title={edge?.node?.name}\n              onPress={() => {\n                dispatch(globalActions.setDropzone(edge?.node as Dropzone));\n                setDropzoneMenuOpen(false);\n              }}\n            />\n          )\n        }\n      </Menu>\n    </Appbar.Header>\n    { showSetupWarning && (\n      <View style={styles.warning}>\n        <Paragraph>\n          You need to complete your profile\n        </Paragraph>\n        <Button color=\"black\" mode=\"outlined\" onPress={() => navigation.navigate(\"Profile\")}>\n          Take me there\n        </Button>\n      </View>\n    )}\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  warning: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    height: 56,\n    width: \"100%\",\n    backgroundColor: \"#ffbb33\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: 32\n  },\n})\n\nexport default AppBar;","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\nimport { useAppSelector } from '../../redux';\n\nimport ManifestScreen from '../../screens/authenticated/manifest/ManifestScreen';\nimport LoadScreen from '../../screens/authenticated/load/LoadScreen';\nimport CreateLoadScreen from '../../screens/authenticated/load/CreateLoadScreen';\nimport AppBar from '../AppBar';\n\n\nexport type IManifestTabParams = {\n  DropzoneScreen: undefined;\n  LoadScreen: undefined;\n  CreateLoadScreen: undefined;\n}\n\nconst Manifest = createStackNavigator<IManifestTabParams>();\n\nexport default function ManifestTab() {\n  const globalState = useAppSelector(state => state.global);\n  return (\n    <Manifest.Navigator\n      screenOptions={{\n        headerShown: !!(globalState.credentials && globalState.currentDropzone),\n        header: (props) => <AppBar {...props} />,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      <Manifest.Screen name=\"DropzoneScreen\" component={ManifestScreen} options={{ title: \"Manifest\" }} />\n      <Manifest.Screen name=\"LoadScreen\" component={LoadScreen} options={{ title: \"Loads\" }}/>\n      <Manifest.Screen name=\"CreateLoadScreen\" component={CreateLoadScreen} options={{ title: \"Create load\" }}/>\n    </Manifest.Navigator>\n  );\n}\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport EditScreenInfo from '../../../components/EditScreenInfo';\nimport { Text, View } from '../../../components/Themed';\n\nexport default function PackingScreen() {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Tab One</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n      <EditScreenInfo path=\"/screens/PackingScreen.tsx\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport PackingScreen from '../../screens/authenticated/packing/PackingScreen';\n\nexport type IPackingTabParams = {\n  PackingScreen: undefined;\n}\n\nconst Packing = createStackNavigator<IPackingTabParams>();\n\nexport default function PackingTab() {\n  return (\n    <Packing.Navigator\n      screenOptions={{\n        headerShown: false,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      <Packing.Screen name=\"PackingScreen\" component={PackingScreen} />\n    </Packing.Navigator>\n  );\n}\n","import * as React from 'react';\nimport { List, Menu } from 'react-native-paper';\nimport DayPicker from 'react-day-picker';\nimport 'react-day-picker/lib/style.css';\nimport format from \"date-fns/format\";\n\ninterface IDatepicker {\n  label: string;\n  timestamp: number;\n  onChange(timestamp: number): void;\n}\nexport default function DatePicker(props: IDatepicker) {\n  const [open, setOpen] = React.useState(false);\n\n  const onDismissSingle = React.useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n\n  const onConfirmSingle = React.useCallback(\n    ({ date }: { date: Date }) => {\n      setOpen(false);\n      props.onChange(date.getTime() / 1000);\n    },\n    [setOpen, props.onChange]\n  );\n\n  return (\n    <>\n    <Menu\n      onDismiss={() => setOpen(false)}\n      visible={open}\n      anchor={\n        <List.Item\n          onPress={() => setOpen(true)}\n          title={props.label}\n          description={\n            props.timestamp ? \n              format(props.timestamp * 1000, \"yyyy/MM/dd\") :\n              \"No date selected\"\n          }\n          left={() => <List.Icon icon=\"calendar\" />}\n        />\n      }>\n      <DayPicker\n        selectedDays={props.timestamp ? [new Date(props.timestamp * 1000)] : []}\n        \n        onDayClick={(date) => {\n          props.onChange(date.getTime() / 1000);\n          setOpen(false);\n        }}\n\n      />\n    </Menu>\n    </>\n  );\n}","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, List } from 'react-native-paper';\n\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\nimport slice from \"./slice\";\nimport DatePicker from '../../DatePicker';\n\nconst { actions } = slice;\n\nexport default function RigForm() {\n  const state = useAppSelector(state => state.rigForm);\n  const dispatch = useAppDispatch();\n  const [isDatePickerOpen, setDatePickerOpen] = React.useState(false);\n\n  return ( \n    <ScrollView style={styles.fields}>\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Make\"\n        error={!!state.fields.make.error}\n        value={state.fields.make.value || \"\"}\n        onChangeText={(newValue) => dispatch(actions.setField([\"make\", newValue]))}\n      />\n      <HelperText type={!!state.fields.make.error ? \"error\" : \"info\"}>\n        { state.fields.make.error || \"e.g Javelin, Mirage\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Model\"\n        error={!!state.fields.model.error}\n        value={state.fields.model.value || \"\"}\n        onChangeText={(newValue) => dispatch(actions.setField([\"model\", newValue]))}\n      />\n      <HelperText type={!!state.fields.model.error ? \"error\" : \"info\"}>\n        { state.fields.model.error || \"e.g G4.1\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Serial\"\n        error={!!state.fields.serial.error}\n        value={state.fields.serial.value || \"\"}\n        onChangeText={(newValue) => dispatch(actions.setField([\"serial\", newValue]))}\n      />\n      <HelperText type={!!state.fields.serial.error ? \"error\" : \"info\"}>\n        { state.fields.serial.error || \"\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Current canopy size\"\n        error={!!state.fields.canopySize.error}\n        value={state.fields.canopySize.value?.toString() || \"\"}\n        keyboardType=\"number-pad\"\n        onChangeText={(newValue) => dispatch(actions.setField([\"canopySize\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.canopySize.error ? \"error\" : \"info\"}>\n        { state.fields.canopySize.error || \"Size of canopy in container\" }\n      </HelperText>\n\n      <DatePicker\n        timestamp={state.fields.repackExpiresAt.value || new Date().getTime() / 1000}\n        onChange={(time) => dispatch(actions.setField([\"repackExpiresAt\", time]))}\n        label=\"Reserve repack expiry date\"\n      />\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    flex: 1,\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { gql, useMutation } from \"@apollo/client\";\nimport { result } from \"lodash\";\nimport React, { useCallback, useEffect } from \"react\";\nimport { Button, Dialog, Portal, ProgressBar } from \"react-native-paper\";\nimport { Load, Mutation, User } from \"../../graphql/schema\";\nimport usePalette from \"../../hooks/usePalette\";\nimport { rigForm, snackbarActions, useAppDispatch, useAppSelector } from \"../../redux\";\nimport RigForm from \"../forms/rig/RigForm\";\ninterface IManifestUserDialog {\n  open?: boolean;\n  dropzoneId?: number;\n  userId?: number;\n  onClose(): void;\n  onSuccess(): void;\n}\n\nconst MUTATION_CREATE_RIG = gql`\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst MUTATION_UPDATE_RIG = gql`\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function RigDialog(props: IManifestUserDialog) {\n  const dispatch = useAppDispatch();\n  const state = useAppSelector(state => state.rigForm);\n  const globalState = useAppSelector(state => state.global);\n  const [mutationCreateRig, createData] = useMutation<Mutation>(MUTATION_CREATE_RIG);\n  const [mutationUpdateRig, updateData] = useMutation<Mutation>(MUTATION_UPDATE_RIG);\n\n  const validate = useCallback(() => {\n    let hasErrors = false;\n    if (!state.fields.make.value) {\n      hasErrors = true;\n      dispatch(\n        rigForm.setFieldError([\"make\", \"Required\"])\n      );\n    }\n\n    if (!state.fields.model.value) {\n      hasErrors = true;\n      dispatch(\n        rigForm.setFieldError([\"model\", \"Required\"])\n      );\n    }\n\n    if (!state.fields.serial.value) {\n      hasErrors = true;\n      dispatch(\n        rigForm.setFieldError([\"serial\", \"Required\"])\n      );\n    }\n\n    if (!state.fields.canopySize.value) {\n      hasErrors = true;\n      dispatch(\n        rigForm.setFieldError([\"canopySize\", \"Required\"])\n      );\n    }\n\n    if (!state.fields.repackExpiresAt.value) {\n      hasErrors = true;\n      dispatch(\n        rigForm.setFieldError([\"repackExpiresAt\", \"Required\"])\n      );\n    }\n\n    return !hasErrors;\n  }, [JSON.stringify(state.fields)]);\n  \n  const onSave = useCallback(async () => {\n\n    if (!validate()) {\n      return;\n    }\n    try {\n      const mutation = state.original?.id ? mutationUpdateRig : mutationCreateRig;\n      const response = await mutation({\n        variables: {\n          ...state.original?.id ? { id: state.original?.id } : {},\n          make: state.fields.make.value,\n          model: state.fields.model.value,\n          serial: state.fields.serial.value,\n          canopySize: state.fields.canopySize.value,\n          repackExpiresAt: state.fields.repackExpiresAt.value,\n          userId: props.userId ? Number(props.userId) : null,\n          dropzoneId: props.dropzoneId ? Number(props.dropzoneId) : null,\n        }\n      });\n      const result = state.original?.id ? response.data?.updateRig : response.data?.createRig;\n\n      result?.fieldErrors?.map(({ field, message }) => {\n        switch (field) {\n          case \"make\":\n            return dispatch(rigForm.setFieldError([\"make\", message]));\n          case \"model\":\n            return dispatch(rigForm.setFieldError([\"model\", message]));\n          case \"serial\":\n            return dispatch(rigForm.setFieldError([\"serial\", message]));\n          case \"canopySize\":\n            return dispatch(rigForm.setFieldError([\"canopySize\", message]));\n          case \"repack_expires_at\":\n            return dispatch(rigForm.setFieldError([\"repackExpiresAt\", message]));\n        }\n      });\n      if (result?.errors?.length) {\n        return dispatch(snackbarActions.showSnackbar({ message: result?.errors[0], variant: \"error\" }));\n      }\n      if (!result?.fieldErrors?.length) {\n        props.onSuccess();\n      }\n\n    } catch(error) {\n      dispatch(snackbarActions.showSnackbar({ message: error.message, variant: \"error\" }));\n    } \n  }, [JSON.stringify(state.fields), mutationCreateRig, props.onSuccess])\n  \n  return (\n    <Portal>\n      <Dialog visible={!!props.open}>\n        <ProgressBar indeterminate visible={createData.loading || updateData.loading} color={globalState.theme.colors.accent} />\n        <Dialog.Title>\n          {`${state?.original?.id ? \"Edit\" : \"New\"} rig`}\n        </Dialog.Title>\n        <Dialog.Content>\n          <RigForm />\n        </Dialog.Content>\n        <Dialog.Actions style={{ justifyContent: \"flex-end\"}}>\n          <Button\n            onPress={() => {\n              dispatch(rigForm.reset());\n              props.onClose();\n            }}\n          >\n            Cancel\n          </Button>\n          \n          <Button onPress={onSave}>\n            Save\n          </Button>\n        </Dialog.Actions>\n      </Dialog>\n    </Portal>\n  )\n}","import React, { useEffect, useState } from \"react\";\nimport { Dimensions, ScrollView, StyleSheet, ScrollViewProps } from \"react-native\";\n\n\ninterface IScrollableScreen extends ScrollViewProps {\n  children: React.ReactNode;\n}\nexport default function ScrollableScreen(props: IScrollableScreen) {\n\n  const [height, setHeight] = useState(Dimensions.get('window').height)\n\n  useEffect(() => {\n    Dimensions.addEventListener('change', ({ window }) => setHeight(window.height))\n    return () => {\n      Dimensions.removeEventListener('change', ({ window }) => setHeight(window.height))\n    }\n  }, []);\n\n  return (\n    <ScrollView style={[styles.container, { height }, props.style]} contentContainerStyle={[styles.content, props.contentContainerStyle]}>\n      {props.children}\n    </ScrollView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flexGrow: 1,\n    alignItems: \"center\"\n  }\n})","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { Query, UserRole } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\n\ninterface IRoleSelect {\n  value?: UserRole | null;\n  required?: boolean;\n  disabled?: boolean;\n  onSelect(jt: UserRole): void;\n}\n\nconst QUERY_ROLES = gql`\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport default function RoleSelect(props: IRoleSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data, loading, refetch } = useQuery<Query>(QUERY_ROLES, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id),\n    }\n  });\n  return (\n    <>\n    <List.Subheader style={{ paddingLeft: 0 }}>\n      Access level\n    </List.Subheader>\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={!props.disabled && isMenuOpen}\n      anchor={\n        <List.Item\n          left={() => <List.Icon icon=\"lock\" />}\n          onPress={props.disabled ? undefined : () => {\n            setMenuOpen(true);\n          }}\n          title={\n            props.value?.name || \"Access level\"\n          }\n          description={!props.required ? \"Optional\" : null}\n        />\n      }>\n      {\n        data?.dropzone?.roles?.map((role) =>\n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(role);\n            }}\n            title={\n              role.name || \"-\"\n            }\n          />\n        )\n      }\n    </Menu>\n    </>\n  )\n}","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, List } from 'react-native-paper';\n\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\nimport slice from \"./slice\";\nimport DatePicker from '../../DatePicker';\nimport RoleSelect from '../../RoleSelect';\nimport useRestriction from '../../../hooks/useRestriction';\n\nconst { actions } = slice;\n\nexport default function DropzoneUserForm() {\n  const { dropzoneUserForm: state, global: globalState} = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n  const canUpdateRole = useRestriction(\"updatePermissions\");\n\n  return ( \n    <ScrollView style={styles.fields}>\n\n      <RoleSelect\n        value={state.fields.role.value}\n        onSelect={(newRole) => dispatch(actions.setField([\"role\", newRole]))}\n        disabled={!canUpdateRole}\n        required\n      />\n      <HelperText type={!!state.fields.role.error ? \"error\" : \"info\"}>\n        { state.fields.role.error }\n      </HelperText>\n\n\n      <List.Subheader style={{ paddingLeft: 0 }}>\n        Financial\n      </List.Subheader>\n      <DatePicker\n        timestamp={state.fields.expiresAt.value || new Date().getTime() / 1000}\n        onChange={(time) => dispatch(actions.setField([\"expiresAt\", time]))}\n        label=\"Membership expires\"\n      />\n      <HelperText type={!!state.fields.expiresAt.error ? \"error\" : \"info\"}>\n        { state.fields.expiresAt.error }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Credits\"\n        error={!!state.fields.credits.error}\n        value={state.fields.credits.value?.toString() || \"\"}\n        keyboardType=\"number-pad\"\n        onChangeText={(newValue) => dispatch(actions.setField([\"credits\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.credits.error ? \"error\" : \"info\"}>\n        { state.fields.credits.error || `Current balance: $${state.original?.credits || 0}` }\n      </HelperText>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    flex: 1,\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { gql, useMutation } from \"@apollo/client\";\nimport React, { useCallback } from \"react\";\nimport { Button, Dialog, Portal, ProgressBar } from \"react-native-paper\";\nimport { Mutation } from \"../../graphql/schema\";\nimport { dropzoneUserForm, snackbarActions, useAppDispatch, useAppSelector } from \"../../redux\";\nimport DropzoneUserForm from \"../forms/dropzone_user/DropzoneUserForm\";\ninterface IDropzoneUserDialog {\n  open?: boolean;\n  onClose(): void;\n  onSuccess(): void;\n}\n\nconst MUTATION_EDIT_DROPZONE_USER = gql`\n  mutation UpdateDropzoneUser(\n    $credits: Float,\n    $userRoleId: Int,\n    $expiresAt: Int,\n    $dropzoneUserId: Int\n  ) {\n    updateDropzoneUser(\n      input: {\n        id: $dropzoneUserId,\n        attributes: {\n          credits: $credits,\n          userRoleId: $userRoleId,\n          expiresAt: $expiresAt,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\nexport default function DropzoneUserDialog(props: IDropzoneUserDialog) {\n  const dispatch = useAppDispatch();\n  const state = useAppSelector(state => state.dropzoneUserForm);\n  const globalState = useAppSelector(state => state.global);\n  const [mutationUpdateDropzoneUser, createData] = useMutation<Mutation>(MUTATION_EDIT_DROPZONE_USER);\n\n  const validate = useCallback(() => {\n    let hasErrors = false;\n    if (!state.fields.credits.value) {\n      hasErrors = true;\n      dispatch(\n        dropzoneUserForm.setFieldError([\"credits\", \"Required\"])\n      );\n    }\n\n    if (!state.fields.role.value) {\n      hasErrors = true;\n      dispatch(\n        dropzoneUserForm.setFieldError([\"role\", \"User must have an access level\"])\n      );\n    }\n\n    if (!state.fields.expiresAt.value) {\n      hasErrors = true;\n      dispatch(\n        dropzoneUserForm.setFieldError([\"expiresAt\", \"Membership expiry must be set\"])\n      );\n    }\n\n    return !hasErrors;\n  }, [JSON.stringify(state.fields)]);\n  \n  const onSave = useCallback(async () => {\n\n    if (!validate()) {\n      return;\n    }\n    try {\n      const response = await mutationUpdateDropzoneUser({\n        variables: {\n          ...state.original?.id ? { id: state.original?.id } : {},\n          credits: state.fields.credits.value,\n          userRoleId: Number(state.fields.role.value?.id),\n          expiresAt: state.fields.expiresAt.value,\n          dropzoneUserId: Number(state.original?.id),\n        }\n      });\n      const result = state.original?.id ? response.data?.updateRig : response.data?.createRig;\n\n      result?.fieldErrors?.map(({ field, message }) => {\n        switch (field) {\n          case \"user_role\":\n            return dispatch(dropzoneUserForm.setFieldError([\"role\", message]));\n          case \"credits\":\n            return dispatch(dropzoneUserForm.setFieldError([\"credits\", message]));\n          case \"expires_at\":\n            return dispatch(dropzoneUserForm.setFieldError([\"expiresAt\", message]));\n        }\n      });\n      if (result?.errors?.length) {\n        return dispatch(snackbarActions.showSnackbar({ message: result?.errors[0], variant: \"error\" }));\n      }\n      if (!result?.fieldErrors?.length) {\n        props.onSuccess();\n      }\n\n    } catch(error) {\n      dispatch(snackbarActions.showSnackbar({ message: error.message, variant: \"error\" }));\n    } \n  }, [JSON.stringify(state.fields), mutationUpdateDropzoneUser, props.onSuccess])\n  \n  return (\n    <Portal>\n      <Dialog visible={!!props.open}>\n        <ProgressBar indeterminate visible={createData.loading} color={globalState.theme.colors.accent} />\n        <Dialog.Title>\n          {`${state?.original?.id ? \"Edit\" : \"New\"} rig`}\n        </Dialog.Title>\n        <Dialog.Content>\n          <DropzoneUserForm />\n        </Dialog.Content>\n        <Dialog.Actions style={{ justifyContent: \"flex-end\"}}>\n          <Button\n            onPress={() => {\n              dispatch(dropzoneUserForm.reset());\n              props.onClose();\n            }}\n          >\n            Cancel\n          </Button>\n          \n          <Button onPress={onSave}>\n            Save\n          </Button>\n        </Dialog.Actions>\n      </Dialog>\n    </Portal>\n  )\n}","import { useNavigation, useRoute } from '@react-navigation/core';\nimport * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button, Card, DataTable, FAB, List, ProgressBar } from 'react-native-paper';\nimport format from \"date-fns/format\";\nimport RigDialog from '../../../components/dialogs/RigDialog';\nimport { dropzoneUserForm, globalActions, rigForm, useAppDispatch, useAppSelector } from '../../../redux';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/client';\nimport { Query } from '../../../graphql/schema';\nimport ScrollableScreen from '../../../components/ScrollableScreen';\nimport DropzoneUserDialog from '../../../components/dialogs/DropzoneUserDialog';\n\n\nconst QUERY_DROPZONE_USER = gql`\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`;\nexport default function ProfileScreen() {\n  const state = useAppSelector(state => state.global);\n  const dispatch = useAppDispatch();\n  const navigation = useNavigation();\n  const [rigDialogOpen, setRigDialogOpen] = React.useState(false);\n  const [dropzoneUserDialogOpen, setDropzoneUserDialogOpen] = React.useState(false);\n  const route = useRoute<{ key: string, name: string, params: { userId: string }}>();\n  const isSelf = state.currentUser?.id === route.params.userId;\n\n  const { data, loading } = useQuery<Query>(QUERY_DROPZONE_USER, {\n    variables: {\n      dropzoneId: Number(state.currentDropzone?.id),\n      dropzoneUserId: Number(route.params.userId)\n    }\n  });\n\n  const getRigPressAction = React.useCallback((rig) => {\n    return () => {\n      dispatch(rigForm.setOriginal(rig));\n      setRigDialogOpen(true);\n    }\n  }, [dispatch, setRigDialogOpen]);\n\n  return (\n    <>\n    <ProgressBar color={state.theme.colors.accent} indeterminate visible={loading} />\n    <ScrollableScreen contentContainerStyle={styles.content}>\n      \n        <Card elevation={3} style={styles.card}>\n          <Card.Title title=\"Basic information\" />\n          <Card.Content>\n            <List.Item\n              title=\"Name\"\n              left={() => <List.Icon icon=\"account-outline\" />}\n              description={data?.dropzone?.dropzoneUser?.user?.name  || \"-\"}\n            />\n            <List.Item\n              title=\"Email\"\n              left={() => <List.Icon icon=\"at\" />}\n              description={data?.dropzone?.dropzoneUser?.user?.email  || \"-\"}\n            />\n\n            <List.Item\n              title=\"Phone\"\n              left={() => <List.Icon icon=\"phone\" />}\n              description={data?.dropzone?.dropzoneUser?.user?.phone  || \"-\"}\n            />\n\n            <List.Item\n              title=\"License\"\n              left={() => <List.Icon icon=\"ticket-account\" />}\n              description={data?.dropzone?.dropzoneUser?.user?.license?.name || \"-\"}\n            />\n\n            <List.Item\n              title=\"Exit weight\"\n              left={() => <List.Icon icon=\"scale\" />}\n              description={data?.dropzone?.dropzoneUser?.user?.exitWeight  || \"-\"}\n            />\n          </Card.Content>\n          {\n            isSelf && (\n              <Card.Actions style={{ justifyContent: \"flex-end\"}}>\n                <Button\n                  icon=\"pencil\"\n                  onPress={() =>\n                    navigation.navigate(\"UpdateUserScreen\", { user: state.currentDropzone?.currentUser })\n                  }\n                >\n                  Edit\n                </Button>\n              </Card.Actions>\n            )}\n        </Card>\n        <Card elevation={3} style={styles.card}>\n          <Card.Title title={state.currentDropzone?.name} />\n          <Card.Content>\n            <List.Item\n              title=\"Role\"\n              description={data?.dropzone?.dropzoneUser?.role?.name}\n              left={() => <List.Icon icon=\"lock\" />}\n            />\n            <List.Item\n              title=\"Credits\"\n              description={data?.dropzone?.dropzoneUser?.credits}\n              left={() => <List.Icon icon=\"cash-multiple\" />}\n            />\n            <List.Item\n              title=\"Membership\"\n              description={\n                !data?.dropzone?.dropzoneUser?.expiresAt ?\n                  <span>Not a member</span>\n                : format((data?.dropzone?.dropzoneUser?.expiresAt || 0) * 1000, \"yyyy/MM/dd\")\n              }\n              left={() =>\n                <List.Icon\n                  icon=\"card-account-details\"\n                  color={\n                    data?.dropzone?.dropzoneUser?.expiresAt && (\n                      data?.dropzone?.dropzoneUser?.expiresAt * 1000 > new Date().getTime()\n                    ) ? undefined : \"#B00020\"}\n                />\n              }\n\n            />\n          </Card.Content>\n          <Card.Actions style={{ justifyContent: \"flex-end\"}}>\n            <Button\n              icon=\"pencil\"\n              onPress={() => {\n                dispatch(dropzoneUserForm.setOriginal(data?.dropzone?.dropzoneUser!));\n                setDropzoneUserDialogOpen(true);\n              }}\n            >\n              Edit\n            </Button>\n          </Card.Actions>\n        </Card>\n\n        <Card elevation={3} style={styles.card}>\n          <Card.Title title=\"Rigs\" />\n          <Card.Content>\n            <DataTable>\n              <DataTable.Header>\n                <DataTable.Row>\n                  <DataTable.Title>\n                    Make\n                  </DataTable.Title>\n                  <DataTable.Title>\n                    Model\n                  </DataTable.Title>\n                  <DataTable.Title>\n                    Serial\n                  </DataTable.Title>\n                  <DataTable.Title numeric>\n                    Repack expires\n                  </DataTable.Title>\n                  <DataTable.Title numeric>\n                    Canopy size\n                  </DataTable.Title>\n                </DataTable.Row>\n              </DataTable.Header>\n\n              {\n                data?.dropzone?.dropzoneUser?.user?.rigs?.map((rig) =>\n                  <DataTable.Row onPress={getRigPressAction(rig)}>\n                    <DataTable.Cell onPress={getRigPressAction(rig)}>\n                      {rig?.make}\n                    </DataTable.Cell>\n                    <DataTable.Cell onPress={getRigPressAction(rig)}>\n                      {rig?.model}\n                    </DataTable.Cell>\n                    <DataTable.Cell onPress={getRigPressAction(rig)}>\n                      {rig?.serial}\n                    </DataTable.Cell>\n                    <DataTable.Cell onPress={getRigPressAction(rig)}>\n                      {rig?.repackExpiresAt ? format(rig.repackExpiresAt * 1000, \"yyyy/MM/dd\") : \"-\"}\n                    </DataTable.Cell>\n                    <DataTable.Cell onPress={getRigPressAction(rig)}>\n                      {`${rig?.canopySize}sqft`}\n                    </DataTable.Cell>\n                  </DataTable.Row>\n                )\n              }\n            </DataTable>\n          </Card.Content>\n          {\n            isSelf && (\n            <Card.Actions style={{ justifyContent: \"flex-end\" }}>\n              <Button onPress={() => setRigDialogOpen(true)}>\n                Add rig\n              </Button>\n            </Card.Actions>\n          )}\n        </Card>\n\n        { data?.dropzone?.dropzoneUser?.id === state.currentUser?.id && (\n          <Button color=\"#B00020\" onPress={() => dispatch(globalActions.logout())}>\n            Log out\n          </Button>\n        )}\n      \n      </ScrollableScreen>\n      \n      <RigDialog\n        onClose={() => setRigDialogOpen(false)}\n        onSuccess={() => setRigDialogOpen(false)}\n        userId={Number(data?.dropzone?.dropzoneUser?.user?.id)}\n        open={rigDialogOpen}\n      />\n      \n      <DropzoneUserDialog\n        onClose={() => setDropzoneUserDialogOpen(false)}\n        onSuccess={() => setDropzoneUserDialogOpen(false)}\n        open={dropzoneUserDialogOpen}\n      />\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    alignItems: 'center',\n    flexGrow: 1,\n    paddingBottom: 56\n  },\n  card: {\n    marginVertical: 8,\n    width: \"80%\"\n  },\n  fields: {\n    width: \"80%\",\n    display: \"flex\",\n  },\n  spacer: {\n    width: \"100%\",\n    height: 32,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport EditScreenInfo from '../../../components/EditScreenInfo';\nimport { Text, View } from '../../../components/Themed';\n\nexport default function RigScreen() {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Tab One</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n      <EditScreenInfo path=\"/screens/RigScreen.tsx\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { License, Query } from \"../graphql/schema\";\nimport { useAppSelector } from \"../redux\";\n\n\ninterface ILicenseSelect {\n  value?: License | null;\n  required?: boolean;\n  federationId?: number | null;\n  onSelect(jt: License): void;\n}\n\nconst QUERY_LICENSES = gql`\n  query Licenses($federationId: Int) {\n    licenses(federationId: $federationId) {\n      id\n      name\n\n      federation {\n        id\n        name\n      }\n\n    }\n  }\n`;\n\nexport default function LicenseSelect(props: ILicenseSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const globalState = useAppSelector(state => state.global);\n\n  const { data, loading, refetch } = useQuery<Query>(QUERY_LICENSES, {\n    variables: {\n      federationId: props.federationId,\n    }\n  });\n  return (\n    <>\n    <List.Subheader>\n      License\n    </List.Subheader>\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <List.Item\n          onPress={() => {\n            setMenuOpen(true);\n          }}\n          title={\n            props.value?.name || \"Please select a license\"\n          }\n          description={!props.required ? \"Optional\" : null}\n        />\n      }>\n      {\n        data?.licenses?.map((license) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(license);\n            }}\n            title={\n              license.name || \"-\"\n            }\n          />\n        )\n      }\n    </Menu>\n    </>\n  )\n}","import { useQuery } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport React, { useEffect, useState } from \"react\";\nimport { List, Menu } from \"react-native-paper\";\nimport { Federation, Query } from \"../graphql/schema\";\n\n\ninterface IFederationSelect {\n  value?: Federation | null;\n  required?: boolean;\n  onSelect(jt: Federation): void;\n}\n\nconst QUERY_FEDERATIONS = gql`\n  query Federations {\n    federations {\n      id\n      name\n    }\n  }\n`;\n\nexport default function FederationSelect(props: IFederationSelect) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n\n  const { data } = useQuery<Query>(QUERY_FEDERATIONS);\n\n  useEffect(() => {\n    if (data?.federations?.length === 1 && !props.value) {\n      props.onSelect(data.federations![0]);\n    }\n  }, [JSON.stringify(data?.federations)])\n\n  return (\n    <>\n    <List.Subheader>\n      Federation\n    </List.Subheader>\n    <Menu\n      onDismiss={() => setMenuOpen(false)}\n      visible={isMenuOpen}\n      anchor={\n        <List.Item\n          onPress={() => {\n            setMenuOpen(true);\n          }}\n          title={\n            props.value?.name || \"Please select federation\"\n          }\n          description={!props.required ? \"Optional\" : null}\n        />\n      }>\n      {\n        data?.federations?.map((federation) => \n          <List.Item\n            onPress={() => {\n              setMenuOpen(false);\n              props.onSelect(federation);\n            }}\n            title={\n              federation.name || \"-\"\n            }\n          />\n        )\n      }\n    </Menu>\n    </>\n  )\n}","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, Divider, Chip, List } from 'react-native-paper';\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\n\nimport slice from \"./slice\";\nimport LicenseSelect from '../../LicenseSelect';\nimport FederationSelect from '../../FederationSelect';\nimport useRestriction from '../../../hooks/useRestriction';\n\nconst { actions } = slice;\nexport default function SlotForm() {\n  const state = useAppSelector(state => state.userForm);\n  const dispatch = useAppDispatch();\n  const globalState = useAppSelector(state => state.global);\n\n  React.useEffect(() => {\n    if (state.original) {\n      if (!state.fields.exitWeight.value) {\n        dispatch(\n          actions.setField([\"exitWeight\", state.original.exitWeight || \"60\"])\n        );\n      }\n\n      if (!state.fields.rigs.value && state.original?.id) {\n        dispatch(\n          actions.setField([\"rigs\", state.original.rigs])\n        );\n      }\n\n    }\n  }, [state.original?.id]);\n\n  const isEdit = state?.original?.id;\n  const isSelf = state?.original?.id === globalState.currentUser?.id;  \n\n\n  return ( \n    <ScrollView style={styles.fields} contentContainerStyle={{ flexGrow: 1}}>\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Name\"\n        error={!!state.fields.name.error}\n        value={state.fields.name?.value?.toString() || \"\"}\n        onChangeText={(newValue) => dispatch(actions.setField([\"name\", newValue]))}\n      />\n      \n      <HelperText type={!!state.fields.name.error ? \"error\" : \"info\"}>\n        { state.fields.name.error || \" \" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Email\"\n        error={!!state.fields.email.error}\n        value={state.fields.email?.value?.toString() || \"\"}\n        onChangeText={(newValue) => dispatch(actions.setField([\"email\", newValue]))}\n      />\n      \n      <HelperText type={!!state.fields.email.error ? \"error\" : \"info\"}>\n        { state.fields.email.error || \" \" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Phone\"\n        error={!!state.fields.phone.error}\n        value={state.fields.phone?.value?.toString() || \"\"}\n        onChangeText={(newValue) => dispatch(actions.setField([\"phone\", newValue]))}\n      />\n      \n      <HelperText type={!!state.fields.phone.error ? \"error\" : \"info\"}>\n        { state.fields.phone.error || \"\" }\n      </HelperText>\n\n      \n      \n     <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Exit weight\"\n        error={!!state.fields.exitWeight.error}\n        value={state.fields.exitWeight?.value?.toString() || \"\"}\n        keyboardType=\"numbers-and-punctuation\"\n        right={() => <TextInput.Affix text=\"kg\" />}\n        onChangeText={(newValue) => dispatch(actions.setField([\"exitWeight\", newValue]))}\n      />\n      \n      <HelperText type={!!state.fields.exitWeight.error ? \"error\" : \"info\"}>\n        { state.fields.exitWeight.error || \"\" }\n      </HelperText>\n\n      <Divider />\n\n      \n      <FederationSelect\n        value={state?.fields?.license?.value?.federation || state.federation.value}\n        onSelect={(value) => dispatch(actions.setFederation(value))}\n        required\n      />\n\n      <HelperText type={!!state.federation.error ? \"error\" : \"info\"}>\n        { state.federation.error || \"\" }\n      </HelperText>\n\n      { (state?.fields?.license?.value?.federation?.id || state?.federation?.value?.id) && (\n        <>\n          <LicenseSelect\n            value={state.fields.license.value}\n            federationId={Number(state?.fields?.license?.value?.federation?.id || state.federation?.value?.id)}\n            onSelect={(value) => dispatch(actions.setField([\"license\", value]))}\n            required\n          />\n          <HelperText type={!!state.fields.license.error ? \"error\" : \"info\"}>\n            { state.fields.license.error || \"\" }\n          </HelperText>\n        </>\n      )}\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    flex: 1,\n    width: \"70%\",\n    paddingTop: 32,\n  },\n  field: {\n    marginBottom: 8,\n  },\n  ticketAddons: {\n    marginBottom: 8\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm, userForm } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/user/slice\";\nimport { Mutation, User } from '../../../graphql/schema';\nimport UserForm from '../../../components/forms/user/UserForm';\nimport { useNavigation, useRoute } from '@react-navigation/core';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_CREATE_USER = gql`\n  mutation UpdateUser(\n    $id: Int,\n    $name: String,\n    $phone: String,\n    $email: String,\n    $licenseId: Int,\n    $exitWeight: Float,\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        phone: $phone,\n        email: $email,\n        licenseId: $licenseId,\n        exitWeight: $exitWeight,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function UpdateUserScreen() {\n  const { userForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n  const route = useRoute<{ key: string, name: string, params: { user: User }}>();\n  const user = route.params!.user;\n\n  React.useEffect(() => {\n    dispatch(actions.setOriginal(user));\n  }, [user?.id]);\n\n  const [mutationUpdateUser, data] = useMutation<Mutation>(MUTATION_CREATE_USER);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    const emailRegex = new RegExp(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n    if ((state.fields.name?.value?.length || 0) < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if ((state.fields.email?.value?.length || 0) < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"email\", \"Email is too short\"])\n      );\n    }\n\n    if ((state.fields.phone?.value?.length || 0) < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"phone\", \"Phone number is too short\"])\n      );\n    }\n\n    if (!emailRegex.test(state.fields?.email?.value || \"\")) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"email\", \"Please enter a valid email\"])\n      );\n    }\n\n    if ((state.fields.exitWeight?.value || 0) < 30) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"exitWeight\", \"Exit weight seems too low?\"])\n      );\n    }\n\n    return !hasError;\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, license, phone, email, exitWeight } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationUpdateUser({\n          variables: {\n            id: Number(state.original!.id!),\n            name: name.value,\n            licenseId: !license.value?.id ? null : Number(license.value!.id),\n            phone: phone.value,\n            exitWeight: parseFloat(exitWeight.value!),\n            email: email.value,\n          }\n        });\n        \n        if (result.data?.updateUser?.user) {\n          const { fieldErrors, errors } = result.data.updateUser;\n\n          if (fieldErrors) {\n            fieldErrors?.map(({ field, message }) => {\n              switch (field) {\n                case \"name\":\n                  return dispatch(userForm.setFieldError([\"name\", message]));\n                case \"exit_weight\":\n                  return dispatch(userForm.setFieldError([\"exitWeight\", message]));\n                case \"license_id\":\n                  return dispatch(userForm.setFieldError([\"license\", message]));\n                case \"phone\":\n                  return dispatch(userForm.setFieldError([\"phone\", message]));\n                case \"email\":\n                  return dispatch(userForm.setFieldError([\"email\", message]));\n              }\n            });\n          } else if (errors?.length) {\n            errors.map((message) =>\n              dispatch(\n                snackbar.showSnackbar({ message: message, variant: \"error\" })\n              )\n            );\n          } else {\n            dispatch(\n              snackbar.showSnackbar({ message: `Profile has been updated`, variant: \"success\" })\n            );\n            navigation.goBack();\n            dispatch(userForm.reset());\n          }\n\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationUpdateUser]);\n\n  return (\n    <View style={styles.container}>\n        <UserForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    paddingTop: 56,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport ProfileScreen from '../../screens/authenticated/profile/ProfileScreen';\nimport RigScreen from '../../screens/authenticated/rig/RigScreen';\nimport UpdateUserScreen from '../../screens/authenticated/profile/UpdateUserScreen';\nimport AppBar from '../AppBar';\nimport { useAppSelector } from '../../redux';\n\n\nexport type IProfileTabParams = {\n  ProfileScreen: {\n    userId: string,\n  };\n  RigScreen: undefined;\n  UpdateUserScreen: undefined;\n}\n\nconst Profile = createStackNavigator<IProfileTabParams>();\n\nexport default function ProfileTab() {\n  const { currentDropzone } = useAppSelector(state => state.global);\n  return (\n    <Profile.Navigator\n      screenOptions={{\n        headerShown: true,\n        header: (props) => <AppBar {...props} />,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      <Profile.Screen\n        name=\"ProfileScreen\"\n        component={ProfileScreen}\n        options={{ title: \"Profile\" }}\n        initialParams={{\n          userId: currentDropzone?.currentUser?.id,\n        }}\n      />\n      <Profile.Screen name=\"UpdateUserScreen\" component={UpdateUserScreen} options={{ title: \"Edit profile\" }} />\n      <Profile.Screen name=\"RigScreen\" component={RigScreen} options={{ title: \"Rig\" }} />\n    </Profile.Navigator>\n  );\n}\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { List } from 'react-native-paper';\nimport { useNavigation } from '@react-navigation/core';\nimport { View } from '../../../components/Themed';\nimport { useAppSelector } from '../../../redux';\n\n\n\n\nexport default function SettingsScreen() {\n  \n  const navigation = useNavigation();\n  const state = useAppSelector(state => state.global);\n \n\n  return (\n    <View style={styles.container}>\n      <List.Section title=\"Dropzone\">\n        <List.Item\n          title=\"Basic settings\"\n          onPress={() => navigation.navigate(\"UpdateDropzoneScreen\", { dropzone: state.currentDropzone })}\n          left={() => <List.Icon color=\"#000\" icon=\"information-outline\" />}\n        />\n        <List.Item\n          title=\"Planes\"\n          onPress={() => navigation.navigate(\"PlanesScreen\")}\n          left={() => <List.Icon color=\"#000\" icon=\"airplane\" />}\n        />\n        <List.Item\n          title=\"Rigs\"\n          left={() => <List.Icon color=\"#000\" icon=\"parachute\" />}\n        />\n        <List.Item\n          title=\"Users\"\n          left={() => <List.Icon color=\"#000\" icon=\"account-cog\" />}\n        />\n      </List.Section>\n\n      <List.Section title=\"Tickets\">\n        <List.Item\n          title=\"Ticket types\"\n          onPress={() => navigation.navigate(\"TicketTypesScreen\")}\n          left={() => <List.Icon color=\"#000\" icon=\"ticket\" />}\n          />\n        <List.Item\n          title=\"Ticket add-ons\"\n          onPress={() => navigation.navigate(\"ExtrasScreen\")}\n          left={() => <List.Icon color=\"#000\" icon=\"plus\" />}\n        />\n      </List.Section>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 8,\n    display: \"flex\"\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n  empty: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    height: \"100%\"\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport EditScreenInfo from '../../../components/EditScreenInfo';\nimport { Text, View } from '../../../components/Themed';\n\nexport default function DropzoneSettingsScreen() {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Tab One</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n      <EditScreenInfo path=\"/screens/DropzoneSettingsScreen.tsx\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import { useMutation, useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { StyleSheet, FlatList, RefreshControl } from 'react-native';\nimport { Card, Title, FAB, Paragraph, List, DataTable, ProgressBar, Switch } from 'react-native-paper';\nimport { View } from '../../../components/Themed';\nimport { Mutation, Query } from \"../../../graphql/schema\";\n\nimport { useNavigation, useRoute } from '@react-navigation/core';\nimport { useAppSelector } from '../../../redux';\nimport { ScrollView,  } from 'react-native-gesture-handler';\n\n\nconst QUERY_TICKET_TYPE = gql`\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      altitude\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n`;\n\nconst MUTATION_UPDATE_TICKET_TYPE = gql`\n  mutation UpdateTicketTypePublic(\n    $id: Int!,\n    $allowManifestingSelf: Boolean\n  ){\n    updateTicketType(input: {\n      id: $id\n      attributes: {\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n`;\n\nexport default function TicketTypesScreen() {\n  const state = useAppSelector(state => state.global);\n  const { data, loading, refetch } = useQuery<Query>(QUERY_TICKET_TYPE, {\n    variables: {\n      dropzoneId: Number(state.currentDropzone?.id)\n    }\n  });\n  const navigation = useNavigation();\n  const route = useRoute();\n  const [mutationUpdateTicketType, mutation] = useMutation<Mutation>(MUTATION_UPDATE_TICKET_TYPE);\n  \n  React.useEffect(() => {\n    if (route.name === \"TicketTypesScreen\") {\n      refetch();\n    }\n  }, [route.name])\n  return (\n      <ScrollView style={styles.container} contentContainerStyle={[styles.content, {  backgroundColor: \"white\" }]} refreshControl={<RefreshControl refreshing={loading} onRefresh={refetch} />}>\n      <ProgressBar visible={loading} color={state.theme.colors.accent} />\n        <DataTable>\n          <DataTable.Header>\n            <DataTable.Title>Name</DataTable.Title>\n            <DataTable.Title numeric>Cost</DataTable.Title>\n            <DataTable.Title numeric>Altitude</DataTable.Title>\n            <DataTable.Title numeric>Public</DataTable.Title>\n          </DataTable.Header>\n\n          { data?.ticketTypes?.map((ticketType) =>\n            <DataTable.Row onPress={() => navigation.navigate(\"UpdateTicketTypeScreen\", { ticketType })}>\n              <DataTable.Cell>{ticketType.name}</DataTable.Cell>\n              <DataTable.Cell numeric>${ticketType.cost}</DataTable.Cell>\n              <DataTable.Cell numeric>\n                {ticketType.altitude}\n              </DataTable.Cell>\n              <DataTable.Cell numeric>\n                <Switch\n                  onValueChange={() => {\n                    mutationUpdateTicketType({\n                      variables: {\n                        id: Number(ticketType.id),\n                        allowManifestingSelf: !ticketType.allowManifestingSelf\n                      }\n                    })\n                  }}\n                  value={!!ticketType.allowManifestingSelf}\n                />\n              </DataTable.Cell>\n            </DataTable.Row>\n            )}\n        </DataTable>\n        \n        <FAB\n          style={styles.fab}\n          small\n          icon=\"plus\"\n          onPress={() => navigation.navigate(\"CreateTicketTypeScreen\")}\n          label=\"New ticket type\"\n        />\n      </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    display: \"flex\"\n  },\n  content: {\n    flexGrow: 1,\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n  empty: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    height: \"100%\"\n  }\n});\n","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText } from 'react-native-paper';\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\n\nimport slice from \"./slice\";\n\nconst { actions } = slice;\n\n\nexport default function DropzoneForm() {\n  const state = useAppSelector(state => state.planeForm);\n  const dispatch = useAppDispatch();\n\n  return ( \n    <ScrollView style={styles.fields} contentContainerStyle={{ paddingTop: 200 }}>\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Name\"\n        error={!!state.fields.name.error}\n        value={state.fields.name.value}\n        onChangeText={(newValue) => dispatch(actions.setField([\"name\", newValue]))}\n      />\n      <HelperText type={!!state.fields.name.error ? \"error\" : \"info\"}>\n        { state.fields.name.error || \"\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Registration\"\n        error={!!state.fields.registration.error}\n        value={state.fields.registration.value}\n        onChangeText={(newValue) => dispatch(actions.setField([\"registration\", newValue]))}\n      />\n      <HelperText type={!!state.fields.registration.error ? \"error\" : \"info\"}>\n        { state.fields.registration.error || \"\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"hours\"\n        error={!!state.fields.hours.error}\n        value={state.fields.hours?.value?.toString()}\n        placeholder=\"Optional\"\n        onChangeText={(newValue) => dispatch(actions.setField([\"hours\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.hours.error ? \"error\" : \"info\"}>\n        { state.fields.hours.error || \"\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Min slots\"\n        error={!!state.fields.minSlots.error}\n        value={state.fields.minSlots.value?.toString()}\n        keyboardType=\"number-pad\"\n        onChangeText={(newValue) => dispatch(actions.setField([\"minSlots\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.minSlots.error ? \"error\" : \"info\"}>\n        { state.fields.minSlots.error || \"Minimum tickets required to send it\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Max slots\"\n        error={!!state.fields.maxSlots.error}\n        value={state.fields.maxSlots?.value.toString()}\n        keyboardType=\"number-pad\"\n        onChangeText={(newValue) => dispatch(actions.setField([\"maxSlots\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.maxSlots.error ? \"error\" : \"info\"}>\n        { state.fields.maxSlots.error || \"Maximum amount of jumpers who can be manifested on one load\" }\n      </HelperText>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    width: \"70%\",\n    flex: 1,\n    \n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/plane/slice\";\nimport { Mutation } from '../../../graphql/schema';\nimport PlaneForm from '../../../components/forms/plane/PlaneForm';\nimport { useNavigation } from '@react-navigation/core';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_CREATE_PLANE = gql`\n  mutation CreatePlane(\n    $name: String!,\n    $registration: String!,\n    $dropzoneId: Int!\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    createPlane(input: {\n      attributes: {\n        name: $name,\n        registration: $registration,\n        dropzoneId: $dropzoneId\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function CreatePlaneScreen() {\n  const { planeForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n\n  const [mutationCreatePlane, data] = useMutation<Mutation>(MUTATION_CREATE_PLANE);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    if (state.fields.name.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (state.fields.registration.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"registration\", \"Registration is too short\"])\n      );\n    }\n\n    if (!state.fields.maxSlots.value) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"maxSlots\", \"Max slots must be specified\"])\n      );\n    }\n\n    return !hasError;\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, registration, maxSlots, minSlots, hours, nextMaintenanceHours } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationCreatePlane({\n          variables: {\n            dropzoneId: Number(globalState.currentDropzone?.id),\n            name: name.value,\n            registration: registration.value,\n            minSlots: minSlots.value,\n            maxSlots: maxSlots.value,\n            hours: hours.value,\n            nextMaintenanceHours: nextMaintenanceHours.value,\n          }\n        });\n        \n        if (result.data?.createPlane?.plane) {\n          const { plane } = result.data.createPlane;\n          dispatch(\n            snackbar.showSnackbar({ message: `Added plane ${plane.name}`, variant: \"success\" })\n          );\n          navigation.goBack();\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationCreatePlane]);\n\n  return (\n    <View style={styles.container}>\n        <PlaneForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/plane/slice\";\nimport { Mutation, Plane } from '../../../graphql/schema';\nimport PlaneForm from '../../../components/forms/plane/PlaneForm';\nimport { useNavigation, useRoute } from '@react-navigation/core';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_CREATE_PLANE = gql`\n  mutation UpdatePlane(\n    $id: Int!,\n    $name: String!,\n    $registration: String!,\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    updatePlane(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        registration: $registration,\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function UpdatePlaneScreen() {\n  const { planeForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n  const route = useRoute<{ key: string, name: string, params: { plane: Plane }}>();\n  const plane = route.params!.plane;\n\n  React.useEffect(() => {\n    dispatch(actions.setOriginal(plane));\n  }, [plane?.id]);\n\n  const [mutationUpdatePlane, data] = useMutation<Mutation>(MUTATION_CREATE_PLANE);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    if (state.fields.name.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (state.fields.registration.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"registration\", \"Registration is too short\"])\n      );\n    }\n\n    if (!state.fields.maxSlots.value) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"maxSlots\", \"Max slots must be specified\"])\n      );\n    }\n\n    return !hasError;\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, registration, maxSlots, minSlots, hours, nextMaintenanceHours } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationUpdatePlane({\n          variables: {\n            id: Number(state.original!.id!),\n            name: name.value,\n            registration: registration.value,\n            minSlots: minSlots.value,\n            maxSlots: maxSlots.value,\n            hours: hours.value,\n            nextMaintenanceHours: nextMaintenanceHours.value,\n          }\n        });\n        \n        if (result.data?.updatePlane?.plane) {\n          const { plane } = result.data.updatePlane;\n          dispatch(\n            snackbar.showSnackbar({ message: `Saved plane ${plane.name}`, variant: \"success\" })\n          );\n          navigation.goBack();\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationUpdatePlane]);\n\n  return (\n    <View style={styles.container}>\n        <PlaneForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button, TextInput, HelperText, Card, Menu, List, Portal, Modal, Dialog, Checkbox } from 'react-native-paper';\nimport { getDocumentAsync } from \"expo-document-picker\";\nimport { useQuery, gql } from '@apollo/client';\nimport { ColorPicker } from \"react-native-color-picker\";\nimport { useAppSelector, useAppDispatch, globalActions } from '../../../redux';\nimport SliderComponent from \"@react-native-community/slider\";\n\nimport { View } from '../../Themed';\n\nimport slice from \"./slice\";\nimport { Query } from '../../../graphql/schema';\nimport { ScrollView } from 'react-native';\n\nconst { actions } = slice;\n\nconst QUERY_FEDERATIONS = gql`\n  query QueryFederations {\n    federations {\n      id\n      name\n    }\n  }\n`;\nexport default function DropzoneForm() {\n  const { dropzoneForm: state, global } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n  const { data, loading } = useQuery<Query>(QUERY_FEDERATIONS);\n  const [federationMenuOpen, setFederationMenuOpen] = useState(false);\n  const [colorPicker, setColorPicker] = useState<\"primary\" | \"secondary\" | null>(null);\n\n  useEffect(() => {\n    if (data?.federations?.length && !state.fields.federation?.value) {\n      dispatch(\n        actions.setField([\"federation\", data.federations[0]])\n      );\n    }\n  }, [JSON.stringify(data?.federations)]);\n\n  const onPickImage = useCallback(\n    async () => {\n      try {\n        const result = await getDocumentAsync({\n          multiple: false,\n          type: \"image\",\n        }) as { uri: string };\n\n        dispatch(actions.setField([\"banner\", result.uri as string]));\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    [dispatch],\n  )\n\n  return (\n    <>\n      <Portal>\n        <Dialog\n          visible={!!colorPicker}\n          onDismiss={() => setColorPicker(null)}\n        >\n            <Dialog.Title>Pick a {colorPicker === \"primary\" ? \"primary color\" : \"secondary color\"}</Dialog.Title>\n            <Dialog.Content style={{ padding: 20, height: 400 }}>\n              <ColorPicker\n                onColorSelected={color => {\n                dispatch(\n                  colorPicker === \"primary\"\n                    ? actions.setField([\"primaryColor\", color])\n                    : actions.setField([\"secondaryColor\", color])\n                )\n                }}\n                style={{ flex: 1 }}\n                sliderComponent={SliderComponent as any}\n                defaultColor={(colorPicker === \"primary\" ? state.fields.primaryColor.value : state.fields.secondaryColor.value) || undefined}\n                hideSliders\n              />\n            </Dialog.Content>\n            <Dialog.Actions>\n              <Button onPress={() => setColorPicker(null)}>Cancel</Button>\n              <Button\n                disabled={\n                  (colorPicker === \"primary\" && !state.fields.primaryColor.value) ||\n                  (colorPicker === \"secondary\" && !state.fields.secondaryColor.value)\n                }\n                onPress={() => {\n                  console.log({\n                    current: global.theme.colors.accent,\n                    next: state.fields.secondaryColor.value\n                  })\n                  if (colorPicker === \"primary\") {\n                    dispatch(\n                      globalActions.setPrimaryColor(state.fields.primaryColor.value!),\n                    );\n                  } else {\n                    dispatch(\n                      globalActions.setAccentColor(state.fields.secondaryColor.value!),\n                    );\n                  }\n                  setColorPicker(null);\n                }}\n              >\n                Save\n              </Button>\n            </Dialog.Actions>\n          </Dialog>\n      </Portal>\n      <Card style={{ width: \"100%\", maxHeight: 300}}>\n        <Card.Cover\n          source={{ uri: state.fields.banner.value || 'https://picsum.photos/700' }}\n          resizeMode=\"cover\"\n        />\n        <Card.Actions style={{ justifyContent: \"flex-end\" }}>\n          <Button onPress={onPickImage}>Upload</Button>\n        </Card.Actions>\n      </Card>\n      <View style={styles.fields}>\n        <List.Subheader style={styles.subheader}>Dropzone</List.Subheader>\n        <TextInput\n          style={styles.field}\n          mode=\"outlined\"\n          label=\"Name\"\n          error={!!state.fields.name.error}\n          value={state.fields.name.value || \"\"}\n          onChangeText={(newValue) => dispatch(actions.setField([\"name\", newValue]))}\n        />\n        <HelperText type=\"error\">\n          { state.fields.name.error || \"\" }\n        </HelperText>\n\n        \n\n        <List.Subheader style={styles.subheader}>Federation</List.Subheader>\n        \n        <Menu\n          onDismiss={() => setFederationMenuOpen(false)}\n          visible={federationMenuOpen}\n          anchor={\n            <Menu.Item\n              onPress={() => setFederationMenuOpen(true)}\n              title={state.fields?.federation?.value?.name || \"\"}\n              icon=\"parachute\"\n            />}>\n          {\n            data?.federations?.map((federation) =>\n              <Menu.Item\n                title={federation.name}\n                onPress={() => {\n                  dispatch(actions.setField([\"federation\", federation]));\n                  setFederationMenuOpen(false);\n                }}\n              />\n            )\n          }\n        </Menu>\n        <List.Subheader style={styles.subheader}>Branding</List.Subheader>\n        <List.Item\n          title=\"Primary color\"\n          onPress={() => setColorPicker(\"primary\")}\n          left={() =>\n            <View\n              style={{\n                width: 24,\n                height: 24,\n                backgroundColor: global.theme.colors.primary\n              }}\n            />\n        }/>\n\n        <List.Item\n          title=\"Secondary color\"\n          onPress={() => setColorPicker(\"secondary\")}\n          left={() =>\n            <View\n              style={{\n                width: 24,\n                height: 24,\n                backgroundColor: global.theme.colors.accent\n              }}\n            />\n        }/>\n\n        <List.Item\n          title=\"Use credit system\"\n          description=\"Users will be charged credits when a load is marked as landed and can't manifest with insufficient funds.\"\n          onPress={() =>\n            dispatch(actions.setField([\"isCreditSystemEnabled\", !state.fields.isCreditSystemEnabled.value]))\n          }\n          left={() =>\n            <Checkbox\n              onPress={() =>\n                dispatch(actions.setField([\"isCreditSystemEnabled\", !state.fields.isCreditSystemEnabled.value]))\n              }\n              status={state.fields.isCreditSystemEnabled.value\n                  ? \"checked\"\n                  : \"unchecked\"\n              }\n            />\n        }/>\n\n        <List.Item\n          title=\"Public\"\n          description=\"Your dropzone will not be available in the app if this is disabled\"\n          onPress={() =>\n            dispatch(actions.setField([\"isPublic\", !state.fields.isPublic.value]))\n          }\n          left={() =>\n            <Checkbox\n              onPress={() =>\n                dispatch(actions.setField([\"isPublic\", !state.fields.isPublic.value]))\n              }\n              status={state.fields.isPublic.value\n                  ? \"checked\"\n                  : \"unchecked\"\n              }\n            />\n        }/>\n      </View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    flexGrow: 1,\n    display: \"flex\",\n    width: \"70%\",\n  },\n  field: {\n    marginBottom: 8,\n  },\n  subheader: {\n    paddingLeft: 0\n  }\n});\n","import * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/dropzone/slice\";\nimport { Dropzone, Mutation } from '../../../graphql/schema';\nimport DropzoneForm from '../../../components/forms/dropzone/DropzoneForm';\nimport { useNavigation, useRoute } from '@react-navigation/core';\nimport ScrollableScreen from '../../../components/ScrollableScreen';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_UPDATE_DROPZONE = gql`\n  mutation UpdateDropzone(\n    $id: Int!,\n    $name: String!,\n    $banner: String,\n    $federationId: Int!\n    $primaryColor: String\n    $secondaryColor: String\n  ){\n    updateDropzone(input: {\n    id: $id\n    attributes: {\n      name: $name,\n      banner: $banner,\n      federationId: $federationId\n      primaryColor: $primaryColor\n      secondaryColor: $secondaryColor\n    }\n  }) {\n      dropzone {\n        id\n        name\n        banner\n        primaryColor\n        secondaryColor,\n\n        federation {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\nexport default function UpdateDropzoneScreen() {\n  const state = useAppSelector(state => state.dropzoneForm);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n  const route = useRoute<{ key: string, name: string, params: { dropzone: Dropzone }}>();\n  const dropzone = route.params!.dropzone;\n\n  React.useEffect(() => {\n    dispatch(actions.setOriginal(dropzone));\n  }, [dropzone?.id]);\n  \n\n  const [mutationUpdateDropzone, data] = useMutation<Mutation>(MUTATION_UPDATE_DROPZONE);\n\n  const onSave = React.useCallback(async () => {\n    let hasError = false;\n    const { name, banner, federation, primaryColor, secondaryColor } = state.fields;\n\n    if (!name.value?.length || name.value?.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (!hasError) {\n      try {\n        const result = await mutationUpdateDropzone({\n          variables: {\n            id: Number(dropzone?.id),\n            name: name.value,\n            banner: banner.value || null,\n            primaryColor: primaryColor.value,\n            secondaryColor: secondaryColor.value,\n            federationId: Number(federation?.value?.id),\n          }\n        });\n        \n        if (result.data?.updateDropzone?.dropzone) {\n          const { dropzone } = result.data.updateDropzone;\n          dispatch(\n            globalActions.setDropzone(dropzone)\n          );\n          dispatch(\n            snackbar.showSnackbar({ message: `Saved`, variant: \"success\" })\n          );\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationUpdateDropzone]);\n\n  return (\n    <ScrollView style={styles.container} contentContainerStyle={styles.content}>\n      <DropzoneForm />\n      <View style={styles.fields}>\n        <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n          Save\n        </Button>\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"white\",\n    display: \"flex\",\n  },\n  content: {\n    display: \"flex\",\n    flexGrow: 1,\n    alignItems: 'center',\n    paddingBottom: 56,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16,\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { StyleSheet, FlatList } from 'react-native';\nimport { Card, Title, FAB, Paragraph, List } from 'react-native-paper';\nimport { View } from '../../../components/Themed';\nimport { Query } from \"../../../graphql/schema\";\n\nimport { useNavigation, useRoute } from '@react-navigation/core';\nimport { useAppSelector } from '../../../redux';\nimport NoResults from '../../../components/NoResults';\n\n\nconst QUERY_PLANES = gql`\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n`;\n\nexport default function PlanesScreen() {\n  const state = useAppSelector(state => state.global);\n  const { data, loading, refetch } = useQuery<Query>(QUERY_PLANES, {\n    variables: {\n      dropzoneId: Number(state.currentDropzone?.id)\n    }\n  });\n  const navigation = useNavigation();\n  const route = useRoute();\n\n  // React.useEffect(() => {\n  //   if (route.name === \"PlanesScreen\") {\n  //     refetch();\n  //   }\n  // }, [route.name])\n \n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={data?.planes || []}\n        numColumns={1}\n        refreshing={loading}\n        onRefresh={() => refetch()}\n        style={{ flex: 1 }}\n        contentContainerStyle={{ flexGrow: 1 }}\n        ListEmptyComponent={() =>\n          <NoResults\n            title=\"No planes?\"\n            subtitle=\"You need to have at least one plane to manifest loads\"\n          />\n        }\n        renderItem={({ item }) =>\n          <List.Item\n            title={item.name}\n            onPress={() => navigation.navigate(\"UpdatePlaneScreen\", { plane: item })}\n            left={() => <List.Icon color=\"#000\" icon=\"airplane\" />}\n            right={() => <List.Icon color=\"#000\" icon=\"pencil\" />}\n          />\n        }\n      />\n      \n      <FAB\n        style={styles.fab}\n        small\n        icon=\"plus\"\n        onPress={() => navigation.navigate(\"CreatePlaneScreen\")}\n        label=\"New plane\"\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 8,\n    display: \"flex\"\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n  empty: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    height: \"100%\"\n  }\n});\n","import { useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, Checkbox, Menu, List, Divider } from 'react-native-paper';\nimport { xor } from \"lodash\";\nimport { Query } from '../../../graphql/schema';\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\n\nimport slice from \"./slice\";\n\nconst { actions } = slice;\n\n\nconst QUERY_EXTRAS = gql`\n  query QueryExtras(\n    $dropzoneId: Int!\n  ) {\n    extras(dropzoneId: $dropzoneId) {\n      id\n      cost\n      name\n\n      ticketTypes {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport default function TicketTypeForm() {\n  const state = useAppSelector(state => state.ticketTypeForm);\n  const dispatch = useAppDispatch();\n  const globalState = useAppSelector(state => state.global);\n\n  const [altitudeMenuOpen, setAltitudeMenuOpen] = React.useState(false);\n  const { data, loading, refetch } = useQuery<Query>(QUERY_EXTRAS, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id)\n    }\n  });\n\n  return ( \n    <ScrollView style={styles.fields} contentContainerStyle={{ paddingTop: 200 }}>\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Name\"\n        error={!!state.fields.name.error}\n        value={state.fields.name.value}\n        onChangeText={(newValue) => dispatch(actions.setField([\"name\", newValue]))}\n      />\n      <HelperText type={!!state.fields.name.error ? \"error\" : \"info\"}>\n        { state.fields.name.error || \"\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Price\"\n        error={!!state.fields.cost.value}\n        value={state.fields.cost?.value?.toString()}\n        onChangeText={(newValue) => dispatch(actions.setField([\"cost\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.cost.error ? \"error\" : \"info\"}>\n        { state.fields.cost.error || \"\" }\n      </HelperText>\n\n      <Menu\n        onDismiss={() => setAltitudeMenuOpen(false)}\n        visible={altitudeMenuOpen}\n        anchor={\n          <List.Item\n            onPress={() => {\n              setAltitudeMenuOpen(true);\n            }}\n            title={\n              [4000, 14000].includes(state.fields.altitude.value) ?\n                {\n                  \"14000\": \"Height\",\n                  \"4000\": \"Hop n Pop\",\n                }[state.fields.altitude.value.toString()] :\n                \"Custom\"\n            }\n            right={ () =>\n              <List.Icon icon={[4000, 14000].includes(state.fields.altitude.value) ?\n                {\n                  \"14000\": \"airplane\",\n                  \"4000\": \"parachute\",\n                }[state.fields.altitude.value.toString()] as string :\n                \"pencil-plus\" \n              } />\n            }\n          />\n        }>\n          <List.Item\n            onPress={() => {\n              dispatch(actions.setField([\"altitude\", 4000]));\n              setAltitudeMenuOpen(false);\n            }}\n            title=\"Hop n Pop\"\n            right={() => <List.Icon icon=\"parachute\" />}\n          />\n          <List.Item\n            onPress={() => {\n              dispatch(actions.setField([\"altitude\", 14000]));\n              setAltitudeMenuOpen(false);\n            }}\n            title=\"Height\"\n            right={() => <List.Icon icon=\"airplane-takeoff\" />}\n          />\n          <List.Item\n            onPress={() => {\n              dispatch(actions.setField([\"altitude\", 7000]));\n              setAltitudeMenuOpen(false);\n            }}\n            title=\"Other\"\n            right={() => <List.Icon icon=\"parachute\" />}\n          />\n      </Menu>\n\n      {\n        ![4000, 14000].includes(state.fields.altitude.value) && (\n          <TextInput\n            style={styles.field}\n            mode=\"outlined\"\n            label=\"Custom altitude\"\n            error={!!state.fields.altitude.value}\n            value={state.fields.altitude?.value?.toString()}\n            onChangeText={(newValue) => dispatch(actions.setField([\"altitude\", Number(newValue)]))}\n          />\n        )\n      }\n      <Checkbox.Item\n        label=\"Public manifesting\"\n        status={!!state.fields.allowManifestingSelf.value\n          ? \"checked\"\n          : \"unchecked\"\n        }\n        onPress={\n          () => dispatch(actions.setField([\"allowManifestingSelf\", !state.fields.allowManifestingSelf.value]))\n        }\n      />\n\n      <Divider />\n      <List.Subheader>Enabled ticket add-ons</List.Subheader>\n      {\n        data?.extras.map((extra) =>\n          <Checkbox.Item\n            label={extra.name!}\n            status={state.fields.extraIds.value.includes(Number(extra.id))\n              ? \"checked\"\n              : \"unchecked\"\n            }\n            onPress={\n              () => dispatch(actions.setField([\"extraIds\", xor(state.fields.extraIds.value, [Number(extra.id)])]))\n            }\n          />\n        )\n      }\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    width: \"70%\",\n    flex: 1,\n    \n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/ticket_type/slice\";\nimport { Mutation } from '../../../graphql/schema';\nimport TicketTypeForm from '../../../components/forms/ticket_type/TicketTypeForm';\nimport { useNavigation } from '@react-navigation/core';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_CREATE_TICKET_TYPE = gql`\n  mutation CreateTicketType(\n    $name: String,\n    $cost: Float,\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n  ){\n    createTicketType(input: {\n      attributes: {\n        name: $name,\n        cost: $cost,\n        dropzoneId: $dropzoneId\n        altitude: $altitude\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n`;\n\nexport default function CreateTicketTypeScreen() {\n  const { ticketTypeForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n\n  const [mutationCreateTicketType, data] = useMutation<Mutation>(MUTATION_CREATE_TICKET_TYPE);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    if (state.fields.name.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (state.fields.cost.value! < 1) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"cost\", \"Cost must be at least $1\"])\n      );\n    }\n\n    if (!state.fields.altitude.value) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"altitude\", \"Altitude must be specified\"])\n      );\n    }\n\n    return !hasError;\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, cost, allowManifestingSelf, altitude, extraIds } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationCreateTicketType({\n          variables: {\n            dropzoneId: Number(globalState.currentDropzone?.id),\n            name: name.value,\n            cost: cost.value,\n            altitude: altitude.value,\n            allowManifestingSelf: allowManifestingSelf.value,\n            extraIds: extraIds.value,\n          }\n        });\n        \n        if (result.data?.createTicketType?.ticketType) {\n          const { ticketType } = result.data.createTicketType;\n          dispatch(\n            snackbar.showSnackbar({ message: `Added ticket ${ticketType.name}`, variant: \"success\" })\n          );\n          navigation.goBack();\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationCreateTicketType]);\n\n  return (\n    <View style={styles.container}>\n        <TicketTypeForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/ticket_type/slice\";\nimport { Mutation, TicketType } from '../../../graphql/schema';\nimport TicketTypeForm from '../../../components/forms/ticket_type/TicketTypeForm';\nimport { useNavigation, useRoute } from '@react-navigation/core';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_UPDATE_TICKET_TYPE = gql`\n  mutation UpdateTicketType(\n    $id: Int!,\n    $name: String,\n    $cost: Float,\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n  ){\n    updateTicketType(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        cost: $cost,\n        dropzoneId: $dropzoneId\n        altitude: $altitude\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n`;\n\nexport default function UpdateTicketTypeScreen() {\n  const { ticketTypeForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n  const route = useRoute<{ key: string, name: string, params: { ticketType: TicketType }}>();\n  const ticketType = route.params!.ticketType;\n\n  React.useEffect(() => {\n    dispatch(actions.setOriginal(ticketType));\n  }, [ticketType?.id]);\n\n  const [mutationUpdateTicketType, data] = useMutation<Mutation>(MUTATION_UPDATE_TICKET_TYPE);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    if (state.fields.name.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (state.fields.cost.value! < 1) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"cost\", \"Cost must be at least $1\"])\n      );\n    }\n\n    if (!state.fields.altitude.value) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"altitude\", \"Altitude must be specified\"])\n      );\n    }\n\n    return !hasError;\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, cost, allowManifestingSelf, altitude, extraIds } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationUpdateTicketType({\n          variables: {\n            id: Number(state.original!.id!),\n            name: name.value,\n            cost: cost.value,\n            altitude: altitude.value,\n            allowManifestingSelf: allowManifestingSelf.value,\n            extraIds: extraIds.value,\n          }\n        });\n        \n        if (result.data?.updateTicketType?.ticketType) {\n          dispatch(\n            snackbar.showSnackbar({ message: `Saved`, variant: \"success\" })\n          );\n          navigation.goBack();\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationUpdateTicketType]);\n\n  return (\n    <View style={styles.container}>\n        <TicketTypeForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { ScrollView, StyleSheet } from 'react-native';\nimport { TextInput, HelperText, Checkbox, List } from 'react-native-paper';\nimport { xor } from \"lodash\";\nimport { Query } from '../../../graphql/schema';\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\n\nimport slice from \"./slice\";\n\nconst { actions } = slice;\n\n\nconst QUERY_TICKET_TYPES = gql`\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n`;\n\nexport default function ExtraForm() {\n  const state = useAppSelector(state => state.extraForm);\n  const dispatch = useAppDispatch();\n  const globalState = useAppSelector(state => state.global);\n  const { data, loading, refetch } = useQuery<Query>(QUERY_TICKET_TYPES, {\n    variables: {\n      dropzoneId: Number(globalState.currentDropzone?.id)\n    }\n  });\n\n  return ( \n    <ScrollView style={styles.fields} contentContainerStyle={{ paddingTop: 200 }}>\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Name\"\n        error={!!state.fields.name.error}\n        value={state.fields.name.value}\n        onChangeText={(newValue) => dispatch(actions.setField([\"name\", newValue]))}\n      />\n      <HelperText type={!!state.fields.name.error ? \"error\" : \"info\"}>\n        { state.fields.name.error || \"\" }\n      </HelperText>\n\n      <TextInput\n        style={styles.field}\n        mode=\"outlined\"\n        label=\"Price\"\n        error={!!state.fields.cost.value}\n        value={state.fields.cost?.value?.toString()}\n        onChangeText={(newValue) => dispatch(actions.setField([\"cost\", Number(newValue)]))}\n      />\n      <HelperText type={!!state.fields.cost.error ? \"error\" : \"info\"}>\n        { state.fields.cost.error || \"\" }\n      </HelperText>\n\n      <List.Subheader>\n        Compatible tickets\n      </List.Subheader>\n      {\n        data?.ticketTypes.map((ticket) =>\n          <Checkbox.Item\n            label={ticket.name!}\n            status={state.fields.ticketTypeIds.value.includes(Number(ticket.id))\n              ? \"checked\"\n              : \"unchecked\"\n            }\n            onPress={\n              () => dispatch(actions.setField([\"ticketTypeIds\", xor(state.fields.ticketTypeIds.value, [Number(ticket.id)])]))\n            }\n          />\n        )\n      }\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    width: \"70%\",\n    flex: 1,\n    \n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/extra/slice\";\nimport { Mutation } from '../../../graphql/schema';\nimport ExtraForm from '../../../components/forms/extra/ExtraForm';\nimport { useNavigation } from '@react-navigation/core';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_CREATE_extra = gql`\n  mutation CreateExtra(\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    createExtra(input: {\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n`;\n\nexport default function CreateExtraScreen() {\n  const { extraForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n\n  const [mutationCreateExtra, data] = useMutation<Mutation>(MUTATION_CREATE_extra);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    if (state.fields.name.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (Number(state.fields.cost.value) < 0) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"cost\", \"Price must be a number\"])\n      );\n    }\n\n\n    return !hasError;\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, cost, ticketTypeIds } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationCreateExtra({\n          variables: {\n            dropzoneId: Number(globalState.currentDropzone?.id),\n            name: name.value,\n            cost: cost.value,\n            ticketTypeIds: ticketTypeIds.value,\n          }\n        });\n        \n        if (result.data?.createExtra?.extra) {\n          const { extra } = result.data.createExtra;\n          dispatch(\n            snackbar.showSnackbar({ message: `Added extra ${extra.name}`, variant: \"success\" })\n          );\n          navigation.goBack();\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationCreateExtra]);\n\n  return (\n    <View style={styles.container}>\n        <ExtraForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { gql, useMutation } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch, dropzoneForm } from '../../../redux';\n\nimport { View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/extra/slice\";\nimport { Mutation, Extra } from '../../../graphql/schema';\nimport ExtraForm from '../../../components/forms/extra/ExtraForm';\nimport { useNavigation, useRoute } from '@react-navigation/core';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nconst MUTATION_UPDATE_EXTRA = gql`\n  mutation UpdateExtra(\n    $id: Int!,\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    updateExtra(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n`;\n\nexport default function UpdateExtraScreen() {\n  const { extraForm: state, global: globalState } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n  const route = useRoute<{ key: string, name: string, params: { extra: Extra }}>();\n  const extra = route.params!.extra;\n\n  React.useEffect(() => {\n    dispatch(actions.setOriginal(extra));\n  }, [extra?.id]);\n\n  const [mutationUpdateExtra, data] = useMutation<Mutation>(MUTATION_UPDATE_EXTRA);\n\n  const validate = React.useCallback((): boolean => {\n    let hasError = false;\n    if (state.fields.name.value.length < 3) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"name\", \"Name is too short\"])\n      );\n    }\n\n    if (Number(state.fields.cost.value) < 0) {\n      hasError = true;\n      dispatch(\n        actions.setFieldError([\"cost\", \"Price must be a number\"])\n      );\n    }\n\n\n    return !hasError;\n\n  }, [JSON.stringify(state.fields), dispatch]);\n\n  const onSave = React.useCallback(async () => {\n    const { name, cost, ticketTypeIds } = state.fields;\n\n    \n\n    if (validate()) {\n      try {\n        const result = await mutationUpdateExtra({\n          variables: {\n            id: Number(state.original!.id!),\n            dropzoneId: Number(globalState.currentDropzone?.id),\n            name: name.value,\n            cost: cost.value,\n            ticketTypeIds: ticketTypeIds.value,\n          }\n        });\n        \n        if (result.data?.updateExtra?.extra) {\n          dispatch(\n            snackbar.showSnackbar({ message: `Saved`, variant: \"success\" })\n          );\n          navigation.goBack();\n        }\n      } catch (error) {\n        dispatch(\n          snackbar.showSnackbar({ message: error.message, variant: \"error\" })\n        );\n      }\n    }\n    \n  }, [JSON.stringify(state.fields), dispatch, mutationUpdateExtra]);\n\n  return (\n    <View style={styles.container}>\n        <ExtraForm />\n        <View style={styles.fields}>\n          <Button mode=\"contained\" disabled={data.loading} onPress={onSave} loading={data.loading}>\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\",\n    marginBottom: 16\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { StyleSheet, FlatList } from 'react-native';\nimport { Card, Title, FAB, Paragraph, List, DataTable, ProgressBar } from 'react-native-paper';\nimport { View } from '../../../components/Themed';\nimport { Query } from \"../../../graphql/schema\";\n\nimport { useNavigation, useRoute } from '@react-navigation/core';\nimport { useAppSelector } from '../../../redux';\nimport NoResults from '../../../components/NoResults';\nimport usePalette from '../../../hooks/usePalette';\nimport global from '../../../redux/global';\n\n\nconst QUERY_TICKET_TYPE = gql`\n  query QueryExtra(\n    $dropzoneId: Int!\n  ) {\n    extras(dropzoneId: $dropzoneId) {\n      id\n      cost\n      name\n\n      ticketTypes {\n        id\n        altitude\n        name\n      }\n    }\n  }\n`;\n\nexport default function ExtrasScreen() {\n  const state = useAppSelector(state => state.global);\n  const { data, loading, refetch } = useQuery<Query>(QUERY_TICKET_TYPE, {\n    variables: {\n      dropzoneId: Number(state.currentDropzone?.id)\n    }\n  });\n  const navigation = useNavigation();\n  const route = useRoute();\n\n  // React.useEffect(() => {\n  //   if (route.name === \"PlanesScreen\") {\n  //     refetch();\n  //   }\n  // }, [route.name])\n \n\n  return (\n    <>\n    <ProgressBar visible={loading} indeterminate color={state.theme.colors.accent} />\n    <View style={styles.container}>\n      <DataTable>\n        <DataTable.Header>\n          <DataTable.Title>Name</DataTable.Title>\n          <DataTable.Title numeric>Cost</DataTable.Title>\n        </DataTable.Header>\n\n        { data?.extras?.map((extra) =>\n          <DataTable.Row>\n            <DataTable.Cell onPress={() => navigation.navigate(\"UpdateExtraScreen\", { extra })}>{extra.name}</DataTable.Cell>\n            <DataTable.Cell numeric>{extra.cost}</DataTable.Cell>\n          </DataTable.Row>\n        )}\n      </DataTable>\n      { !loading && !data?.extras?.length && (\n          <NoResults\n            title=\"No ticket addons\"\n            subtitle=\"You can add multiple addons to assign to tickets, e.g outside camera, or coach\"\n          />\n      )}\n      \n      <FAB\n        style={styles.fab}\n        small\n        icon=\"plus\"\n        onPress={() => navigation.navigate(\"CreateExtraScreen\")}\n        label=\"New ticket addon\"\n      />\n    </View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 8,\n    display: \"flex\"\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n  empty: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    height: \"100%\"\n  }\n});\n","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport SettingsScreen from '../../screens/authenticated/settings/SettingsScreen';\nimport DropzoneSettingsScreen from '../../screens/authenticated/settings/DropzoneSettingsScreen';\nimport TicketTypeSettingsScreen from '../../screens/authenticated/ticket_types/TicketTypesScreen';\nimport CreatePlaneScreen from '../../screens/authenticated/planes/CreatePlaneScreen';\nimport UpdatePlaneScreen from '../../screens/authenticated/planes/UpdatePlaneScreen';\nimport UpdateDropzoneScreen from '../../screens/authenticated/dropzones/UpdateDropzoneScreen';\nimport PlanesScreen from '../../screens/authenticated/planes/PlanesScreen';\n\nimport CreateTicketTypeScreen from '../../screens/authenticated/ticket_types/CreateTicketTypeScreen';\nimport UpdateTicketTypeScreen from '../../screens/authenticated/ticket_types/UpdateTicketTypeScreen';\n\nimport CreateExtraScreen from '../../screens/authenticated/extras/CreateExtraScreen';\nimport UpdateExtraScreen from '../../screens/authenticated/extras/UpdateExtraScreen';\nimport ExtrasScreen from '../../screens/authenticated/extras/ExtrasScreen';\n\n\nimport AppBar from '../AppBar';\nimport { Dropzone } from '../../graphql/schema';\n\n\nexport type ISettingsTabParams = {\n  SettingsScreen: undefined;\n  DropzoneSettingsScreen: undefined;\n  UpdateDropzoneScreen: { dropzone: Dropzone };\n  TicketTypeSettingsScreen: undefined;\n  CreatePlaneScreen: undefined;\n  UpdatePlaneScreen: undefined;\n  PlanesScreen: undefined;\n  PlaneScreen: undefined;\n  TicketTypesScreen: undefined;\n  CreateTicketTypeScreen: undefined;\n  UpdateTicketTypeScreen: undefined;\n  UpdateExtraScreen: undefined;\n  CreateExtraScreen: undefined;\n  ExtrasScreen: undefined;\n}\n\nconst Settings = createStackNavigator<ISettingsTabParams>();\n\nexport default function SettingsTab() {\n  return (\n    <Settings.Navigator\n      screenOptions={{\n        headerShown: true,\n        header: (props) => <AppBar {...props} />,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      <Settings.Screen name=\"SettingsScreen\" component={SettingsScreen} options={{ title: \"Settings\" }} />\n      <Settings.Screen name=\"DropzoneSettingsScreen\" component={DropzoneSettingsScreen} />\n      <Settings.Screen name=\"UpdateDropzoneScreen\" component={UpdateDropzoneScreen} />\n      <Settings.Screen name=\"PlanesScreen\" component={PlanesScreen} options={{ title: \"Planes\"}} />\n      <Settings.Screen name=\"CreatePlaneScreen\" component={CreatePlaneScreen} options={{ title: \"New plane\"}} />\n      <Settings.Screen name=\"UpdatePlaneScreen\" component={UpdatePlaneScreen} options={{ title: \"Edit plane\"}} />\n      <Settings.Screen name=\"TicketTypesScreen\" component={TicketTypeSettingsScreen} options={{ title: \"Ticket types\" }} />\n      <Settings.Screen name=\"CreateTicketTypeScreen\" component={CreateTicketTypeScreen} options={{ title: \"New ticket type\" }} />\n      <Settings.Screen name=\"UpdateTicketTypeScreen\" component={UpdateTicketTypeScreen} options={{ title: \"Edit ticket type\" }}/>\n      <Settings.Screen name=\"CreateExtraScreen\" component={CreateExtraScreen} options={{ title: \"Create ticket add-on\" }}/>\n      <Settings.Screen name=\"UpdateExtraScreen\" component={UpdateExtraScreen} options={{ title: \"Update ticket add-on\" }} />\n      <Settings.Screen name=\"ExtrasScreen\" component={ExtrasScreen} options={{ title: \"Ticket add-ons\" }} />\n    </Settings.Navigator>\n  );\n}\n","import { useQuery } from '@apollo/client';\nimport { useIsFocused, useNavigation, useNavigationState, useRoute } from '@react-navigation/core';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { List, ProgressBar } from 'react-native-paper';\n\nimport EditScreenInfo from '../../../components/EditScreenInfo';\nimport NoResults from '../../../components/NoResults';\nimport { Text, View } from '../../../components/Themed';\nimport { Query } from '../../../graphql/schema';\nimport { useAppDispatch, useAppSelector, usersActions } from '../../../redux';\n\n\n\nconst QUERY_DROPZONE_USERS = gql`\n  query QueryDropzoneUsersSearch(\n    $dropzoneId: Int!\n    $search: String\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(search: $search) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\nexport default function UsersScreen() {\n  const {global, usersScreen } = useAppSelector(state => state);\n  const dispatch = useAppDispatch();\n\n  const { data, loading } = useQuery<Query>(QUERY_DROPZONE_USERS, {\n    variables: {\n      dropzoneId: Number(global.currentDropzone?.id),\n      search: usersScreen.searchText,\n    }\n  });\n\n  const navigation = useNavigation();\n\n  const isFocused = useIsFocused();\n  React.useEffect(() => {\n    if (usersScreen.isSearchVisible) {\n      dispatch(usersActions.setSearchVisible(false));\n    }\n  }, [isFocused]);\n\n  return (\n    <View style={styles.container}>\n      <ProgressBar indeterminate color={global.theme.colors.accent} visible={loading} />\n      \n      { !data?.dropzone?.dropzoneUsers?.edges?.length && (\n        <NoResults title=\"No users\" subtitle=\"\" />\n      )}\n\n      { data?.dropzone?.dropzoneUsers?.edges?.map((edge) =>\n        <List.Item\n          title={edge?.node?.user.name}\n          description={edge?.node?.role?.name}\n          left={() => <List.Icon icon=\"account\" />}\n          onPress={() => navigation.navigate(\"UserProfileScreen\", { userId: edge?.node?.id })}\n        />\n      )}\n    </View>\n    \n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import React from \"react\";\nimport { Appbar, List, TextInput } from \"react-native-paper\";\nimport { StackHeaderProps } from \"@react-navigation/stack\";\nimport { gql } from \"@apollo/client\";\nimport { useAppDispatch, useAppSelector } from \"../../../redux\";\nimport { StyleSheet, View } from \"react-native\";\nimport { MaterialIcons } from \"@expo/vector-icons\";\n\n\n\ninterface ISearchableAppBar extends StackHeaderProps {\n  searchVisible: boolean;\n  searchText: string;\n  setSearchVisible(visible: boolean): void;\n  onSearch(text: string): void;\n}\n\n\nfunction AppBar({ navigation, previous, scene, onSearch, searchText, searchVisible, setSearchVisible }: ISearchableAppBar) {\n  const { currentDropzone, theme } = useAppSelector(state => state.global);\n  const dispatch = useAppDispatch();\n  \n  return (\n    <Appbar.Header>\n      {previous ? <Appbar.BackAction onPress={navigation.goBack} /> : null}\n      {searchVisible ? <Appbar.BackAction onPress={() => setSearchVisible(false)} /> : null}\n      {searchVisible\n        ? <View style={styles.inputContainer}>\n            <TextInput\n              style={styles.input}\n              value={searchText}\n              onChangeText={(text) => onSearch(text)}\n            />\n          </View>\n        : <Appbar.Content title={scene.descriptor.options.title} />\n      }\n      <MaterialIcons\n        name=\"search\"\n        onPress={() => setSearchVisible(!searchVisible)}\n        color=\"#FFFFFF\"\n        size={24}\n        style={styles.icon}\n      />\n    </Appbar.Header>\n  );\n}\n\nconst styles = StyleSheet.create({\n  inputContainer: {\n    flexGrow: 1\n  },\n  input: {\n    backgroundColor: \"transparent\",\n    height: \"100%\",\n    color: \"white\",\n    borderColor: \"none\"\n  },\n  icon: {\n    marginHorizontal: 8\n  },\n})\n\nexport default AppBar;","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport EditScreenInfo from '../../../components/EditScreenInfo';\nimport { Text, View } from '../../../components/Themed';\n\nexport default function UserRigScreen() {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Tab One</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n      <EditScreenInfo path=\"/screens/UserRigScreen.tsx\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport UsersScreen from '../../screens/authenticated/users/UsersScreen';\nimport SearchableAppBar from '../../screens/authenticated/users/AppBar';\nimport UserProfileScreen from '../../screens/authenticated/profile/UserProfileScreen';\nimport UserRigScreen from '../../screens/authenticated/rig/UserRigScreen';\nimport { useAppDispatch, useAppSelector, usersActions } from '../../redux';\nimport ProfileScreen from '../../screens/authenticated/profile/ProfileScreen';\n\nexport type ISettingsTabParams = {\n  UsersScreen: undefined;\n  UserRigScreen: undefined;\n  UserProfileScreen: undefined;\n}\n\nconst Settings = createStackNavigator<ISettingsTabParams>();\n\nexport default function SettingsTab() {\n  const { isSearchVisible, searchText } = useAppSelector(state => state.usersScreen);\n  const dispatch = useAppDispatch();\n\n  return (\n    <Settings.Navigator\n      screenOptions={{\n        headerShown: true,\n        header: (props) =>\n          <SearchableAppBar\n            {...props}\n            searchText={searchText}\n            searchVisible={isSearchVisible}\n            setSearchVisible={(visible) => dispatch(usersActions.setSearchVisible(visible))}\n            onSearch={(text) => dispatch(usersActions.setSearchText(text))}\n          />,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      <Settings.Screen name=\"UsersScreen\" component={UsersScreen} options={{ title: \"Dropzone users\" }} />\n      <Settings.Screen name=\"UserProfileScreen\" component={ProfileScreen} options={{ title: \"User\" }} />\n      <Settings.Screen name=\"UserRigScreen\" component={UserRigScreen} />\n    </Settings.Navigator>\n  );\n}\n","import { useTheme } from 'react-native-paper';\nimport { createMaterialBottomTabNavigator } from '@react-navigation/material-bottom-tabs';\nimport * as React from 'react';\nimport { Ionicons } from '@expo/vector-icons';\n\nimport ManifestTab from \"./tabs/manifest\";\nimport PackingTab from \"./tabs/packing\";\nimport ProfileTab from \"./tabs/profile\";\nimport SettingsTab from \"./tabs/settings\";\nimport UsersTab from \"./tabs/users\";\n\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport useRestriction from '../hooks/useRestriction';\n\nexport type IAuthenticatedTabParams = {\n  Manifest: undefined;\n  Profile: undefined;\n  Packing: undefined;\n  Users: undefined;\n  Settings: undefined;\n}\n\nfunction TabBarIcon(props: { name: React.ComponentProps<typeof Ionicons>['name']; color: string }) {\n  return <Ionicons size={30} style={{ marginBottom: -3 }} {...props} />;\n}\n\nconst BottomTab = createMaterialBottomTabNavigator<IAuthenticatedTabParams>();\n\nexport default function AuthenticatedTabBar() {\n  const theme = useTheme();\n\n  const canViewUsers = useRestriction(\"readUser\");\n  const canCreatePacks = useRestriction(\"createPackjob\");\n  const canManageDropzone = useRestriction(\"updateDropzone\");\n  \n  return (\n    <BottomTab.Navigator\n      initialRouteName=\"Manifest\"\n    >\n      <BottomTab.Screen\n        name=\"Manifest\"\n        component={ManifestTab}\n        options={{\n          tabBarIcon: \"airplane\"\n        }}\n      />\n      <BottomTab.Screen\n        name=\"Profile\"\n        component={ProfileTab}\n        options={{\n          tabBarIcon: \"account-circle\"\n        }}\n      />\n      { canCreatePacks && (\n        <BottomTab.Screen\n          name=\"Packing\"\n          component={PackingTab}\n          options={{\n            tabBarIcon: \"parachute\"\n          }}\n        />\n      )}\n      { canViewUsers && (\n        <BottomTab.Screen\n          name=\"Users\"\n          component={UsersTab}\n          options={{\n            tabBarIcon: \"account-group\"\n          }}\n        />\n      )}\n      \n      { canManageDropzone && (\n        <BottomTab.Screen\n          name=\"Settings\"\n          component={SettingsTab}\n          options={{\n            tabBarIcon: \"account-cog\"\n          }}\n        />\n      )}\n    </BottomTab.Navigator>\n  );\n}\n\n","import { useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { StyleSheet, FlatList, Dimensions } from 'react-native';\nimport { Card, Title, FAB, Paragraph } from 'react-native-paper';\nimport { View } from '../../../components/Themed';\nimport { globalActions, useAppDispatch, useAppSelector } from '../../../redux';\nimport { Query } from \"../../../graphql/schema\";\n\nimport { useNavigation } from '@react-navigation/core';\n\n\nconst QUERY_DROPZONES = gql`\n  query QueryDropzones {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n          banner\n          ticketTypes {\n            id\n            name\n            cost\n            allowManifestingSelf\n            currency\n          }\n          planes {\n            id\n            name,\n            registration,\n            minSlots,\n            maxSlots,\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default function DropzonesScreen() {\n  const dispatch = useAppDispatch();\n  const { data, loading, refetch } = useQuery<Query>(QUERY_DROPZONES);\n  const navigation = useNavigation();\n \n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={data?.dropzones?.edges || []}\n        numColumns={2}\n        \n        refreshing={loading}\n        onRefresh={() => refetch()}\n        style={{ flex: 1 }}\n        contentContainerStyle={{ flexGrow: 1 }}\n        ListEmptyComponent={() =>\n          <View style={styles.empty}>\n            <Title>No dropzones?</Title>\n            <Paragraph>\n              You can set one up!\n            </Paragraph>\n          </View>\n        }\n        renderItem={({ item }) =>\n          <Card\n            style={{\n              width: (Dimensions.get(\"window\").width / 2) - 32,\n              margin: 8\n            }}\n            onPress={async ()=> {\n              if (item?.node) {\n                dispatch(\n                  globalActions.setDropzone(item.node)\n                );\n              }\n            }}\n          >\n            <Card.Cover source={{ uri: item?.node?.banner as string }} />\n            <Card.Content>\n              <Title>{item?.node?.name}</Title>\n            </Card.Content>\n          </Card>\n        }\n      />\n      \n      <FAB\n        style={styles.fab}\n        small\n        icon=\"plus\"\n        onPress={() => navigation.navigate(\"CreateDropzoneScreen\")}\n        label=\"Create dropzone\"\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 8,\n    display: \"flex\"\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0,\n  },\n  empty: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    height: \"100%\"\n  }\n});\n","import { DocumentNode, useMutation } from \"@apollo/client\";\nimport { Maybe } from \"graphql/jsutils/Maybe\";\nimport { useCallback } from \"react\";\nimport { FieldError, Mutation } from \"./schema\";\n\nexport interface IAppMutation<Payload, InputType> {\n  loading: boolean;\n  mutate(variables: InputType): Promise<Maybe<Payload>>;\n}\n\nexport interface IAppMutationProps<Payload, InputType> {\n  onSuccess(payload: Payload): void;\n  onError?(message: string): void;\n  onFieldError?(field: string, value: string): void;\n}\n\nexport interface IFieldValidator<InputType> {\n  pattern?: RegExp;\n  callback?: (fields: InputType) => boolean,\n  message: string;\n}\n\nexport function isRequired(message: string) {\n  return {\n    message,\n    pattern: /.{1,}/\n  }\n}\n\nexport function isEmail(message: string) {\n  return {\n    message, \n    pattern: new RegExp(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/),\n  }\n}\n\n\nexport function isNumeric(message: string) {\n  return {\n    message,\n    pattern: /^\\d+/\n  }\n}\n\nexport function validates<T extends {}>(message: string, callback: (inputVariables: T) => boolean) {\n  return {\n    message,\n    callback,\n  }\n}\n\nexport function createMutation<InputType extends {}, Payload extends { fieldErrors?: Maybe<FieldError[]>, errors?: Maybe<string[]> }>(\n  mutation: DocumentNode,\n  options: {\n    // Get payload from root field in mutation\n    getPayload: (rootField: Mutation) => Maybe<Payload>,\n    fieldErrorMap?: {\n      // Map serverFieldName: tsFieldName\n      [k: string]: keyof InputType\n    },\n\n    // All validators patterns must be truthy before\n    // mutation will be executed, or onFieldError will fire\n    validates?: {\n      [Key in keyof InputType]?: IFieldValidator<InputType>[];\n    }\n  },\n) {\n  const { getPayload, fieldErrorMap, validates} = options;\n\n  return function useAppMutation(opts: IAppMutationProps<Payload, InputType>): IAppMutation<Payload, InputType> {\n    const { onFieldError, onSuccess, onError } = opts;\n    \n    const [mutate, { data, loading, error}] = useMutation(mutation);\n\n\n    const onMutate = useCallback(async (variables: InputType): Promise<Maybe<Payload>> => {\n      \n\n      function validate() {\n        let hasErrors = false;\n\n        if (validates) {\n          Object.keys(variables).forEach((x) => {\n            const variable = x as keyof InputType;\n  \n            if (variable in (options.validates || {})) {\n              validates[variable]?.forEach((validator) => {\n                if (validator.pattern) {\n                  if (!validator.pattern.test(`${variables[variable]}`)) {\n                    hasErrors = true;\n                    \n                    if (onFieldError) {\n                      onFieldError(variable as string, validator.message);\n                    }\n                  }\n                } else if (validator.callback && !validator.callback(variables)) {\n                  hasErrors = true;\n                  if (onFieldError) {\n                    onFieldError(variable as string, validator.message);\n                  }\n                }\n                \n              });\n            }\n          })\n        }\n\n        return !hasErrors;\n      }\n\n      if (!validate()) {\n        return;\n      }\n      try {\n        const result = await mutate({\n          variables\n        });\n\n        const payload = getPayload(result.data);\n  \n        payload?.fieldErrors?.map(({ field, message }) => {\n          const fieldName = field in (fieldErrorMap || {}) ? options!.fieldErrorMap![field] : field;\n\n          if (opts.onFieldError) {\n            opts.onFieldError(`${fieldName}`, message);\n          }\n        });\n        \n        if (payload?.errors?.length && onError) {\n          payload.errors?.map((message) => onError(message));\n          return;\n        }\n        if (!payload?.fieldErrors?.length) {\n          onSuccess(payload!);\n        }\n  \n        return payload;\n      } catch(error) {\n        if (onError) {\n          onError(error.message);\n        }\n      }\n      \n      return;\n    }, [onFieldError, onError, onSuccess,, mutate, getPayload, JSON.stringify(data)]);\n\n    return {\n      loading,\n      mutate: onMutate,\n    }    \n  }\n}","import gql from \"graphql-tag\";\nimport { createMutation, isRequired } from \"../createMutation\";\nimport { CreateDropzonePayload, Mutation } from \"../schema\";\n\n\nexport const MUTATION_CREATE_DROPZONE = gql`\nmutation CreateDropzone(\n  $name: String!,\n  $banner: String!,\n  $federationId: Int!\n){\n  createDropzone(input: { attributes: { name: $name, banner: $banner, federationId: $federationId }}) {\n    dropzone {\n      id\n      name\n      banner\n\n      federation {\n        id\n        name\n      }\n    }\n  }\n}\n`;\n\n\nexport default createMutation<{\n  name: string,\n  banner: string,\n  federationId: number,\n}, CreateDropzonePayload>(\n  MUTATION_CREATE_DROPZONE, {\n    getPayload: (result) => result.createDropzone,\n    fieldErrorMap: {\n      federation: \"federationId\",\n    },\n    validates: {\n      name: [\n        isRequired(\"Name is required\")\n      ]\n    }\n  }\n)","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { useNavigation } from '@react-navigation/core';\nimport { useAppSelector, useAppDispatch, snackbarActions } from '../../../redux';\n\nimport { Text, View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"../../../components/forms/dropzone/slice\";\nimport { Mutation } from '../../../graphql/schema';\nimport DropzoneForm from '../../../components/forms/dropzone/DropzoneForm';\nimport useMutationCreateDropzone from '../../../graphql/hooks/useMutationCreateDropzone';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\n\n\nexport default function SignupScreen() {\n  const state = useAppSelector(state => state.dropzoneForm);\n  const dispatch = useAppDispatch();\n\n  const navigation = useNavigation();\n\n  const createDropzone = useMutationCreateDropzone({\n    onError: (e: string) => dispatch(snackbarActions.showSnackbar({ message: e, variant: \"error\"})),\n    onFieldError: (field, error) =>\n      dispatch(actions.setFieldError([field as string, error])),\n    onSuccess: (payload) => dispatch(globalActions.setDropzone(payload.dropzone!)),\n  })\n\n  return (\n    <View style={styles.container}>\n        <DropzoneForm />\n        <View style={styles.fields}>\n          <Button\n            mode=\"contained\"\n            disabled={createDropzone.loading}\n            loading={createDropzone.loading}\n            onPress={() => \n              createDropzone.mutate({\n                name: state.fields.name.value!,\n                banner: state.fields.banner.value!,\n                federationId: Number(state.fields.federation.value!.id),\n              })\n            }\n          >\n            Save\n          </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\"\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport DropzonesScreen from \"../screens/authenticated/dropzones/DropzonesScreen\";\nimport CreateDropzoneScreen from \"../screens/authenticated/dropzones/CreateDropzoneScreen\";\n\n\nconst Stack = createStackNavigator();\n\nexport default function Limbo() {\n  return (\n    <Stack.Navigator\n      screenOptions={{\n        headerShown: false,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n      initialRouteName=\"Dropzones\"\n    >\n      <Stack.Screen name=\"DropzonesScreen\" component={DropzonesScreen} />\n      <Stack.Screen name=\"CreateDropzoneScreen\" component={CreateDropzoneScreen} />\n    </Stack.Navigator>\n  );\n}\n","import React, { useCallback } from 'react';\nimport { StyleSheet } from 'react-native';\nimport { Button, HelperText, TextInput } from \"react-native-paper\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { gql, useMutation } from '@apollo/client';\n\nimport { Text, View } from '../../../components/Themed';\nimport { actions as snackbar } from '../../../components/notifications';\nimport { useAppSelector, useAppDispatch, globalActions, snackbarActions } from '../../../redux';\n\nimport slice from \"./slice\";\nimport { Mutation } from '../../../graphql/schema';\n\nconst { actions } = slice;\n\nconst MUTATION_LOG_IN = gql`\n  mutation UserLogin($email: String!, $password: String!) {\n    userLogin(email: $email, password: $password) {\n      authenticatable {\n        id\n        email\n        name\n        phone\n        createdAt\n        updatedAt\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n`;\n\nexport default function LoginScreen() {\n  const state = useAppSelector(state => state.login);\n  const dispatch = useAppDispatch();  \n  const navigation = useNavigation();\n  const [mutationLogin, data] = useMutation<Mutation>(MUTATION_LOG_IN);\n\n  const onLogin = useCallback(\n    async () => {\n      const emailRegex = new RegExp(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n      let hasError = false;\n\n      if (!state.fields.email.value) {\n        hasError = true;\n        dispatch(\n          actions.setEmailError(\"Email is required\")\n        );\n      }\n\n      if (!state.fields.password.value) {\n        hasError = true;\n        dispatch(\n          actions.setPasswordError(\"Password is required\")\n        );\n      }\n\n      if (!emailRegex.test(state.fields.email.value)) {\n        hasError = true;\n        dispatch(\n          actions.setEmailError(\"Please enter a valid email\")\n        );\n      }\n\n      if (!hasError) {\n        try {\n          const result = await mutationLogin({\n            variables: {\n              email: state.fields.email.value,\n              password: state.fields.password.value\n            }\n          });\n\n          console.log({ result });\n\n          if (result?.data?.userLogin?.authenticatable && result?.data?.userLogin?.credentials) {\n            dispatch(\n              globalActions.setCredentials(result.data.userLogin.credentials)\n            );\n            dispatch(\n              globalActions.setUser(result.data.userLogin.authenticatable)\n            );\n          }\n        } catch (e) {\n          dispatch(snackbarActions.showSnackbar({ message: e.message, variant: \"error\" }));\n        }\n      }\n    },\n    [mutationLogin, JSON.stringify(state.fields)],\n  )\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Sign in</Text>\n\n      <View style={styles.fields}>\n        <TextInput\n          label=\"Email\"\n          mode=\"outlined\"\n          value={state.fields.email.value}\n          onChangeText={(newValue) => {\n            dispatch(actions.setEmail(newValue));\n          }}\n        />\n        <HelperText type=\"error\">\n          {state.fields.email.error || \" \"}\n        </HelperText>\n\n        <TextInput\n          label=\"Password\"\n          mode=\"outlined\"\n          value={state.fields.password.value}\n          secureTextEntry\n          onChangeText={(newValue) => {\n            dispatch(actions.setPassword(newValue));\n          }}\n          error={!!state.fields.password.error}\n        />\n        <HelperText type=\"error\">\n          {state.fields.password.error || \" \"}\n        </HelperText>\n        <Button mode=\"contained\" style={styles.button} onPress={onLogin} loading={data.loading}>\n          Log in\n        </Button>\n\n        <Button style={styles.button} onPress={() => navigation.navigate(\"SignUpScreen\")}>\n          Sign up\n        </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    marginBottom: 10,\n  },\n  button: {\n    marginTop: 10,\n    width: \"100%\"\n  }\n});\n","import gql from \"graphql-tag\";\nimport { createMutation, isEmail, isRequired, validates } from \"../createMutation\";\nimport { MutationUserSignUpArgs, UserSignUpPayload } from \"../schema\";\n\n\nexport const MUTATION_USER_SIGNUP = gql`\n  mutation UserSignUp(\n    $email: String!,\n    $password: String!,\n    $passwordConfirmation: String!\n    $name: String!\n    $phone: String!\n    $exitWeight: Float!\n    $licenseId: Int\n  ){\n    userSignUp(\n      email: $email,\n      password: $password,\n      passwordConfirmation: $passwordConfirmation,\n      exitWeight: $exitWeight,\n      name: $name,\n      phone: $phone,\n      licenseId: $licenseId\n    ) {\n      authenticatable {\n        createdAt,\n        email,\n        id,\n        name,\n        phone,\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n`;\n\n\nexport default createMutation<MutationUserSignUpArgs, UserSignUpPayload>(\n  MUTATION_USER_SIGNUP, {\n    getPayload: (result) => result.userSignUp,\n    fieldErrorMap: {\n      license: \"licenseId\",\n    },\n    validates: {\n      name: [\n        isRequired(\"Name is required\")\n      ],\n      email: [\n        isEmail(\"Please enter a valid email\"),\n      ],\n      passwordConfirmation: [\n        validates(\n          \"Password must have 1 uppercase, 1 lowercase, 1 digit and be at least 8 characters\",\n          (fields) => /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}.*$/.test(fields.passwordConfirmation)\n        ),\n        validates(\n          \"Passwords don't match\",\n          (fields) => fields.password === fields.passwordConfirmation\n        )\n      ]\n    }\n  }\n);","import * as React from 'react';\nimport { StyleSheet } from 'react-native';\nimport { TextInput, Button, HelperText } from 'react-native-paper';\nimport { useAppSelector, useAppDispatch } from '../../../redux';\n\nimport { Text, View } from '../../../components/Themed';\nimport { actions as snackbar } from \"../../../components/notifications\";\nimport globalSlice from \"../../../redux/global\";\n\nimport slice from \"./slice\";\nimport useMutationSignUp from '../../../graphql/hooks/useMutationSignUp';\n\nconst { actions } = slice;\nconst { actions: globalActions } = globalSlice;\n\n\nexport default function SignupScreen() {\n  const state = useAppSelector(state => state.signup);\n  const dispatch = useAppDispatch();\n\n  const { loading, mutate: onSignUp } = useMutationSignUp({\n    onSuccess: (payload) => {\n      if (payload.credentials) {\n        dispatch(\n          globalActions.setCredentials(payload.credentials)\n        );\n        dispatch(\n          globalActions.setUser(payload.authenticatable!)\n        );\n      }\n    },\n    onFieldError: (field, value) =>\n      dispatch(\n        actions.setFieldError([field as any, value])\n      )\n  });\n\n  \n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Sign up</Text>\n      <View style={styles.fields}>\n        <TextInput\n          style={styles.field}\n          mode=\"outlined\"\n          label=\"Name\"\n          error={!!state.fields.name.error}\n          value={state.fields.name.value}\n          onChangeText={(newValue) => dispatch(actions.setField([\"name\", newValue]))}\n        />\n        <HelperText type=\"error\">\n          { state.fields.name.error || \"\" }\n        </HelperText>\n\n        <TextInput\n          style={styles.field}\n          mode=\"outlined\"\n          label=\"Exit weight\"\n          error={!!state.fields.exitWeight.error}\n          value={state.fields.exitWeight?.value?.toString() || \"\"}\n          keyboardType=\"numbers-and-punctuation\"\n          right={() => <TextInput.Affix text=\"kg\" />}\n          onChangeText={(newValue) => dispatch(actions.setField([\"exitWeight\", parseFloat(newValue)]))}\n        />\n        \n        <HelperText type={!!state.fields.exitWeight.error ? \"error\" : \"info\"}>\n          { state.fields.exitWeight.error || \"\" }\n        </HelperText>\n\n        <TextInput\n          style={styles.field}\n          mode=\"outlined\"\n          label=\"Email\"\n          error={!!state.fields.email.error}\n          value={state.fields.email.value}\n          onChangeText={(newValue) => dispatch(actions.setField([\"email\", newValue]))}\n        />\n\n        <HelperText type=\"error\">\n          { state.fields.email.error || \"\" }\n        </HelperText>\n\n        <TextInput\n          style={styles.field}\n          mode=\"outlined\"\n          label=\"Phone\"\n          error={!!state.fields.phone.error}\n          value={state.fields.phone.value}\n          onChangeText={(newValue) => dispatch(actions.setField([\"phone\", newValue]))}\n        />\n        <HelperText type=\"error\">\n          { state.fields.phone.error || \"\" }\n        </HelperText>\n\n        <TextInput\n          style={styles.field}\n          mode=\"outlined\"\n          label=\"Password\"\n          error={Boolean(state.fields.password.error || state.fields.passwordConfirmation.error)}\n          textContentType=\"newPassword\"\n          secureTextEntry\n          passwordRules=\"required: upper; required: lower; required: digit; minlength: 8;\"\n          value={state.fields.password.value}\n          onChangeText={(newValue) => dispatch(actions.setField([\"password\", newValue]))}\n        />\n\n        <HelperText type=\"error\">\n          { state.fields.password.error || \"\" }\n        </HelperText>\n\n        <TextInput\n          style={styles.field}\n          mode=\"outlined\"\n          label=\"Repeat password\"\n          error={Boolean(state.fields.password.error || state.fields.passwordConfirmation.error)}\n          textContentType=\"newPassword\"\n          secureTextEntry\n          passwordRules=\"required: upper; required: lower; required: digit; minlength: 8;\"\n          value={state.fields.passwordConfirmation.value}\n          onChangeText={(newValue) => dispatch(actions.setField([\"passwordConfirmation\", newValue]))}\n        />\n        <HelperText type=\"error\">\n          { state.fields.passwordConfirmation.error || \"\" }\n        </HelperText>\n\n        <Button\n          mode=\"contained\"\n          onPress={() =>\n            onSignUp({\n              email: state.fields.email.value,\n              name: state.fields.name.value,\n              exitWeight: state.fields.exitWeight.value,\n              password: state.fields.password.value,\n              passwordConfirmation: state.fields.passwordConfirmation.value,\n              licenseId: Number(state.fields.license?.value?.id) || null,\n              phone: state.fields.phone.value,\n            })\n          }\n          loading={loading}\n        >\n          Sign up\n        </Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n  fields: {\n    width: \"70%\"\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport LoginScreen from '../screens/unauthenticated/login/LoginScreen';\nimport SignUpScreen from '../screens/unauthenticated/signup/SignUpScreen';\n\n\n// A root stack navigator is often used for displaying modals on top of all other content\n// Read more here: https://reactnavigation.org/docs/modal\nconst Stack = createStackNavigator();\n\nexport default function Unauthenticated() {\n  return (\n    <Stack.Navigator\n      screenOptions={{\n        headerShown: false,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n      initialRouteName=\"LoginScreen\"\n    >\n      <Stack.Screen name=\"LoginScreen\" component={LoginScreen} />\n      <Stack.Screen name=\"SignUpScreen\" component={SignUpScreen} />\n    </Stack.Navigator>\n  );\n}\n","import { NavigationContainer, DefaultTheme, DarkTheme } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nimport NotFoundScreen from '../screens/NotFoundScreen';\nimport AuthenticatedRoutes from './Authenticated';\nimport LimboRoutes from './LimboRoutes';\nimport UnauthenticatedRoutes from './Unauthenticated';\nimport { useAppSelector } from '../redux/store';\nimport AppBar from \"./AppBar\";\n\nexport type TRootNavigatorRouteParams = {\n  Authenticated: undefined;\n  Unauthenticated: undefined;\n  Dropzones: undefined;\n  NotFound: undefined;\n}\n// A root stack navigator is often used for displaying modals on top of all other content\n// Read more here: https://reactnavigation.org/docs/modal\nconst Stack = createStackNavigator<TRootNavigatorRouteParams>();\n\nexport default function RootNavigator() {\n  const globalState = useAppSelector(state => state.global);\n\n  \n  return (\n    <Stack.Navigator\n      screenOptions={{\n        headerShown: false,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      {\n        globalState.credentials\n          ? (\n            globalState.currentDropzone\n              ? <Stack.Screen name=\"Authenticated\" component={AuthenticatedRoutes} /> :\n                <Stack.Screen name=\"Dropzones\" component={LimboRoutes} />\n          ) : (\n            <Stack.Screen name=\"Unauthenticated\" component={UnauthenticatedRoutes} />\n        )\n      }\n      <Stack.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\n    </Stack.Navigator>\n  );\n}\n","import { StatusBar } from 'expo-status-bar';\nimport React from 'react';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from 'redux-persist/integration/react'\nimport { Provider as MaterialProvider, ActivityIndicator } from \"react-native-paper\"\nimport { Platform, View } from 'react-native';\nimport { NavigationContainer } from '@react-navigation/native';\n\nimport Apollo from \"./graphql/Apollo\";\nimport { store, persistor, useAppSelector } from \"./redux/store\";\n\nimport useCachedResources from './hooks/useCachedResources';\nimport useColorScheme from './hooks/useColorScheme';\nimport Notifications from './components/notifications/Notifications';\nimport LinkingConfiguration from './navigation/Routes';\nimport RootNavigator from \"./navigation/RootNavigator\";\n\n\n\n\nfunction Content() {\n  const state = useAppSelector(state => state.global);\n  return (\n    <Apollo>\n      <MaterialProvider theme={state.theme}>\n        <SafeAreaProvider>\n          <NavigationContainer\n            linking={LinkingConfiguration}\n            theme={state.theme}>\n            <RootNavigator />\n          </NavigationContainer>\n\n          <StatusBar />\n          <Notifications />\n        </SafeAreaProvider>\n    </MaterialProvider>\n    </Apollo>\n  )\n}\nexport default function App() {\n  const isLoadingComplete = useCachedResources();\n\n\n  if (!isLoadingComplete) {\n    return null;\n  } else {\n    return (\n      <Provider store={store}>\n          <PersistGate\n            persistor={persistor}\n            loading={\n              <View style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\" }}>\n                <ActivityIndicator size=\"large\" />\n              </View>\n          }>\n            <Content />\n          </PersistGate>\n        </Provider>\n    );\n  }\n}\n","import { Ionicons } from '@expo/vector-icons';\nimport * as Font from 'expo-font';\nimport * as SplashScreen from 'expo-splash-screen';\nimport * as React from 'react';\n\nexport default function useCachedResources() {\n  const [isLoadingComplete, setLoadingComplete] = React.useState(false);\n\n  // Load any resources or data that we need prior to rendering the app\n  React.useEffect(() => {\n    async function loadResourcesAndDataAsync() {\n      try {\n        SplashScreen.preventAutoHideAsync();\n\n        // Load fonts\n        await Font.loadAsync({\n          ...Ionicons.font,\n          'space-mono': require('../assets/fonts/SpaceMono-Regular.ttf'),\n        });\n      } catch (e) {\n        // We might want to provide this error information to an error reporting service\n        console.warn(e);\n      } finally {\n        setLoadingComplete(true);\n        SplashScreen.hideAsync();\n      }\n    }\n\n    loadResourcesAndDataAsync();\n  }, []);\n\n  return isLoadingComplete;\n}\n","module.exports = __webpack_public_path__ + \"./fonts/SpaceMono-Regular.ttf\";"],"sourceRoot":""}