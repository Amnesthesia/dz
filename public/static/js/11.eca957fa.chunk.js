(this.webpackJsonp=this.webpackJsonp||[]).push([[11],{489:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var r=t(9),l=t.n(r),a=t(0),i=t(165),o=t(52),c=t(496),u=t.n(c),s=(t(497),t(493));function d(e){var n=a.useState(!1),t=l()(n,2),r=t[0],c=t[1];a.useCallback((function(){c(!1)}),[c]),a.useCallback((function(n){var t=n.date;c(!1),e.onChange(t.getTime()/1e3)}),[c,e.onChange]);return a.createElement(a.Fragment,null,a.createElement(i.a,{onDismiss:function(){return c(!1)},visible:r,anchor:a.createElement(o.b.Item,{onPress:function(){return c(!0)},disabled:!!e.disabled,title:e.label,description:e.timestamp?Object(s.a)(1e3*e.timestamp,"yyyy/MM/dd"):"No date selected",left:function(){return a.createElement(o.b.Icon,{icon:"calendar"})}})},a.createElement(u.a,{selectedDays:e.timestamp?[new Date(1e3*e.timestamp)]:[],onDayClick:function(n){e.onChange(n.getTime()/1e3),c(!1)}})))}},499:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var r=t(6),l=t.n(r),a=t(0),i=t.n(a),o=t(2),c=t(250),u=t(221),s=t(52),d=t(222),f=t(170),p=t(489);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){l()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function b(e){var n,t,r,l,a,m,b,v,y=Object(f.a)("actAsRigInspector");return null!=(n=e.config)&&n.valueType&&"string"===(null==(t=e.config)?void 0:t.valueType)?i.a.createElement(o.a,{style:{flex:1}},i.a.createElement(c.a,{mode:"outlined",disabled:!y,style:{marginVertical:8},value:e.value,onChangeText:function(n){return e.onChange(g(g({},e.config),{},{value:n}))},label:e.config.label||""}),i.a.createElement(u.a,{type:"info"},e.config.description||"No description")):null!=(r=e.config)&&r.valueType&&"boolean"===(null==(l=e.config)?void 0:l.valueType)?i.a.createElement(s.b.Item,{title:e.config.label||"",disabled:!y,description:e.config.description,style:{marginVertical:8},right:function(){return i.a.createElement(d.a.Android,{status:e.value?"checked":"unchecked"})},onPress:function(){return e.onChange(g(g({},e.config),{},{value:!e.value}))}}):null!=(a=e.config)&&a.valueType&&"integer"===(null==(m=e.config)?void 0:m.valueType)?i.a.createElement(o.a,{style:{flex:1}},i.a.createElement(c.a,{disabled:!y,value:e.value,mode:"outlined",onChangeText:function(n){return e.onChange(g(g({},e.config),{},{value:n}))},label:e.config.label||"",keyboardType:"number-pad",style:{marginVertical:8}}),i.a.createElement(u.a,{type:"info"},e.config.description||"No description")):null!=(b=e.config)&&b.valueType&&"date"===(null==(v=e.config)?void 0:v.valueType)?i.a.createElement(o.a,{style:{flex:1}},i.a.createElement(p.a,{disabled:!y,timestamp:Number(e.value),onChange:function(n){return e.onChange(g(g({},e.config),{},{value:n.toString()}))},label:e.config.label||""}),i.a.createElement(u.a,{type:"info"},e.config.description||"No description")):null}},541:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return J}));var r=t(9),l=t.n(r),a=t(71),i=t.n(a),o=t(11),c=t.n(o),u=t(49),s=t(72),d=t(0),f=t(111),p=t(116),m=t(23),g=t.n(m),b=t(6),v=t.n(b),y=t(1),O=t(2),E=t(21),h=t(499),T=t(121),j=t(304),I=t(154),P=t(142),w=t(250),C=t(222),k=t(318);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){v()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(){var e,n=Object(E.l)((function(e){return e})).rigInspectionTemplate,t=d.useState(null),r=l()(t,2),a=r[0],i=r[1],o=d.useState(!1),c=l()(o,2),u=c[0],s=c[1],f=Object(E.k)();return d.createElement(d.Fragment,null,null==(e=n.fields)?void 0:e.map((function(e,t){return d.createElement(d.Fragment,null,d.createElement(O.a,{style:{display:"flex",flexDirection:"row",alignItems:"center"}},d.createElement(O.a,{style:{flexGrow:1},onTouchEnd:function(){return i(D(D({},e),{},{index:t}))}},d.createElement(h.a,{config:e,value:(null==e?void 0:e.value)||"",onChange:function(){return null}})),d.createElement(T.a,{icon:"delete",onPress:function(){return f(E.g.setFields(n.fields.filter((function(e,n){return n!==t}))))}})),d.createElement(j.a,null))})),d.createElement(I.a,null,d.createElement(P.a,{visible:!!a},d.createElement(P.a.Title,null,"New field"),d.createElement(P.a.Content,null,d.createElement(w.a,{label:"Name",mode:"outlined",value:null==a?void 0:a.label,onChangeText:function(e){return i(D(D({},a),{},{label:e}))}}),d.createElement(w.a,{label:"Description",placeholder:"optional",mode:"outlined",value:null==a?void 0:a.description,onChangeText:function(e){return i(D(D({},a),{},{description:e}))}}),d.createElement(C.a.Item,{label:"This is a required field",mode:"android",onPress:function(){return i(D(D({},a),{},{isRequired:!(null!=a&&a.isRequired)}))},status:null!=a&&a.isRequired?"checked":"unchecked"})),d.createElement(P.a.Actions,null,d.createElement(p.a,{onPress:function(){return i(null)}},"Cancel"),d.createElement(p.a,{onPress:function(){void 0!==(null==a?void 0:a.index)?f(E.g.setFields(n.fields.map((function(e,n){return n===a.index?a:e})))):f(E.g.setFields([].concat(g()(n.fields),[a]))),i(null)}},"Save"))),d.createElement(k.a.Group,{open:u,visible:!0,icon:u?"close":"plus",actions:[{icon:"pencil",label:"Text",onPress:function(){return i({valueType:"string"})}},{icon:"calendar",label:"Date",onPress:function(){return i({valueType:"date"})}},{icon:"counter",label:"Number",onPress:function(){return i({valueType:"integer"})}},{icon:"checkbox-marked-circle-outline",label:"Checkbox",onPress:function(){return i({valueType:"boolean"})}}],onStateChange:function(e){var n=e.open;return s(n)}})))}y.a.create({fields:{flex:1},field:{marginBottom:8}});var z,N,F=t(169),$=t(170),R=Object(s.a)(z||(z=i()(["\n  query RigInspection($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      rigInspectionTemplate {\n        id\n        name\n        definition\n      }\n    }\n  }\n"]))),q=Object(s.a)(N||(N=i()(["\n  mutation UpdateRigInspectionTemplate(\n    $dropzoneId: Int,\n    $formId: Int,\n    $definition: String\n  ) {\n    updateFormTemplate(input: {\n      id: $formId\n      attributes: {\n        dropzoneId: $dropzoneId,\n        definition: $definition\n      }\n    }) {\n      formTemplate {\n        id\n        name\n        definition\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"])));function J(){var e,n,t,r,a=Object(E.l)((function(e){return e})),i=a.global,o=a.rigInspectionTemplate,s=Object(E.k)(),m=Object(u.useQuery)(R,{variables:{dropzoneId:Number(null==i||null==(e=i.currentDropzone)?void 0:e.id)}}),g=m.data,b=(m.loading,Object($.a)("updateFormTemplate")),v=Object(u.useMutation)(q),y=l()(v,2),O=y[0],h=y[1];d.useEffect((function(){var e;null!=g&&null!=(e=g.dropzone)&&e.rigInspectionTemplate&&s(E.g.setOriginal(g.dropzone.rigInspectionTemplate))}),[JSON.stringify(null==g||null==(n=g.dropzone)?void 0:n.rigInspectionTemplate)]);var T=d.useCallback((function(){var e;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.a.awrap(O({variables:{formId:Number(null==g?void 0:g.dropzone.rigInspectionTemplate.id),dropzoneId:Number(null==g||null==(e=g.dropzone)?void 0:e.id),definition:JSON.stringify(o.fields)}}));case 3:s(E.j.showSnackbar({message:"Template saved",variant:"success"})),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),s(E.j.showSnackbar({message:n.t0.message,variant:"error"}));case 9:case"end":return n.stop()}}),null,null,[[0,6]],Promise)}),[JSON.stringify(o.fields),null==o||null==(t=o.original)?void 0:t.id,null==i||null==(r=i.currentDropzone)?void 0:r.id]);return d.createElement(F.a,null,d.createElement(f.a,{style:{width:"100%"}},d.createElement(f.a.Title,{title:"Rig Inspection Form Template"}),d.createElement(f.a.Content,null,d.createElement(S,null)),d.createElement(f.a.Actions,null,d.createElement(p.a,{disabled:!b,mode:"contained",loading:h.loading,onPress:function(){return T()},style:{width:"100%"}},"Save template"))))}}}]);
//# sourceMappingURL=11.eca957fa.chunk.js.map