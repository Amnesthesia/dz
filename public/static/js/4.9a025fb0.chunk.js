(this.webpackJsonp=this.webpackJsonp||[]).push([[4],{489:function(e,n,r){"use strict";r.d(n,"a",(function(){return d}));var t=r(9),l=r.n(t),a=r(0),i=r(165),o=r(52),s=r(496),u=r.n(s),c=(r(497),r(493));function d(e){var n=a.useState(!1),r=l()(n,2),t=r[0],s=r[1];a.useCallback((function(){s(!1)}),[s]),a.useCallback((function(n){var r=n.date;s(!1),e.onChange(r.getTime()/1e3)}),[s,e.onChange]);return a.createElement(a.Fragment,null,a.createElement(i.a,{onDismiss:function(){return s(!1)},visible:t,anchor:a.createElement(o.b.Item,{onPress:function(){return s(!0)},disabled:!!e.disabled,title:e.label,description:e.timestamp?Object(c.a)(1e3*e.timestamp,"yyyy/MM/dd"):"No date selected",left:function(){return a.createElement(o.b.Icon,{icon:"calendar"})}})},a.createElement(u.a,{selectedDays:e.timestamp?[new Date(1e3*e.timestamp)]:[],onDayClick:function(n){e.onChange(n.getTime()/1e3),s(!1)}})))}},537:function(e,n,r){"use strict";r.r(n),r.d(n,"default",(function(){return $e}));var t=r(9),l=r.n(t),a=r(71),i=r.n(a),o=r(11),s=r.n(o),u=r(352),c=r(40),d=r(49),m=r(0),p=r.n(m),f=r(8),g=r(171),b=r(1),E=r(42),v=r(312),y=r(303),h=r(304),z=r(372),k=r(121),x=r(493),O=r(72),S=r(504),j=r(516),I=r(492),w=r(124),C=r(6),F=r.n(C),$=r(154),A=r(142),U=r(116),P=r(21),T=r(2),R=r(250),D=r(221),N=r(244),M=r(489),q=N.a.actions;function W(){var e,n=Object(P.l)((function(e){return e.rigForm})),r=Object(P.k)();return m.createElement(T.a,null,m.createElement(R.a,{style:V.field,mode:"outlined",label:"Make",error:!!n.fields.make.error,value:n.fields.make.value||"",onChangeText:function(e){return r(q.setField(["make",e]))}}),m.createElement(D.a,{type:n.fields.make.error?"error":"info"},n.fields.make.error||"e.g Javelin, Mirage"),m.createElement(R.a,{style:V.field,mode:"outlined",label:"Model",error:!!n.fields.model.error,value:n.fields.model.value||"",onChangeText:function(e){return r(q.setField(["model",e]))}}),m.createElement(D.a,{type:n.fields.model.error?"error":"info"},n.fields.model.error||"e.g G4.1"),m.createElement(R.a,{style:V.field,mode:"outlined",label:"Serial",error:!!n.fields.serial.error,value:n.fields.serial.value||"",onChangeText:function(e){return r(q.setField(["serial",e]))}}),m.createElement(D.a,{type:n.fields.serial.error?"error":"info"},n.fields.serial.error||""),m.createElement(R.a,{style:V.field,mode:"outlined",label:"Current canopy size",error:!!n.fields.canopySize.error,value:(null==(e=n.fields.canopySize.value)?void 0:e.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return r(q.setField(["canopySize",Number(e)]))}}),m.createElement(D.a,{type:n.fields.canopySize.error?"error":"info"},n.fields.canopySize.error||"Size of canopy in container"),m.createElement(M.a,{timestamp:n.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return r(q.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}),m.createElement(D.a,{type:n.fields.repackExpiresAt.error?"error":"info"},n.fields.repackExpiresAt.error||""))}var J,B,V=b.a.create({fields:{flex:1},field:{marginBottom:8}});function H(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function L(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?H(Object(r),!0).forEach((function(n){F()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var _=Object(d.gql)(J||(J=i()(["\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),Q=Object(d.gql)(B||(B=i()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function G(e){var n,r=Object(P.k)(),t=Object(P.l)((function(e){return e.rigForm})),a=Object(P.l)((function(e){return e.global})),i=Object(d.useMutation)(_),o=l()(i,2),u=o[0],c=o[1],f=Object(d.useMutation)(Q),g=l()(f,2),b=g[0],E=g[1],y=Object(m.useCallback)((function(){var e=!1;return t.fields.make.value||(e=!0,r(P.e.setFieldError(["make","Required"]))),t.fields.model.value||(e=!0,r(P.e.setFieldError(["model","Required"]))),t.fields.serial.value||(e=!0,r(P.e.setFieldError(["serial","Required"]))),t.fields.canopySize.value||(e=!0,r(P.e.setFieldError(["canopySize","Required"]))),t.fields.repackExpiresAt.value||(e=!0,r(P.e.setFieldError(["repackExpiresAt","You must select a repack date in the future"]))),!e}),[JSON.stringify(t.fields)]),h=Object(m.useCallback)((function(){var n,l,a,i,o,c,d,m,p,f,g,E;return s.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(y()){v.next=2;break}return v.abrupt("return");case 2:return v.prev=2,f=null!=(n=t.original)&&n.id?b:u,v.next=6,s.a.awrap(f({variables:L(L({},null!=(l=t.original)&&l.id?{id:Number(null==(a=t.original)?void 0:a.id)}:{}),{},{make:t.fields.make.value,model:t.fields.model.value,serial:t.fields.serial.value,canopySize:t.fields.canopySize.value,repackExpiresAt:t.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(g=v.sent,null==(E=null!=(i=t.original)&&i.id?null==(o=g.data)?void 0:o.updateRig:null==(c=g.data)?void 0:c.createRig)||null==(d=E.fieldErrors)||d.map((function(e){var n=e.field,t=e.message;switch(n){case"make":return r(P.e.setFieldError(["make",t]));case"model":return r(P.e.setFieldError(["model",t]));case"serial":return r(P.e.setFieldError(["serial",t]));case"canopy_size":return r(P.e.setFieldError(["canopySize",t]));case"repack_expires_at":return r(P.e.setFieldError(["repackExpiresAt",t]))}})),null==E||null==(m=E.errors)||!m.length){v.next=11;break}return v.abrupt("return",r(P.j.showSnackbar({message:null==E?void 0:E.errors[0],variant:"error"})));case 11:null!=E&&null!=(p=E.fieldErrors)&&p.length||e.onSuccess(),v.next=17;break;case 14:v.prev=14,v.t0=v.catch(2),r(P.j.showSnackbar({message:v.t0.message,variant:"error"}));case 17:case"end":return v.stop()}}),null,null,[[2,14]],Promise)}),[JSON.stringify(t.fields),u,b,e.onSuccess]);return p.a.createElement($.a,null,p.a.createElement(A.a,{visible:!!e.open,dismissable:!1},p.a.createElement(v.a,{indeterminate:!0,visible:c.loading||E.loading,color:a.theme.colors.accent}),p.a.createElement(A.a.Title,null,(null!=t&&null!=(n=t.original)&&n.id?"Edit":"New")+" rig"),p.a.createElement(A.a.Content,{pointerEvents:"box-none"},p.a.createElement(W,null)),p.a.createElement(A.a.Actions,{style:{justifyContent:"flex-end"}},p.a.createElement(U.a,{onPress:function(){r(P.e.reset()),e.onClose()}},"Cancel"),p.a.createElement(U.a,{onPress:h},"Save"))))}var Y,K=r(169),X=r(52),Z=r(243),ee=r(165),ne=Object(O.a)(Y||(Y=i()(["\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n      }\n    }\n  }\n"])));function re(e){var n,r,t,a,i=Object(m.useState)(!1),o=l()(i,2),s=o[0],u=o[1],c=Object(P.l)((function(e){return e.global})),f=Object(d.useQuery)(ne,{variables:{dropzoneId:Number(null==(n=c.currentDropzone)?void 0:n.id)}}),g=f.data;f.loading,f.refetch;return p.a.createElement(p.a.Fragment,null,p.a.createElement(X.b.Subheader,{style:{paddingLeft:0}},"Access level"),p.a.createElement(ee.a,{onDismiss:function(){return u(!1)},visible:!e.disabled&&s,anchor:p.a.createElement(X.b.Item,{left:function(){return p.a.createElement(X.b.Icon,{icon:"lock"})},onPress:e.disabled?void 0:function(){u(!0)},title:(null==(r=e.value)?void 0:r.name)||"Access level",description:e.required?null:"Optional"})},null==g||null==(t=g.dropzone)||null==(a=t.roles)?void 0:a.map((function(n){return p.a.createElement(ee.a.Item,{onPress:function(){u(!1),e.onSelect(n)},title:n.name||"-"})}))))}var te=r(170),le=Z.a.actions;function ae(){var e=Object(P.l)((function(e){return e})),n=e.dropzoneUserForm,r=(e.global,Object(P.k)()),t=Object(te.a)("updatePermission");return m.createElement(m.Fragment,null,m.createElement(re,{value:n.fields.role.value,onSelect:function(e){return r(le.setField(["role",e]))},disabled:!t,required:!0}),m.createElement(D.a,{type:n.fields.role.error?"error":"info"},n.fields.role.error),m.createElement(X.b.Subheader,{style:{paddingLeft:0}},"Financial"),m.createElement(M.a,{timestamp:n.fields.expiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return r(le.setField(["expiresAt",e]))},label:"Membership expires"}),m.createElement(D.a,{type:n.fields.expiresAt.error?"error":"info"},n.fields.expiresAt.error))}var ie;b.a.create({fields:{flex:1},field:{marginBottom:8}});function oe(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function se(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(r),!0).forEach((function(n){F()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ue=Object(d.gql)(ie||(ie=i()(["\n  mutation UpdateDropzoneUser(\n    $userRoleId: Int,\n    $expiresAt: Int,\n    $dropzoneUserId: Int\n  ) {\n    updateDropzoneUser(\n      input: {\n        id: $dropzoneUserId,\n        attributes: {\n          userRoleId: $userRoleId,\n          expiresAt: $expiresAt,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function ce(e){var n,r=Object(P.k)(),t=Object(P.l)((function(e){return e.dropzoneUserForm})),a=Object(P.l)((function(e){return e.global})),i=Object(d.useMutation)(ue),o=l()(i,2),u=o[0],c=o[1],f=Object(m.useCallback)((function(){var e=!1;return t.fields.role.value||(e=!0,r(P.b.setFieldError(["role","User must have an access level"]))),t.fields.expiresAt.value||(e=!0,r(P.b.setFieldError(["expiresAt","Membership expiry must be set"]))),!e}),[JSON.stringify(t.fields)]),g=Object(m.useCallback)((function(){var n,l,a,i,o,c,d,m,p,g;return s.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(f()){b.next=2;break}return b.abrupt("return");case 2:return b.prev=2,b.next=5,s.a.awrap(u({variables:se(se({},null!=(n=t.original)&&n.id?{id:null==(l=t.original)?void 0:l.id}:{}),{},{userRoleId:Number(null==(a=t.fields.role.value)?void 0:a.id),expiresAt:t.fields.expiresAt.value,dropzoneUserId:Number(null==(i=t.original)?void 0:i.id)})}));case 5:if(p=b.sent,null==(g=null==(o=p.data)?void 0:o.updateDropzoneUser)||null==(c=g.fieldErrors)||c.map((function(e){var n=e.field,t=e.message;switch(n){case"user_role":return r(P.b.setFieldError(["role",t]));case"expires_at":return r(P.b.setFieldError(["expiresAt",t]))}})),null==g||null==(d=g.errors)||!d.length){b.next=10;break}return b.abrupt("return",r(P.j.showSnackbar({message:null==g?void 0:g.errors[0],variant:"error"})));case 10:null!=g&&null!=(m=g.fieldErrors)&&m.length||e.onSuccess(),b.next=16;break;case 13:b.prev=13,b.t0=b.catch(2),r(P.j.showSnackbar({message:b.t0.message,variant:"error"}));case 16:case"end":return b.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(t.fields),u,e.onSuccess]);return p.a.createElement($.a,null,p.a.createElement(A.a,{visible:!!e.open},p.a.createElement(v.a,{indeterminate:!0,visible:c.loading,color:a.theme.colors.accent}),p.a.createElement(A.a.Title,null,(null!=t&&null!=(n=t.original)&&n.id?"Edit":"New")+" dropzone user"),p.a.createElement(A.a.Content,null,p.a.createElement(ae,null)),p.a.createElement(A.a.Actions,{style:{justifyContent:"flex-end"}},p.a.createElement(U.a,{onPress:function(){r(P.b.reset()),e.onClose()}},"Cancel"),p.a.createElement(U.a,{onPress:g},"Save"))))}var de=r(515),me=r(245).a.actions;function pe(){var e,n,r,t,l,a=Object(P.l)((function(e){return e})),i=a.creditsForm,o=(a.global,Object(P.k)()),s=(Object(te.a)("updatePermission"),(null==(e=i.original)?void 0:e.credits)||0),u=i.fields.amount.value||0,c="deposit"===i.fields.status.value?u+s:u-s;return m.createElement(m.Fragment,null,m.createElement(de.b,{defaultIndex:0,onChangeIndex:function(e){o(me.setField(["status",1===e?"withdrawal":"deposit"]))},mode:"fixed"},m.createElement(de.a,{label:"Deposit",icon:"arrow-up"},m.createElement(T.a,null)),m.createElement(de.a,{label:"Withdraw",icon:"arrow-down"},m.createElement(T.a,null))),m.createElement(A.a.Content,{style:{paddingTop:16}},m.createElement(R.a,{style:ge.field,mode:"outlined",label:"Message",error:!!i.fields.message.error,value:(null==(n=i.fields.message.value)?void 0:n.toString())||"",onChangeText:function(e){return o(me.setField(["message",e]))}}),m.createElement(D.a,{type:i.fields.message.error?"error":"info"},i.fields.message.error||""),"deposit"===i.fields.status.value?m.createElement(T.a,null,m.createElement(R.a,{style:ge.field,mode:"outlined",label:"Add amount",error:!!i.fields.amount.error,value:(null==(r=i.fields.amount.value)?void 0:r.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(me.setField(["amount",Number(e)]))}}),m.createElement(D.a,{type:i.fields.amount.error?"error":"info"},i.fields.amount.error||""),m.createElement(h.a,null),m.createElement(z.a,null,m.createElement(z.a.Row,null,m.createElement(z.a.Title,null,"Current balance"),m.createElement(z.a.Cell,{numeric:!0},"$"+((null==(t=i.original)?void 0:t.credits)||0))),m.createElement(z.a.Row,null,m.createElement(z.a.Title,null,"Deposit"),m.createElement(z.a.Cell,{numeric:!0},"+$"+(i.fields.amount.value||0))),m.createElement(z.a.Row,null,m.createElement(z.a.Title,null,m.createElement(E.a,{style:{fontWeight:"bold"}},"New total")),m.createElement(z.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c))))):m.createElement(T.a,null,m.createElement(R.a,{style:ge.field,mode:"outlined",label:"Withdraw amount",error:!!i.fields.amount.error,value:(null==(l=i.fields.amount.value)?void 0:l.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(me.setField(["amount",Number(e)]))}}),m.createElement(D.a,{type:i.fields.amount.error?"error":"info"},i.fields.amount.error||""),m.createElement(h.a,null),m.createElement(z.a,null,m.createElement(z.a.Row,null,m.createElement(z.a.Title,null,"Current balance"),m.createElement(z.a.Cell,{numeric:!0},"$"+(i.original.credits||0))),m.createElement(z.a.Row,null,m.createElement(z.a.Title,null,"Withdraw"),m.createElement(z.a.Cell,{numeric:!0},"-$"+(i.fields.amount.value||0))),m.createElement(z.a.Row,null,m.createElement(z.a.Title,null,m.createElement(E.a,{style:{fontWeight:"bold"}},"New total")),m.createElement(z.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c)))))))}var fe,ge=b.a.create({fields:{flex:1},field:{marginBottom:8}}),be=Object(d.gql)(fe||(fe=i()(["\n  mutation CreatrTransaction(\n    $message: String,\n    $status: String,\n    $amount: Float,\n    $dropzoneUserId: Int,\n  ) {\n    createTransaction(\n      input: {\n        attributes: {\n          amount: $amount,\n          dropzoneUserId: $dropzoneUserId,\n          message: $message,\n          status: $status,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      transaction {\n        id\n        amount\n        message\n\n        dropzoneUser {\n          id\n          credits\n\n          transactions {\n            edges {\n              node {\n                id\n                status\n                amount\n                createdAt\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Ee(e){var n=Object(P.k)(),r=Object(P.l)((function(e){return e.creditsForm})),t=Object(P.l)((function(e){return e.global})),a=Object(d.useMutation)(be),i=l()(a,2),o=i[0],u=i[1],c=Object(m.useCallback)((function(){var e=!1;return r.fields.amount.value||(e=!0,n(P.a.setFieldError(["amount","You must specify an amount"]))),!e}),[JSON.stringify(r.fields)]),f=Object(m.useCallback)((function(){var t,l,a,i,u,d,m,p,f;return s.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(c()){g.next=2;break}return g.abrupt("return");case 2:return g.prev=2,g.next=5,s.a.awrap(o({variables:{amount:r.fields.amount.value,message:r.fields.message.value,status:r.fields.status.value,dropzoneUserId:Number(null==(t=r.original)?void 0:t.id)}}));case 5:if(p=g.sent,null==(f=null!=(l=r.original)&&l.id?null==(a=p.data)?void 0:a.updateRig:null==(i=p.data)?void 0:i.createRig)||null==(u=f.fieldErrors)||u.map((function(e){var r=e.field,t=e.message;switch(r){case"amount":return n(P.a.setFieldError(["amount",t]));case"message":return n(P.a.setFieldError(["message",t]));case"status":return n(P.a.setFieldError(["status",t]))}})),null==f||null==(d=f.errors)||!d.length){g.next=10;break}return g.abrupt("return",n(P.j.showSnackbar({message:null==f?void 0:f.errors[0],variant:"error"})));case 10:null!=f&&null!=(m=f.fieldErrors)&&m.length||(n(P.a.reset()),e.onSuccess()),g.next=16;break;case 13:g.prev=13,g.t0=g.catch(2),n(P.j.showSnackbar({message:g.t0.message,variant:"error"}));case 16:case"end":return g.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(r.fields),o,e.onSuccess]);return p.a.createElement($.a,null,p.a.createElement(A.a,{visible:!!e.open},p.a.createElement(v.a,{indeterminate:!0,visible:u.loading,color:t.theme.colors.accent}),p.a.createElement(pe,null),p.a.createElement(A.a.Actions,{style:{justifyContent:"flex-end"}},p.a.createElement(U.a,{onPress:function(){n(P.a.reset()),e.onClose()}},"Cancel"),p.a.createElement(U.a,{onPress:f},"Save"))))}function ve(e){var n=Object(P.l)((function(e){return e.global})),r=e.title,t=e.children,l=e.buttonIcon,a=e.onPressButton;return m.createElement(T.a,{style:ye.card},m.createElement(T.a,{style:ye.container},m.createElement(X.b.Subheader,{style:ye.title},r),l&&m.createElement(k.a,{icon:l,onPress:function(){return a?a():null},color:n.theme.colors.primary})),t)}var ye=b.a.create({container:{flexDirection:"row",justifyContent:"space-between"},title:{flexGrow:1},card:{marginVertical:8,width:"100%"}}),he=r(41),ze=r(129),ke=r(302);function xe(e){var n,r,t,l=e.dropzoneUser,a=e.onEdit,i=e.canEdit,o=e.children,s=e.onPressAvatar,u=Object(P.l)((function(e){return e.global})).theme;return m.createElement(T.a,{style:[Oe.container,{backgroundColor:u.colors.primary}]},m.createElement(T.a,{style:Oe.actions},i?m.createElement(k.a,{icon:"pencil",size:20,color:u.colors.surface,onPress:function(){return a?a():null}}):null),m.createElement(T.a,{style:Oe.avatarContainer},m.createElement(T.a,{style:{flex:1/3}},m.createElement(he.a,{onPress:s},null!=l&&null!=(n=l.user)&&n.image?m.createElement(X.a.Image,{size:80,source:{uri:null==l?void 0:l.user.image},color:u.colors.primary,style:{backgroundColor:u.colors.surface}}):m.createElement(X.a.Icon,{size:80,icon:"account",color:u.colors.primary,style:{backgroundColor:u.colors.surface}}))),m.createElement(T.a,{style:Oe.titleContainer},m.createElement(ze.a,{style:Oe.title},null==l||null==(r=l.user)?void 0:r.name),m.createElement(ke.a,{style:Oe.paragraph},null==l||null==(t=l.role)?void 0:t.name))),o)}var Oe=b.a.create({container:{width:"100%",paddingTop:16},actions:{flexDirection:"row",justifyContent:"flex-end"},avatarContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:16,marginBottom:16},titleContainer:{paddingLeft:48,flex:2/3,alignItems:"flex-start",justifyContent:"center"},title:{color:"white"},paragraph:{color:"white"}});function Se(e){var n=e.items,r=1/n.length;return m.createElement(m.Fragment,null,m.createElement(h.a,{style:we.divider}),m.createElement(T.a,{style:we.container},n.map((function(e,t){return m.createElement(m.Fragment,null,m.createElement(T.a,{style:{flex:r},key:"info-grid-"+t},m.createElement(X.b.Item,{titleStyle:[we.title,{fontWeight:!1!==e.bold?"bold":void 0}],title:e.value,descriptionStyle:we.description,description:e.title,onPress:e.onPress})),t===n.length-1?null:m.createElement(h.a,{key:"info-grid-divider-"+t,style:we.verticalDivider}))}))))}var je,Ie,we=b.a.create({container:{width:"100%",flexDirection:"row"},divider:{height:b.a.hairlineWidth,width:"100%",backgroundColor:"white"},verticalDivider:{width:b.a.hairlineWidth,height:"100%",backgroundColor:"white"},title:{textAlign:"center",color:"white"},description:{textAlign:"center",color:"white"}}),Ce=Object(O.a)(je||(je=i()(["\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n        rigInspections {\n          id\n          isOk\n          rig {\n            id\n          }\n        }\n\n\n        transactions {\n          edges {\n            node {\n              id\n              status\n              message\n              amount\n              createdAt\n            }\n          }\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          image\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),Fe=Object(O.a)(Ie||(Ie=i()(["\n  mutation UpdateUserImage(\n    $id: Int,\n    $image: String\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        image: $image,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        image\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function $e(){var e,n,r,t,a,i,o,p,b,O,C,F,$,A,U,T,R,D,N,M,q,W,J,B,V,H,L,_,Q,Y,X,Z,ee,ne,re=Object(P.l)((function(e){return e.global})),te=Object(P.k)(),le=Object(c.useNavigation)(),ae=m.useState(!1),ie=l()(ae,2),oe=ie[0],se=ie[1],ue=m.useState(!1),de=l()(ue,2),me=de[0],pe=de[1],fe=m.useState(!1),ge=l()(fe,2),be=ge[0],ye=ge[1],he=Object(c.useRoute)(),ze=(null==(e=re.currentDropzone)||null==(n=e.currentUser)?void 0:n.id)===he.params.userId,ke=Object(d.useQuery)(Ce,{variables:{dropzoneId:Number(null==(r=re.currentDropzone)?void 0:r.id),dropzoneUserId:Number(he.params.userId)}}),Oe=ke.data,je=ke.loading,Ie=ke.refetch,we=Object(c.useIsFocused)();m.useEffect((function(){we&&Ie()}),[we]);var $e=Object(d.useMutation)(Fe),Ue=l()($e,2),Pe=Ue[0];Ue[1];m.useEffect((function(){!function(){var e;s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("web"===f.a.OS){n.next=6;break}return n.next=3,s.a.awrap(j.b());case 3:e=n.sent,"granted"!==e.status&&alert("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);var Te=m.useCallback((function(){var e,n,r,t;return s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,s.a.awrap(j.a({mediaTypes:I.a.Images,allowsEditing:!0,aspect:[4,3],quality:.1,base64:!0}));case 3:return t=l.sent,l.next=6,s.a.awrap(Pe({variables:{id:Number(null==Oe||null==(e=Oe.dropzone)||null==(n=e.dropzoneUser)||null==(r=n.user)?void 0:r.id),image:"data:image/jpeg;base64,"+t.base64}}));case 6:l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),console.log(l.t0);case 11:case"end":return l.stop()}}),null,null,[[0,8]],Promise)}),[te]);return m.createElement(m.Fragment,null,je&&m.createElement(v.a,{color:re.theme.colors.accent,indeterminate:!0,visible:je}),m.createElement(K.a,{contentContainerStyle:Ae.content,refreshControl:m.createElement(g.a,{refreshing:je,onRefresh:Ie})},m.createElement(xe,{dropzoneUser:null==Oe||null==(t=Oe.dropzone)?void 0:t.dropzoneUser,canEdit:ze,onEdit:function(){var e,n;return le.navigate("UpdateUserScreen",{user:null==(e=re.currentDropzone)||null==(n=e.currentUser)?void 0:n.user})},onPressAvatar:Te},m.createElement(S.b,{horizontal:!0,style:{marginVertical:8}},m.createElement(y.a,{icon:function(e){var n=e.size;return m.createElement(u.a,{name:"email",size:n,color:"#FFFFFF"})},mode:"outlined",style:Ae.chip,textStyle:Ae.chipTitle},(null==Oe||null==(a=Oe.dropzone)||null==(i=a.dropzoneUser)||null==(o=i.user)?void 0:o.email)||"-"),m.createElement(y.a,{icon:function(e){var n=e.size;return m.createElement(u.a,{name:"phone",size:n,color:"#FFFFFF"})},mode:"outlined",style:Ae.chip,textStyle:Ae.chipTitle},(null==Oe||null==(p=Oe.dropzone)||null==(b=p.dropzoneUser)||null==(O=b.user)?void 0:O.phone)||"-"),m.createElement(y.a,{icon:function(e){var n=e.size;return m.createElement(u.a,{name:"card-account-details-star-outline",size:n,color:"#FFFFFF"})},mode:"outlined",style:Ae.chip,textStyle:Ae.chipTitle,onPress:function(){var e;te(P.b.setOriginal(null==Oe||null==(e=Oe.dropzone)?void 0:e.dropzoneUser)),ye(!0)}},null!=Oe&&null!=(C=Oe.dropzone)&&null!=(F=C.dropzoneUser)&&F.expiresAt?Object(x.a)(1e3*((null==Oe||null==($=Oe.dropzone)||null==(A=$.dropzoneUser)?void 0:A.expiresAt)||0),"yyyy/MM/dd"):"Not a member")),m.createElement(h.a,{style:Ae.divider}),m.createElement(Se,{items:[{title:"Funds",value:"$"+((null==Oe||null==(U=Oe.dropzone)||null==(T=U.dropzoneUser)?void 0:T.credits)||0)},{title:"License",value:""+((null==Oe||null==(R=Oe.dropzone)||null==(D=R.dropzoneUser)||null==(N=D.user)||null==(M=N.license)?void 0:M.name)||"-")},{title:"Exit weight",value:Math.round(Number(null==Oe||null==(q=Oe.dropzone)||null==(W=q.dropzoneUser)||null==(J=W.user)?void 0:J.exitWeight)).toString()||"-"}]}),m.createElement(h.a,{style:[Ae.divider,{backgroundColor:"white"}]})),m.createElement(ve,{title:"Rigs",buttonIcon:"plus",onPressButton:function(){return pe(!0)}},m.createElement(z.a,null,m.createElement(z.a.Header,null,m.createElement(z.a.Title,null,"Container"),m.createElement(z.a.Title,{numeric:!0},"Repack due"),m.createElement(z.a.Title,{numeric:!0},"Canopy size"),m.createElement(z.a.Title,{numeric:!0},"Inspected")),null==Oe||null==(B=Oe.dropzone)||null==(V=B.dropzoneUser)||null==(H=V.user)||null==(L=H.rigs)?void 0:L.map((function(e){var n,r,t,l,a,i;return m.createElement(z.a.Row,{key:"rig-"+e.id,onPress:function(){te(P.e.setOriginal(e)),pe(!0)},onLongPress:function(){return le.navigate("RigInspectionScreen",{dropzoneUserId:Number(he.params.userId),rig:e})},pointerEvents:"none"},m.createElement(z.a.Cell,null,[null==e?void 0:e.make,null==e?void 0:e.model,"#"+(null==e?void 0:e.serial)].join(" ")),m.createElement(z.a.Cell,{numeric:!0},null!=e&&e.repackExpiresAt?Object(x.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),m.createElement(z.a.Cell,{numeric:!0},""+(null==e?void 0:e.canopySize)),m.createElement(z.a.Cell,{numeric:!0},m.createElement(k.a,{icon:null!=Oe&&null!=(n=Oe.dropzone)&&null!=(r=n.dropzoneUser)&&null!=(t=r.rigInspections)&&t.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?"eye-check":"eye-minus",color:null!=Oe&&null!=(l=Oe.dropzone)&&null!=(a=l.dropzoneUser)&&null!=(i=a.rigInspections)&&i.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?w.b:w.c,onPress:function(){return le.navigate("RigInspectionScreen",{dropzoneUserId:Number(he.params.userId),rig:e})}})))})))),m.createElement(ve,{title:"Transactions",buttonIcon:"plus",onPressButton:function(){var e;null!=Oe&&null!=(e=Oe.dropzone)&&e.dropzoneUser&&(te(P.a.setOriginal(Oe.dropzone.dropzoneUser)),se(!0))}},m.createElement(z.a,null,m.createElement(z.a.Header,null,m.createElement(z.a.Title,null,"Time"),m.createElement(z.a.Title,null,"Type"),m.createElement(z.a.Title,null,"Message"),m.createElement(z.a.Title,{numeric:!0},"Amount")),null==Oe||null==(_=Oe.dropzone)||null==(Q=_.dropzoneUser)||null==(Y=Q.transactions)||null==(X=Y.edges)?void 0:X.map((function(e){var n,r,t,l,a,i;return m.createElement(z.a.Row,{key:"transaction-"+(null==e||null==(n=e.node)?void 0:n.id)},m.createElement(z.a.Cell,null,m.createElement(E.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null!=e&&null!=(r=e.node)&&r.createdAt?Object(x.a)(1e3*(null==e||null==(t=e.node)?void 0:t.createdAt),"yyyy/MM/dd hh:mm"):null)),m.createElement(z.a.Cell,null,m.createElement(E.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null==e||null==(l=e.node)?void 0:l.status)),m.createElement(z.a.Cell,null,null==e||null==(a=e.node)?void 0:a.message),m.createElement(z.a.Cell,{numeric:!0},null==e||null==(i=e.node)?void 0:i.amount))}))))),m.createElement(G,{onClose:function(){return pe(!1)},onSuccess:function(){return pe(!1)},userId:Number(null==Oe||null==(Z=Oe.dropzone)||null==(ee=Z.dropzoneUser)||null==(ne=ee.user)?void 0:ne.id),open:me}),m.createElement(ce,{onClose:function(){return ye(!1)},onSuccess:function(){return ye(!1)},open:be}),m.createElement(Ee,{onClose:function(){return se(!1)},onSuccess:function(){return se(!1)},open:oe}))}var Ae=b.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"},chip:{margin:1,backgroundColor:"transparent",minHeight:23,borderWidth:0,justifyContent:"center",alignItems:"center",display:"flex"},chipTitle:{color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,lineHeight:24,textAlignVertical:"center"}})}}]);
//# sourceMappingURL=4.9a025fb0.chunk.js.map