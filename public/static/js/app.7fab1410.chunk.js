(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{363:function(e,n,t){"use strict";t.d(n,"a",(function(){return Ll}));var r=t(364),a=t(0),l=t.n(a),i=t(475),o=t(165),s=t(311),u=t(297),c=t(127),d=t(2),m=t(308),f=t(4),p=t.n(f),g=t(20),v=t(171),b=t(315),y=t(316),h=t(46),E=t(234),S=t(239),x=t(121),I=t(255),k=t(102),w=t(122);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=C(C(C({},k.a),x.a),{},{colors:C(C({},k.a.colors),x.a.colors)}),j=C(C(C({},w.a),I.a),{},{colors:C(C({},w.a.colors),I.a.colors)}),P={currentUser:null,currentDropzone:null,permissions:[],credentials:null,theme:z,isDarkMode:!1},T=Object(h.b)({name:"global",initialState:P,reducers:{setCredentials:function(e,n){e.credentials=n.payload},setUser:function(e,n){e.currentUser=n.payload},setPermissions:function(e,n){e.permissions=n.payload},setPrimaryColor:function(e,n){e.theme.colors.primary=n.payload},setAccentColor:function(e,n){e.theme.colors.accent=n.payload},setDropzone:function(e,n){var t,r,a,l;(e.currentDropzone=n.payload,null!=(t=e.currentDropzone)&&t.primaryColor)&&(e.theme.colors.primary=null==(a=e.currentDropzone)?void 0:a.primaryColor);null!=(r=e.currentDropzone)&&r.secondaryColor&&(e.theme.colors.accent=null==(l=e.currentDropzone)?void 0:l.secondaryColor)},toggleDarkMode:function(e){var n,t,r,a;(e.isDarkMode=!e.isDarkMode,e.theme=e.isDarkMode?j:z,null!=(n=e.currentDropzone)&&n.primaryColor)&&(e.theme.colors.primary=null==(r=e.currentDropzone)?void 0:r.primaryColor);null!=(t=e.currentDropzone)&&t.secondaryColor&&(e.theme.colors.accent=null==(a=e.currentDropzone)?void 0:a.secondaryColor)},logout:function(e){for(var n in P){var t=n;n in e&&(e[t]=P[t])}}}}),$=t(325),F=t.n($),N=t(12),D=Object(h.b)({name:"notifications",initialState:{queue:[]},reducers:{hideSnackbar:function(e){e.queue.shift()},showSnackbar:function(e,n){e.queue.push(n.payload)}}}),M={fields:{email:{value:"",error:null},password:{value:"",error:null}}},A=Object(h.b)({name:"login",initialState:M,reducers:{setEmail:function(e,n){e.fields.email.value=n.payload},setPassword:function(e,n){e.fields.password.value=n.payload},setEmailError:function(e,n){e.fields.email.error=n.payload},setPasswordError:function(e,n){e.fields.password.error=n.payload},reset:function(e){e.fields=M.fields}}}),U=t(7),q=t.n(U),W={federation:null,fields:{email:{value:"",error:null},password:{value:"",error:null},passwordConfirmation:{value:"",error:null},exitWeight:{value:50,error:null},name:{value:"",error:null},phone:{value:"",error:null},license:{value:null,error:null}}},B=Object(h.b)({name:"login",initialState:W,reducers:{setFederation:function(e,n){e.federation=n.payload},setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},reset:function(e){e.fields=W.fields}}}),R={original:null,fields:{federation:{value:null,error:null},name:{value:"",error:null},secondaryColor:{value:"",error:null},primaryColor:{value:"",error:null},banner:{value:"",error:null},isCreditSystemEnabled:{value:!1,error:null},isPublic:{value:!1,error:null}}},L=Object(h.b)({name:"dropzone",initialState:R,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];r in e.fields&&e.fields[r].error&&(e.fields[r].error=a)},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=R.fields,e.original=null}}}),H={original:null,fields:{name:{value:"",error:null},registration:{value:"",error:null},minSlots:{value:0,error:null},maxSlots:{value:4,error:null},hours:{value:null,error:null},nextMaintenanceHours:{value:null,error:null}}},Q=Object(h.b)({name:"Plane",initialState:H,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields.name.error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){e.original=n.payload,e.fields.hours.value=n.payload.hours,e.fields.minSlots.value=n.payload.minSlots,e.fields.maxSlots.value=n.payload.maxSlots,e.fields.name.value=n.payload.name,e.fields.registration.value=n.payload.registration,e.fields.nextMaintenanceHours.value=n.payload.nextMaintenanceHours},reset:function(e){e.fields=H.fields,e.original=null}}}),J={original:null,fields:{name:{value:"",error:null},cost:{value:null,error:null},altitude:{value:14e3,error:null},allowManifestingSelf:{value:!1,error:null},extraIds:{value:[],error:null}}},V=Object(h.b)({name:"ticketTypeForm",initialState:J,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){e.original=n.payload,e.fields.altitude.value=n.payload.altitude,e.fields.cost.value=n.payload.cost,e.fields.allowManifestingSelf.value=n.payload.allowManifestingSelf,e.fields.name.value=n.payload.name},reset:function(e){e.fields=J.fields,e.original=null}}}),G={original:null,fields:{name:{value:"",error:null},cost:{value:null,error:null},ticketTypeIds:{value:[],error:null}}},Y=Object(h.b)({name:"ExtraForm",initialState:G,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields.name.error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){e.original=n.payload,e.fields.ticketTypeIds.value=n.payload.ticketTypes.map((function(e){var n=e.id;return Number(n)})),e.fields.cost.value=n.payload.cost,e.fields.name.value=n.payload.name},reset:function(e){e.fields=G.fields,e.original=null}}}),Z={original:null,fields:{name:{value:"",error:null},gca:{value:null,error:null},dispatchAt:{value:null,error:null},isOpen:{value:!0,error:null},loadMaster:{value:null,error:null},pilot:{value:null,error:null},plane:{value:null,error:null},maxSlots:{value:4,error:null}}},_=Object(h.b)({name:"loadForm",initialState:Z,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=Z.fields,e.original=null}}}),K={original:null,fields:{jumpType:{value:null,error:null},extras:{value:[],error:null},load:{value:null,error:null},rig:{value:null,error:null},ticketType:{value:null,error:null},user:{value:null,error:null},exitWeight:{value:null,error:null}}},X=Object(h.b)({name:"slotForm",initialState:K,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=K.fields,e.original=null}}}),ee={original:null,federation:{value:null,error:null},fields:{exitWeight:{value:"",error:null},email:{value:"",error:null},phone:{value:"",error:null},name:{value:null,error:null},rigs:{value:[],error:null},license:{value:null,error:null}}},ne=Object(h.b)({name:"userForm",initialState:ee,reducers:{setFederation:function(e,n){e.federation.value=n.payload},setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){var t;for(var r in e.original=n.payload,e.federation.value=null==(t=n.payload.license)?void 0:t.federation,n.payload)if(r in e.fields){var a=r;e.fields[a].value=n.payload[a]}},reset:function(e){e.fields=ee.fields,e.original=null}}}),te={original:null,fields:{make:{value:"",error:null},model:{value:"",error:null},serial:{value:"",error:null},repackExpiresAt:{value:null,error:null},canopySize:{value:null,error:null}}},re=Object(h.b)({name:"rigForm",initialState:te,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=te.fields,e.original=null}}}),ae=(A.actions,B.actions,T.actions),le=D.actions,ie=(Q.actions,L.actions,V.actions,Y.actions,_.actions,X.actions),oe=ne.actions,se=re.actions,ue={key:"root",storage:"web"===N.a.OS?F.a:Object(E.a)(),whitelist:["global","notifications"]};console.log({localStorage:localStorage,MMKV:E.a});var ce=Object(S.a)(ue,{global:T.reducer,notifications:D.reducer,login:A.reducer,signup:B.reducer,dropzoneForm:L.reducer,planeForm:Q.reducer,ticketTypeForm:V.reducer,extraForm:Y.reducer,loadForm:_.reducer,slotForm:X.reducer,userForm:ne.reducer,rigForm:re.reducer}),de=Object(h.a)({reducer:ce}),me=Object(S.b)(de),fe=function(){return Object(o.b)()},pe=o.c;function ge(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ge(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ge(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var be=Object(g.createHttpLink)({uri:"http://127.0.0.1:3000/graphql"});function ye(e){var n=e.children,t=pe((function(e){return e.global.credentials})),r=fe(),i=Object(a.useMemo)((function(){return Object(y.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.map((function(e){var n=e.message,t=e.locations,a=e.path;return r(le.showSnackbar({message:"[GraphQL error]: "+n+", "+t+", "+a,variant:"error"}))})),t&&r(le.showSnackbar({message:"[Network error]: "+t,variant:"error"})),t&&"ServerError"===t.name&&401===t.statusCode&&r(ae.logout())}))}),[r]),o=Object(a.useMemo)((function(){return Object(b.a)((function(e,n){return{headers:ve(ve({},n.headers),null!=t&&t.accessToken?ve({Authorization:"Bearer "+t.accessToken,"access-token":t.accessToken,"token-type":t.tokenType},t):{})}}))}),[JSON.stringify(t)]),s=Object(a.useMemo)((function(){return new g.ApolloClient({link:i.concat(o).concat(be),cache:new g.InMemoryCache})}),[o]);return l.a.createElement(v.ApolloProvider,{client:s},n)}var he=t(5),Ee=t.n(he),Se=t(472),xe=t(474),Ie=t(240);function ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function we(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ke(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ke(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Oe=t(1),Ce=t(263);var ze={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",success:"#00C851",error:"#ff4444",warning:"#FF8800",info:"#0099CC"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff",success:"#00C851",error:"#ff4444",warning:"#FF8800",info:"#0099CC"}};var je=function(){return ze.light},Pe=D.actions,Te=(Oe.a.create({container:{flex:1,justifyContent:"space-between"}}),function(){var e=pe((function(e){return e.notifications})),n=fe(),t=je(),r=e.queue.length?e.queue[0]:null,l={info:{backgroundColor:t.info},success:{backgroundColor:t.success},error:{backgroundColor:t.error},warning:{backgroundColor:t.warning}};return a.createElement(Ce.a,{visible:!!r,onDismiss:function(){return n(Pe.hideSnackbar())},action:null==r?void 0:r.action,style:!(null==r||!r.variant)&&l[r.variant]},null==r?void 0:r.message)}),$e={prefixes:[t(365).a("/"),"dz://"],config:{screens:{Authenticated:{screens:{HomeScreen:"/home",LoadScreen:"/load/:load_id",PackingScreen:"/packing",ProfileScreen:"/user/:id",SetupScreen:"/dropzone/setup"}},Limbo:{screens:{DropzonesScreen:"/dropzones",CreateDropzoneScreen:"/dropzone/create"}},Unauthenticated:{screens:{LoginScreen:"/login",SignUpScreen:"/signup"}}}}},Fe=t(473),Ne=t(48),De=t(67);function Me(e){var n=e.navigation;return a.createElement(d.a,{style:qe.container},a.createElement(Ne.a,{style:qe.title},"This screen doesn't exist."),a.createElement(De.a,{onPress:function(){return n.replace("Root")},style:qe.link},a.createElement(Ne.a,{style:qe.linkText},"Go to home screen!")))}var Ae,Ue,qe=Oe.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),We=t(26),Be=t.n(We),Re=t(16),Le=t(476),He=t(24),Qe=t.n(He),Je=t(28),Ve=t(31),Ge=t(35),Ye=t(215),Ze=t(286),_e=t(307),Ke=t(188),Xe=t(303),en=t(174),nn=t(30),tn=t.n(nn),rn=t(38),an=t(283),ln=t(13),on=t(284),sn=t(285),un=t(300),cn=t(282),dn=Object(Ve.a)(Ae||(Ae=Qe()(["\n  query JumpTypes($allowedForUserId: Int) {\n    jumpTypes(allowedForUserId: $allowedForUserId) {\n      id\n      name\n    }\n  }\n"])));function mn(e){var n,t,r=Object(a.useState)(!1),i=q()(r,2),o=i[0],s=i[1],u=(pe((function(e){return e.global})),Object(g.useQuery)(dn,{variables:{allowedForUserId:e.userId}})),c=u.data;u.loading,u.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ln.a.Subheader,null,"Jump type"),l.a.createElement(cn.a,{onDismiss:function(){return s(!1)},visible:o,anchor:l.a.createElement(ln.a.Item,{onPress:function(){s(!0)},title:(null==(n=e.value)?void 0:n.name)||"Please select jump type",description:e.required?null:"Optional"})},null==c||null==(t=c.jumpTypes)?void 0:t.map((function(n){return l.a.createElement(ln.a.Item,{onPress:function(){s(!1),e.onSelect(n)},title:n.name||"-"})}))))}var fn,pn=Object(Ve.a)(Ue||(Ue=Qe()(["\n  query TicketTypes($allowManifestingSelf: Boolean, $dropzoneId: Int!) {\n    ticketTypes(allowManifestingSelf: $allowManifestingSelf, dropzoneId: $dropzoneId) {\n      id\n      name\n\n      extras {\n        id\n        name\n        cost\n      }\n    }\n  }\n"])));function gn(e){var n,t,r,i=Object(a.useState)(!1),o=q()(i,2),s=o[0],u=o[1],c=pe((function(e){return e.global})),d=Object(g.useQuery)(pn,{variables:{dropzoneId:Number(null==(n=c.currentDropzone)?void 0:n.id),allowManifestingSelf:e.allowManifestingSelf}}),m=d.data;d.loading,d.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ln.a.Subheader,null,"Ticket"),l.a.createElement(cn.a,{onDismiss:function(){return u(!1)},visible:s,anchor:l.a.createElement(ln.a.Item,{onPress:function(){u(!0)},title:(null==(t=e.value)?void 0:t.name)||"Please select ticket type",description:e.required?null:"Optional"})},null==m||null==(r=m.ticketTypes)?void 0:r.map((function(n){return l.a.createElement(ln.a.Item,{onPress:function(){u(!1),e.onSelect(n)},title:n.name||"-"})}))))}var vn,bn=Object(Ve.a)(fn||(fn=Qe()(["\nquery QueryPermissions($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor\n      secondaryColor\n      \n      currentUser {\n        id\n        role {\n          id\n          name\n        }\n        permissions\n      }\n\n    }\n  }"])));function yn(e){var n,t,r,a=pe((function(e){return e.global})).currentDropzone,l=Object(g.useQuery)(bn,{variables:{dropzoneId:Number(null==a?void 0:a.id)},fetchPolicy:"cache-first"}).data;return(null==l||null==(n=l.dropzone)||null==(t=n.currentUser)||null==(r=t.permissions)?void 0:r.includes(e))||!1}var hn=Object(Ve.a)(vn||(vn=Qe()(["\n  query QueryRigs(\n    $dropzoneId: Int\n    $userId: Int\n  ) {\n    rigs(dropzoneId: $dropzoneId, userId: $userId) {\n      id\n      make\n      model\n      canopySize\n      serial\n    }\n  }\n"])));function En(e){var n,t,r,i,o,s=Object(a.useState)(!1),u=q()(s,2),c=u[0],d=u[1],m=pe((function(e){return e.global})),f=Object(g.useQuery)(hn,{variables:{dropzoneId:Number(null==(n=m.currentDropzone)?void 0:n.id)}}).data;return l.a.createElement(cn.a,{onDismiss:function(){return d(!1)},visible:c,anchor:l.a.createElement(ln.a.Item,{onPress:function(){d(!0)},title:e.value?(null==(t=e.value)?void 0:t.make)+" "+(null==(r=e.value)?void 0:r.model)+" ("+((null==(i=e.value)?void 0:i.canopySize)||"?")+"sqft)":"Select rig",description:e.required?null:"Optional",left:function(){return l.a.createElement(ln.a.Icon,{icon:"parachute"})}})},null==f||null==(o=f.rigs)?void 0:o.map((function(n){var t,r,a;return l.a.createElement(ln.a.Item,{onPress:function(){d(!1),e.onSelect(n)},title:(null==(t=e.value)?void 0:t.make)+" "+(null==(r=e.value)?void 0:r.model),description:(null==(a=e.value)?void 0:a.canopySize)+" sqft"})})))}var Sn=X.actions;function xn(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p,g,v,b,y,h,E,S,x,I,k,w=pe((function(e){return e.slotForm})),O=fe(),C=pe((function(e){return e.global}));a.useEffect((function(){var e,n;null!=(e=w.fields.user)&&e.value&&(w.fields.exitWeight.value||O(Sn.setField(["exitWeight",Number(w.fields.user.value.exitWeight||60)])),!w.fields.rig.value&&null!=(n=w.fields.user.value.rigs)&&n.length&&O(Sn.setField(["rig",w.fields.user.value.rigs[0]])))}),[null==(e=w.fields)||null==(n=e.user)||null==(t=n.value)?void 0:t.id]);var z=null==w||null==(r=w.original)?void 0:r.id,j=(null==w||null==(l=w.fields)||null==(i=l.user)||null==(o=i.value)||o.id,null==(s=C.currentUser)||s.id,yn(z?"updateSlot":"createSlot"),yn(z?"updateUserSlot":"createUserSlot"));return console.log("Fields",w.fields),a.createElement(rn.a,{style:kn.fields,contentContainerStyle:{flexGrow:1}},a.createElement(mn,{value:w.fields.jumpType.value,required:!0,userId:Number(null==w||null==(u=w.fields)||null==(c=u.user)||null==(d=c.value)?void 0:d.id)||null,onSelect:function(e){return O(Sn.setField(["jumpType",e]))}}),a.createElement(an.a,{type:w.fields.jumpType.error?"error":"info"},w.fields.jumpType.error||""),a.createElement(gn,{value:w.fields.ticketType.value,required:!0,allowManifestingSelf:!j,onSelect:function(e){return O(Sn.setField(["ticketType",e]))}}),a.createElement(an.a,{type:w.fields.ticketType.error?"error":"info"},w.fields.ticketType.error||""),(null==w||null==(m=w.fields)||null==(f=m.ticketType)||null==(p=f.value)||null==(g=p.extras)?void 0:g.length)&&a.createElement(ln.a.Subheader,null,"Ticket addons"),a.createElement(rn.a,{horizontal:!0,style:kn.ticketAddons},null==w||null==(v=w.fields)||null==(b=v.ticketType)||null==(y=b.value)||null==(h=y.extras)?void 0:h.map((function(e){var n,t,r,l;return a.createElement(on.a,{selected:null==w||null==(n=w.fields)||null==(t=n.extras.value)?void 0:t.some((function(n){return n.id===e.id})),onPress:null!=w&&null!=(r=w.fields)&&null!=(l=r.extras.value)&&l.some((function(n){return n.id===e.id}))?function(){var n,t;return O(Sn.setField(["extras",null==w||null==(n=w.fields)||null==(t=n.extras.value)?void 0:t.filter((function(n){return n.id!==e.id}))]))}:function(){var n,t;return O(Sn.setField(["extras",[].concat(tn()((null==w||null==(n=w.fields)||null==(t=n.extras)?void 0:t.value)||[]),[e])]))}},e.name+" ($"+e.cost+")")}))),a.createElement(sn.a,null),a.createElement(En,{value:w.fields.rig.value,userId:Number(null==(E=w.fields.user)||null==(S=E.value)?void 0:S.id),dropzoneId:Number(null==(x=C.currentDropzone)?void 0:x.id),onSelect:function(e){return O(Sn.setField(["jumpType",e]))}}),a.createElement(an.a,{type:w.fields.rig.error?"error":"info"},w.fields.rig.error||""),a.createElement(un.a,{style:kn.field,mode:"outlined",label:"Exit weight",error:!!w.fields.exitWeight.error,value:(null==(I=w.fields.exitWeight)||null==(k=I.value)?void 0:k.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(un.a.Affix,{text:"kg"})},onChangeText:function(e){return O(Sn.setField(["exitWeight",Number(e)]))}}),a.createElement(an.a,{type:w.fields.exitWeight.error?"error":"info"},w.fields.exitWeight.error||""))}var In,kn=Oe.a.create({fields:{flex:1},field:{marginBottom:8},ticketAddons:{marginBottom:8}}),wn=Object(g.gql)(In||(In=Qe()(["\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $rigId: Int\n    $ticketTypeId: Int\n    $userId: Int\n    $exitWeight: Float\n  ) {\n    createSlot(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          rigId: $rigId\n          ticketTypeId: $ticketTypeId\n          userId: $userId\n          exitWeight: $exitWeight\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      slot {\n        id\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n        exitWeight\n        load {\n          id\n          name\n          createdAt\n          dispatchAt\n          hasLanded\n          maxSlots\n          isFull\n          isOpen\n          plane {\n            id\n            name\n          }\n          gca {\n            id\n            user {\n              id\n              name\n            }\n          }\n          pilot {\n            id\n            user {\n              id\n              name\n            }\n          }\n          loadMaster {\n            id\n            user {\n              id\n              name\n            }\n          }\n          slots {\n            id\n            createdAt\n            user {\n              id\n              name\n            }\n            ticketType {\n              id\n              name\n              altitude\n            }\n            jumpType {\n              id\n              name\n            }\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function On(e){var n,t,r,i,o,s=fe(),u=pe((function(e){return e.slotForm})),c=pe((function(e){return e.global})),d=Object(g.useMutation)(wn),m=q()(d,2),f=m[0],p=m[1],v=Object(a.useCallback)((function(){var e,n,t=!1;return null!=(e=u.fields.jumpType.value)&&e.id||(t=!0,s(ie.setFieldError(["jumpType","You must specify the type of jump"]))),null!=(n=u.fields.ticketType.value)&&n.id||(t=!0,s(ie.setFieldError(["ticketType","You must select a ticket type to manifest"]))),!t}),[JSON.stringify(u.fields)]),b=Object(a.useCallback)((function(){var n,t,r,a,l,i,o,c,d,m,p,g,b,y,h,E,S,x,I,k,w,O;return Ee.a.async((function(C){for(;;)switch(C.prev=C.next){case 0:if(v()){C.next=2;break}return C.abrupt("return");case 2:return C.prev=2,C.next=5,Ee.a.awrap(f({variables:{jumpTypeId:Number(null==(n=u.fields.jumpType.value)?void 0:n.id),extraIds:null==(t=u.fields.extras)||null==(r=t.value)?void 0:r.map((function(e){var n=e.id;return Number(n)})),loadId:Number(null==(a=u.fields.load.value)?void 0:a.id),rigId:null!=(l=u.fields.rig.value)&&l.id?Number(null==(i=u.fields.rig.value)?void 0:i.id):null,ticketTypeId:Number(null==(o=u.fields.ticketType)||null==(c=o.value)?void 0:c.id),userId:Number(null==(d=u.fields.user)||null==(m=d.value)?void 0:m.id),exitWeight:u.fields.exitWeight.value}}));case 5:if(k=C.sent,null==(p=k.data)||null==(g=p.createSlot)||null==(b=g.fieldErrors)||b.map((function(e){var n=e.field,t=e.message;switch(n){case"jump_type":return s(ie.setFieldError(["jumpType",t]));case"load":return s(ie.setFieldError(["load",t]));case"ticket_type":return s(ie.setFieldError(["ticketType",t]));case"rig":return s(ie.setFieldError(["rig",t]));case"user":return s(ie.setFieldError(["user",t]));case"exit_weight":return s(ie.setFieldError(["exitWeight",t]))}})),null==k||null==(y=k.data)||null==(h=y.createSlot)||null==(E=h.errors)||!E.length){C.next=9;break}return C.abrupt("return",s(le.showSnackbar({message:null==k||null==(w=k.data)||null==(O=w.createSlot)?void 0:O.errors[0],variant:"error"})));case 9:null!=(S=k.data)&&null!=(x=S.createSlot)&&null!=(I=x.fieldErrors)&&I.length||e.onSuccess(),C.next=15;break;case 12:C.prev=12,C.t0=C.catch(2),s(le.showSnackbar({message:C.t0.message,variant:"error"}));case 15:case"end":return C.stop()}}),null,null,[[2,12]],Promise)}),[JSON.stringify(u.fields),f,e.onSuccess]);return l.a.createElement(Ke.a,null,l.a.createElement(Xe.a,{visible:!!e.open},l.a.createElement(Ze.a,{indeterminate:!0,visible:p.loading,color:c.theme.colors.accent}),l.a.createElement(Xe.a.Title,null,"Manifest "+(null==u||null==(n=u.fields)||null==(t=n.user)||null==(r=t.value)?void 0:r.name)+" on "+(null==(i=u.fields.load)||null==(o=i.value)?void 0:o.name)),l.a.createElement(Xe.a.Content,null,l.a.createElement(xn,null)),l.a.createElement(Xe.a.Actions,{style:{justifyContent:"flex-end"}},l.a.createElement(en.a,{onPress:function(){s(ie.reset()),e.onClose()}},"Cancel"),l.a.createElement(en.a,{onPress:b},"Manifest"))))}var Cn=t(130),zn=t(287),jn=t(8),Pn=t.n(jn);function Tn(e,n){var t=e.light;return t||ze.light[n]}function $n(e){var n=e.style,t=e.lightColor,r=e.darkColor,l=Pn()(e,["style","lightColor","darkColor"]),i=Tn({light:t,dark:r},"text");return a.createElement(Ne.a,Be()({style:[{color:i},n]},l))}function Fn(e){var n=e.style,t=e.lightColor,r=e.darkColor,l=Pn()(e,["style","lightColor","darkColor"]),i=Tn({light:t,dark:r},"background");return a.createElement(d.a,Be()({style:[{backgroundColor:i},n]},l))}function Nn(e){var n=e.title,t=e.subtitle;return l.a.createElement(Fn,{style:Dn.empty},l.a.createElement(Cn.a,null,n),l.a.createElement(zn.a,{style:{textAlign:"center"}},t))}var Dn=Oe.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function Mn(e){var n=e.hasPlanes,t=e.hasTicketTypes,r=(e.isPublic,je());return a.createElement(Fn,{style:{width:"70%"}},a.createElement($n,{style:qn.title},"Set up dropzone"),a.createElement(Fn,{style:qn.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ln.a.Item,{title:"Create dropzone",left:function(){return a.createElement(ln.a.Icon,{color:r.success,icon:"check"})}}),a.createElement(ln.a.Item,{title:"Add a plane",left:function(){return n?a.createElement(ln.a.Icon,{color:r.success,icon:"check"}):a.createElement(ln.a.Icon,{color:r.error,icon:"close"})}}),a.createElement(ln.a.Item,{title:"Configure jump tickets",left:function(){return t?a.createElement(ln.a.Icon,{color:r.success,icon:"check"}):a.createElement(ln.a.Icon,{color:r.error,icon:"close"})}}))}var An,Un,qn=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Wn=t(185),Bn=t(302),Rn=Object(Ve.a)(An||(An=Qe()(["\n  query QueryDropzoneUsers(\n    $dropzoneId: Int!\n    $permissions: [Permission!]\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Ln(e){var n,t,r,i,o,s,u,c=Object(a.useState)(!1),d=q()(c,2),m=d[0],f=d[1],p=pe((function(e){return e.global})),v=Object(g.useQuery)(Rn,{variables:{dropzoneId:Number(null==(n=p.currentDropzone)?void 0:n.id),permissions:["actAsGCA"]}}).data;return yn("updateLoad")?l.a.createElement(cn.a,{onDismiss:function(){return f(!1)},visible:m,anchor:l.a.createElement(on.a,{mode:"outlined",icon:"radio-handheld",style:{marginHorizontal:4},onPress:function(){return f(!0)}},null!=(r=e.value)&&r.id?null==(i=e.value)?void 0:i.name:"No gca")},null==v||null==(o=v.dropzone)||null==(s=o.dropzoneUsers)||null==(u=s.edges)?void 0:u.map((function(n){var t,r;return l.a.createElement(ln.a.Item,{onPress:function(){var t;f(!1),e.onSelect(null==n||null==(t=n.node)?void 0:t.user)},title:null==n||null==(t=n.node)||null==(r=t.user)?void 0:r.name})}))):l.a.createElement(on.a,{mode:"outlined",icon:"radio-handheld"},(null==(t=e.value)?void 0:t.name)||"No gca")}function Hn(e){var n,t,r,i,o=Object(a.useState)(!1),s=q()(o,2),u=s[0],c=s[1],d=yn("updateLoad");return d?l.a.createElement(cn.a,{onDismiss:function(){return c(!1)},visible:u,anchor:l.a.createElement(on.a,{mode:"outlined",icon:"parachute",style:{marginHorizontal:4},onPress:function(){return d&&c(!0)}},null!=(t=e.value)&&t.id?null==(r=e.value)?void 0:r.name:"No loadmaster")},null==(i=e.slots)?void 0:i.map((function(n){var t;return l.a.createElement(ln.a.Item,{onPress:function(){c(!1),e.onSelect(n.user)},title:null==n||null==(t=n.user)?void 0:t.name})}))):l.a.createElement(on.a,{mode:"outlined",icon:"radio-handheld"},(null==(n=e.value)?void 0:n.name)||"No loadmaster")}var Qn,Jn=Object(Ve.a)(Un||(Un=Qe()(["\n  query QueryDropzoneUsers(\n    $dropzoneId: Int!\n    $permissions: [Permission!]\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Vn(e){var n,t,r,i,o,s,u,c=Object(a.useState)(!1),d=q()(c,2),m=d[0],f=d[1],p=pe((function(e){return e.global})),v=Object(g.useQuery)(Jn,{variables:{dropzoneId:Number(null==(n=p.currentDropzone)?void 0:n.id),permissions:["actAsPilot"]}}).data;return yn("updateLoad")?l.a.createElement(cn.a,{onDismiss:function(){return f(!1)},visible:m,anchor:l.a.createElement(on.a,{mode:"outlined",icon:"airplane-takeoff",style:{marginHorizontal:4},onPress:function(){return f(!0)}},null!=(r=e.value)&&r.id?null==(i=e.value)?void 0:i.name:"No pilot")},null==v||null==(o=v.dropzone)||null==(s=o.dropzoneUsers)||null==(u=s.edges)?void 0:u.map((function(n){var t,r;return l.a.createElement(ln.a.Item,{onPress:function(){var t;f(!1),e.onSelect(null==n||null==(t=n.node)?void 0:t.user)},title:null==n||null==(t=n.node)||null==(r=t.user)?void 0:r.name})}))):l.a.createElement(on.a,{mode:"outlined",icon:"radio-handheld"},(null==(t=e.value)?void 0:t.name)||"No pilot")}var Gn,Yn,Zn=Object(Ve.a)(Qn||(Qn=Qe()(["\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function _n(e){var n,t,r,i,o=Object(a.useState)(!1),s=q()(o,2),u=s[0],c=s[1],d=pe((function(e){return e.global})),m=Object(g.useQuery)(Zn,{variables:{dropzoneId:Number(null==(n=d.currentDropzone)?void 0:n.id)}}).data,f=yn("updateLoad");return f?l.a.createElement(cn.a,{onDismiss:function(){return c(!1)},visible:u,anchor:l.a.createElement(on.a,{mode:"outlined",icon:"airplane",style:{marginHorizontal:4},onPress:function(){return f&&c(!0)}},(null==(r=e.value)?void 0:r.name)||"No plane")},null==m||null==(i=m.planes)?void 0:i.map((function(n){return l.a.createElement(ln.a.Item,{onPress:function(){c(!1),e.onSelect(n)},title:n.name})}))):l.a.createElement(on.a,{mode:"outlined",icon:"airplane-takeoff"},(null==(t=e.value)?void 0:t.name)||"No plane")}var Kn=Object(g.gql)(Gn||(Gn=Qe()(["\n  query QueryLoad($id: Int!) {\n    load(id: $id) {\n      id\n      name\n      createdAt\n      dispatchAt\n      hasLanded\n      maxSlots\n      isFull\n      isOpen\n      plane {\n        id\n        name\n      }\n      gca {\n        id\n        user {\n          id\n          name\n        }\n      }\n      pilot {\n        id\n        user {\n          id\n          name\n        }\n      }\n      loadMaster {\n        id\n        user {\n          id\n          name\n        }\n      }\n      slots {\n        id\n        createdAt\n        exitWeight\n        user {\n          id\n          name\n        }\n        ticketType {\n          id\n          name\n          altitude\n\n          extras {\n            id\n            name\n            cost\n          }\n        }\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),Xn=Object(g.gql)(Yn||(Yn=Qe()(["\n  mutation UpdateLoad(\n    $id: Int!,\n    $pilotId: Int,\n    $gcaId: Int,\n    $planeId: Int,\n    $isOpen: Boolean,\n  ){\n    updateLoad(input: {\n      id: $id\n      attributes: {\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        planeId: $planeId,\n        isOpen: $isOpen,\n      }\n    }) {\n      load {\n        id\n        name\n        createdAt\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          exitWeight\n          user {\n            id\n            name\n          }\n          ticketType {\n            id\n            name\n            altitude\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function et(e){var n,t,r,l,i,o,s,u,c,d,m,f,p,v,b,y,h,E=pe((function(e){return e.global})),S=a.useState(!1),x=q()(S,2),I=x[0],k=x[1],w=(Object(Je.useNavigation)(),e.load),O=e.loadNumber,C=e.onManifest,z=e.canManifest,j=Object(g.useQuery)(Kn,{variables:{id:Number(w.id)}}),P=j.data,T=j.loading,$=Object(g.useMutation)(Xn),F=q()($,2),N=F[0],D=F[1],M=a.useCallback((function(e){return Ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee.a.awrap(N({variables:{id:Number(w.id),pilotId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(w)]),A=a.useCallback((function(e){return Ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee.a.awrap(N({variables:{id:Number(w.id),gcaId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(w)]),U=a.useCallback((function(e){return Ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee.a.awrap(N({variables:{id:Number(w.id),planeId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(w)]),W=a.useCallback((function(e){return Ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee.a.awrap(N({variables:{id:Number(w.id),loadMasterId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(w)]),B=yn("updateSlot"),R=yn("updateUserSlot"),L=a.useCallback((function(n){var t,r;if((null==n||null==(t=n.user)?void 0:t.id)===(null==(r=E.currentUser)?void 0:r.id)||R)return function(){var t,r;(null==(t=n.user)?void 0:t.id)===(null==(r=E.currentUser)?void 0:r.id)?B&&e.onSlotPress(n):R&&e.onSlotPress(n)}}),[JSON.stringify(w),R,e.onSlotPress]);return a.useEffect((function(){var e,n;null!=P&&null!=(e=P.load)&&e.maxSlots&&(null==P||null==(n=P.load)?void 0:n.maxSlots)<5&&!I&&k(!0)}),[null==P||null==(n=P.load)?void 0:n.maxSlots]),a.createElement(Wn.a,{style:{marginVertical:16},elevation:3},a.createElement(Wn.a.Title,{title:"Load "+O,subtitle:w.name}),a.createElement(Ze.a,{visible:T||D.loading,color:E.theme.colors.accent}),a.createElement(Wn.a.Content,{style:{marginVertical:8,height:I?void 0:300,overflow:"hidden"}},a.createElement(Fn,{style:{flexDirection:"row"}},a.createElement(rn.a,{horizontal:!0},a.createElement(_n,{dropzoneId:Number(null==(t=E.currentDropzone)?void 0:t.id),value:null==P||null==(r=P.load)?void 0:r.plane,onSelect:U}),a.createElement(Ln,{dropzoneId:Number(null==(l=E.currentDropzone)?void 0:l.id),value:null==P||null==(i=P.load)||null==(o=i.gca)?void 0:o.user,onSelect:A}),a.createElement(Vn,{dropzoneId:Number(null==(s=E.currentDropzone)?void 0:s.id),value:null==P||null==(u=P.load)||null==(c=u.pilot)?void 0:c.user,onSelect:M}),a.createElement(Hn,{dropzoneId:Number(null==(d=E.currentDropzone)?void 0:d.id),value:null==P||null==(m=P.load)||null==(f=m.loadMaster)?void 0:f.user,slots:w.slots||[],onSelect:W}))),a.createElement(Bn.a,null,a.createElement(Bn.a.Header,{style:{width:"100%"}},a.createElement(Bn.a.Row,{style:{width:"100%"}},a.createElement(Bn.a.Title,null,"Name"),a.createElement(Bn.a.Title,{numeric:!0},"Exit weight"),a.createElement(Bn.a.Title,{numeric:!0},"Jump type"),a.createElement(Bn.a.Title,{numeric:!0},"Altitude"))),null==P||null==(p=P.load)||null==(v=p.slots)?void 0:v.map((function(e){var n,t,r;return a.createElement(Bn.a.Row,{onPress:L(e)},a.createElement(Bn.a.Cell,{onPress:L(e)},null==e||null==(n=e.user)?void 0:n.name),a.createElement(Bn.a.Cell,{numeric:!0,onPress:L(e)},null==e?void 0:e.exitWeight),a.createElement(Bn.a.Cell,{numeric:!0,onPress:L(e)},null==e||null==(t=e.jumpType)?void 0:t.name),a.createElement(Bn.a.Cell,{numeric:!0,onPress:L(e)},null==e||null==(r=e.ticketType)?void 0:r.altitude))})),Array.from({length:((null==w?void 0:w.maxSlots)||0)-((null==w||null==(b=w.slots)?void 0:b.length)||0)},(function(e,n){return n})).map((function(){return a.createElement(Bn.a.Row,null,a.createElement(Bn.a.Cell,null,"- Available -"),a.createElement(Bn.a.Cell,{numeric:!0},"-"),a.createElement(Bn.a.Cell,{numeric:!0},"-"),a.createElement(Bn.a.Cell,{numeric:!0},"-"))})))),a.createElement(Wn.a.Actions,{style:{justifyContent:"flex-end"}},null!=P&&null!=(y=P.load)&&y.maxSlots&&(null==P||null==(h=P.load)?void 0:h.maxSlots)<5?null:a.createElement(en.a,{onPress:function(){return k(!I)}},I?"Show less":"Show more"),a.createElement(en.a,{mode:"contained",onPress:function(){return C()},disabled:!z},"Manifest")))}var nt;Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",marginVertical:8},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fab:{position:"absolute",margin:16,right:0,bottom:0}});function tt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function rt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tt(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var at=Object(Ve.a)(nt||(nt=Qe()(["\n  query QueryDropzone($dropzoneId: Int!, $earliestTimestamp: Int) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor,\n      secondaryColor,\n      planes {\n        id\n        name\n        registration\n      }\n      ticketTypes {\n        id\n        name\n      }\n\n      currentUser {\n        id\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n\n      loads(earliestTimestamp: $earliestTimestamp) {\n        edges {\n          node {\n            id\n            name\n            isOpen\n            maxSlots\n            isFull\n          }\n        }\n      }\n    }\n  }\n"])));function lt(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p=pe((function(e){return e.global})),v=(pe((function(e){return e.slotForm})),a.useState(!1)),b=q()(v,2),y=b[0],h=b[1],E=fe(),S=Object(g.useQuery)(at,{variables:{dropzoneId:Number(null==(e=p.currentDropzone)?void 0:e.id)},fetchPolicy:"no-cache"}),x=S.data,I=S.loading,k=S.refetch,w=Object(Je.useNavigation)(),O=!(null==x||null==(n=x.dropzone)||null==(t=n.planes)||!t.length),C=!(null==x||null==(r=x.dropzone)||null==(l=r.ticketTypes)||!l.length),z=!(null==x||null==(i=x.dropzone)||!i.isPublic),j=O&&C;a.useEffect((function(){var e,n;null!=x&&null!=(e=x.dropzone)&&e.id&&(E(ae.setDropzone(x.dropzone)),E(ae.setUser(rt(rt({},null==p?void 0:p.currentUser),(null==x||null==(n=x.dropzone)?void 0:n.currentUser.user)||{}))))}),[JSON.stringify(null==x?void 0:x.dropzone)]),a.useEffect((function(){var e,n,t,r,a,l,i,o;null!=x&&null!=(e=x.dropzone)&&e.primaryColor&&(null==x||null==(n=x.dropzone)?void 0:n.primaryColor)!==(null==(t=p.theme)||null==(r=t.colors)?void 0:r.primary)&&E(ae.setPrimaryColor(x.dropzone.primaryColor)),null!=x&&null!=(a=x.dropzone)&&a.secondaryColor&&(null==x||null==(l=x.dropzone)?void 0:l.secondaryColor)!==(null==(i=p.theme)||null==(o=i.colors)?void 0:o.accent)&&E(ae.setPrimaryColor(x.dropzone.secondaryColor))}),[null==x||null==(o=x.dropzone)?void 0:o.primaryColor,null==x||null==(s=x.dropzone)?void 0:s.secondaryColor]);var P=yn("createSlot"),T=yn("createLoad");return a.createElement(a.Fragment,null,a.createElement(On,{open:y,onClose:function(){return h(!1)},onSuccess:function(){return h(!1)}}),a.createElement(Ze.a,{visible:I,indeterminate:!0,color:p.theme.colors.accent}),a.createElement(Fn,{style:it.container},!I&&(j?a.createElement(Fn,{style:{width:"100%",flex:1,height:Ge.a.get("window").height}},((null==x||null==(u=x.dropzone)||null==(c=u.loads)||null==(d=c.edges)?void 0:d.length)||0)<1?a.createElement(Nn,{title:"No loads so far today",subtitle:"How's the weather?"}):a.createElement(Ye.a,{style:{flex:1,height:Ge.a.get("window").height},contentContainerStyle:{flexGrow:1},numColumns:1,data:(null==x||null==(m=x.dropzone)||null==(f=m.loads)?void 0:f.edges)||[],refreshing:I,onRefresh:k,renderItem:function(e){var n,t,r,l,i,o=e.item,s=e.index;return null!=o&&o.node?a.createElement(et,{key:"load-"+o.node.id,load:o.node,canManifest:P&&(null==o||null==(n=o.node)?void 0:n.isOpen)&&!(null!=o&&null!=(t=o.node)&&t.isFull),loadNumber:((null==x||null==(r=x.dropzone)||null==(l=r.loads)||null==(i=l.edges)?void 0:i.length)||0)-s,onSlotPress:function(e){E(ie.setOriginal(e)),E(ie.setField(["load",o.node])),h(!0)},onManifest:function(){E(ie.setField(["user",p.currentUser])),E(ie.setField(["load",o.node])),h(!0)}}):null}})):a.createElement(Mn,{hasPlanes:O,hasTicketTypes:C,isPublic:z})),T&&j&&a.createElement(_e.a,{style:it.fab,small:!0,icon:"plus",onPress:function(){return w.navigate("CreateLoadScreen")},label:"New load"})))}var it=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fab:{position:"absolute",margin:16,right:0,bottom:0}}),ot=t(367);function st(e){return a.createElement($n,Be()({},e,{style:[e.style,{fontFamily:"space-mono"}]}))}function ut(e){var n=e.path;return l.a.createElement(Fn,null,l.a.createElement(Fn,{style:dt.getStartedContainer},l.a.createElement($n,{style:dt.getStartedText,lightColor:"rgba(0,0,0,0.8)",darkColor:"rgba(255,255,255,0.8)"},"Open up the code for this screen:"),l.a.createElement(Fn,{style:[dt.codeHighlightContainer,dt.homeScreenFilename],darkColor:"rgba(255,255,255,0.05)",lightColor:"rgba(0,0,0,0.05)"},l.a.createElement(st,null,n)),l.a.createElement($n,{style:dt.getStartedText,lightColor:"rgba(0,0,0,0.8)",darkColor:"rgba(255,255,255,0.8)"},"Change any of the text, save the file, and your app will automatically update.")),l.a.createElement(Fn,{style:dt.helpContainer},l.a.createElement(De.a,{onPress:ct,style:dt.helpLink},l.a.createElement($n,{style:dt.helpLinkText,lightColor:ze.light.tint},"Tap here if your app doesn't automatically update after making changes"))))}function ct(){ot.a("https://docs.expo.io/get-started/create-a-new-app/#opening-the-app-on-your-phonetablet")}var dt=Oe.a.create({container:{flex:1,backgroundColor:"#fff"},developmentModeText:{marginBottom:20,fontSize:14,lineHeight:19,textAlign:"center"},contentContainer:{paddingTop:30},welcomeContainer:{alignItems:"center",marginTop:10,marginBottom:20},welcomeImage:{width:100,height:80,resizeMode:"contain",marginTop:3,marginLeft:-10},getStartedContainer:{alignItems:"center",marginHorizontal:50},homeScreenFilename:{marginVertical:7},codeHighlightText:{color:"rgba(96,100,109, 0.8)"},codeHighlightContainer:{borderRadius:3,paddingHorizontal:4},getStartedText:{fontSize:17,lineHeight:24,textAlign:"center"},helpContainer:{marginTop:15,marginHorizontal:20,alignItems:"center"},helpLink:{paddingVertical:15},helpLinkText:{textAlign:"center"}});function mt(){return a.createElement(Fn,{style:gt.container},a.createElement($n,{style:gt.title},"Tab One"),a.createElement(Fn,{style:gt.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ut,{path:"/screens/LoadScreen.tsx"}))}var ft,pt,gt=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),vt=D.actions,bt=t(304),yt=Object(Ve.a)(ft||(ft=Qe()(["\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function ht(e){var n,t,r,i=Object(a.useState)(!1),o=q()(i,2),s=o[0],u=o[1],c=pe((function(e){return e.global})),d=Object(g.useQuery)(yt,{variables:{dropzoneId:Number(null==(n=c.currentDropzone)?void 0:n.id)}}),m=d.data;d.loading,d.refetch;return l.a.createElement(cn.a,{onDismiss:function(){return u(!1)},visible:s,anchor:l.a.createElement(ln.a.Item,{onPress:function(){u(!0)},title:(null==(t=e.value)?void 0:t.name)||"No plane selected",description:e.required?null:"Optional",left:function(){return l.a.createElement(ln.a.Icon,{icon:"airplane"})}})},null==m||null==(r=m.planes)?void 0:r.map((function(n){return l.a.createElement(ln.a.Item,{onPress:function(){u(!1),e.onSelect(n)},title:n.name||"-",description:n.registration})})))}var Et=function(e,n){var t=n.getPayload;return function(n){var r=n.variables,l=n.onError,i=fe(),o=Object(g.useQuery)(e,{variables:r}),s=o.data,u=o.loading,c=o.previousData,d=o.refetch,m=o.error,f=Object(a.useMemo)((function(){return t(s)}),[JSON.stringify(s)]);return Object(a.useEffect)((function(){JSON.stringify(c),JSON.stringify(s);null!=m&&m.message&&(!1!==n.showSnackbarErrors&&i(le.showSnackbar({message:m.message,variant:"error"})),l(m.message))}),[n.onError,null==m?void 0:m.message]),{loading:u,data:f,refetch:d}}}(Object(Ve.a)(pt||(pt=Qe()(["\nquery QueryDropzoneUsers(\n  $dropzoneId: Int!\n  $permissions: [Permission!]\n) {\n  dropzone(id: $dropzoneId) {\n    id\n    name\n\n    dropzoneUsers(permissions: $permissions) {\n      edges {\n        node {\n          id\n          role {\n            id\n            name\n          }\n          user {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n}\n"]))),{getPayload:function(e){var n;return null==e||null==(n=e.dropzone)?void 0:n.dropzoneUsers}});function St(e){var n,t,r,i,o,s=Object(a.useState)(!1),u=q()(s,2),c=u[0],d=u[1],m=pe((function(e){return e.global})),f=Et({variables:{dropzoneId:Number(null==(n=m.currentDropzone)?void 0:n.id),permissions:e.requiredPermissions}}),p=f.data;f.loading,f.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cn.a,null,e.label),l.a.createElement(cn.a,{onDismiss:function(){return d(!1)},visible:c,anchor:l.a.createElement(ln.a.Item,{onPress:function(){d(!0)},title:null!=(t=e.value)&&null!=(r=t.user)&&r.id?null==(i=e.value)?void 0:i.user.name:"No user selected",description:e.required?null:"Optional"})},null==p||null==(o=p.edges)?void 0:o.map((function(n){var t,r,a,i;return l.a.createElement(ln.a.Item,{onPress:function(){d(!1),e.onSelect(null==n?void 0:n.node)},title:(null==n||null==(t=n.node)||null==(r=t.user)?void 0:r.name)||"-",description:(null==n||null==(a=n.node)||null==(i=a.role)?void 0:i.name)||null})}))))}var xt=_.actions;function It(){var e,n,t,r,l,i=pe((function(e){return e.loadForm})),o=fe(),s=pe((function(e){return e.global}));return a.createElement(rn.a,{style:wt.fields,contentContainerStyle:{paddingTop:200}},a.createElement(un.a,{style:wt.field,mode:"outlined",label:"Name",error:!!i.fields.name.error,value:i.fields.name.value||"",onChangeText:function(e){return o(xt.setField(["name",e]))}}),a.createElement(an.a,{type:i.fields.name.error?"error":"info"},i.fields.name.error||""),a.createElement(ht,{value:i.fields.plane.value,onSelect:function(e){o(xt.setField(["plane",e])),o(xt.setField(["maxSlots",e.maxSlots]))},dropzoneId:Number(null==(e=s.currentDropzone)?void 0:e.id)}),a.createElement(an.a,{type:i.fields.plane.error?"error":"info"},i.fields.plane.error||""),a.createElement(un.a,{style:wt.field,mode:"outlined",label:"Slots",error:!!i.fields.maxSlots.value,value:null==(n=i.fields.maxSlots)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return o(xt.setField(["maxSlots",Number(e)]))}}),a.createElement(an.a,{type:i.fields.maxSlots.error?"error":"info"},i.fields.maxSlots.error||""),a.createElement(bt.a.Item,{label:"Allow public manifesting",status:i.fields.isOpen.value?"checked":"unchecked",onPress:function(){return o(xt.setField(["isOpen",!i.fields.isOpen.value]))}}),a.createElement(sn.a,null),a.createElement(St,{label:"GCA",onSelect:function(e){return o(xt.setField(["gca",e]))},dropzoneId:Number(null==(r=s.currentDropzone)?void 0:r.id),value:i.fields.gca.value||null,requiredPermissions:["actAsGCA"],required:!0}),a.createElement(an.a,{type:i.fields.gca.error?"error":"info"},i.fields.gca.error||""),a.createElement(St,{label:"Pilot",onSelect:function(e){return o(xt.setField(["pilot",e]))},dropzoneId:Number(null==(l=s.currentDropzone)?void 0:l.id),value:i.fields.pilot.value||null,requiredPermissions:["actAsPilot"]}),a.createElement(an.a,{type:i.fields.pilot.error?"error":"info"},i.fields.pilot.error||""))}var kt,wt=Oe.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),Ot=_.actions,Ct=(T.actions,Object(g.gql)(kt||(kt=Qe()(["\n  mutation CreateLoad(\n    $name: String,\n    $pilotId: Int,\n    $gcaId: Int,\n    $maxSlots: Int!,\n    $planeId: Int,\n    $isOpen: Boolean,\n  ){\n    createLoad(input: {\n      attributes: {\n        name: $name,\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        maxSlots: $maxSlots,\n        planeId: $planeId,\n        isOpen: $isOpen,\n      }\n    }) {\n      load {\n        id\n        name\n        pilot {\n          id\n          user {\n            id \n            name\n          }\n        }\n        gca {\n          id\n          user {\n            id \n            name\n          }\n        }\n        maxSlots\n        isOpen\n      }\n    }\n  }\n"]))));function zt(){var e=pe((function(e){return e})),n=e.loadForm,t=e.global,r=fe(),l=Object(Je.useNavigation)(),i=Object(g.useMutation)(Ct),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e,t,a=!1;return((null==(e=n.fields.name)||null==(t=e.value)?void 0:t.length)||0)<3&&(a=!0,r(Ot.setFieldError(["name","Name is too short"]))),n.fields.maxSlots.value<1&&(a=!0,r(Ot.setFieldError(["maxSlots","Please specify amount of allowed jumpers"]))),n.fields.plane.value||(a=!0,r(Ot.setFieldError(["plane","What plane is flying this load?"]))),n.fields.gca.value||(a=!0,r(Ot.setFieldError(["gca","You must have a GCA for this load"]))),!a}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p,g,v,b,y,h,E,S,x,I;return Ee.a.async((function(k){for(;;)switch(k.prev=k.next){case 0:if(e=n.fields,a=e.name,i=e.gca,e.loadMaster,o=e.plane,u=e.maxSlots,d=e.pilot,m=e.isOpen,!c()){k.next=12;break}return k.prev=2,k.next=5,Ee.a.awrap(s({variables:{dropzoneId:Number(null==(f=t.currentDropzone)?void 0:f.id),name:a.value,maxSlots:u.value,planeId:null!=(p=o.value)&&p.id?Number(null==(g=o.value)?void 0:g.id):null,pilotId:null!=(v=d.value)&&v.id?Number(null==(b=o.value)?void 0:b.id):null,gcaId:null!=(y=i.value)&&y.id?Number(null==(h=i.value)?void 0:h.id):null,isOpen:!!m.value}}));case 5:x=k.sent,null!=(E=x.data)&&null!=(S=E.createLoad)&&S.load&&(I=x.data.createLoad.load,r(vt.showSnackbar({message:"Load "+I.name+" created",variant:"success"})),l.goBack()),k.next=12;break;case 9:k.prev=9,k.t0=k.catch(2),r(vt.showSnackbar({message:k.t0.message,variant:"error"}));case 12:case"end":return k.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Fn,{style:Pt.container},a.createElement(It,null),a.createElement(Fn,{style:Pt.fields},a.createElement(en.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var jt,Pt=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Tt=t(301),$t=t(34),Ft=Object(g.gql)(jt||(jt=Qe()(["\n  query QueryDropzonesCompact {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));var Nt=Oe.a.create({warning:{flexDirection:"row",alignItems:"center",height:56,width:"100%",backgroundColor:"#ffbb33",justifyContent:"space-between",paddingHorizontal:32}}),Dt=function(e){var n,t,r,i,o,s,u,c=e.navigation,m=e.previous,f=e.scene,p=Object(a.useState)(!1),v=q()(p,2),b=v[0],y=v[1],h=Object(g.useQuery)(Ft).data,E=pe((function(e){return e.global})),S=E.currentDropzone,x=(E.theme,fe()),I=!(null==S||null==(n=S.currentUser)||null==(t=n.user)||null==(r=t.rigs)||!r.length),k=!(null==S||null==(i=S.currentUser)||null==(o=i.user)||!o.exitWeight),w=!I||!k;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt.a.Header,null,m?l.a.createElement(Tt.a.BackAction,{onPress:c.goBack}):null,l.a.createElement(Tt.a.Content,{title:f.descriptor.options.title}),l.a.createElement(cn.a,{onDismiss:function(){return y(!1)},visible:b,anchor:l.a.createElement($t.a,{onPress:function(){return y(!0)},style:{color:"white",marginRight:8}},null==S?void 0:S.name)},null==h||null==(s=h.dropzones)||null==(u=s.edges)?void 0:u.map((function(e){var n;return l.a.createElement(cn.a.Item,{title:null==e||null==(n=e.node)?void 0:n.name,onPress:function(){x(ae.setDropzone(null==e?void 0:e.node)),y(!1)}})})))),w&&l.a.createElement(d.a,{style:Nt.warning},l.a.createElement(zn.a,null,"You need to complete your profile"),l.a.createElement(en.a,{color:"black",mode:"outlined",onPress:function(){return c.navigate("Profile")}},"Take me there")))},Mt=Object(Fe.a)();function At(){var e=pe((function(e){return e.global}));return a.createElement(Mt.Navigator,{screenOptions:{headerShown:!(!e.credentials||!e.currentDropzone),header:function(e){return a.createElement(Dt,e)},cardStyle:{flex:1}}},a.createElement(Mt.Screen,{name:"DropzoneScreen",component:lt,options:{title:"Manifest"}}),a.createElement(Mt.Screen,{name:"LoadScreen",component:mt,options:{title:"Loads"}}),a.createElement(Mt.Screen,{name:"CreateLoadScreen",component:zt,options:{title:"Create load"}}))}function Ut(){return a.createElement(Fn,{style:qt.container},a.createElement($n,{style:qt.title},"Tab One"),a.createElement(Fn,{style:qt.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ut,{path:"/screens/PackingScreen.tsx"}))}var qt=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Wt=Object(Fe.a)();function Bt(){return a.createElement(Wt.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},a.createElement(Wt.Screen,{name:"PackingScreen",component:Ut}))}var Rt=t(214),Lt=t(361),Ht=t.n(Lt);t(460);function Qt(e){var n=a.useState(!1),t=q()(n,2),r=t[0],l=t[1];a.useCallback((function(){l(!1)}),[l]),a.useCallback((function(n){var t=n.date;l(!1),e.onChange(t.getTime()/1e3)}),[l,e.onChange]);return a.createElement(a.Fragment,null,a.createElement(cn.a,{onDismiss:function(){return l(!1)},visible:r,anchor:a.createElement(ln.a.Item,{onPress:function(){return l(!0)},title:"Reserve repack due date",description:e.timestamp?Object(Rt.a)(1e3*e.timestamp,"yyyy/MM/dd"):"No date selected",left:function(){return a.createElement(ln.a.Icon,{icon:"calendar"})}})},a.createElement(Ht.a,{selectedDays:e.timestamp?[new Date(1e3*e.timestamp)]:[],onDayClick:function(n){e.onChange(n.getTime()/1e3),l(!1)}})))}var Jt=re.actions;function Vt(){var e,n=pe((function(e){return e.rigForm})),t=fe(),r=a.useState(!1),l=q()(r,2);l[0],l[1];return a.createElement(rn.a,{style:Zt.fields},a.createElement(un.a,{style:Zt.field,mode:"outlined",label:"Make",error:!!n.fields.make.error,value:n.fields.make.value||"",onChangeText:function(e){return t(Jt.setField(["make",e]))}}),a.createElement(an.a,{type:n.fields.make.error?"error":"info"},n.fields.make.error||"e.g Javelin, Mirage"),a.createElement(un.a,{style:Zt.field,mode:"outlined",label:"Model",error:!!n.fields.model.error,value:n.fields.model.value||"",onChangeText:function(e){return t(Jt.setField(["model",e]))}}),a.createElement(an.a,{type:n.fields.model.error?"error":"info"},n.fields.model.error||"e.g G4.1"),a.createElement(un.a,{style:Zt.field,mode:"outlined",label:"Serial",error:!!n.fields.serial.error,value:n.fields.serial.value||"",onChangeText:function(e){return t(Jt.setField(["serial",e]))}}),a.createElement(an.a,{type:n.fields.serial.error?"error":"info"},n.fields.serial.error||""),a.createElement(un.a,{style:Zt.field,mode:"outlined",label:"Current canopy size",error:!!n.fields.canopySize.error,value:(null==(e=n.fields.canopySize.value)?void 0:e.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return t(Jt.setField(["canopySize",Number(e)]))}}),a.createElement(an.a,{type:n.fields.canopySize.error?"error":"info"},n.fields.canopySize.error||"Size of canopy in container"),a.createElement(Qt,{timestamp:n.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return t(Jt.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}))}var Gt,Yt,Zt=Oe.a.create({fields:{flex:1},field:{marginBottom:8}});function _t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Kt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_t(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_t(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Xt=Object(g.gql)(Gt||(Gt=Qe()(["\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),er=Object(g.gql)(Yt||(Yt=Qe()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function nr(e){var n,t=fe(),r=pe((function(e){return e.rigForm})),i=pe((function(e){return e.global})),o=Object(g.useMutation)(Xt),s=q()(o,2),u=s[0],c=s[1],d=Object(g.useMutation)(er),m=q()(d,2),f=m[0],p=m[1],v=Object(a.useCallback)((function(){var e=!1;return r.fields.make.value||(e=!0,t(se.setFieldError(["make","Required"]))),r.fields.model.value||(e=!0,t(se.setFieldError(["model","Required"]))),r.fields.serial.value||(e=!0,t(se.setFieldError(["serial","Required"]))),r.fields.canopySize.value||(e=!0,t(se.setFieldError(["canopySize","Required"]))),r.fields.repackExpiresAt.value||(e=!0,t(se.setFieldError(["repackExpiresAt","Required"]))),!e}),[JSON.stringify(r.fields)]),b=Object(a.useCallback)((function(){var n,a,l,i,o,s,c,d,m,p,g,b;return Ee.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(v()){y.next=2;break}return y.abrupt("return");case 2:return y.prev=2,p=null!=(n=r.original)&&n.id?f:u,y.next=6,Ee.a.awrap(p({variables:Kt(Kt({},null!=(a=r.original)&&a.id?{id:null==(l=r.original)?void 0:l.id}:{}),{},{make:r.fields.make.value,model:r.fields.model.value,serial:r.fields.serial.value,canopySize:r.fields.canopySize.value,repackExpiresAt:r.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(g=y.sent,null==(b=null!=(i=r.original)&&i.id?null==(o=g.data)?void 0:o.updateRig:null==(s=g.data)?void 0:s.createRig)||null==(c=b.fieldErrors)||c.map((function(e){var n=e.field,r=e.message;switch(n){case"make":return t(se.setFieldError(["make",r]));case"model":return t(se.setFieldError(["model",r]));case"serial":return t(se.setFieldError(["serial",r]));case"canopySize":return t(se.setFieldError(["canopySize",r]));case"repack_expires_at":return t(se.setFieldError(["repackExpiresAt",r]))}})),null==b||null==(d=b.errors)||!d.length){y.next=11;break}return y.abrupt("return",t(le.showSnackbar({message:null==b?void 0:b.errors[0],variant:"error"})));case 11:null!=b&&null!=(m=b.fieldErrors)&&m.length||e.onSuccess(),y.next=17;break;case 14:y.prev=14,y.t0=y.catch(2),t(le.showSnackbar({message:y.t0.message,variant:"error"}));case 17:case"end":return y.stop()}}),null,null,[[2,14]],Promise)}),[JSON.stringify(r.fields),u,e.onSuccess]);return l.a.createElement(Ke.a,null,l.a.createElement(Xe.a,{visible:!!e.open},l.a.createElement(Ze.a,{indeterminate:!0,visible:c.loading||p.loading,color:i.theme.colors.accent}),l.a.createElement(Xe.a.Title,null,(null!=r&&null!=(n=r.original)&&n.id?"Edit":"New")+" rig"),l.a.createElement(Xe.a.Content,null,l.a.createElement(Vt,null)),l.a.createElement(Xe.a.Actions,{style:{justifyContent:"flex-end"}},l.a.createElement(en.a,{onPress:function(){t(se.reset()),e.onClose()}},"Cancel"),l.a.createElement(en.a,{onPress:b},"Save"))))}function tr(e){var n=Object(a.useState)(Ge.a.get("window").height),t=q()(n,2),r=t[0],i=t[1];return Object(a.useEffect)((function(){return Ge.a.addEventListener("change",(function(e){var n=e.window;return i(n.height)})),function(){Ge.a.removeEventListener("change",(function(e){var n=e.window;return i(n.height)}))}}),[]),l.a.createElement(rn.a,{style:[ar.container,{height:r},e.style],contentContainerStyle:[ar.content,e.contentContainerStyle]},e.children)}var rr,ar=Oe.a.create({container:{flex:1},content:{flexGrow:1,alignItems:"center"}}),lr=Object(Ve.a)(rr||(rr=Qe()(["\n  query QueryDropzoneUser($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      currentUser {\n        id\n        credits\n        role {\n          id\n          name\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function ir(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p,v,b,y,h,E,S,x,I,k,w,O,C,z,j,P,T,$=pe((function(e){return e.global})),F=fe(),N=Object(Je.useNavigation)(),D=a.useState(!1),M=q()(D,2),A=M[0],U=M[1],W=Object(g.useQuery)(lr,{variables:{dropzoneId:Number(null==(e=$.currentDropzone)?void 0:e.id)}}),B=W.data,R=W.loading,L=a.useCallback((function(e){return function(){F(se.setOriginal(e)),U(!0)}}),[F,U]);return a.createElement(a.Fragment,null,a.createElement(Ze.a,{color:$.theme.colors.accent,indeterminate:!0,visible:R}),a.createElement(tr,{contentContainerStyle:or.content},a.createElement(Wn.a,{elevation:3,style:or.card},a.createElement(Wn.a.Title,{title:"Basic information"}),a.createElement(Wn.a.Content,null,a.createElement(ln.a.Item,{title:"Name",left:function(){return a.createElement(ln.a.Icon,{icon:"account-outline"})},description:(null==B||null==(n=B.dropzone)||null==(t=n.currentUser)||null==(r=t.user)?void 0:r.name)||"-"}),a.createElement(ln.a.Item,{title:"Email",left:function(){return a.createElement(ln.a.Icon,{icon:"at"})},description:(null==B||null==(l=B.dropzone)||null==(i=l.currentUser)||null==(o=i.user)?void 0:o.email)||"-"}),a.createElement(ln.a.Item,{title:"Phone",left:function(){return a.createElement(ln.a.Icon,{icon:"phone"})},description:(null==B||null==(s=B.dropzone)||null==(u=s.currentUser)||null==(c=u.user)?void 0:c.phone)||"-"}),a.createElement(ln.a.Item,{title:"License",left:function(){return a.createElement(ln.a.Icon,{icon:"ticket-account"})},description:(null==B||null==(d=B.dropzone)||null==(m=d.currentUser)||null==(f=m.user)||null==(p=f.license)?void 0:p.name)||"-"}),a.createElement(ln.a.Item,{title:"Exit weight",left:function(){return a.createElement(ln.a.Icon,{icon:"scale"})},description:(null==B||null==(v=B.dropzone)||null==(b=v.currentUser)||null==(y=b.user)?void 0:y.exitWeight)||"-"})),a.createElement(Wn.a.Actions,{style:{justifyContent:"flex-end"}},a.createElement(en.a,{icon:"pencil",onPress:function(){return N.navigate("UpdateUserScreen",{user:$.currentUser})}},"Edit"))),a.createElement(Wn.a,{elevation:3,style:or.card},a.createElement(Wn.a.Title,{title:null==(h=$.currentDropzone)?void 0:h.name}),a.createElement(Wn.a.Content,null,a.createElement(ln.a.Item,{title:"Role",description:null==B||null==(E=B.dropzone)||null==(S=E.currentUser)||null==(x=S.role)?void 0:x.name,left:function(){return a.createElement(ln.a.Icon,{icon:"lock"})}}),a.createElement(ln.a.Item,{title:"Credits",description:null==B||null==(I=B.dropzone)||null==(k=I.currentUser)?void 0:k.credits,left:function(){return a.createElement(ln.a.Icon,{icon:"cash-multiple"})}})),a.createElement(Wn.a.Actions,{style:{justifyContent:"flex-end"}},a.createElement(en.a,{icon:"pencil"},"Edit"))),a.createElement(Wn.a,{elevation:3,style:or.card},a.createElement(Wn.a.Title,{title:"Rigs"}),a.createElement(Wn.a.Content,null,a.createElement(Bn.a,null,a.createElement(Bn.a.Header,null,a.createElement(Bn.a.Row,null,a.createElement(Bn.a.Title,null,"Make"),a.createElement(Bn.a.Title,null,"Model"),a.createElement(Bn.a.Title,null,"Serial"),a.createElement(Bn.a.Title,{numeric:!0},"Repack expires"),a.createElement(Bn.a.Title,{numeric:!0},"Canopy size"))),null==B||null==(w=B.dropzone)||null==(O=w.currentUser)||null==(C=O.user)||null==(z=C.rigs)?void 0:z.map((function(e){return a.createElement(Bn.a.Row,{onPress:L(e)},a.createElement(Bn.a.Cell,{onPress:L(e)},null==e?void 0:e.make),a.createElement(Bn.a.Cell,{onPress:L(e)},null==e?void 0:e.model),a.createElement(Bn.a.Cell,{onPress:L(e)},null==e?void 0:e.serial),a.createElement(Bn.a.Cell,{onPress:L(e)},null!=e&&e.repackExpiresAt?Object(Rt.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),a.createElement(Bn.a.Cell,{onPress:L(e)},(null==e?void 0:e.canopySize)+"sqft"))})))),a.createElement(Wn.a.Actions,{style:{justifyContent:"flex-end"}},a.createElement(en.a,{onPress:function(){return U(!0)}},"Add rig"))),a.createElement(en.a,{color:"#B00020",onPress:function(){return F(ae.logout())}},"Log out")),a.createElement(nr,{onClose:function(){return U(!1)},onSuccess:function(){return U(!0)},userId:Number(null==B||null==(j=B.dropzone)||null==(P=j.currentUser)||null==(T=P.user)?void 0:T.id),open:A}))}var or=Oe.a.create({container:{flex:1},content:{alignItems:"center",flexGrow:1,paddingBottom:56},card:{marginVertical:8,width:"80%"},fields:{width:"80%",display:"flex"},spacer:{width:"100%",height:32},title:{fontSize:20,fontWeight:"bold"},fab:{position:"absolute",margin:16,right:0,bottom:0},separator:{marginVertical:30,height:1,width:"80%"}});function sr(){return a.createElement(Fn,{style:dr.container},a.createElement($n,{style:dr.title},"Tab One"),a.createElement(Fn,{style:dr.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ut,{path:"/screens/RigScreen.tsx"}))}var ur,cr,dr=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),mr=Object(Ve.a)(ur||(ur=Qe()(["\n  query Licenses($federationId: Int) {\n    licenses(federationId: $federationId) {\n      id\n      name\n\n      federation {\n        id\n        name\n      }\n\n    }\n  }\n"])));function fr(e){var n,t,r=Object(a.useState)(!1),i=q()(r,2),o=i[0],s=i[1],u=(pe((function(e){return e.global})),Object(g.useQuery)(mr,{variables:{federationId:e.federationId}})),c=u.data;u.loading,u.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ln.a.Subheader,null,"License"),l.a.createElement(cn.a,{onDismiss:function(){return s(!1)},visible:o,anchor:l.a.createElement(ln.a.Item,{onPress:function(){s(!0)},title:(null==(n=e.value)?void 0:n.name)||"Please select a license",description:e.required?null:"Optional"})},null==c||null==(t=c.licenses)?void 0:t.map((function(n){return l.a.createElement(ln.a.Item,{onPress:function(){s(!1),e.onSelect(n)},title:n.name||"-"})}))))}var pr=Object(Ve.a)(cr||(cr=Qe()(["\n  query Federations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function gr(e){var n,t,r=Object(a.useState)(!1),i=q()(r,2),o=i[0],s=i[1],u=Object(g.useQuery)(pr).data;return Object(a.useEffect)((function(){var n;1!==(null==u||null==(n=u.federations)?void 0:n.length)||e.value||e.onSelect(u.federations[0])}),[JSON.stringify(null==u?void 0:u.federations)]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ln.a.Subheader,null,"Federation"),l.a.createElement(cn.a,{onDismiss:function(){return s(!1)},visible:o,anchor:l.a.createElement(ln.a.Item,{onPress:function(){s(!0)},title:(null==(n=e.value)?void 0:n.name)||"Please select federation",description:e.required?null:"Optional"})},null==u||null==(t=u.federations)?void 0:t.map((function(n){return l.a.createElement(ln.a.Item,{onPress:function(){s(!1),e.onSelect(n)},title:n.name||"-"})}))))}var vr=ne.actions;function br(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p,g,v,b,y,h,E,S,x,I,k,w,O,C,z=pe((function(e){return e.userForm})),j=fe(),P=pe((function(e){return e.global}));a.useEffect((function(){var e;z.original&&(z.fields.exitWeight.value||j(vr.setField(["exitWeight",z.original.exitWeight||"60"])),!z.fields.rigs.value&&null!=(e=z.original)&&e.id&&j(vr.setField(["rigs",z.original.rigs])))}),[null==(e=z.original)?void 0:e.id]);null==z||null==(n=z.original)||n.id,null==z||null==(t=z.original)||t.id,null==(r=P.currentUser)||r.id;return a.createElement(rn.a,{style:hr.fields,contentContainerStyle:{flexGrow:1}},a.createElement(un.a,{style:hr.field,mode:"outlined",label:"Name",error:!!z.fields.name.error,value:(null==(l=z.fields.name)||null==(i=l.value)?void 0:i.toString())||"",onChangeText:function(e){return j(vr.setField(["name",e]))}}),a.createElement(an.a,{type:z.fields.name.error?"error":"info"},z.fields.name.error||" "),a.createElement(un.a,{style:hr.field,mode:"outlined",label:"Email",error:!!z.fields.email.error,value:(null==(o=z.fields.email)||null==(s=o.value)?void 0:s.toString())||"",onChangeText:function(e){return j(vr.setField(["email",e]))}}),a.createElement(an.a,{type:z.fields.email.error?"error":"info"},z.fields.email.error||" "),a.createElement(un.a,{style:hr.field,mode:"outlined",label:"Phone",error:!!z.fields.phone.error,value:(null==(u=z.fields.phone)||null==(c=u.value)?void 0:c.toString())||"",onChangeText:function(e){return j(vr.setField(["phone",e]))}}),a.createElement(an.a,{type:z.fields.phone.error?"error":"info"},z.fields.phone.error||""),a.createElement(un.a,{style:hr.field,mode:"outlined",label:"Exit weight",error:!!z.fields.exitWeight.error,value:(null==(d=z.fields.exitWeight)||null==(m=d.value)?void 0:m.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(un.a.Affix,{text:"kg"})},onChangeText:function(e){return j(vr.setField(["exitWeight",e]))}}),a.createElement(an.a,{type:z.fields.exitWeight.error?"error":"info"},z.fields.exitWeight.error||""),a.createElement(sn.a,null),a.createElement(gr,{value:(null==z||null==(f=z.fields)||null==(p=f.license)||null==(g=p.value)?void 0:g.federation)||z.federation.value,onSelect:function(e){return j(vr.setFederation(e))},required:!0}),a.createElement(an.a,{type:z.federation.error?"error":"info"},z.federation.error||""),((null==z||null==(v=z.fields)||null==(b=v.license)||null==(y=b.value)||null==(h=y.federation)?void 0:h.id)||(null==z||null==(E=z.federation)||null==(S=E.value)?void 0:S.id))&&a.createElement(a.Fragment,null,a.createElement(fr,{value:z.fields.license.value,federationId:Number((null==z||null==(x=z.fields)||null==(I=x.license)||null==(k=I.value)||null==(w=k.federation)?void 0:w.id)||(null==(O=z.federation)||null==(C=O.value)?void 0:C.id)),onSelect:function(e){return j(vr.setField(["license",e]))},required:!0}),a.createElement(an.a,{type:z.fields.license.error?"error":"info"},z.fields.license.error||"")))}var yr,hr=Oe.a.create({fields:{flex:1,width:"70%",paddingTop:32},field:{marginBottom:8},ticketAddons:{marginBottom:8}}),Er=ne.actions,Sr=(T.actions,Object(g.gql)(yr||(yr=Qe()(["\n  mutation UpdateUser(\n    $id: Int,\n    $name: String,\n    $phone: String,\n    $email: String,\n    $licenseId: Int,\n    $exitWeight: Float,\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        phone: $phone,\n        email: $email,\n        licenseId: $licenseId,\n        exitWeight: $exitWeight,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))));function xr(){var e=pe((function(e){return e})),n=e.userForm,t=(e.global,fe()),r=Object(Je.useNavigation)(),l=Object(Je.useRoute)().params.user;a.useEffect((function(){t(Er.setOriginal(l))}),[null==l?void 0:l.id]);var i=Object(g.useMutation)(Sr),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e,r,a,l,i,o,s,u,c,d=!1,m=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=n.fields.name)||null==(r=e.value)?void 0:r.length)||0)<3&&(d=!0,t(Er.setFieldError(["name","Name is too short"]))),((null==(a=n.fields.email)||null==(l=a.value)?void 0:l.length)||0)<3&&(d=!0,t(Er.setFieldError(["email","Email is too short"]))),((null==(i=n.fields.phone)||null==(o=i.value)?void 0:o.length)||0)<3&&(d=!0,t(Er.setFieldError(["phone","Phone number is too short"]))),m.test((null==(s=n.fields)||null==(u=s.email)?void 0:u.value)||"")||(d=!0,t(Er.setFieldError(["email","Please enter a valid email"]))),((null==(c=n.fields.exitWeight)?void 0:c.value)||0)<30&&(d=!0,t(Er.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[JSON.stringify(n.fields),t]),d=a.useCallback((function(){var e,a,l,i,o,u,d,m,f,p,g,v,b;return Ee.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(e=n.fields,a=e.name,l=e.license,i=e.phone,o=e.email,u=e.exitWeight,!c()){y.next=12;break}return y.prev=2,y.next=5,Ee.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,licenseId:null!=(d=l.value)&&d.id?Number(l.value.id):null,phone:i.value,exitWeight:parseFloat(u.value),email:o.value}}));case 5:p=y.sent,null!=(m=p.data)&&null!=(f=m.updateUser)&&f.user&&(g=p.data.updateUser,v=g.fieldErrors,b=g.errors,v?null==v||v.map((function(e){var n=e.field,r=e.message;switch(n){case"name":return t(oe.setFieldError(["name",r]));case"exit_weight":return t(oe.setFieldError(["exitWeight",r]));case"license_id":return t(oe.setFieldError(["license",r]));case"phone":return t(oe.setFieldError(["phone",r]));case"email":return t(oe.setFieldError(["email",r]))}})):null!=b&&b.length?b.map((function(e){return t(vt.showSnackbar({message:e,variant:"error"}))})):(t(vt.showSnackbar({message:"Profile has been updated",variant:"success"})),r.goBack(),t(oe.reset()))),y.next=12;break;case 9:y.prev=9,y.t0=y.catch(2),t(vt.showSnackbar({message:y.t0.message,variant:"error"}));case 12:case"end":return y.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return a.createElement(Fn,{style:Ir.container},a.createElement(br,null),a.createElement(Fn,{style:Ir.fields},a.createElement(en.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Ir=Oe.a.create({container:{flex:1,alignItems:"center",paddingTop:56},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),kr=Object(Fe.a)();function wr(){return a.createElement(kr.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(Dt,e)},cardStyle:{flex:1}}},a.createElement(kr.Screen,{name:"ProfileScreen",component:ir,options:{title:"Profile"}}),a.createElement(kr.Screen,{name:"UpdateUserScreen",component:xr,options:{title:"Edit profile"}}),a.createElement(kr.Screen,{name:"RigScreen",component:sr,options:{title:"Rig"}}))}function Or(){var e=Object(Je.useNavigation)(),n=pe((function(e){return e.global}));return a.createElement(Fn,{style:Cr.container},a.createElement(ln.a.Section,{title:"Dropzone"},a.createElement(ln.a.Item,{title:"Basic settings",onPress:function(){return e.navigate("UpdateDropzoneScreen",{dropzone:n.currentDropzone})},left:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"information-outline"})}}),a.createElement(ln.a.Item,{title:"Planes",onPress:function(){return e.navigate("PlanesScreen")},left:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"airplane"})}}),a.createElement(ln.a.Item,{title:"Rigs",left:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"parachute"})}}),a.createElement(ln.a.Item,{title:"Users",left:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"account-cog"})}})),a.createElement(ln.a.Section,{title:"Tickets"},a.createElement(ln.a.Item,{title:"Ticket types",onPress:function(){return e.navigate("TicketTypesScreen")},left:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"ticket"})}}),a.createElement(ln.a.Item,{title:"Ticket add-ons",onPress:function(){return e.navigate("ExtrasScreen")},left:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"plus"})}})))}var Cr=Oe.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function zr(){return a.createElement(Fn,{style:Tr.container},a.createElement($n,{style:Tr.title},"Tab One"),a.createElement(Fn,{style:Tr.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ut,{path:"/screens/DropzoneSettingsScreen.tsx"}))}var jr,Pr,Tr=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),$r=t(125),Fr=t(292),Nr=Object(Ve.a)(jr||(jr=Qe()(["\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      altitude\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n"]))),Dr=Object(Ve.a)(Pr||(Pr=Qe()(["\n  mutation UpdateTicketTypePublic(\n    $id: Int!,\n    $allowManifestingSelf: Boolean\n  ){\n    updateTicketType(input: {\n      id: $id\n      attributes: {\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n"])));function Mr(){var e,n,t=pe((function(e){return e.global})),r=Object(g.useQuery)(Nr,{variables:{dropzoneId:Number(null==(e=t.currentDropzone)?void 0:e.id)}}),l=r.data,i=r.loading,o=r.refetch,s=Object(Je.useNavigation)(),u=Object(Je.useRoute)(),c=Object(g.useMutation)(Dr),d=q()(c,2),m=d[0];d[1];return a.useEffect((function(){"TicketTypesScreen"===u.name&&o()}),[u.name]),a.createElement(Ye.b,{style:Ar.container,contentContainerStyle:[Ar.content,{backgroundColor:"white"}],refreshControl:a.createElement($r.a,{refreshing:i,onRefresh:o})},a.createElement(Ze.a,{visible:i,color:t.theme.colors.accent}),a.createElement(Bn.a,null,a.createElement(Bn.a.Header,null,a.createElement(Bn.a.Title,null,"Name"),a.createElement(Bn.a.Title,{numeric:!0},"Cost"),a.createElement(Bn.a.Title,{numeric:!0},"Altitude"),a.createElement(Bn.a.Title,{numeric:!0},"Public")),null==l||null==(n=l.ticketTypes)?void 0:n.map((function(e){return a.createElement(Bn.a.Row,{onPress:function(){return s.navigate("UpdateTicketTypeScreen",{ticketType:e})}},a.createElement(Bn.a.Cell,null,e.name),a.createElement(Bn.a.Cell,{numeric:!0},"$",e.cost),a.createElement(Bn.a.Cell,{numeric:!0},e.altitude),a.createElement(Bn.a.Cell,{numeric:!0},a.createElement(Fr.a,{onValueChange:function(){m({variables:{id:Number(e.id),allowManifestingSelf:!e.allowManifestingSelf}})},value:!!e.allowManifestingSelf})))}))),a.createElement(_e.a,{style:Ar.fab,small:!0,icon:"plus",onPress:function(){return s.navigate("CreateTicketTypeScreen")},label:"New ticket type"}))}var Ar=Oe.a.create({container:{flex:1,display:"flex"},content:{flexGrow:1},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),Ur=Q.actions;function qr(){var e,n,t,r,l=pe((function(e){return e.planeForm})),i=fe();return a.createElement(rn.a,{style:Br.fields,contentContainerStyle:{paddingTop:200}},a.createElement(un.a,{style:Br.field,mode:"outlined",label:"Name",error:!!l.fields.name.error,value:l.fields.name.value,onChangeText:function(e){return i(Ur.setField(["name",e]))}}),a.createElement(an.a,{type:l.fields.name.error?"error":"info"},l.fields.name.error||""),a.createElement(un.a,{style:Br.field,mode:"outlined",label:"Registration",error:!!l.fields.registration.error,value:l.fields.registration.value,onChangeText:function(e){return i(Ur.setField(["registration",e]))}}),a.createElement(an.a,{type:l.fields.registration.error?"error":"info"},l.fields.registration.error||""),a.createElement(un.a,{style:Br.field,mode:"outlined",label:"hours",error:!!l.fields.hours.error,value:null==(e=l.fields.hours)||null==(n=e.value)?void 0:n.toString(),placeholder:"Optional",onChangeText:function(e){return i(Ur.setField(["hours",Number(e)]))}}),a.createElement(an.a,{type:l.fields.hours.error?"error":"info"},l.fields.hours.error||""),a.createElement(un.a,{style:Br.field,mode:"outlined",label:"Min slots",error:!!l.fields.minSlots.error,value:null==(t=l.fields.minSlots.value)?void 0:t.toString(),keyboardType:"number-pad",onChangeText:function(e){return i(Ur.setField(["minSlots",Number(e)]))}}),a.createElement(an.a,{type:l.fields.minSlots.error?"error":"info"},l.fields.minSlots.error||"Minimum tickets required to send it"),a.createElement(un.a,{style:Br.field,mode:"outlined",label:"Max slots",error:!!l.fields.maxSlots.error,value:null==(r=l.fields.maxSlots)?void 0:r.value.toString(),keyboardType:"number-pad",onChangeText:function(e){return i(Ur.setField(["maxSlots",Number(e)]))}}),a.createElement(an.a,{type:l.fields.maxSlots.error?"error":"info"},l.fields.maxSlots.error||"Maximum amount of jumpers who can be manifested on one load"))}var Wr,Br=Oe.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),Rr=Q.actions,Lr=(T.actions,Object(g.gql)(Wr||(Wr=Qe()(["\n  mutation CreatePlane(\n    $name: String!,\n    $registration: String!,\n    $dropzoneId: Int!\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    createPlane(input: {\n      attributes: {\n        name: $name,\n        registration: $registration,\n        dropzoneId: $dropzoneId\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))));function Hr(){var e=pe((function(e){return e})),n=e.planeForm,t=e.global,r=fe(),l=Object(Je.useNavigation)(),i=Object(g.useMutation)(Lr),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(Rr.setFieldError(["name","Name is too short"]))),n.fields.registration.value.length<3&&(e=!0,r(Rr.setFieldError(["registration","Registration is too short"]))),n.fields.maxSlots.value||(e=!0,r(Rr.setFieldError(["maxSlots","Max slots must be specified"]))),!e}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p,g,v,b;return Ee.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(e=n.fields,a=e.name,i=e.registration,o=e.maxSlots,u=e.minSlots,d=e.hours,m=e.nextMaintenanceHours,!c()){y.next=12;break}return y.prev=2,y.next=5,Ee.a.awrap(s({variables:{dropzoneId:Number(null==(f=t.currentDropzone)?void 0:f.id),name:a.value,registration:i.value,minSlots:u.value,maxSlots:o.value,hours:d.value,nextMaintenanceHours:m.value}}));case 5:v=y.sent,null!=(p=v.data)&&null!=(g=p.createPlane)&&g.plane&&(b=v.data.createPlane.plane,r(vt.showSnackbar({message:"Added plane "+b.name,variant:"success"})),l.goBack()),y.next=12;break;case 9:y.prev=9,y.t0=y.catch(2),r(vt.showSnackbar({message:y.t0.message,variant:"error"}));case 12:case"end":return y.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Fn,{style:Jr.container},a.createElement(qr,null),a.createElement(Fn,{style:Jr.fields},a.createElement(en.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Qr,Jr=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Vr=Q.actions,Gr=(T.actions,Object(g.gql)(Qr||(Qr=Qe()(["\n  mutation UpdatePlane(\n    $id: Int!,\n    $name: String!,\n    $registration: String!,\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    updatePlane(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        registration: $registration,\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))));function Yr(){var e=pe((function(e){return e})),n=e.planeForm,t=(e.global,fe()),r=Object(Je.useNavigation)(),l=Object(Je.useRoute)().params.plane;a.useEffect((function(){t(Vr.setOriginal(l))}),[null==l?void 0:l.id]);var i=Object(g.useMutation)(Gr),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,t(Vr.setFieldError(["name","Name is too short"]))),n.fields.registration.value.length<3&&(e=!0,t(Vr.setFieldError(["registration","Registration is too short"]))),n.fields.maxSlots.value||(e=!0,t(Vr.setFieldError(["maxSlots","Max slots must be specified"]))),!e}),[JSON.stringify(n.fields),t]),d=a.useCallback((function(){var e,a,l,i,o,u,d,m,f,p,g;return Ee.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(e=n.fields,a=e.name,l=e.registration,i=e.maxSlots,o=e.minSlots,u=e.hours,d=e.nextMaintenanceHours,!c()){v.next=12;break}return v.prev=2,v.next=5,Ee.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,registration:l.value,minSlots:o.value,maxSlots:i.value,hours:u.value,nextMaintenanceHours:d.value}}));case 5:p=v.sent,null!=(m=p.data)&&null!=(f=m.updatePlane)&&f.plane&&(g=p.data.updatePlane.plane,t(vt.showSnackbar({message:"Saved plane "+g.name,variant:"success"})),r.goBack()),v.next=12;break;case 9:v.prev=9,v.t0=v.catch(2),t(vt.showSnackbar({message:v.t0.message,variant:"error"}));case 12:case"end":return v.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return a.createElement(Fn,{style:_r.container},a.createElement(qr,null),a.createElement(Fn,{style:_r.fields},a.createElement(en.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Zr,_r=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Kr=t(368),Xr=t(366),ea=t(362),na=t.n(ea),ta=L.actions,ra=Object(g.gql)(Zr||(Zr=Qe()(["\n  query QueryFederations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function aa(){var e,n,t,r,i=pe((function(e){return e})),o=i.dropzoneForm,s=i.global,u=fe(),c=Object(g.useQuery)(ra),d=c.data,m=(c.loading,Object(a.useState)(!1)),f=q()(m,2),p=f[0],v=f[1],b=Object(a.useState)(null),y=q()(b,2),h=y[0],E=y[1];Object(a.useEffect)((function(){var e,n;null==d||null==(e=d.federations)||!e.length||null!=(n=o.fields.federation)&&n.value||u(ta.setField(["federation",d.federations[0]]))}),[JSON.stringify(null==d?void 0:d.federations)]);var S=Object(a.useCallback)((function(){var e;return Ee.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee.a.awrap(Object(Kr.a)({multiple:!1,type:"image"}));case 3:e=n.sent,u(ta.setField(["banner",e.uri])),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}),[u]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke.a,null,l.a.createElement(Xe.a,{visible:!!h,onDismiss:function(){return E(null)}},l.a.createElement(Xe.a.Title,null,"Pick a ","primary"===h?"primary color":"secondary color"),l.a.createElement(Xe.a.Content,{style:{padding:20,height:400}},l.a.createElement(Xr.a,{onColorSelected:function(e){u("primary"===h?ta.setField(["primaryColor",e]):ta.setField(["secondaryColor",e]))},style:{flex:1},sliderComponent:na.a,defaultColor:("primary"===h?o.fields.primaryColor.value:o.fields.secondaryColor.value)||void 0,hideSliders:!0})),l.a.createElement(Xe.a.Actions,null,l.a.createElement(en.a,{onPress:function(){return E(null)}},"Cancel"),l.a.createElement(en.a,{disabled:"primary"===h&&!o.fields.primaryColor.value||"secondary"===h&&!o.fields.secondaryColor.value,onPress:function(){console.log({current:s.theme.colors.accent,next:o.fields.secondaryColor.value}),u("primary"===h?ae.setPrimaryColor(o.fields.primaryColor.value):ae.setAccentColor(o.fields.secondaryColor.value)),E(null)}},"Save")))),l.a.createElement(Wn.a,{style:{width:"100%",maxHeight:300}},l.a.createElement(Wn.a.Cover,{source:{uri:o.fields.banner.value||"https://picsum.photos/700"},resizeMode:"cover"}),l.a.createElement(Wn.a.Actions,{style:{justifyContent:"flex-end"}},l.a.createElement(en.a,{onPress:S},"Upload"))),l.a.createElement(Fn,{style:ia.fields},l.a.createElement(ln.a.Subheader,{style:ia.subheader},"Dropzone"),l.a.createElement(un.a,{style:ia.field,mode:"outlined",label:"Name",error:!!o.fields.name.error,value:o.fields.name.value||"",onChangeText:function(e){return u(ta.setField(["name",e]))}}),l.a.createElement(an.a,{type:"error"},o.fields.name.error||""),l.a.createElement(ln.a.Subheader,{style:ia.subheader},"Federation"),l.a.createElement(cn.a,{onDismiss:function(){return v(!1)},visible:p,anchor:l.a.createElement(cn.a.Item,{onPress:function(){return v(!0)},title:(null==(e=o.fields)||null==(n=e.federation)||null==(t=n.value)?void 0:t.name)||"",icon:"parachute"})},null==d||null==(r=d.federations)?void 0:r.map((function(e){return l.a.createElement(cn.a.Item,{title:e.name,onPress:function(){u(ta.setField(["federation",e])),v(!1)}})}))),l.a.createElement(ln.a.Subheader,{style:ia.subheader},"Branding"),l.a.createElement(ln.a.Item,{title:"Primary color",onPress:function(){return E("primary")},left:function(){return l.a.createElement(Fn,{style:{width:24,height:24,backgroundColor:s.theme.colors.primary}})}}),l.a.createElement(ln.a.Item,{title:"Secondary color",onPress:function(){return E("secondary")},left:function(){return l.a.createElement(Fn,{style:{width:24,height:24,backgroundColor:s.theme.colors.accent}})}}),l.a.createElement(ln.a.Item,{title:"Use credit system",description:"Users will be charged credits when a load is marked as landed and can't manifest with insufficient funds.",onPress:function(){return u(ta.setField(["isCreditSystemEnabled",!o.fields.isCreditSystemEnabled.value]))},left:function(){return l.a.createElement(bt.a,{onPress:function(){return u(ta.setField(["isCreditSystemEnabled",!o.fields.isCreditSystemEnabled.value]))},status:o.fields.isCreditSystemEnabled.value?"checked":"unchecked"})}}),l.a.createElement(ln.a.Item,{title:"Public",description:"Your dropzone will not be available in the app if this is disabled",onPress:function(){return u(ta.setField(["isPublic",!o.fields.isPublic.value]))},left:function(){return l.a.createElement(bt.a,{onPress:function(){return u(ta.setField(["isPublic",!o.fields.isPublic.value]))},status:o.fields.isPublic.value?"checked":"unchecked"})}})))}var la,ia=Oe.a.create({fields:{flexGrow:1,display:"flex",width:"70%"},field:{marginBottom:8},subheader:{paddingLeft:0}}),oa=L.actions,sa=T.actions,ua=Object(g.gql)(la||(la=Qe()(["\n  mutation UpdateDropzone(\n    $id: Int!,\n    $name: String!,\n    $banner: String,\n    $federationId: Int!\n    $primaryColor: String\n    $secondaryColor: String\n  ){\n    updateDropzone(input: {\n    id: $id\n    attributes: {\n      name: $name,\n      banner: $banner,\n      federationId: $federationId\n      primaryColor: $primaryColor\n      secondaryColor: $secondaryColor\n    }\n  }) {\n      dropzone {\n        id\n        name\n        banner\n        primaryColor\n        secondaryColor,\n\n        federation {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function ca(){var e=pe((function(e){return e.dropzoneForm})),n=fe(),t=(Object(Je.useNavigation)(),Object(Je.useRoute)().params.dropzone);a.useEffect((function(){n(oa.setOriginal(t))}),[null==t?void 0:t.id]);var r=Object(g.useMutation)(ua),l=q()(r,2),i=l[0],o=l[1],s=a.useCallback((function(){var r,a,l,o,s,u,c,d,m,f,p,g,v,b;return Ee.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(l=!1,o=e.fields,s=o.name,u=o.banner,c=o.federation,d=o.primaryColor,m=o.secondaryColor,(null==(r=s.value)||!r.length||(null==(a=s.value)?void 0:a.length)<3)&&(l=!0,n(oa.setFieldError(["name","Name is too short"]))),l){y.next=14;break}return y.prev=4,y.next=7,Ee.a.awrap(i({variables:{id:Number(null==t?void 0:t.id),name:s.value,banner:u.value||null,primaryColor:d.value,secondaryColor:m.value,federationId:Number(null==c||null==(f=c.value)?void 0:f.id)}}));case 7:v=y.sent,null!=(p=v.data)&&null!=(g=p.updateDropzone)&&g.dropzone&&(b=v.data.updateDropzone.dropzone,n(sa.setDropzone(b)),n(vt.showSnackbar({message:"Saved",variant:"success"}))),y.next=14;break;case 11:y.prev=11,y.t0=y.catch(4),n(vt.showSnackbar({message:y.t0.message,variant:"error"}));case 14:case"end":return y.stop()}}),null,null,[[4,11]],Promise)}),[JSON.stringify(e.fields),n,i]);return a.createElement(rn.a,{style:ma.container,contentContainerStyle:ma.content},a.createElement(aa,null),a.createElement(Fn,{style:ma.fields},a.createElement(en.a,{mode:"contained",disabled:o.loading,onPress:s,loading:o.loading},"Save")))}var da,ma=Oe.a.create({container:{flex:1,backgroundColor:"white",display:"flex"},content:{display:"flex",flexGrow:1,alignItems:"center",paddingBottom:56},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),fa=t(92),pa=Object(Ve.a)(da||(da=Qe()(["\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function ga(){var e,n=pe((function(e){return e.global})),t=Object(g.useQuery)(pa,{variables:{dropzoneId:Number(null==(e=n.currentDropzone)?void 0:e.id)}}),r=t.data,l=t.loading,i=t.refetch,o=Object(Je.useNavigation)();Object(Je.useRoute)();return a.createElement(Fn,{style:ba.container},a.createElement(fa.a,{data:(null==r?void 0:r.planes)||[],numColumns:1,refreshing:l,onRefresh:function(){return i()},style:{flex:1},contentContainerStyle:{flexGrow:1},ListEmptyComponent:function(){return a.createElement(Nn,{title:"No planes?",subtitle:"You need to have at least one plane to manifest loads"})},renderItem:function(e){var n=e.item;return a.createElement(ln.a.Item,{title:n.name,onPress:function(){return o.navigate("UpdatePlaneScreen",{plane:n})},left:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"airplane"})},right:function(){return a.createElement(ln.a.Icon,{color:"#000",icon:"pencil"})}})}}),a.createElement(_e.a,{style:ba.fab,small:!0,icon:"plus",onPress:function(){return o.navigate("CreatePlaneScreen")},label:"New plane"}))}var va,ba=Oe.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),ya=t(213),ha=V.actions,Ea=Object(Ve.a)(va||(va=Qe()(["\n  query QueryExtras(\n    $dropzoneId: Int!\n  ) {\n    extras(dropzoneId: $dropzoneId) {\n      id\n      cost\n      name\n\n      ticketTypes {\n        id\n        name\n      }\n    }\n  }\n"])));function Sa(){var e,n,t,r,l,i=pe((function(e){return e.ticketTypeForm})),o=fe(),s=pe((function(e){return e.global})),u=a.useState(!1),c=q()(u,2),d=c[0],m=c[1],f=Object(g.useQuery)(Ea,{variables:{dropzoneId:Number(null==(e=s.currentDropzone)?void 0:e.id)}}),p=f.data;f.loading,f.refetch;return a.createElement(rn.a,{style:Ia.fields,contentContainerStyle:{paddingTop:200}},a.createElement(un.a,{style:Ia.field,mode:"outlined",label:"Name",error:!!i.fields.name.error,value:i.fields.name.value,onChangeText:function(e){return o(ha.setField(["name",e]))}}),a.createElement(an.a,{type:i.fields.name.error?"error":"info"},i.fields.name.error||""),a.createElement(un.a,{style:Ia.field,mode:"outlined",label:"Price",error:!!i.fields.cost.value,value:null==(n=i.fields.cost)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return o(ha.setField(["cost",Number(e)]))}}),a.createElement(an.a,{type:i.fields.cost.error?"error":"info"},i.fields.cost.error||""),a.createElement(cn.a,{onDismiss:function(){return m(!1)},visible:d,anchor:a.createElement(ln.a.Item,{onPress:function(){m(!0)},title:[4e3,14e3].includes(i.fields.altitude.value)?{14e3:"Height",4e3:"Hop n Pop"}[i.fields.altitude.value.toString()]:"Custom",right:function(){return a.createElement(ln.a.Icon,{icon:[4e3,14e3].includes(i.fields.altitude.value)?{14e3:"airplane",4e3:"parachute"}[i.fields.altitude.value.toString()]:"pencil-plus"})}})},a.createElement(ln.a.Item,{onPress:function(){o(ha.setField(["altitude",4e3])),m(!1)},title:"Hop n Pop",right:function(){return a.createElement(ln.a.Icon,{icon:"parachute"})}}),a.createElement(ln.a.Item,{onPress:function(){o(ha.setField(["altitude",14e3])),m(!1)},title:"Height",right:function(){return a.createElement(ln.a.Icon,{icon:"airplane-takeoff"})}}),a.createElement(ln.a.Item,{onPress:function(){o(ha.setField(["altitude",7e3])),m(!1)},title:"Other",right:function(){return a.createElement(ln.a.Icon,{icon:"parachute"})}})),![4e3,14e3].includes(i.fields.altitude.value)&&a.createElement(un.a,{style:Ia.field,mode:"outlined",label:"Custom altitude",error:!!i.fields.altitude.value,value:null==(r=i.fields.altitude)||null==(l=r.value)?void 0:l.toString(),onChangeText:function(e){return o(ha.setField(["altitude",Number(e)]))}}),a.createElement(bt.a.Item,{label:"Public manifesting",status:i.fields.allowManifestingSelf.value?"checked":"unchecked",onPress:function(){return o(ha.setField(["allowManifestingSelf",!i.fields.allowManifestingSelf.value]))}}),a.createElement(sn.a,null),a.createElement(ln.a.Subheader,null,"Enabled ticket add-ons"),null==p?void 0:p.extras.map((function(e){return a.createElement(bt.a.Item,{label:e.name,status:i.fields.extraIds.value.includes(Number(e.id))?"checked":"unchecked",onPress:function(){return o(ha.setField(["extraIds",Object(ya.xor)(i.fields.extraIds.value,[Number(e.id)])]))}})})))}var xa,Ia=Oe.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),ka=V.actions,wa=(T.actions,Object(g.gql)(xa||(xa=Qe()(["\n  mutation CreateTicketType(\n    $name: String,\n    $cost: Float,\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n  ){\n    createTicketType(input: {\n      attributes: {\n        name: $name,\n        cost: $cost,\n        dropzoneId: $dropzoneId\n        altitude: $altitude\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n"]))));function Oa(){var e=pe((function(e){return e})),n=e.ticketTypeForm,t=e.global,r=fe(),l=Object(Je.useNavigation)(),i=Object(g.useMutation)(wa),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(ka.setFieldError(["name","Name is too short"]))),n.fields.cost.value<1&&(e=!0,r(ka.setFieldError(["cost","Cost must be at least $1"]))),n.fields.altitude.value||(e=!0,r(ka.setFieldError(["altitude","Altitude must be specified"]))),!e}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p,g,v;return Ee.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(e=n.fields,a=e.name,i=e.cost,o=e.allowManifestingSelf,u=e.altitude,d=e.extraIds,!c()){b.next=12;break}return b.prev=2,b.next=5,Ee.a.awrap(s({variables:{dropzoneId:Number(null==(m=t.currentDropzone)?void 0:m.id),name:a.value,cost:i.value,altitude:u.value,allowManifestingSelf:o.value,extraIds:d.value}}));case 5:g=b.sent,null!=(f=g.data)&&null!=(p=f.createTicketType)&&p.ticketType&&(v=g.data.createTicketType.ticketType,r(vt.showSnackbar({message:"Added ticket "+v.name,variant:"success"})),l.goBack()),b.next=12;break;case 9:b.prev=9,b.t0=b.catch(2),r(vt.showSnackbar({message:b.t0.message,variant:"error"}));case 12:case"end":return b.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Fn,{style:za.container},a.createElement(Sa,null),a.createElement(Fn,{style:za.fields},a.createElement(en.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Ca,za=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),ja=V.actions,Pa=(T.actions,Object(g.gql)(Ca||(Ca=Qe()(["\n  mutation UpdateTicketType(\n    $id: Int!,\n    $name: String,\n    $cost: Float,\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n  ){\n    updateTicketType(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        cost: $cost,\n        dropzoneId: $dropzoneId\n        altitude: $altitude\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n"]))));function Ta(){var e=pe((function(e){return e})),n=e.ticketTypeForm,t=(e.global,fe()),r=Object(Je.useNavigation)(),l=Object(Je.useRoute)().params.ticketType;a.useEffect((function(){t(ja.setOriginal(l))}),[null==l?void 0:l.id]);var i=Object(g.useMutation)(Pa),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,t(ja.setFieldError(["name","Name is too short"]))),n.fields.cost.value<1&&(e=!0,t(ja.setFieldError(["cost","Cost must be at least $1"]))),n.fields.altitude.value||(e=!0,t(ja.setFieldError(["altitude","Altitude must be specified"]))),!e}),[JSON.stringify(n.fields),t]),d=a.useCallback((function(){var e,a,l,i,o,u,d,m,f;return Ee.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=n.fields,a=e.name,l=e.cost,i=e.allowManifestingSelf,o=e.altitude,u=e.extraIds,!c()){p.next=12;break}return p.prev=2,p.next=5,Ee.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,cost:l.value,altitude:o.value,allowManifestingSelf:i.value,extraIds:u.value}}));case 5:f=p.sent,null!=(d=f.data)&&null!=(m=d.updateTicketType)&&m.ticketType&&(t(vt.showSnackbar({message:"Saved",variant:"success"})),r.goBack()),p.next=12;break;case 9:p.prev=9,p.t0=p.catch(2),t(vt.showSnackbar({message:p.t0.message,variant:"error"}));case 12:case"end":return p.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return a.createElement(Fn,{style:Fa.container},a.createElement(Sa,null),a.createElement(Fn,{style:Fa.fields},a.createElement(en.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var $a,Fa=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Na=Y.actions,Da=Object(Ve.a)($a||($a=Qe()(["\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n"])));function Ma(){var e,n,t,r=pe((function(e){return e.extraForm})),l=fe(),i=pe((function(e){return e.global})),o=Object(g.useQuery)(Da,{variables:{dropzoneId:Number(null==(e=i.currentDropzone)?void 0:e.id)}}),s=o.data;o.loading,o.refetch;return a.createElement(rn.a,{style:Ua.fields,contentContainerStyle:{paddingTop:200}},a.createElement(un.a,{style:Ua.field,mode:"outlined",label:"Name",error:!!r.fields.name.error,value:r.fields.name.value,onChangeText:function(e){return l(Na.setField(["name",e]))}}),a.createElement(an.a,{type:r.fields.name.error?"error":"info"},r.fields.name.error||""),a.createElement(un.a,{style:Ua.field,mode:"outlined",label:"Price",error:!!r.fields.cost.value,value:null==(n=r.fields.cost)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return l(Na.setField(["cost",Number(e)]))}}),a.createElement(an.a,{type:r.fields.cost.error?"error":"info"},r.fields.cost.error||""),a.createElement(ln.a.Subheader,null,"Compatible tickets"),null==s?void 0:s.ticketTypes.map((function(e){return a.createElement(bt.a.Item,{label:e.name,status:r.fields.ticketTypeIds.value.includes(Number(e.id))?"checked":"unchecked",onPress:function(){return l(Na.setField(["ticketTypeIds",Object(ya.xor)(r.fields.ticketTypeIds.value,[Number(e.id)])]))}})})))}var Aa,Ua=Oe.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),qa=Y.actions,Wa=(T.actions,Object(g.gql)(Aa||(Aa=Qe()(["\n  mutation CreateExtra(\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    createExtra(input: {\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n"]))));function Ba(){var e=pe((function(e){return e})),n=e.extraForm,t=e.global,r=fe(),l=Object(Je.useNavigation)(),i=Object(g.useMutation)(Wa),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(qa.setFieldError(["name","Name is too short"]))),Number(n.fields.cost.value)<0&&(e=!0,r(qa.setFieldError(["cost","Price must be a number"]))),!e}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p;return Ee.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(e=n.fields,a=e.name,i=e.cost,o=e.ticketTypeIds,!c()){g.next=12;break}return g.prev=2,g.next=5,Ee.a.awrap(s({variables:{dropzoneId:Number(null==(u=t.currentDropzone)?void 0:u.id),name:a.value,cost:i.value,ticketTypeIds:o.value}}));case 5:f=g.sent,null!=(d=f.data)&&null!=(m=d.createExtra)&&m.extra&&(p=f.data.createExtra.extra,r(vt.showSnackbar({message:"Added extra "+p.name,variant:"success"})),l.goBack()),g.next=12;break;case 9:g.prev=9,g.t0=g.catch(2),r(vt.showSnackbar({message:g.t0.message,variant:"error"}));case 12:case"end":return g.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Fn,{style:La.container},a.createElement(Ma,null),a.createElement(Fn,{style:La.fields},a.createElement(en.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Ra,La=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Ha=Y.actions,Qa=(T.actions,Object(g.gql)(Ra||(Ra=Qe()(["\n  mutation UpdateExtra(\n    $id: Int!,\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    updateExtra(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n"]))));function Ja(){var e=pe((function(e){return e})),n=e.extraForm,t=e.global,r=fe(),l=Object(Je.useNavigation)(),i=Object(Je.useRoute)().params.extra;a.useEffect((function(){r(Ha.setOriginal(i))}),[null==i?void 0:i.id]);var o=Object(g.useMutation)(Qa),s=q()(o,2),u=s[0],c=s[1],d=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(Ha.setFieldError(["name","Name is too short"]))),Number(n.fields.cost.value)<0&&(e=!0,r(Ha.setFieldError(["cost","Price must be a number"]))),!e}),[JSON.stringify(n.fields),r]),m=a.useCallback((function(){var e,a,i,o,s,c,m,f;return Ee.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=n.fields,a=e.name,i=e.cost,o=e.ticketTypeIds,!d()){p.next=12;break}return p.prev=2,p.next=5,Ee.a.awrap(u({variables:{id:Number(n.original.id),dropzoneId:Number(null==(s=t.currentDropzone)?void 0:s.id),name:a.value,cost:i.value,ticketTypeIds:o.value}}));case 5:f=p.sent,null!=(c=f.data)&&null!=(m=c.updateExtra)&&m.extra&&(r(vt.showSnackbar({message:"Saved",variant:"success"})),l.goBack()),p.next=12;break;case 9:p.prev=9,p.t0=p.catch(2),r(vt.showSnackbar({message:p.t0.message,variant:"error"}));case 12:case"end":return p.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,u]);return a.createElement(Fn,{style:Ga.container},a.createElement(Ma,null),a.createElement(Fn,{style:Ga.fields},a.createElement(en.a,{mode:"contained",disabled:c.loading,onPress:m,loading:c.loading},"Save")))}var Va,Ga=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Ya=Object(Ve.a)(Va||(Va=Qe()(["\n  query QueryExtra(\n    $dropzoneId: Int!\n  ) {\n    extras(dropzoneId: $dropzoneId) {\n      id\n      cost\n      name\n\n      ticketTypes {\n        id\n        altitude\n        name\n      }\n    }\n  }\n"])));function Za(){var e,n,t,r=pe((function(e){return e.global})),l=Object(g.useQuery)(Ya,{variables:{dropzoneId:Number(null==(e=r.currentDropzone)?void 0:e.id)}}),i=l.data,o=l.loading,s=(l.refetch,Object(Je.useNavigation)());Object(Je.useRoute)();return a.createElement(a.Fragment,null,a.createElement(Ze.a,{visible:o,indeterminate:!0,color:r.theme.colors.accent}),a.createElement(Fn,{style:_a.container},a.createElement(Bn.a,null,a.createElement(Bn.a.Header,null,a.createElement(Bn.a.Title,null,"Name"),a.createElement(Bn.a.Title,{numeric:!0},"Cost")),null==i||null==(n=i.extras)?void 0:n.map((function(e){return a.createElement(Bn.a.Row,null,a.createElement(Bn.a.Cell,{onPress:function(){return s.navigate("UpdateExtraScreen",{extra:e})}},e.name),a.createElement(Bn.a.Cell,{numeric:!0},e.cost))}))),!o&&!(null!=i&&null!=(t=i.extras)&&t.length)&&a.createElement(Nn,{title:"No ticket addons",subtitle:"You can add multiple addons to assign to tickets, e.g outside camera, or coach"}),a.createElement(_e.a,{style:_a.fab,small:!0,icon:"plus",onPress:function(){return s.navigate("CreateExtraScreen")},label:"New ticket addon"})))}var _a=Oe.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),Ka=Object(Fe.a)();function Xa(){return a.createElement(Ka.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(Dt,e)},cardStyle:{flex:1}}},a.createElement(Ka.Screen,{name:"SettingsScreen",component:Or,options:{title:"Settings"}}),a.createElement(Ka.Screen,{name:"DropzoneSettingsScreen",component:zr}),a.createElement(Ka.Screen,{name:"UpdateDropzoneScreen",component:ca}),a.createElement(Ka.Screen,{name:"PlanesScreen",component:ga,options:{title:"Planes"}}),a.createElement(Ka.Screen,{name:"CreatePlaneScreen",component:Hr,options:{title:"New plane"}}),a.createElement(Ka.Screen,{name:"UpdatePlaneScreen",component:Yr,options:{title:"Edit plane"}}),a.createElement(Ka.Screen,{name:"TicketTypesScreen",component:Mr,options:{title:"Ticket types"}}),a.createElement(Ka.Screen,{name:"CreateTicketTypeScreen",component:Oa,options:{title:"New ticket type"}}),a.createElement(Ka.Screen,{name:"UpdateTicketTypeScreen",component:Ta,options:{title:"Edit ticket type"}}),a.createElement(Ka.Screen,{name:"CreateExtraScreen",component:Ba,options:{title:"Create ticket add-on"}}),a.createElement(Ka.Screen,{name:"UpdateExtraScreen",component:Ja,options:{title:"Update ticket add-on"}}),a.createElement(Ka.Screen,{name:"ExtrasScreen",component:Za,options:{title:"Ticket add-ons"}}))}function el(){return a.createElement(Fn,{style:nl.container},a.createElement($n,{style:nl.title},"Tab One"),a.createElement(Fn,{style:nl.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ut,{path:"/screens/UsersScreen.tsx"}))}var nl=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}});function tl(){return a.createElement(Fn,{style:rl.container},a.createElement($n,{style:rl.title},"Tab One"),a.createElement(Fn,{style:rl.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ut,{path:"/screens/UserProfileScreen.tsx"}))}var rl=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}});function al(){return a.createElement(Fn,{style:ll.container},a.createElement($n,{style:ll.title},"Tab One"),a.createElement(Fn,{style:ll.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(ut,{path:"/screens/UserRigScreen.tsx"}))}var ll=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),il=Object(Fe.a)();function ol(){return a.createElement(il.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},a.createElement(il.Screen,{name:"UsersScreen",component:el}),a.createElement(il.Screen,{name:"UserRigScreen",component:al}),a.createElement(il.Screen,{name:"UserProfileScreen",component:tl}))}var sl,ul=Object(Le.a)();function cl(){Object(Re.b)();var e=yn("readUser"),n=yn("createPackjob"),t=yn("updateDropzone");return a.createElement(ul.Navigator,{initialRouteName:"Manifest"},a.createElement(ul.Screen,{name:"Manifest",component:At,options:{tabBarIcon:"airplane"}}),a.createElement(ul.Screen,{name:"Profile",component:wr,options:{tabBarIcon:"account-circle"}}),n&&a.createElement(ul.Screen,{name:"Packing",component:Bt,options:{tabBarIcon:"parachute"}}),e&&a.createElement(ul.Screen,{name:"Users",component:ol,options:{tabBarIcon:"account-group"}}),t&&a.createElement(ul.Screen,{name:"Settings",component:Xa,options:{tabBarIcon:"account-cog"}}))}var dl=Object(Ve.a)(sl||(sl=Qe()(["\n  query QueryDropzones {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n          banner\n          ticketTypes {\n            id\n            name\n            cost\n            allowManifestingSelf\n            currency\n          }\n          planes {\n            id\n            name,\n            registration,\n            minSlots,\n            maxSlots,\n          }\n        }\n      }\n    }\n  }\n"])));function ml(){var e,n=fe(),t=Object(g.useQuery)(dl),r=t.data,l=t.loading,i=t.refetch,o=Object(Je.useNavigation)();return a.createElement(Fn,{style:pl.container},a.createElement(fa.a,{data:(null==r||null==(e=r.dropzones)?void 0:e.edges)||[],numColumns:2,refreshing:l,onRefresh:function(){return i()},style:{flex:1},contentContainerStyle:{flexGrow:1},ListEmptyComponent:function(){return a.createElement(Fn,{style:pl.empty},a.createElement(Cn.a,null,"No dropzones?"),a.createElement(zn.a,null,"You can set one up!"))},renderItem:function(e){var t,r,l=e.item;return a.createElement(Wn.a,{style:{width:Ge.a.get("window").width/2-32,margin:8},onPress:function(){return Ee.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:null!=l&&l.node&&n(ae.setDropzone(l.node));case 1:case"end":return e.stop()}}),null,null,null,Promise)}},a.createElement(Wn.a.Cover,{source:{uri:null==l||null==(t=l.node)?void 0:t.banner}}),a.createElement(Wn.a.Content,null,a.createElement(Cn.a,null,null==l||null==(r=l.node)?void 0:r.name)))}}),a.createElement(_e.a,{style:pl.fab,small:!0,icon:"plus",onPress:function(){return o.navigate("CreateDropzoneScreen")},label:"Create dropzone"}))}var fl,pl=Oe.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function gl(e){return{message:e,pattern:/.{1,}/}}function vl(e,n){return{message:e,callback:n}}function bl(e,n){var t=n.getPayload,r=n.fieldErrorMap,l=n.validates;return function(i){var o=i.onFieldError,s=i.onSuccess,u=i.onError,c=Object(g.useMutation)(e),d=q()(c,2),m=d[0],f=d[1],p=f.data,v=f.loading;f.error;return{loading:v,mutate:Object(a.useCallback)((function(e){var a,c,d,f,p,g;return Ee.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(function(){var t=!1;return l&&Object.keys(e).forEach((function(r){var a,i=r;i in(n.validates||{})&&(null==(a=l[i])||a.forEach((function(n){n.pattern?n.pattern.test(""+e[i])||(t=!0,o&&o(i,n.message)):n.callback&&!n.callback(e)&&(t=!0,o&&o(i,n.message))})))})),!t}()){v.next=3;break}return v.abrupt("return");case 3:return v.prev=3,v.next=6,Ee.a.awrap(m({variables:e}));case 6:if(f=v.sent,null==(p=t(f.data))||null==(a=p.fieldErrors)||a.map((function(e){var t=e.field,a=e.message,l=t in(r||{})?n.fieldErrorMap[t]:t;i.onFieldError&&i.onFieldError(""+l,a)})),null==p||null==(c=p.errors)||!c.length||!u){v.next=12;break}return null==(g=p.errors)||g.map((function(e){return u(e)})),v.abrupt("return");case 12:return null!=p&&null!=(d=p.fieldErrors)&&d.length||s(p),v.abrupt("return",p);case 16:v.prev=16,v.t0=v.catch(3),u&&u(v.t0.message);case 19:return v.abrupt("return");case 20:case"end":return v.stop()}}),null,null,[[3,16]],Promise)}),[o,u,s,,m,t,JSON.stringify(p)])}}}var yl=bl(Object(Ve.a)(fl||(fl=Qe()(["\nmutation CreateDropzone(\n  $name: String!,\n  $banner: String!,\n  $federationId: Int!\n){\n  createDropzone(input: { attributes: { name: $name, banner: $banner, federationId: $federationId }}) {\n    dropzone {\n      id\n      name\n      banner\n\n      federation {\n        id\n        name\n      }\n    }\n  }\n}\n"]))),{getPayload:function(e){return e.createDropzone},fieldErrorMap:{federation:"federationId"},validates:{name:[gl("Name is required")]}}),hl=L.actions,El=T.actions;function Sl(){var e=pe((function(e){return e.dropzoneForm})),n=fe(),t=(Object(Je.useNavigation)(),yl({onError:function(e){return n(le.showSnackbar({message:e,variant:"error"}))},onFieldError:function(e,t){return n(hl.setFieldError([e,t]))},onSuccess:function(e){return n(El.setDropzone(e.dropzone))}}));return a.createElement(Fn,{style:xl.container},a.createElement(aa,null),a.createElement(Fn,{style:xl.fields},a.createElement(en.a,{mode:"contained",disabled:t.loading,loading:t.loading,onPress:function(){return t.mutate({name:e.fields.name.value,banner:e.fields.banner.value,federationId:Number(e.fields.federation.value.id)})}},"Save")))}var xl=Oe.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%"},field:{marginBottom:8}}),Il=Object(Fe.a)();function kl(){return a.createElement(Il.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"Dropzones"},a.createElement(Il.Screen,{name:"DropzonesScreen",component:ml}),a.createElement(Il.Screen,{name:"CreateDropzoneScreen",component:Sl}))}var wl,Ol=t(43),Cl=A.actions,zl=Object(g.gql)(wl||(wl=Qe()(["\n  mutation UserLogin($email: String!, $password: String!) {\n    userLogin(email: $email, password: $password) {\n      authenticatable {\n        id\n        email\n        name\n        phone\n        createdAt\n        updatedAt\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"])));function jl(){var e=pe((function(e){return e.login})),n=fe(),t=Object(Ol.useNavigation)(),r=Object(g.useMutation)(zl),i=q()(r,2),o=i[0],s=i[1],u=Object(a.useCallback)((function(){var t,r,a,l,i,s,u;return Ee.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),r=!1,e.fields.email.value||(r=!0,n(Cl.setEmailError("Email is required"))),e.fields.password.value||(r=!0,n(Cl.setPasswordError("Password is required"))),t.test(e.fields.email.value)||(r=!0,n(Cl.setEmailError("Please enter a valid email"))),r){c.next=17;break}return c.prev=6,c.next=9,Ee.a.awrap(o({variables:{email:e.fields.email.value,password:e.fields.password.value}}));case 9:u=c.sent,console.log({result:u}),null!=u&&null!=(a=u.data)&&null!=(l=a.userLogin)&&l.authenticatable&&null!=u&&null!=(i=u.data)&&null!=(s=i.userLogin)&&s.credentials&&(n(ae.setCredentials(u.data.userLogin.credentials)),n(ae.setUser(u.data.userLogin.authenticatable))),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(6),n(le.showSnackbar({message:c.t0.message,variant:"error"}));case 17:case"end":return c.stop()}}),null,null,[[6,14]],Promise)}),[o,JSON.stringify(e.fields)]);return l.a.createElement(Fn,{style:$l.container},l.a.createElement($n,{style:$l.title},"Sign in"),l.a.createElement(Fn,{style:$l.fields},l.a.createElement(un.a,{label:"Email",mode:"outlined",value:e.fields.email.value,onChangeText:function(e){n(Cl.setEmail(e))}}),l.a.createElement(an.a,{type:"error"},e.fields.email.error||" "),l.a.createElement(un.a,{label:"Password",mode:"outlined",value:e.fields.password.value,secureTextEntry:!0,onChangeText:function(e){n(Cl.setPassword(e))},error:!!e.fields.password.error}),l.a.createElement(an.a,{type:"error"},e.fields.password.error||" "),l.a.createElement(en.a,{mode:"contained",style:$l.button,onPress:u,loading:s.loading},"Log in"),l.a.createElement(en.a,{style:$l.button,onPress:function(){return t.navigate("SignUpScreen")}},"Sign up")))}var Pl,Tl,$l=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{marginBottom:10},button:{marginTop:10,width:"100%"}}),Fl=bl(Object(Ve.a)(Pl||(Pl=Qe()(["\n  mutation UserSignUp(\n    $email: String!,\n    $password: String!,\n    $passwordConfirmation: String!\n    $name: String!\n    $phone: String!\n    $exitWeight: Float!\n    $licenseId: Int\n  ){\n    userSignUp(\n      email: $email,\n      password: $password,\n      passwordConfirmation: $passwordConfirmation,\n      exitWeight: $exitWeight,\n      name: $name,\n      phone: $phone,\n      licenseId: $licenseId\n    ) {\n      authenticatable {\n        createdAt,\n        email,\n        id,\n        name,\n        phone,\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.userSignUp},fieldErrorMap:{license:"licenseId"},validates:{name:[gl("Name is required")],email:[(Tl="Please enter a valid email",{message:Tl,pattern:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})],passwordConfirmation:[vl("Password must have 1 uppercase, 1 lowercase, 1 digit and be at least 8 characters",(function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}.*$/.test(e.passwordConfirmation)})),vl("Passwords don't match",(function(e){return e.password===e.passwordConfirmation}))]}}),Nl=B.actions,Dl=T.actions;function Ml(){var e,n,t=pe((function(e){return e.signup})),r=fe(),l=Fl({onSuccess:function(e){e.credentials&&(r(Dl.setCredentials(e.credentials)),r(Dl.setUser(e.authenticatable)))},onFieldError:function(e,n){return r(Nl.setFieldError([e,n]))}}),i=l.loading,o=l.mutate;return a.createElement(Fn,{style:Al.container},a.createElement($n,{style:Al.title},"Sign up"),a.createElement(Fn,{style:Al.fields},a.createElement(un.a,{style:Al.field,mode:"outlined",label:"Name",error:!!t.fields.name.error,value:t.fields.name.value,onChangeText:function(e){return r(Nl.setField(["name",e]))}}),a.createElement(an.a,{type:"error"},t.fields.name.error||""),a.createElement(un.a,{style:Al.field,mode:"outlined",label:"Exit weight",error:!!t.fields.exitWeight.error,value:(null==(e=t.fields.exitWeight)||null==(n=e.value)?void 0:n.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(un.a.Affix,{text:"kg"})},onChangeText:function(e){return r(Nl.setField(["exitWeight",parseFloat(e)]))}}),a.createElement(an.a,{type:t.fields.exitWeight.error?"error":"info"},t.fields.exitWeight.error||""),a.createElement(un.a,{style:Al.field,mode:"outlined",label:"Email",error:!!t.fields.email.error,value:t.fields.email.value,onChangeText:function(e){return r(Nl.setField(["email",e]))}}),a.createElement(an.a,{type:"error"},t.fields.email.error||""),a.createElement(un.a,{style:Al.field,mode:"outlined",label:"Phone",error:!!t.fields.phone.error,value:t.fields.phone.value,onChangeText:function(e){return r(Nl.setField(["phone",e]))}}),a.createElement(an.a,{type:"error"},t.fields.phone.error||""),a.createElement(un.a,{style:Al.field,mode:"outlined",label:"Password",error:Boolean(t.fields.password.error||t.fields.passwordConfirmation.error),textContentType:"newPassword",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:t.fields.password.value,onChangeText:function(e){return r(Nl.setField(["password",e]))}}),a.createElement(an.a,{type:"error"},t.fields.password.error||""),a.createElement(un.a,{style:Al.field,mode:"outlined",label:"Repeat password",error:Boolean(t.fields.password.error||t.fields.passwordConfirmation.error),textContentType:"newPassword",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:t.fields.passwordConfirmation.value,onChangeText:function(e){return r(Nl.setField(["passwordConfirmation",e]))}}),a.createElement(an.a,{type:"error"},t.fields.passwordConfirmation.error||""),a.createElement(en.a,{mode:"contained",onPress:function(){var e,n;return o({email:t.fields.email.value,name:t.fields.name.value,exitWeight:t.fields.exitWeight.value,password:t.fields.password.value,passwordConfirmation:t.fields.passwordConfirmation.value,licenseId:Number(null==(e=t.fields.license)||null==(n=e.value)?void 0:n.id)||null,phone:t.fields.phone.value})},loading:i},"Sign up")))}var Al=Oe.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%"},field:{marginBottom:8}}),Ul=Object(Fe.a)();function ql(){return a.createElement(Ul.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"LoginScreen"},a.createElement(Ul.Screen,{name:"LoginScreen",component:jl}),a.createElement(Ul.Screen,{name:"SignUpScreen",component:Ml}))}var Wl=Object(Fe.a)();function Bl(){var e=pe((function(e){return e.global}));return a.createElement(Wl.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},e.credentials?e.currentDropzone?a.createElement(Wl.Screen,{name:"Authenticated",component:cl}):a.createElement(Wl.Screen,{name:"Dropzones",component:kl}):a.createElement(Wl.Screen,{name:"Unauthenticated",component:ql}),a.createElement(Wl.Screen,{name:"NotFound",component:Me,options:{title:"Oops!"}}))}function Rl(){var e=pe((function(e){return e.global}));return l.a.createElement(ye,null,l.a.createElement(u.a,{theme:e.theme},l.a.createElement(i.b,null,l.a.createElement(m.a,{linking:$e,theme:e.theme},l.a.createElement(Bl,null)),l.a.createElement(r.a,null),l.a.createElement(Te,null))))}function Ll(){return function(){var e=a.useState(!1),n=q()(e,2),r=n[0],l=n[1];return a.useEffect((function(){Ee.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Ie.b(),e.next=4,Ee.a.awrap(xe.b(we(we({},Se.a.font),{},{"space-mono":t(418)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,l(!0),Ie.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}()?l.a.createElement(o.a,{store:de},l.a.createElement(s.a,{persistor:me,loading:l.a.createElement(d.a,{style:{flex:1,justifyContent:"center",alignItems:"center"}},l.a.createElement(c.a,{size:"large"}))},l.a.createElement(Rl,null))):null}},383:function(e,n,t){e.exports=t(467)},418:function(e,n,t){e.exports=t.p+"./fonts/SpaceMono-Regular.ttf"},434:function(e,n){}},[[383,1,2]]]);
//# sourceMappingURL=app.7fab1410.chunk.js.map