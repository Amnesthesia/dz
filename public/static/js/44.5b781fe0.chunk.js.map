{"version":3,"sources":["navigation/AppBar.tsx","navigation/tabs/settings.tsx"],"names":["QUERY_DROPZONES","gql","styles","StyleSheet","create","warning","flexDirection","alignItems","height","width","backgroundColor","justifyContent","paddingHorizontal","AppBar","navigation","previous","scene","useState","dropzoneMenuOpen","setDropzoneMenuOpen","data","useQuery","useAppSelector","state","global","currentDropzone","dispatch","theme","useAppDispatch","hasRig","currentUser","user","rigs","length","hasExitWeight","exitWeight","showSetupWarning","Header","BackAction","onPress","goBack","Content","title","descriptor","options","onDismiss","visible","anchor","style","color","marginRight","name","dropzones","edges","map","edge","Item","node","globalActions","setDropzone","mode","navigate","SettingsScreen","React","DropzoneSettingsScreen","TicketTypeSettingsScreen","CreatePlaneScreen","UpdatePlaneScreen","UpdateDropzoneScreen","PlanesScreen","CreateTicketTypeScreen","UpdateTicketTypeScreen","CreateExtraScreen","UpdateExtraScreen","ExtrasScreen","Settings","createStackNavigator","SettingsTab","Navigator","screenOptions","headerShown","header","props","cardStyle","flex","Screen","component"],"mappings":"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","file":"static/js/44.5b781fe0.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Appbar, Menu, Paragraph, Text, Button } from \"react-native-paper\";\nimport { StackHeaderProps } from \"@react-navigation/stack\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport { Dropzone, Query } from \"../graphql/schema\";\nimport { globalActions, useAppDispatch, useAppSelector } from \"../redux\";\nimport { View, StyleSheet } from \"react-native\";\n\nconst QUERY_DROPZONES = gql`\n  query QueryDropzonesCompact {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n\ninterface IAppBar extends StackHeaderProps {\n  searchEnabled: boolean;\n  searchVisible: boolean;\n  setSearchVisible(visible: boolean): void;\n}\n\n\nfunction AppBar({ navigation, previous, scene }: StackHeaderProps) {\n  const [dropzoneMenuOpen, setDropzoneMenuOpen] = useState(false);\n  const { data } = useQuery<Query>(QUERY_DROPZONES);\n  const { currentDropzone, theme } = useAppSelector(state => state.global);\n  const dispatch = useAppDispatch();\n  \n  const hasRig = !!currentDropzone?.currentUser?.user?.rigs?.length;\n  const hasExitWeight = !!currentDropzone?.currentUser?.user?.exitWeight;\n\n  const showSetupWarning = !hasRig || !hasExitWeight;\n\n  return (\n    <>\n    <Appbar.Header>\n      {previous ? <Appbar.BackAction onPress={navigation.goBack} /> : null}\n      <Appbar.Content title={scene.descriptor.options.title} />\n      <Menu\n        onDismiss={() => setDropzoneMenuOpen(false)}\n        visible={dropzoneMenuOpen}\n        anchor={\n          <Text\n            onPress={() => setDropzoneMenuOpen(true)}\n            style={{ color: \"white\", marginRight: 8 }}\n          >\n            {currentDropzone?.name}\n          </Text>\n      }>\n        {\n          data?.dropzones?.edges?.map((edge) =>\n            <Menu.Item\n              title={edge?.node?.name}\n              onPress={() => {\n                dispatch(globalActions.setDropzone(edge?.node as Dropzone));\n                setDropzoneMenuOpen(false);\n              }}\n            />\n          )\n        }\n      </Menu>\n    </Appbar.Header>\n    { showSetupWarning && (\n      <View style={styles.warning}>\n        <Paragraph>\n          You need to complete your profile\n        </Paragraph>\n        <Button color=\"black\" mode=\"outlined\" onPress={() => navigation.navigate(\"Profile\")}>\n          Take me there\n        </Button>\n      </View>\n    )}\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  warning: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    height: 56,\n    width: \"100%\",\n    backgroundColor: \"#ffbb33\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: 32\n  },\n})\n\nexport default AppBar;","import { createStackNavigator } from '@react-navigation/stack';\nimport * as React from 'react';\n\nconst SettingsScreen = React.lazy(() => import('../../screens/authenticated/settings/SettingsScreen'));\nconst DropzoneSettingsScreen = React.lazy(() => import('../../screens/authenticated/settings/DropzoneSettingsScreen'));\nconst TicketTypeSettingsScreen = React.lazy(() => import('../../screens/authenticated/ticket_types/TicketTypesScreen'));\nconst CreatePlaneScreen = React.lazy(() => import('../../screens/authenticated/planes/CreatePlaneScreen'));\nconst UpdatePlaneScreen = React.lazy(() => import('../../screens/authenticated/planes/UpdatePlaneScreen'));\nconst UpdateDropzoneScreen = React.lazy(() => import('../../screens/authenticated/dropzones/UpdateDropzoneScreen'));\nconst PlanesScreen = React.lazy(() => import('../../screens/authenticated/planes/PlanesScreen'));\n\nconst CreateTicketTypeScreen = React.lazy(() => import('../../screens/authenticated/ticket_types/CreateTicketTypeScreen'));\nconst UpdateTicketTypeScreen = React.lazy(() => import('../../screens/authenticated/ticket_types/UpdateTicketTypeScreen'));\n\nconst CreateExtraScreen = React.lazy(() => import('../../screens/authenticated/extras/CreateExtraScreen'));\nconst UpdateExtraScreen = React.lazy(() => import('../../screens/authenticated/extras/UpdateExtraScreen'));\nconst ExtrasScreen = React.lazy(() => import('../../screens/authenticated/extras/ExtrasScreen'));\n\n\nimport AppBar from '../AppBar';\nimport { Dropzone } from '../../graphql/schema';\n\n\nexport type ISettingsTabParams = {\n  SettingsScreen: undefined;\n  DropzoneSettingsScreen: undefined;\n  UpdateDropzoneScreen: { dropzone: Dropzone };\n  TicketTypeSettingsScreen: undefined;\n  CreatePlaneScreen: undefined;\n  UpdatePlaneScreen: undefined;\n  PlanesScreen: undefined;\n  PlaneScreen: undefined;\n  TicketTypesScreen: undefined;\n  CreateTicketTypeScreen: undefined;\n  UpdateTicketTypeScreen: undefined;\n  UpdateExtraScreen: undefined;\n  CreateExtraScreen: undefined;\n  ExtrasScreen: undefined;\n}\n\nconst Settings = createStackNavigator<ISettingsTabParams>();\n\nexport default function SettingsTab() {\n  return (\n    <Settings.Navigator\n      screenOptions={{\n        headerShown: true,\n        header: (props) => <AppBar {...props} />,\n        cardStyle: {\n          flex: 1\n        }\n      }}\n    >\n      <Settings.Screen name=\"SettingsScreen\" component={SettingsScreen} options={{ title: \"Settings\" }} />\n      <Settings.Screen name=\"DropzoneSettingsScreen\" component={DropzoneSettingsScreen} />\n      <Settings.Screen name=\"UpdateDropzoneScreen\" component={UpdateDropzoneScreen} />\n      <Settings.Screen name=\"PlanesScreen\" component={PlanesScreen} options={{ title: \"Planes\"}} />\n      <Settings.Screen name=\"CreatePlaneScreen\" component={CreatePlaneScreen} options={{ title: \"New plane\"}} />\n      <Settings.Screen name=\"UpdatePlaneScreen\" component={UpdatePlaneScreen} options={{ title: \"Edit plane\"}} />\n      <Settings.Screen name=\"TicketTypesScreen\" component={TicketTypeSettingsScreen} options={{ title: \"Ticket types\" }} />\n      <Settings.Screen name=\"CreateTicketTypeScreen\" component={CreateTicketTypeScreen} options={{ title: \"New ticket type\" }} />\n      <Settings.Screen name=\"UpdateTicketTypeScreen\" component={UpdateTicketTypeScreen} options={{ title: \"Edit ticket type\" }}/>\n      <Settings.Screen name=\"CreateExtraScreen\" component={CreateExtraScreen} options={{ title: \"Create ticket add-on\" }}/>\n      <Settings.Screen name=\"UpdateExtraScreen\" component={UpdateExtraScreen} options={{ title: \"Update ticket add-on\" }} />\n      <Settings.Screen name=\"ExtrasScreen\" component={ExtrasScreen} options={{ title: \"Ticket add-ons\" }} />\n    </Settings.Navigator>\n  );\n}\n"],"sourceRoot":""}