(this.webpackJsonp=this.webpackJsonp||[]).push([[22],{404:function(e,n,t){"use strict";t.d(n,"a",(function(){return f})),t.d(n,"b",(function(){return g}));var r=t(27),a=t.n(r),o=t(13),i=t.n(o),l=t(0),s=t(59),u=t(5),c=t(197),d=t(200);function m(e,n){var t=Object(d.a)(),r=e[t];return r||c.a[t][n]}function f(e){var n=e.style,t=e.lightColor,r=e.darkColor,o=i()(e,["style","lightColor","darkColor"]),u=m({light:t,dark:r},"text");return l.createElement(s.a,a()({style:[{color:u},n]},o))}function g(e){var n=e.style,t=e.lightColor,r=e.darkColor,o=i()(e,["style","lightColor","darkColor"]),s=m({light:t,dark:r},"background");return l.createElement(u.a,a()({style:[{backgroundColor:s},n]},o))}},408:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(0),a=t.n(r),o=t(89),i=t(4),l=t(409),s=t(60);function u(e){var n=Object(l.a)().height,t=Object(s.h)((function(e){return e.global})).theme;return a.a.createElement(o.a,{style:[c.container,{backgroundColor:t.colors.surface,height:n-112},e.style],contentContainerStyle:[c.content,e.contentContainerStyle]},e.children)}var c=i.a.create({container:{flex:1},content:{paddingHorizontal:16,alignItems:"flex-start",flexGrow:1,paddingBottom:50}})},409:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var r=t(53),a=t(0);function o(){var e=Object(a.useState)((function(){return r.a.get("window")})),n=e[0],t=e[1];return Object(a.useEffect)((function(){function e(e){var n=e.window;t(n)}return r.a.addEventListener("change",e),t(r.a.get("window")),function(){r.a.removeEventListener("change",e)}}),[]),n}},412:function(e,n,t){"use strict";var r=t(13),a=t.n(r),o=t(0),i=t(33),l=t.n(i),s=t(8),u=t(4),c=t(442),d=t(38);function m(){return(m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var f=u.a.create({text:{fontSize:12,paddingVertical:4},padding:{paddingHorizontal:12}});n.a=Object(d.c)((function(e){var n=e.style,t=e.type,r=void 0===t?"info":t,i=e.visible,u=void 0===i||i,d=e.theme,g=e.onLayout,v=e.padding,h=void 0===v?"normal":v,p=a()(e,["style","type","visible","theme","onLayout","padding"]),b=o.useRef(new s.a.Value(u?1:0)).current,S=o.useRef(0).current,y=d.animation.scale;o.useEffect((function(){u?s.a.timing(b,{toValue:1,duration:150*y,useNativeDriver:!0}).start():s.a.timing(b,{toValue:0,duration:180*y,useNativeDriver:!0}).start()}),[u,y,b]);var x=d.colors,E=d.dark,k="error"===r?x.error:l()(x.text).alpha(E?.7:.54).rgb().string();return o.createElement(c.a,m({onLayout:function(e){null===g||void 0===g||g(e),S=e.nativeEvent.layout.height},style:[f.text,"none"!==h?f.padding:{},{color:k,opacity:b,transform:u&&"error"===r?[{translateY:b.interpolate({inputRange:[0,1],outputRange:[-S/2,0]})}]:[]},n]},p),p.children)}))},426:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var r=t(103),a=t(205),o=r.a.actions;a.a},465:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(0),a=t(4),o=t(428),i=t(412),l=t(60),s=t(164).a.actions;function u(){var e,n,t,a,u=Object(l.h)((function(e){return e.planeForm})),d=Object(l.g)();return r.createElement(r.Fragment,null,r.createElement(o.a,{style:c.field,mode:"outlined",label:"Name",error:!!u.fields.name.error,value:u.fields.name.value,onChangeText:function(e){return d(s.setField(["name",e]))}}),r.createElement(i.a,{type:u.fields.name.error?"error":"info"},u.fields.name.error||""),r.createElement(o.a,{style:c.field,mode:"outlined",label:"Registration",error:!!u.fields.registration.error,value:u.fields.registration.value,onChangeText:function(e){return d(s.setField(["registration",e]))}}),r.createElement(i.a,{type:u.fields.registration.error?"error":"info"},u.fields.registration.error||""),r.createElement(o.a,{style:c.field,mode:"outlined",label:"hours",error:!!u.fields.hours.error,value:null==(e=u.fields.hours)||null==(n=e.value)?void 0:n.toString(),placeholder:"Optional",onChangeText:function(e){return d(s.setField(["hours",Number(e)]))}}),r.createElement(i.a,{type:u.fields.hours.error?"error":"info"},u.fields.hours.error||""),r.createElement(o.a,{style:c.field,mode:"outlined",label:"Min slots",error:!!u.fields.minSlots.error,value:null==(t=u.fields.minSlots.value)?void 0:t.toString(),keyboardType:"number-pad",onChangeText:function(e){return d(s.setField(["minSlots",Number(e)]))}}),r.createElement(i.a,{type:u.fields.minSlots.error?"error":"info"},u.fields.minSlots.error||"Minimum tickets required to send it"),r.createElement(o.a,{style:c.field,mode:"outlined",label:"Max slots",error:!!u.fields.maxSlots.error,value:null==(a=u.fields.maxSlots)?void 0:a.value.toString(),keyboardType:"number-pad",onChangeText:function(e){return d(s.setField(["maxSlots",Number(e)]))}}),r.createElement(i.a,{type:u.fields.maxSlots.error?"error":"info"},u.fields.maxSlots.error||"Maximum amount of jumpers who can be manifested on one load"))}var c=a.a.create({fields:{width:"100%",flex:1},field:{width:"100%",marginBottom:8}})},516:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return w}));var r,a=t(6),o=t.n(a),i=t(405),l=t.n(i),s=t(10),u=t.n(s),c=t(0),d=t(4),m=t(203),f=t(120),g=t(60),v=t(404),h=t(426),p=t(161),b=t(164),S=t(465),y=t(73),x=t(408),E=t(297),k=b.a.actions,O=(p.a.actions,Object(f.gql)(r||(r=l()(["\n  mutation UpdatePlane(\n    $id: Int!,\n    $name: String!,\n    $registration: String!,\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    updatePlane(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        registration: $registration,\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))));function w(){var e=Object(g.h)((function(e){return e})),n=e.planeForm,t=(e.global,Object(g.g)()),r=Object(y.useNavigation)(),a=Object(y.useRoute)().params.plane;c.useEffect((function(){t(k.setOriginal(a))}),[null==a?void 0:a.id]);var i=Object(f.useMutation)(O),l=o()(i,2),s=l[0],d=l[1],p=c.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,t(k.setFieldError(["name","Name is too short"]))),n.fields.registration.value.length<3&&(e=!0,t(k.setFieldError(["registration","Registration is too short"]))),n.fields.maxSlots.value||(e=!0,t(k.setFieldError(["maxSlots","Max slots must be specified"]))),!e}),[JSON.stringify(n.fields),t]),b=c.useCallback((function(){var e,a,o,i,l,c,d,m,f,g,v;return u.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(e=n.fields,a=e.name,o=e.registration,i=e.maxSlots,l=e.minSlots,c=e.hours,d=e.nextMaintenanceHours,!p()){b.next=12;break}return b.prev=2,b.next=5,u.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,registration:o.value,minSlots:l.value,maxSlots:i.value,hours:c.value,nextMaintenanceHours:d.value}}));case 5:g=b.sent,null!=(m=g.data)&&null!=(f=m.updatePlane)&&f.plane&&(v=g.data.updatePlane.plane,t(h.a.showSnackbar({message:"Saved plane "+v.name,variant:"success"})),r.goBack()),b.next=12;break;case 9:b.prev=9,b.t0=b.catch(2),t(h.a.showSnackbar({message:b.t0.message,variant:"error"}));case 12:case"end":return b.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return c.createElement(x.a,{contentContainerStyle:C.content},c.createElement(E.a,{name:"airplane",size:100,color:"#999999",style:{alignSelf:"center"}}),c.createElement(S.a,null),c.createElement(v.b,{style:C.actions},c.createElement(m.a,{mode:"contained",disabled:d.loading,onPress:b,loading:d.loading},"Save")))}var C=d.a.create({content:{paddingHorizontal:48},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},actions:{width:"100%",marginBottom:16},field:{marginBottom:8}})}}]);
//# sourceMappingURL=22.c7535562.chunk.js.map