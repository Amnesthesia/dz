(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{368:function(e,n,t){"use strict";t.d(n,"a",(function(){return ci}));var r=t(369),a=t(0),l=t.n(a),i=t(482),o=t(169),s=t(314),u=t(300),c=t(129),d=t(2),m=t(311),f=t(4),p=t.n(f),g=t(17),v=t(175),b=t(318),y=t(319),h=t(42),E=t(236),S=t(241),x=t(328),I=t.n(x),k=t(123),O=t(258),z=t(104),w=t(124);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=j(j(j({},z.a),k.a),{},{colors:j(j({},z.a.colors),k.a.colors)}),T=j(j(j({},w.a),O.a),{},{colors:j(j({},w.a.colors),O.a.colors)}),$={currentUser:null,currentDropzone:null,permissions:[],credentials:null,theme:P,isDarkMode:!1},F=Object(h.b)({name:"global",initialState:$,reducers:{setCredentials:function(e,n){e.credentials=n.payload},setUser:function(e,n){e.currentUser=n.payload},setPermissions:function(e,n){e.permissions=n.payload},setPrimaryColor:function(e,n){e.theme.colors.primary=n.payload},setAccentColor:function(e,n){e.theme.colors.accent=n.payload},setDropzone:function(e,n){var t,r,a,l;(e.currentDropzone=n.payload,null!=(t=e.currentDropzone)&&t.primaryColor)&&(e.theme.colors.primary=null==(a=e.currentDropzone)?void 0:a.primaryColor);null!=(r=e.currentDropzone)&&r.secondaryColor&&(e.theme.colors.accent=null==(l=e.currentDropzone)?void 0:l.secondaryColor)},toggleDarkMode:function(e){var n,t,r,a;(e.isDarkMode=!e.isDarkMode,e.theme=e.isDarkMode?T:P,null!=(n=e.currentDropzone)&&n.primaryColor)&&(e.theme.colors.primary=null==(r=e.currentDropzone)?void 0:r.primaryColor);null!=(t=e.currentDropzone)&&t.secondaryColor&&(e.theme.colors.accent=null==(a=e.currentDropzone)?void 0:a.secondaryColor)},logout:function(e){for(var n in $){var t=n;n in e&&(e[t]=$[t])}}}}),N=t(13),D=Object(h.b)({name:"notifications",initialState:{queue:[]},reducers:{hideSnackbar:function(e){e.queue=e.queue.slice(1)},showSnackbar:function(e,n){e.queue.push(n.payload)}}}),M={fields:{email:{value:"",error:null},password:{value:"",error:null}}},U=Object(h.b)({name:"login",initialState:M,reducers:{setEmail:function(e,n){e.fields.email.value=n.payload},setPassword:function(e,n){e.fields.password.value=n.payload},setEmailError:function(e,n){e.fields.email.error=n.payload},setPasswordError:function(e,n){e.fields.password.error=n.payload},reset:function(e){e.fields=M.fields}}}),A=t(7),q=t.n(A),W={federation:null,fields:{email:{value:"",error:null},password:{value:"",error:null},passwordConfirmation:{value:"",error:null},exitWeight:{value:50,error:null},name:{value:"",error:null},phone:{value:"",error:null},license:{value:null,error:null}}},B=Object(h.b)({name:"login",initialState:W,reducers:{setFederation:function(e,n){e.federation=n.payload},setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},reset:function(e){e.fields=W.fields}}}),R={isSearchVisible:!1,searchText:""},L=Object(h.b)({name:"usersScreen",initialState:R,reducers:{setSearchText:function(e,n){e.searchText=n.payload},setSearchVisible:function(e,n){e.isSearchVisible=n.payload},reset:function(e){e.isSearchVisible=R.isSearchVisible,e.searchText=R.searchText}}}),H={original:null,fields:{federation:{value:null,error:null},name:{value:"",error:null},secondaryColor:{value:"",error:null},primaryColor:{value:"",error:null},banner:{value:"",error:null},isCreditSystemEnabled:{value:!1,error:null},isPublic:{value:!1,error:null}}},V=Object(h.b)({name:"dropzone",initialState:H,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];r in e.fields&&e.fields[r].error&&(e.fields[r].error=a)},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=H.fields,e.original=null}}}),Q={original:null,fields:{name:{value:"",error:null},registration:{value:"",error:null},minSlots:{value:0,error:null},maxSlots:{value:4,error:null},hours:{value:null,error:null},nextMaintenanceHours:{value:null,error:null}}},J=Object(h.b)({name:"Plane",initialState:Q,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields.name.error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){e.original=n.payload,e.fields.hours.value=n.payload.hours,e.fields.minSlots.value=n.payload.minSlots,e.fields.maxSlots.value=n.payload.maxSlots,e.fields.name.value=n.payload.name,e.fields.registration.value=n.payload.registration,e.fields.nextMaintenanceHours.value=n.payload.nextMaintenanceHours},reset:function(e){e.fields=Q.fields,e.original=null}}}),G={original:null,fields:{name:{value:"",error:null},cost:{value:null,error:null},altitude:{value:14e3,error:null},allowManifestingSelf:{value:!1,error:null},extraIds:{value:[],error:null}}},_=Object(h.b)({name:"ticketTypeForm",initialState:G,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){e.original=n.payload,e.fields.altitude.value=n.payload.altitude,e.fields.cost.value=n.payload.cost,e.fields.allowManifestingSelf.value=n.payload.allowManifestingSelf,e.fields.name.value=n.payload.name},reset:function(e){e.fields=G.fields,e.original=null}}}),Y={original:null,fields:{name:{value:"",error:null},cost:{value:null,error:null},ticketTypeIds:{value:[],error:null}}},Z=Object(h.b)({name:"ExtraForm",initialState:Y,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields.name.error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){e.original=n.payload,e.fields.ticketTypeIds.value=n.payload.ticketTypes.map((function(e){var n=e.id;return Number(n)})),e.fields.cost.value=n.payload.cost,e.fields.name.value=n.payload.name},reset:function(e){e.fields=Y.fields,e.original=null}}}),K={original:null,fields:{name:{value:"",error:null},gca:{value:null,error:null},dispatchAt:{value:null,error:null},isOpen:{value:!0,error:null},loadMaster:{value:null,error:null},pilot:{value:null,error:null},plane:{value:null,error:null},maxSlots:{value:4,error:null}}},X=Object(h.b)({name:"loadForm",initialState:K,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=K.fields,e.original=null}}}),ee={original:null,fields:{jumpType:{value:null,error:null},extras:{value:[],error:null},load:{value:null,error:null},rig:{value:null,error:null},ticketType:{value:null,error:null},user:{value:null,error:null},exitWeight:{value:null,error:null}}},ne=Object(h.b)({name:"slotForm",initialState:ee,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=ee.fields,e.original=null}}}),te={original:null,federation:{value:null,error:null},fields:{exitWeight:{value:"",error:null},email:{value:"",error:null},phone:{value:"",error:null},name:{value:null,error:null},rigs:{value:[],error:null},license:{value:null,error:null}}},re=Object(h.b)({name:"userForm",initialState:te,reducers:{setFederation:function(e,n){e.federation.value=n.payload},setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){var t;for(var r in e.original=n.payload,e.federation.value=null==(t=n.payload.license)?void 0:t.federation,n.payload)if(r in e.fields){var a=r;e.fields[a].value=n.payload[a]}},reset:function(e){e.fields=te.fields,e.original=null}}}),ae={original:null,fields:{role:{value:null,error:null},credits:{value:0,error:null},expiresAt:{value:null,error:null}}},le=Object(h.b)({name:"dropzoneUserForm",initialState:ae,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=ae.fields,e.original=null}}}),ie={original:null,fields:{make:{value:"",error:null},model:{value:"",error:null},serial:{value:"",error:null},repackExpiresAt:{value:null,error:null},canopySize:{value:null,error:null}}},oe=Object(h.b)({name:"rigForm",initialState:ie,reducers:{setField:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].value=a,e.fields[r].error=null},setFieldError:function(e,n){var t=q()(n.payload,2),r=t[0],a=t[1];e.fields[r].error=a},setOriginal:function(e,n){for(var t in e.original=n.payload,n.payload)if(t in e.fields){var r=t;e.fields[r].value=n.payload[r]}},reset:function(e){e.fields=ie.fields,e.original=null}}}),se=(U.actions,B.actions,F.actions),ue=L.actions,ce=D.actions,de=(J.actions,V.actions,_.actions,Z.actions,X.actions,ne.actions),me=re.actions,fe=le.actions,pe=oe.actions,ge={key:"root",storage:"web"===N.a.OS?I.a:Object(E.a)(),whitelist:["global","notifications"]};console.log({localStorage:localStorage,MMKV:E.a});var ve=Object(S.a)(ge,{global:F.reducer,notifications:D.reducer,login:U.reducer,signup:B.reducer,dropzoneForm:V.reducer,planeForm:J.reducer,ticketTypeForm:_.reducer,extraForm:Z.reducer,loadForm:X.reducer,slotForm:ne.reducer,userForm:re.reducer,dropzoneUserForm:le.reducer,rigForm:oe.reducer,usersScreen:L.reducer}),be=Object(h.a)({reducer:ve}),ye=Object(S.b)(be),he=function(){return Object(o.b)()},Ee=o.c;function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function xe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ie=Object(g.createHttpLink)({uri:"https://deezed.herokuapp.com/graphql"});function ke(e){var n=e.children,t=Ee((function(e){return e.global.credentials})),r=he(),i=Object(a.useMemo)((function(){return Object(y.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.map((function(e){var n=e.message,t=e.locations,a=e.path;return r(ce.showSnackbar({message:"[GraphQL error]: "+n+", "+t+", "+a,variant:"error"}))})),t&&r(ce.showSnackbar({message:"[Network error]: "+t,variant:"error"})),t&&"ServerError"===t.name&&401===t.statusCode&&r(se.logout())}))}),[r]),o=Object(a.useMemo)((function(){return Object(b.a)((function(e,n){return{headers:xe(xe({},n.headers),null!=t&&t.accessToken?xe({Authorization:"Bearer "+t.accessToken,"access-token":t.accessToken,"token-type":t.tokenType},t):{})}}))}),[JSON.stringify(t)]),s=Object(a.useMemo)((function(){return new g.ApolloClient({link:i.concat(o).concat(Ie),cache:new g.InMemoryCache})}),[o]);return l.a.createElement(v.ApolloProvider,{client:s},n)}var Oe=t(5),ze=t.n(Oe),we=t(477),Ce=t(481),je=t(242);function Pe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Pe(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $e=t(1),Fe=t(266);var Ne={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",success:"#00C851",error:"#ff4444",warning:"#FF8800",info:"#0099CC"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff",success:"#00C851",error:"#ff4444",warning:"#FF8800",info:"#0099CC"}};var De=function(){return Ne.light},Me=D.actions,Ue=($e.a.create({container:{flex:1,justifyContent:"space-between"}}),function(){var e=Ee((function(e){return e.notifications})),n=he(),t=De(),r=e.queue.length?e.queue[0]:null,l={info:{backgroundColor:t.info},success:{backgroundColor:t.success},error:{backgroundColor:t.error},warning:{backgroundColor:t.warning}};return a.createElement(Fe.a,{visible:!!r,onDismiss:function(){return n(Me.hideSnackbar())},duration:3e3,action:null==r?void 0:r.action,style:!(null==r||!r.variant)&&l[r.variant]},null==r?void 0:r.message)}),Ae={prefixes:[t(370).a("/"),"dz://"],config:{screens:{Authenticated:{screens:{HomeScreen:"/home",LoadScreen:"/load/:load_id",PackingScreen:"/packing",ProfileScreen:"/user/:id",SetupScreen:"/dropzone/setup"}},Limbo:{screens:{DropzonesScreen:"/dropzones",CreateDropzoneScreen:"/dropzone/create"}},Unauthenticated:{screens:{LoginScreen:"/login",SignUpScreen:"/signup"}}}}},qe=t(480),We=t(49),Be=t(69);function Re(e){var n=e.navigation;return a.createElement(d.a,{style:Ve.container},a.createElement(We.a,{style:Ve.title},"This screen doesn't exist."),a.createElement(Be.a,{onPress:function(){return n.replace("Root")},style:Ve.link},a.createElement(We.a,{style:Ve.linkText},"Go to home screen!")))}var Le,He,Ve=$e.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),Qe=t(26),Je=t.n(Qe),Ge=t(16),_e=t(483),Ye=t(23),Ze=t.n(Ye),Ke=t(27),Xe=t(478),en=t(30),nn=t(35),tn=t(218),rn=t(289),an=t(310),ln=t(192),on=t(306),sn=t(178),un=t(31),cn=t.n(un),dn=t(38),mn=t(286),fn=t(10),pn=t(287),gn=t(288),vn=t(303),bn=t(285),yn=Object(en.a)(Le||(Le=Ze()(["\n  query JumpTypes($allowedForUserId: Int) {\n    jumpTypes(allowedForUserId: $allowedForUserId) {\n      id\n      name\n    }\n  }\n"])));function hn(e){var n,t,r=Object(a.useState)(!1),i=q()(r,2),o=i[0],s=i[1],u=(Ee((function(e){return e.global})),Object(g.useQuery)(yn,{variables:{allowedForUserId:e.userId}})),c=u.data;u.loading,u.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(fn.a.Subheader,null,"Jump type"),l.a.createElement(bn.a,{onDismiss:function(){return s(!1)},visible:o,anchor:l.a.createElement(fn.a.Item,{onPress:function(){s(!0)},title:(null==(n=e.value)?void 0:n.name)||"Please select jump type",description:e.required?null:"Optional"})},null==c||null==(t=c.jumpTypes)?void 0:t.map((function(n){return l.a.createElement(fn.a.Item,{onPress:function(){s(!1),e.onSelect(n)},title:n.name||"-"})}))))}var En,Sn=Object(en.a)(He||(He=Ze()(["\n  query TicketTypes($allowManifestingSelf: Boolean, $dropzoneId: Int!) {\n    ticketTypes(allowManifestingSelf: $allowManifestingSelf, dropzoneId: $dropzoneId) {\n      id\n      name\n\n      extras {\n        id\n        name\n        cost\n      }\n    }\n  }\n"])));function xn(e){var n,t,r,i=Object(a.useState)(!1),o=q()(i,2),s=o[0],u=o[1],c=Ee((function(e){return e.global})),d=Object(g.useQuery)(Sn,{variables:{dropzoneId:Number(null==(n=c.currentDropzone)?void 0:n.id),allowManifestingSelf:e.allowManifestingSelf}}),m=d.data;d.loading,d.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(fn.a.Subheader,null,"Ticket"),l.a.createElement(bn.a,{onDismiss:function(){return u(!1)},visible:s,anchor:l.a.createElement(fn.a.Item,{onPress:function(){u(!0)},title:(null==(t=e.value)?void 0:t.name)||"Please select ticket type",description:e.required?null:"Optional"})},null==m||null==(r=m.ticketTypes)?void 0:r.map((function(n){return l.a.createElement(fn.a.Item,{onPress:function(){u(!1),e.onSelect(n)},title:n.name||"-"})}))))}var In,kn=Object(en.a)(En||(En=Ze()(["\nquery QueryPermissions($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor\n      secondaryColor\n      \n      currentUser {\n        id\n        role {\n          id\n          name\n        }\n        permissions\n      }\n\n    }\n  }"])));function On(e){var n,t,r,a=Ee((function(e){return e.global})).currentDropzone,l=Object(g.useQuery)(kn,{variables:{dropzoneId:Number(null==a?void 0:a.id)},fetchPolicy:"cache-first"}).data;return(null==l||null==(n=l.dropzone)||null==(t=n.currentUser)||null==(r=t.permissions)?void 0:r.includes(e))||!1}var zn=Object(en.a)(In||(In=Ze()(["\n  query QueryRigs(\n    $dropzoneId: Int\n    $userId: Int\n  ) {\n    rigs(dropzoneId: $dropzoneId, userId: $userId) {\n      id\n      make\n      model\n      canopySize\n      serial\n    }\n  }\n"])));function wn(e){var n,t,r,i,o,s=Object(a.useState)(!1),u=q()(s,2),c=u[0],d=u[1],m=Ee((function(e){return e.global})),f=Object(g.useQuery)(zn,{variables:{dropzoneId:Number(null==(n=m.currentDropzone)?void 0:n.id)}}).data;return l.a.createElement(bn.a,{onDismiss:function(){return d(!1)},visible:c,anchor:l.a.createElement(fn.a.Item,{onPress:function(){d(!0)},title:e.value?(null==(t=e.value)?void 0:t.make)+" "+(null==(r=e.value)?void 0:r.model)+" ("+((null==(i=e.value)?void 0:i.canopySize)||"?")+"sqft)":"Select rig",description:e.required?null:"Optional",left:function(){return l.a.createElement(fn.a.Icon,{icon:"parachute"})}})},null==f||null==(o=f.rigs)?void 0:o.map((function(n){var t,r,a;return l.a.createElement(fn.a.Item,{onPress:function(){d(!1),e.onSelect(n)},title:(null==(t=e.value)?void 0:t.make)+" "+(null==(r=e.value)?void 0:r.model),description:(null==(a=e.value)?void 0:a.canopySize)+" sqft"})})))}var Cn=ne.actions;function jn(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p,g,v,b,y,h,E,S,x,I,k,O=Ee((function(e){return e.slotForm})),z=he(),w=Ee((function(e){return e.global}));a.useEffect((function(){var e,n;null!=(e=O.fields.user)&&e.value&&(O.fields.exitWeight.value||z(Cn.setField(["exitWeight",Number(O.fields.user.value.exitWeight||60)])),!O.fields.rig.value&&null!=(n=O.fields.user.value.rigs)&&n.length&&z(Cn.setField(["rig",O.fields.user.value.rigs[0]])))}),[null==(e=O.fields)||null==(n=e.user)||null==(t=n.value)?void 0:t.id]);var C=null==O||null==(r=O.original)?void 0:r.id,j=(null==O||null==(l=O.fields)||null==(i=l.user)||null==(o=i.value)||o.id,null==(s=w.currentUser)||s.id,On(C?"updateSlot":"createSlot"),On(C?"updateUserSlot":"createUserSlot"));return console.log("Fields",O.fields),a.createElement(dn.a,{style:Tn.fields,contentContainerStyle:{flexGrow:1}},a.createElement(hn,{value:O.fields.jumpType.value,required:!0,userId:Number(null==O||null==(u=O.fields)||null==(c=u.user)||null==(d=c.value)?void 0:d.id)||null,onSelect:function(e){return z(Cn.setField(["jumpType",e]))}}),a.createElement(mn.a,{type:O.fields.jumpType.error?"error":"info"},O.fields.jumpType.error||""),a.createElement(xn,{value:O.fields.ticketType.value,required:!0,allowManifestingSelf:!j,onSelect:function(e){return z(Cn.setField(["ticketType",e]))}}),a.createElement(mn.a,{type:O.fields.ticketType.error?"error":"info"},O.fields.ticketType.error||""),(null==O||null==(m=O.fields)||null==(f=m.ticketType)||null==(p=f.value)||null==(g=p.extras)?void 0:g.length)&&a.createElement(fn.a.Subheader,null,"Ticket addons"),a.createElement(dn.a,{horizontal:!0,style:Tn.ticketAddons},null==O||null==(v=O.fields)||null==(b=v.ticketType)||null==(y=b.value)||null==(h=y.extras)?void 0:h.map((function(e){var n,t,r,l;return a.createElement(pn.a,{selected:null==O||null==(n=O.fields)||null==(t=n.extras.value)?void 0:t.some((function(n){return n.id===e.id})),onPress:null!=O&&null!=(r=O.fields)&&null!=(l=r.extras.value)&&l.some((function(n){return n.id===e.id}))?function(){var n,t;return z(Cn.setField(["extras",null==O||null==(n=O.fields)||null==(t=n.extras.value)?void 0:t.filter((function(n){return n.id!==e.id}))]))}:function(){var n,t;return z(Cn.setField(["extras",[].concat(cn()((null==O||null==(n=O.fields)||null==(t=n.extras)?void 0:t.value)||[]),[e])]))}},e.name+" ($"+e.cost+")")}))),a.createElement(gn.a,null),a.createElement(wn,{value:O.fields.rig.value,userId:Number(null==(E=O.fields.user)||null==(S=E.value)?void 0:S.id),dropzoneId:Number(null==(x=w.currentDropzone)?void 0:x.id),onSelect:function(e){return z(Cn.setField(["jumpType",e]))}}),a.createElement(mn.a,{type:O.fields.rig.error?"error":"info"},O.fields.rig.error||""),a.createElement(vn.a,{style:Tn.field,mode:"outlined",label:"Exit weight",error:!!O.fields.exitWeight.error,value:(null==(I=O.fields.exitWeight)||null==(k=I.value)?void 0:k.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(vn.a.Affix,{text:"kg"})},onChangeText:function(e){return z(Cn.setField(["exitWeight",Number(e)]))}}),a.createElement(mn.a,{type:O.fields.exitWeight.error?"error":"info"},O.fields.exitWeight.error||""))}var Pn,Tn=$e.a.create({fields:{flex:1},field:{marginBottom:8},ticketAddons:{marginBottom:8}}),$n=Object(g.gql)(Pn||(Pn=Ze()(["\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $rigId: Int\n    $ticketTypeId: Int\n    $userId: Int\n    $exitWeight: Float\n  ) {\n    createSlot(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          rigId: $rigId\n          ticketTypeId: $ticketTypeId\n          userId: $userId\n          exitWeight: $exitWeight\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      slot {\n        id\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n        exitWeight\n        load {\n          id\n          name\n          createdAt\n          dispatchAt\n          hasLanded\n          maxSlots\n          isFull\n          isOpen\n          plane {\n            id\n            name\n          }\n          gca {\n            id\n            user {\n              id\n              name\n            }\n          }\n          pilot {\n            id\n            user {\n              id\n              name\n            }\n          }\n          loadMaster {\n            id\n            user {\n              id\n              name\n            }\n          }\n          slots {\n            id\n            createdAt\n            user {\n              id\n              name\n            }\n            ticketType {\n              id\n              name\n              altitude\n            }\n            jumpType {\n              id\n              name\n            }\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Fn(e){var n,t,r,i,o,s=he(),u=Ee((function(e){return e.slotForm})),c=Ee((function(e){return e.global})),d=Object(g.useMutation)($n),m=q()(d,2),f=m[0],p=m[1],v=Object(a.useCallback)((function(){var e,n,t=!1;return null!=(e=u.fields.jumpType.value)&&e.id||(t=!0,s(de.setFieldError(["jumpType","You must specify the type of jump"]))),null!=(n=u.fields.ticketType.value)&&n.id||(t=!0,s(de.setFieldError(["ticketType","You must select a ticket type to manifest"]))),!t}),[JSON.stringify(u.fields)]),b=Object(a.useCallback)((function(){var n,t,r,a,l,i,o,c,d,m,p,g,b,y,h,E,S,x,I,k,O,z;return ze.a.async((function(w){for(;;)switch(w.prev=w.next){case 0:if(v()){w.next=2;break}return w.abrupt("return");case 2:return w.prev=2,w.next=5,ze.a.awrap(f({variables:{jumpTypeId:Number(null==(n=u.fields.jumpType.value)?void 0:n.id),extraIds:null==(t=u.fields.extras)||null==(r=t.value)?void 0:r.map((function(e){var n=e.id;return Number(n)})),loadId:Number(null==(a=u.fields.load.value)?void 0:a.id),rigId:null!=(l=u.fields.rig.value)&&l.id?Number(null==(i=u.fields.rig.value)?void 0:i.id):null,ticketTypeId:Number(null==(o=u.fields.ticketType)||null==(c=o.value)?void 0:c.id),userId:Number(null==(d=u.fields.user)||null==(m=d.value)?void 0:m.id),exitWeight:u.fields.exitWeight.value}}));case 5:if(k=w.sent,null==(p=k.data)||null==(g=p.createSlot)||null==(b=g.fieldErrors)||b.map((function(e){var n=e.field,t=e.message;switch(n){case"jump_type":return s(de.setFieldError(["jumpType",t]));case"load":return s(de.setFieldError(["load",t]));case"ticket_type":return s(de.setFieldError(["ticketType",t]));case"rig":return s(de.setFieldError(["rig",t]));case"user":return s(de.setFieldError(["user",t]));case"exit_weight":return s(de.setFieldError(["exitWeight",t]))}})),null==k||null==(y=k.data)||null==(h=y.createSlot)||null==(E=h.errors)||!E.length){w.next=9;break}return w.abrupt("return",s(ce.showSnackbar({message:null==k||null==(O=k.data)||null==(z=O.createSlot)?void 0:z.errors[0],variant:"error"})));case 9:null!=(S=k.data)&&null!=(x=S.createSlot)&&null!=(I=x.fieldErrors)&&I.length||e.onSuccess(),w.next=15;break;case 12:w.prev=12,w.t0=w.catch(2),s(ce.showSnackbar({message:w.t0.message,variant:"error"}));case 15:case"end":return w.stop()}}),null,null,[[2,12]],Promise)}),[JSON.stringify(u.fields),f,e.onSuccess]);return l.a.createElement(ln.a,null,l.a.createElement(on.a,{visible:!!e.open},l.a.createElement(rn.a,{indeterminate:!0,visible:p.loading,color:c.theme.colors.accent}),l.a.createElement(on.a.Title,null,"Manifest "+(null==u||null==(n=u.fields)||null==(t=n.user)||null==(r=t.value)?void 0:r.name)+" on "+(null==(i=u.fields.load)||null==(o=i.value)?void 0:o.name)),l.a.createElement(on.a.Content,null,l.a.createElement(jn,null)),l.a.createElement(on.a.Actions,{style:{justifyContent:"flex-end"}},l.a.createElement(sn.a,{onPress:function(){s(de.reset()),e.onClose()}},"Cancel"),l.a.createElement(sn.a,{onPress:b},"Manifest"))))}var Nn=t(132),Dn=t(290),Mn=t(8),Un=t.n(Mn);function An(e,n){var t=e.light;return t||Ne.light[n]}function qn(e){var n=e.style,t=e.lightColor,r=e.darkColor,l=Un()(e,["style","lightColor","darkColor"]),i=An({light:t,dark:r},"text");return a.createElement(We.a,Je()({style:[{color:i},n]},l))}function Wn(e){var n=e.style,t=e.lightColor,r=e.darkColor,l=Un()(e,["style","lightColor","darkColor"]),i=An({light:t,dark:r},"background");return a.createElement(d.a,Je()({style:[{backgroundColor:i},n]},l))}function Bn(e){var n=e.title,t=e.subtitle;return l.a.createElement(Wn,{style:Rn.empty},l.a.createElement(Nn.a,null,n),l.a.createElement(Dn.a,{style:{textAlign:"center"}},t))}var Rn=$e.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function Ln(e){var n=e.hasPlanes,t=e.hasTicketTypes,r=(e.isPublic,De());return a.createElement(Wn,{style:{width:"70%"}},a.createElement(qn,{style:Qn.title},"Set up dropzone"),a.createElement(Wn,{style:Qn.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(fn.a.Item,{title:"Create dropzone",left:function(){return a.createElement(fn.a.Icon,{color:r.success,icon:"check"})}}),a.createElement(fn.a.Item,{title:"Add a plane",left:function(){return n?a.createElement(fn.a.Icon,{color:r.success,icon:"check"}):a.createElement(fn.a.Icon,{color:r.error,icon:"close"})}}),a.createElement(fn.a.Item,{title:"Configure jump tickets",left:function(){return t?a.createElement(fn.a.Icon,{color:r.success,icon:"check"}):a.createElement(fn.a.Icon,{color:r.error,icon:"close"})}}))}var Hn,Vn,Qn=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Jn=t(189),Gn=t(305),_n=Object(en.a)(Hn||(Hn=Ze()(["\n  query QueryDropzoneUsers(\n    $dropzoneId: Int!\n    $permissions: [Permission!]\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Yn(e){var n,t,r,i,o,s,u,c=Object(a.useState)(!1),d=q()(c,2),m=d[0],f=d[1],p=Ee((function(e){return e.global})),v=Object(g.useQuery)(_n,{variables:{dropzoneId:Number(null==(n=p.currentDropzone)?void 0:n.id),permissions:["actAsGCA"]}}).data;return On("updateLoad")?l.a.createElement(bn.a,{onDismiss:function(){return f(!1)},visible:m,anchor:l.a.createElement(pn.a,{mode:"outlined",icon:"radio-handheld",style:{marginHorizontal:4},onPress:function(){return f(!0)}},null!=(r=e.value)&&r.id?null==(i=e.value)?void 0:i.name:"No gca")},null==v||null==(o=v.dropzone)||null==(s=o.dropzoneUsers)||null==(u=s.edges)?void 0:u.map((function(n){var t,r;return l.a.createElement(fn.a.Item,{onPress:function(){var t;f(!1),e.onSelect(null==n||null==(t=n.node)?void 0:t.user)},title:null==n||null==(t=n.node)||null==(r=t.user)?void 0:r.name})}))):l.a.createElement(pn.a,{mode:"outlined",icon:"radio-handheld"},(null==(t=e.value)?void 0:t.name)||"No gca")}function Zn(e){var n,t,r,i,o=Object(a.useState)(!1),s=q()(o,2),u=s[0],c=s[1],d=On("updateLoad");return d?l.a.createElement(bn.a,{onDismiss:function(){return c(!1)},visible:u,anchor:l.a.createElement(pn.a,{mode:"outlined",icon:"parachute",style:{marginHorizontal:4},onPress:function(){return d&&c(!0)}},null!=(t=e.value)&&t.id?null==(r=e.value)?void 0:r.name:"No loadmaster")},null==(i=e.slots)?void 0:i.map((function(n){var t;return l.a.createElement(fn.a.Item,{onPress:function(){c(!1),e.onSelect(n.user)},title:null==n||null==(t=n.user)?void 0:t.name})}))):l.a.createElement(pn.a,{mode:"outlined",icon:"radio-handheld"},(null==(n=e.value)?void 0:n.name)||"No loadmaster")}var Kn,Xn=Object(en.a)(Vn||(Vn=Ze()(["\n  query QueryDropzoneUsers(\n    $dropzoneId: Int!\n    $permissions: [Permission!]\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function et(e){var n,t,r,i,o,s,u,c=Object(a.useState)(!1),d=q()(c,2),m=d[0],f=d[1],p=Ee((function(e){return e.global})),v=Object(g.useQuery)(Xn,{variables:{dropzoneId:Number(null==(n=p.currentDropzone)?void 0:n.id),permissions:["actAsPilot"]}}).data;return On("updateLoad")?l.a.createElement(bn.a,{onDismiss:function(){return f(!1)},visible:m,anchor:l.a.createElement(pn.a,{mode:"outlined",icon:"airplane-takeoff",style:{marginHorizontal:4},onPress:function(){return f(!0)}},null!=(r=e.value)&&r.id?null==(i=e.value)?void 0:i.name:"No pilot")},null==v||null==(o=v.dropzone)||null==(s=o.dropzoneUsers)||null==(u=s.edges)?void 0:u.map((function(n){var t,r;return l.a.createElement(fn.a.Item,{onPress:function(){var t;f(!1),e.onSelect(null==n||null==(t=n.node)?void 0:t.user)},title:null==n||null==(t=n.node)||null==(r=t.user)?void 0:r.name})}))):l.a.createElement(pn.a,{mode:"outlined",icon:"radio-handheld"},(null==(t=e.value)?void 0:t.name)||"No pilot")}var nt,tt,rt=Object(en.a)(Kn||(Kn=Ze()(["\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function at(e){var n,t,r,i,o=Object(a.useState)(!1),s=q()(o,2),u=s[0],c=s[1],d=Ee((function(e){return e.global})),m=Object(g.useQuery)(rt,{variables:{dropzoneId:Number(null==(n=d.currentDropzone)?void 0:n.id)}}).data,f=On("updateLoad");return f?l.a.createElement(bn.a,{onDismiss:function(){return c(!1)},visible:u,anchor:l.a.createElement(pn.a,{mode:"outlined",icon:"airplane",style:{marginHorizontal:4},onPress:function(){return f&&c(!0)}},(null==(r=e.value)?void 0:r.name)||"No plane")},null==m||null==(i=m.planes)?void 0:i.map((function(n){return l.a.createElement(fn.a.Item,{onPress:function(){c(!1),e.onSelect(n)},title:n.name})}))):l.a.createElement(pn.a,{mode:"outlined",icon:"airplane-takeoff"},(null==(t=e.value)?void 0:t.name)||"No plane")}var lt=Object(g.gql)(nt||(nt=Ze()(["\n  query QueryLoad($id: Int!) {\n    load(id: $id) {\n      id\n      name\n      createdAt\n      dispatchAt\n      hasLanded\n      maxSlots\n      isFull\n      isOpen\n      plane {\n        id\n        name\n      }\n      gca {\n        id\n        user {\n          id\n          name\n        }\n      }\n      pilot {\n        id\n        user {\n          id\n          name\n        }\n      }\n      loadMaster {\n        id\n        user {\n          id\n          name\n        }\n      }\n      slots {\n        id\n        createdAt\n        exitWeight\n        user {\n          id\n          name\n        }\n        ticketType {\n          id\n          name\n          altitude\n\n          extras {\n            id\n            name\n            cost\n          }\n        }\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),it=Object(g.gql)(tt||(tt=Ze()(["\n  mutation UpdateLoad(\n    $id: Int!,\n    $pilotId: Int,\n    $gcaId: Int,\n    $planeId: Int,\n    $isOpen: Boolean,\n  ){\n    updateLoad(input: {\n      id: $id\n      attributes: {\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        planeId: $planeId,\n        isOpen: $isOpen,\n      }\n    }) {\n      load {\n        id\n        name\n        createdAt\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          exitWeight\n          user {\n            id\n            name\n          }\n          ticketType {\n            id\n            name\n            altitude\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function ot(e){var n,t,r,l,i,o,s,u,c,d,m,f,p,v,b,y,h,E=Ee((function(e){return e.global})),S=a.useState(!1),x=q()(S,2),I=x[0],k=x[1],O=(Object(Ke.useNavigation)(),e.load),z=e.loadNumber,w=e.onManifest,C=e.canManifest,j=Object(g.useQuery)(lt,{variables:{id:Number(O.id)}}),P=j.data,T=j.loading,$=Object(g.useMutation)(it),F=q()($,2),N=F[0],D=F[1],M=a.useCallback((function(e){return ze.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ze.a.awrap(N({variables:{id:Number(O.id),pilotId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(O)]),U=a.useCallback((function(e){return ze.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ze.a.awrap(N({variables:{id:Number(O.id),gcaId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(O)]),A=a.useCallback((function(e){return ze.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ze.a.awrap(N({variables:{id:Number(O.id),planeId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(O)]),W=a.useCallback((function(e){return ze.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ze.a.awrap(N({variables:{id:Number(O.id),loadMasterId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[N,JSON.stringify(O)]),B=On("updateSlot"),R=On("updateUserSlot"),L=a.useCallback((function(n){var t,r;if((null==n||null==(t=n.user)?void 0:t.id)===(null==(r=E.currentUser)?void 0:r.id)||R)return function(){var t,r;(null==(t=n.user)?void 0:t.id)===(null==(r=E.currentUser)?void 0:r.id)?B&&e.onSlotPress(n):R&&e.onSlotPress(n)}}),[JSON.stringify(O),R,e.onSlotPress]);return a.useEffect((function(){var e,n;null!=P&&null!=(e=P.load)&&e.maxSlots&&(null==P||null==(n=P.load)?void 0:n.maxSlots)<5&&!I&&k(!0)}),[null==P||null==(n=P.load)?void 0:n.maxSlots]),a.createElement(Jn.a,{style:{marginVertical:16},elevation:3},a.createElement(Jn.a.Title,{title:"Load "+z,subtitle:O.name}),a.createElement(rn.a,{visible:T||D.loading,color:E.theme.colors.accent}),a.createElement(Jn.a.Content,{style:{marginVertical:8,height:I?void 0:300,overflow:"hidden"}},a.createElement(Wn,{style:{flexDirection:"row"}},a.createElement(dn.a,{horizontal:!0},a.createElement(at,{dropzoneId:Number(null==(t=E.currentDropzone)?void 0:t.id),value:null==P||null==(r=P.load)?void 0:r.plane,onSelect:A}),a.createElement(Yn,{dropzoneId:Number(null==(l=E.currentDropzone)?void 0:l.id),value:null==P||null==(i=P.load)||null==(o=i.gca)?void 0:o.user,onSelect:U}),a.createElement(et,{dropzoneId:Number(null==(s=E.currentDropzone)?void 0:s.id),value:null==P||null==(u=P.load)||null==(c=u.pilot)?void 0:c.user,onSelect:M}),a.createElement(Zn,{dropzoneId:Number(null==(d=E.currentDropzone)?void 0:d.id),value:null==P||null==(m=P.load)||null==(f=m.loadMaster)?void 0:f.user,slots:O.slots||[],onSelect:W}))),a.createElement(Gn.a,null,a.createElement(Gn.a.Header,{style:{width:"100%"}},a.createElement(Gn.a.Row,{style:{width:"100%"}},a.createElement(Gn.a.Title,null,"Name"),a.createElement(Gn.a.Title,{numeric:!0},"Exit weight"),a.createElement(Gn.a.Title,{numeric:!0},"Jump type"),a.createElement(Gn.a.Title,{numeric:!0},"Altitude"))),null==P||null==(p=P.load)||null==(v=p.slots)?void 0:v.map((function(e){var n,t,r;return a.createElement(Gn.a.Row,{onPress:L(e)},a.createElement(Gn.a.Cell,{onPress:L(e)},null==e||null==(n=e.user)?void 0:n.name),a.createElement(Gn.a.Cell,{numeric:!0,onPress:L(e)},null==e?void 0:e.exitWeight),a.createElement(Gn.a.Cell,{numeric:!0,onPress:L(e)},null==e||null==(t=e.jumpType)?void 0:t.name),a.createElement(Gn.a.Cell,{numeric:!0,onPress:L(e)},null==e||null==(r=e.ticketType)?void 0:r.altitude))})),Array.from({length:((null==O?void 0:O.maxSlots)||0)-((null==O||null==(b=O.slots)?void 0:b.length)||0)},(function(e,n){return n})).map((function(){return a.createElement(Gn.a.Row,null,a.createElement(Gn.a.Cell,null,"- Available -"),a.createElement(Gn.a.Cell,{numeric:!0},"-"),a.createElement(Gn.a.Cell,{numeric:!0},"-"),a.createElement(Gn.a.Cell,{numeric:!0},"-"))})))),a.createElement(Jn.a.Actions,{style:{justifyContent:"flex-end"}},null!=P&&null!=(y=P.load)&&y.maxSlots&&(null==P||null==(h=P.load)?void 0:h.maxSlots)<5?null:a.createElement(sn.a,{onPress:function(){return k(!I)}},I?"Show less":"Show more"),a.createElement(sn.a,{mode:"contained",onPress:function(){return w()},disabled:!C},"Manifest")))}var st;$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",marginVertical:8},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fab:{position:"absolute",margin:16,right:0,bottom:0}});function ut(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ct(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ut(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var dt=Object(en.a)(st||(st=Ze()(["\n  query QueryDropzone($dropzoneId: Int!, $earliestTimestamp: Int) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor,\n      secondaryColor,\n      planes {\n        id\n        name\n        registration\n      }\n      ticketTypes {\n        id\n        name\n      }\n\n      currentUser {\n        id\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n\n      loads(earliestTimestamp: $earliestTimestamp) {\n        edges {\n          node {\n            id\n            name\n            isOpen\n            maxSlots\n            isFull\n          }\n        }\n      }\n    }\n  }\n"])));function mt(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p=Ee((function(e){return e.global})),v=a.useState(!1),b=q()(v,2),y=b[0],h=b[1],E=he(),S=Object(g.useQuery)(dt,{variables:{dropzoneId:Number(null==(e=p.currentDropzone)?void 0:e.id),earliestTimestamp:Object(Xe.a)(new Date).getTime()/1e3},fetchPolicy:"no-cache"}),x=S.data,I=S.loading,k=S.refetch,O=Object(Ke.useNavigation)(),z=!(null==x||null==(n=x.dropzone)||null==(t=n.planes)||!t.length),w=!(null==x||null==(r=x.dropzone)||null==(l=r.ticketTypes)||!l.length),C=!(null==x||null==(i=x.dropzone)||!i.isPublic),j=z&&w;a.useEffect((function(){var e,n;null!=x&&null!=(e=x.dropzone)&&e.id&&(E(se.setDropzone(x.dropzone)),E(se.setUser(ct(ct({},null==p?void 0:p.currentUser),(null==x||null==(n=x.dropzone)?void 0:n.currentUser.user)||{}))))}),[JSON.stringify(null==x?void 0:x.dropzone)]),a.useEffect((function(){var e,n,t,r,a,l,i,o;null!=x&&null!=(e=x.dropzone)&&e.primaryColor&&(null==x||null==(n=x.dropzone)?void 0:n.primaryColor)!==(null==(t=p.theme)||null==(r=t.colors)?void 0:r.primary)&&E(se.setPrimaryColor(x.dropzone.primaryColor)),null!=x&&null!=(a=x.dropzone)&&a.secondaryColor&&(null==x||null==(l=x.dropzone)?void 0:l.secondaryColor)!==(null==(i=p.theme)||null==(o=i.colors)?void 0:o.accent)&&E(se.setPrimaryColor(x.dropzone.secondaryColor))}),[null==x||null==(o=x.dropzone)?void 0:o.primaryColor,null==x||null==(s=x.dropzone)?void 0:s.secondaryColor]);var P=On("createSlot"),T=On("createLoad");return a.createElement(a.Fragment,null,a.createElement(Fn,{open:y,onClose:function(){return h(!1)},onSuccess:function(){return h(!1)}}),a.createElement(rn.a,{visible:I,indeterminate:!0,color:p.theme.colors.accent}),a.createElement(Wn,{style:ft.container},!I&&(j?a.createElement(Wn,{style:{width:"100%",flex:1,height:nn.a.get("window").height}},((null==x||null==(u=x.dropzone)||null==(c=u.loads)||null==(d=c.edges)?void 0:d.length)||0)<1?a.createElement(Bn,{title:"No loads so far today",subtitle:"How's the weather?"}):a.createElement(tn.a,{style:{flex:1,height:nn.a.get("window").height},contentContainerStyle:{flexGrow:1},numColumns:1,data:(null==x||null==(m=x.dropzone)||null==(f=m.loads)?void 0:f.edges)||[],refreshing:I,onRefresh:k,renderItem:function(e){var n,t,r,l,i,o=e.item,s=e.index;return null!=o&&o.node?a.createElement(ot,{key:"load-"+o.node.id,load:o.node,canManifest:P&&(null==o||null==(n=o.node)?void 0:n.isOpen)&&!(null!=o&&null!=(t=o.node)&&t.isFull),loadNumber:((null==x||null==(r=x.dropzone)||null==(l=r.loads)||null==(i=l.edges)?void 0:i.length)||0)-s,onSlotPress:function(e){E(de.setOriginal(e)),E(de.setField(["load",o.node])),h(!0)},onManifest:function(){E(de.setField(["user",p.currentUser])),E(de.setField(["load",o.node])),h(!0)}}):null}})):a.createElement(Ln,{hasPlanes:z,hasTicketTypes:w,isPublic:C})),T&&j&&a.createElement(an.a,{style:ft.fab,small:!0,icon:"plus",onPress:function(){return O.navigate("CreateLoadScreen")},label:"New load"})))}var ft=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fab:{position:"absolute",margin:16,right:0,bottom:0}}),pt=t(372);function gt(e){return a.createElement(qn,Je()({},e,{style:[e.style,{fontFamily:"space-mono"}]}))}function vt(e){var n=e.path;return l.a.createElement(Wn,null,l.a.createElement(Wn,{style:yt.getStartedContainer},l.a.createElement(qn,{style:yt.getStartedText,lightColor:"rgba(0,0,0,0.8)",darkColor:"rgba(255,255,255,0.8)"},"Open up the code for this screen:"),l.a.createElement(Wn,{style:[yt.codeHighlightContainer,yt.homeScreenFilename],darkColor:"rgba(255,255,255,0.05)",lightColor:"rgba(0,0,0,0.05)"},l.a.createElement(gt,null,n)),l.a.createElement(qn,{style:yt.getStartedText,lightColor:"rgba(0,0,0,0.8)",darkColor:"rgba(255,255,255,0.8)"},"Change any of the text, save the file, and your app will automatically update.")),l.a.createElement(Wn,{style:yt.helpContainer},l.a.createElement(Be.a,{onPress:bt,style:yt.helpLink},l.a.createElement(qn,{style:yt.helpLinkText,lightColor:Ne.light.tint},"Tap here if your app doesn't automatically update after making changes"))))}function bt(){pt.a("https://docs.expo.io/get-started/create-a-new-app/#opening-the-app-on-your-phonetablet")}var yt=$e.a.create({container:{flex:1,backgroundColor:"#fff"},developmentModeText:{marginBottom:20,fontSize:14,lineHeight:19,textAlign:"center"},contentContainer:{paddingTop:30},welcomeContainer:{alignItems:"center",marginTop:10,marginBottom:20},welcomeImage:{width:100,height:80,resizeMode:"contain",marginTop:3,marginLeft:-10},getStartedContainer:{alignItems:"center",marginHorizontal:50},homeScreenFilename:{marginVertical:7},codeHighlightText:{color:"rgba(96,100,109, 0.8)"},codeHighlightContainer:{borderRadius:3,paddingHorizontal:4},getStartedText:{fontSize:17,lineHeight:24,textAlign:"center"},helpContainer:{marginTop:15,marginHorizontal:20,alignItems:"center"},helpLink:{paddingVertical:15},helpLinkText:{textAlign:"center"}});function ht(){return a.createElement(Wn,{style:xt.container},a.createElement(qn,{style:xt.title},"Tab One"),a.createElement(Wn,{style:xt.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(vt,{path:"/screens/LoadScreen.tsx"}))}var Et,St,xt=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),It=D.actions,kt=t(307),Ot=Object(en.a)(Et||(Et=Ze()(["\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function zt(e){var n,t,r,i=Object(a.useState)(!1),o=q()(i,2),s=o[0],u=o[1],c=Ee((function(e){return e.global})),d=Object(g.useQuery)(Ot,{variables:{dropzoneId:Number(null==(n=c.currentDropzone)?void 0:n.id)}}),m=d.data;d.loading,d.refetch;return l.a.createElement(bn.a,{onDismiss:function(){return u(!1)},visible:s,anchor:l.a.createElement(fn.a.Item,{onPress:function(){u(!0)},title:(null==(t=e.value)?void 0:t.name)||"No plane selected",description:e.required?null:"Optional",left:function(){return l.a.createElement(fn.a.Icon,{icon:"airplane"})}})},null==m||null==(r=m.planes)?void 0:r.map((function(n){return l.a.createElement(fn.a.Item,{onPress:function(){u(!1),e.onSelect(n)},title:n.name||"-",description:n.registration})})))}var wt=function(e,n){var t=n.getPayload;return function(n){var r=n.variables,l=n.onError,i=he(),o=Object(g.useQuery)(e,{variables:r}),s=o.data,u=o.loading,c=o.previousData,d=o.refetch,m=o.error,f=Object(a.useMemo)((function(){return t(s)}),[JSON.stringify(s)]);return Object(a.useEffect)((function(){JSON.stringify(c),JSON.stringify(s);null!=m&&m.message&&(!1!==n.showSnackbarErrors&&i(ce.showSnackbar({message:m.message,variant:"error"})),l(m.message))}),[n.onError,null==m?void 0:m.message]),{loading:u,data:f,refetch:d}}}(Object(en.a)(St||(St=Ze()(["\nquery QueryDropzoneUsers(\n  $dropzoneId: Int!\n  $permissions: [Permission!]\n) {\n  dropzone(id: $dropzoneId) {\n    id\n    name\n\n    dropzoneUsers(permissions: $permissions) {\n      edges {\n        node {\n          id\n          role {\n            id\n            name\n          }\n          user {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n}\n"]))),{getPayload:function(e){var n;return null==e||null==(n=e.dropzone)?void 0:n.dropzoneUsers}});function Ct(e){var n,t,r,i,o,s=Object(a.useState)(!1),u=q()(s,2),c=u[0],d=u[1],m=Ee((function(e){return e.global})),f=wt({variables:{dropzoneId:Number(null==(n=m.currentDropzone)?void 0:n.id),permissions:e.requiredPermissions}}),p=f.data;f.loading,f.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nn.a,null,e.label),l.a.createElement(bn.a,{onDismiss:function(){return d(!1)},visible:c,anchor:l.a.createElement(fn.a.Item,{onPress:function(){d(!0)},title:null!=(t=e.value)&&null!=(r=t.user)&&r.id?null==(i=e.value)?void 0:i.user.name:"No user selected",description:e.required?null:"Optional"})},null==p||null==(o=p.edges)?void 0:o.map((function(n){var t,r,a,i;return l.a.createElement(fn.a.Item,{onPress:function(){d(!1),e.onSelect(null==n?void 0:n.node)},title:(null==n||null==(t=n.node)||null==(r=t.user)?void 0:r.name)||"-",description:(null==n||null==(a=n.node)||null==(i=a.role)?void 0:i.name)||null})}))))}var jt=X.actions;function Pt(){var e,n,t,r,l,i=Ee((function(e){return e.loadForm})),o=he(),s=Ee((function(e){return e.global}));return a.createElement(dn.a,{style:$t.fields,contentContainerStyle:{paddingTop:200}},a.createElement(vn.a,{style:$t.field,mode:"outlined",label:"Name",error:!!i.fields.name.error,value:i.fields.name.value||"",onChangeText:function(e){return o(jt.setField(["name",e]))}}),a.createElement(mn.a,{type:i.fields.name.error?"error":"info"},i.fields.name.error||""),a.createElement(zt,{value:i.fields.plane.value,onSelect:function(e){o(jt.setField(["plane",e])),o(jt.setField(["maxSlots",e.maxSlots]))},dropzoneId:Number(null==(e=s.currentDropzone)?void 0:e.id)}),a.createElement(mn.a,{type:i.fields.plane.error?"error":"info"},i.fields.plane.error||""),a.createElement(vn.a,{style:$t.field,mode:"outlined",label:"Slots",error:!!i.fields.maxSlots.value,value:null==(n=i.fields.maxSlots)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return o(jt.setField(["maxSlots",Number(e)]))}}),a.createElement(mn.a,{type:i.fields.maxSlots.error?"error":"info"},i.fields.maxSlots.error||""),a.createElement(kt.a.Item,{label:"Allow public manifesting",status:i.fields.isOpen.value?"checked":"unchecked",onPress:function(){return o(jt.setField(["isOpen",!i.fields.isOpen.value]))}}),a.createElement(gn.a,null),a.createElement(Ct,{label:"GCA",onSelect:function(e){return o(jt.setField(["gca",e]))},dropzoneId:Number(null==(r=s.currentDropzone)?void 0:r.id),value:i.fields.gca.value||null,requiredPermissions:["actAsGCA"],required:!0}),a.createElement(mn.a,{type:i.fields.gca.error?"error":"info"},i.fields.gca.error||""),a.createElement(Ct,{label:"Pilot",onSelect:function(e){return o(jt.setField(["pilot",e]))},dropzoneId:Number(null==(l=s.currentDropzone)?void 0:l.id),value:i.fields.pilot.value||null,requiredPermissions:["actAsPilot"]}),a.createElement(mn.a,{type:i.fields.pilot.error?"error":"info"},i.fields.pilot.error||""))}var Tt,$t=$e.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),Ft=X.actions,Nt=(F.actions,Object(g.gql)(Tt||(Tt=Ze()(["\n  mutation CreateLoad(\n    $name: String,\n    $pilotId: Int,\n    $gcaId: Int,\n    $maxSlots: Int!,\n    $planeId: Int,\n    $isOpen: Boolean,\n  ){\n    createLoad(input: {\n      attributes: {\n        name: $name,\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        maxSlots: $maxSlots,\n        planeId: $planeId,\n        isOpen: $isOpen,\n      }\n    }) {\n      load {\n        id\n        name\n        pilot {\n          id\n          user {\n            id \n            name\n          }\n        }\n        gca {\n          id\n          user {\n            id \n            name\n          }\n        }\n        maxSlots\n        isOpen\n      }\n      fieldErrors {\n        field,\n        message\n      }\n      errors\n    }\n  }\n"]))));function Dt(){var e=Ee((function(e){return e})),n=e.loadForm,t=e.global,r=he(),l=Object(Ke.useNavigation)(),i=Object(g.useMutation)(Nt),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e,t,a=!1;return((null==(e=n.fields.name)||null==(t=e.value)?void 0:t.length)||0)<3&&(a=!0,r(Ft.setFieldError(["name","Name is too short"]))),n.fields.maxSlots.value<1&&(a=!0,r(Ft.setFieldError(["maxSlots","Please specify amount of allowed jumpers"]))),n.fields.plane.value||(a=!0,r(Ft.setFieldError(["plane","What plane is flying this load?"]))),n.fields.gca.value||(a=!0,r(Ft.setFieldError(["gca","You must have a GCA for this load"]))),!a}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p,g,v,b,y,h,E,S,x,I,k,O,z,w,C,j,P,T,$,F;return ze.a.async((function(N){for(;;)switch(N.prev=N.next){case 0:if(e=n.fields,a=e.name,i=e.gca,e.loadMaster,o=e.plane,u=e.maxSlots,d=e.pilot,m=e.isOpen,!c()){N.next=15;break}return N.prev=2,N.next=5,ze.a.awrap(s({variables:{dropzoneId:Number(null==(f=t.currentDropzone)?void 0:f.id),name:a.value,maxSlots:u.value,planeId:null!=(p=o.value)&&p.id?Number(null==(g=o.value)?void 0:g.id):null,pilotId:null!=(v=d.value)&&v.id?Number(null==(b=o.value)?void 0:b.id):null,gcaId:null!=(y=i.value)&&null!=(h=y.user)&&h.id?Number(null==(E=i.value)||null==(S=E.user)?void 0:S.id):null,isOpen:!!m.value}}));case 5:if(P=N.sent,null==(x=P.data)||null==(I=x.createLoad)||null==(k=I.fieldErrors)||k.map((function(e){var n=e.field,t=e.message;switch(n){case"name":return r(Ft.setFieldError(["name",t]));case"maxSlots":return r(Ft.setFieldError(["maxSlots",t]));case"plane":return r(Ft.setFieldError(["plane",t]));case"gca":return r(Ft.setFieldError(["gca",t]));case"is_open":return r(Ft.setFieldError(["isOpen",t]));case"pilot":return r(Ft.setFieldError(["pilot",t]))}})),null==P||null==(O=P.data)||null==(z=O.createLoad)||null==(w=z.errors)||!w.length){N.next=9;break}return N.abrupt("return",r(It.showSnackbar({message:P.data.createLoad.errors[0],variant:"error"})));case 9:null!=(C=P.data)&&null!=(j=C.createLoad)&&j.load&&(F=P.data.createLoad.load,r(It.showSnackbar({message:"Load "+F.name+" created",variant:"success"})),null!=(T=P.data)&&null!=($=T.createLoad)&&$.fieldErrors||l.goBack()),N.next=15;break;case 12:N.prev=12,N.t0=N.catch(2),r(It.showSnackbar({message:N.t0.message,variant:"error"}));case 15:case"end":return N.stop()}}),null,null,[[2,12]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Wn,{style:Ut.container},a.createElement(Pt,null),a.createElement(Wn,{style:Ut.fields},a.createElement(sn.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Mt,Ut=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),At=t(304),qt=t(34),Wt=Object(g.gql)(Mt||(Mt=Ze()(["\n  query QueryDropzonesCompact {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));var Bt=$e.a.create({warning:{flexDirection:"row",alignItems:"center",height:56,width:"100%",backgroundColor:"#ffbb33",justifyContent:"space-between",paddingHorizontal:32}}),Rt=function(e){var n,t,r,i,o,s,u,c=e.navigation,m=e.previous,f=e.scene,p=Object(a.useState)(!1),v=q()(p,2),b=v[0],y=v[1],h=Object(g.useQuery)(Wt).data,E=Ee((function(e){return e.global})),S=E.currentDropzone,x=(E.theme,he()),I=!(null==S||null==(n=S.currentUser)||null==(t=n.user)||null==(r=t.rigs)||!r.length),k=!(null==S||null==(i=S.currentUser)||null==(o=i.user)||!o.exitWeight),O=!I||!k;return l.a.createElement(l.a.Fragment,null,l.a.createElement(At.a.Header,null,m?l.a.createElement(At.a.BackAction,{onPress:c.goBack}):null,l.a.createElement(At.a.Content,{title:f.descriptor.options.title}),l.a.createElement(bn.a,{onDismiss:function(){return y(!1)},visible:b,anchor:l.a.createElement(qt.a,{onPress:function(){return y(!0)},style:{color:"white",marginRight:8}},null==S?void 0:S.name)},null==h||null==(s=h.dropzones)||null==(u=s.edges)?void 0:u.map((function(e){var n;return l.a.createElement(bn.a.Item,{title:null==e||null==(n=e.node)?void 0:n.name,onPress:function(){x(se.setDropzone(null==e?void 0:e.node)),y(!1)}})})))),O&&l.a.createElement(d.a,{style:Bt.warning},l.a.createElement(Dn.a,null,"You need to complete your profile"),l.a.createElement(sn.a,{color:"black",mode:"outlined",onPress:function(){return c.navigate("Profile")}},"Take me there")))},Lt=Object(qe.a)();function Ht(){var e=Ee((function(e){return e.global}));return a.createElement(Lt.Navigator,{screenOptions:{headerShown:!(!e.credentials||!e.currentDropzone),header:function(e){return a.createElement(Rt,e)},cardStyle:{flex:1}}},a.createElement(Lt.Screen,{name:"DropzoneScreen",component:mt,options:{title:"Manifest"}}),a.createElement(Lt.Screen,{name:"LoadScreen",component:ht,options:{title:"Loads"}}),a.createElement(Lt.Screen,{name:"CreateLoadScreen",component:Dt,options:{title:"Create load"}}))}function Vt(){return a.createElement(Wn,{style:Qt.container},a.createElement(qn,{style:Qt.title},"Tab One"),a.createElement(Wn,{style:Qt.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(vt,{path:"/screens/PackingScreen.tsx"}))}var Qt=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Jt=Object(qe.a)();function Gt(){return a.createElement(Jt.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},a.createElement(Jt.Screen,{name:"PackingScreen",component:Vt}))}var _t=t(168),Yt=t(364),Zt=t.n(Yt);t(464);function Kt(e){var n=a.useState(!1),t=q()(n,2),r=t[0],l=t[1];a.useCallback((function(){l(!1)}),[l]),a.useCallback((function(n){var t=n.date;l(!1),e.onChange(t.getTime()/1e3)}),[l,e.onChange]);return a.createElement(a.Fragment,null,a.createElement(bn.a,{onDismiss:function(){return l(!1)},visible:r,anchor:a.createElement(fn.a.Item,{onPress:function(){return l(!0)},title:e.label,description:e.timestamp?Object(_t.a)(1e3*e.timestamp,"yyyy/MM/dd"):"No date selected",left:function(){return a.createElement(fn.a.Icon,{icon:"calendar"})}})},a.createElement(Zt.a,{selectedDays:e.timestamp?[new Date(1e3*e.timestamp)]:[],onDayClick:function(n){e.onChange(n.getTime()/1e3),l(!1)}})))}var Xt=oe.actions;function er(){var e,n=Ee((function(e){return e.rigForm})),t=he(),r=a.useState(!1),l=q()(r,2);l[0],l[1];return a.createElement(dn.a,{style:rr.fields},a.createElement(vn.a,{style:rr.field,mode:"outlined",label:"Make",error:!!n.fields.make.error,value:n.fields.make.value||"",onChangeText:function(e){return t(Xt.setField(["make",e]))}}),a.createElement(mn.a,{type:n.fields.make.error?"error":"info"},n.fields.make.error||"e.g Javelin, Mirage"),a.createElement(vn.a,{style:rr.field,mode:"outlined",label:"Model",error:!!n.fields.model.error,value:n.fields.model.value||"",onChangeText:function(e){return t(Xt.setField(["model",e]))}}),a.createElement(mn.a,{type:n.fields.model.error?"error":"info"},n.fields.model.error||"e.g G4.1"),a.createElement(vn.a,{style:rr.field,mode:"outlined",label:"Serial",error:!!n.fields.serial.error,value:n.fields.serial.value||"",onChangeText:function(e){return t(Xt.setField(["serial",e]))}}),a.createElement(mn.a,{type:n.fields.serial.error?"error":"info"},n.fields.serial.error||""),a.createElement(vn.a,{style:rr.field,mode:"outlined",label:"Current canopy size",error:!!n.fields.canopySize.error,value:(null==(e=n.fields.canopySize.value)?void 0:e.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return t(Xt.setField(["canopySize",Number(e)]))}}),a.createElement(mn.a,{type:n.fields.canopySize.error?"error":"info"},n.fields.canopySize.error||"Size of canopy in container"),a.createElement(Kt,{timestamp:n.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return t(Xt.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}))}var nr,tr,rr=$e.a.create({fields:{flex:1},field:{marginBottom:8}});function ar(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function lr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ar(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ir=Object(g.gql)(nr||(nr=Ze()(["\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),or=Object(g.gql)(tr||(tr=Ze()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function sr(e){var n,t=he(),r=Ee((function(e){return e.rigForm})),i=Ee((function(e){return e.global})),o=Object(g.useMutation)(ir),s=q()(o,2),u=s[0],c=s[1],d=Object(g.useMutation)(or),m=q()(d,2),f=m[0],p=m[1],v=Object(a.useCallback)((function(){var e=!1;return r.fields.make.value||(e=!0,t(pe.setFieldError(["make","Required"]))),r.fields.model.value||(e=!0,t(pe.setFieldError(["model","Required"]))),r.fields.serial.value||(e=!0,t(pe.setFieldError(["serial","Required"]))),r.fields.canopySize.value||(e=!0,t(pe.setFieldError(["canopySize","Required"]))),r.fields.repackExpiresAt.value||(e=!0,t(pe.setFieldError(["repackExpiresAt","Required"]))),!e}),[JSON.stringify(r.fields)]),b=Object(a.useCallback)((function(){var n,a,l,i,o,s,c,d,m,p,g,b;return ze.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(v()){y.next=2;break}return y.abrupt("return");case 2:return y.prev=2,p=null!=(n=r.original)&&n.id?f:u,y.next=6,ze.a.awrap(p({variables:lr(lr({},null!=(a=r.original)&&a.id?{id:null==(l=r.original)?void 0:l.id}:{}),{},{make:r.fields.make.value,model:r.fields.model.value,serial:r.fields.serial.value,canopySize:r.fields.canopySize.value,repackExpiresAt:r.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(g=y.sent,null==(b=null!=(i=r.original)&&i.id?null==(o=g.data)?void 0:o.updateRig:null==(s=g.data)?void 0:s.createRig)||null==(c=b.fieldErrors)||c.map((function(e){var n=e.field,r=e.message;switch(n){case"make":return t(pe.setFieldError(["make",r]));case"model":return t(pe.setFieldError(["model",r]));case"serial":return t(pe.setFieldError(["serial",r]));case"canopySize":return t(pe.setFieldError(["canopySize",r]));case"repack_expires_at":return t(pe.setFieldError(["repackExpiresAt",r]))}})),null==b||null==(d=b.errors)||!d.length){y.next=11;break}return y.abrupt("return",t(ce.showSnackbar({message:null==b?void 0:b.errors[0],variant:"error"})));case 11:null!=b&&null!=(m=b.fieldErrors)&&m.length||e.onSuccess(),y.next=17;break;case 14:y.prev=14,y.t0=y.catch(2),t(ce.showSnackbar({message:y.t0.message,variant:"error"}));case 17:case"end":return y.stop()}}),null,null,[[2,14]],Promise)}),[JSON.stringify(r.fields),u,e.onSuccess]);return l.a.createElement(ln.a,null,l.a.createElement(on.a,{visible:!!e.open},l.a.createElement(rn.a,{indeterminate:!0,visible:c.loading||p.loading,color:i.theme.colors.accent}),l.a.createElement(on.a.Title,null,(null!=r&&null!=(n=r.original)&&n.id?"Edit":"New")+" rig"),l.a.createElement(on.a.Content,null,l.a.createElement(er,null)),l.a.createElement(on.a.Actions,{style:{justifyContent:"flex-end"}},l.a.createElement(sn.a,{onPress:function(){t(pe.reset()),e.onClose()}},"Cancel"),l.a.createElement(sn.a,{onPress:b},"Save"))))}function ur(e){var n=Object(a.useState)(nn.a.get("window").height),t=q()(n,2),r=t[0],i=t[1];return Object(a.useEffect)((function(){return nn.a.addEventListener("change",(function(e){var n=e.window;return i(n.height)})),function(){nn.a.removeEventListener("change",(function(e){var n=e.window;return i(n.height)}))}}),[]),l.a.createElement(dn.a,{style:[dr.container,{height:r},e.style],contentContainerStyle:[dr.content,e.contentContainerStyle]},e.children)}var cr,dr=$e.a.create({container:{flex:1},content:{flexGrow:1,alignItems:"center"}}),mr=Object(en.a)(cr||(cr=Ze()(["\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n      }\n    }\n  }\n"])));function fr(e){var n,t,r,i,o=Object(a.useState)(!1),s=q()(o,2),u=s[0],c=s[1],d=Ee((function(e){return e.global})),m=Object(g.useQuery)(mr,{variables:{dropzoneId:Number(null==(n=d.currentDropzone)?void 0:n.id)}}),f=m.data;m.loading,m.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(fn.a.Subheader,{style:{paddingLeft:0}},"Access level"),l.a.createElement(bn.a,{onDismiss:function(){return c(!1)},visible:!e.disabled&&u,anchor:l.a.createElement(fn.a.Item,{left:function(){return l.a.createElement(fn.a.Icon,{icon:"lock"})},onPress:e.disabled?void 0:function(){c(!0)},title:(null==(t=e.value)?void 0:t.name)||"Access level",description:e.required?null:"Optional"})},null==f||null==(r=f.dropzone)||null==(i=r.roles)?void 0:i.map((function(n){return l.a.createElement(fn.a.Item,{onPress:function(){c(!1),e.onSelect(n)},title:n.name||"-"})}))))}var pr=le.actions;function gr(){var e,n,t=Ee((function(e){return e})),r=t.dropzoneUserForm,l=(t.global,he()),i=On("updatePermissions");return a.createElement(dn.a,{style:br.fields},a.createElement(fr,{value:r.fields.role.value,onSelect:function(e){return l(pr.setField(["role",e]))},disabled:!i,required:!0}),a.createElement(mn.a,{type:r.fields.role.error?"error":"info"},r.fields.role.error),a.createElement(fn.a.Subheader,{style:{paddingLeft:0}},"Financial"),a.createElement(Kt,{timestamp:r.fields.expiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return l(pr.setField(["expiresAt",e]))},label:"Membership expires"}),a.createElement(mn.a,{type:r.fields.expiresAt.error?"error":"info"},r.fields.expiresAt.error),a.createElement(vn.a,{style:br.field,mode:"outlined",label:"Credits",error:!!r.fields.credits.error,value:(null==(e=r.fields.credits.value)?void 0:e.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return l(pr.setField(["credits",Number(e)]))}}),a.createElement(mn.a,{type:r.fields.credits.error?"error":"info"},r.fields.credits.error||"Current balance: $"+((null==(n=r.original)?void 0:n.credits)||0)))}var vr,br=$e.a.create({fields:{flex:1},field:{marginBottom:8}});function yr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function hr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?yr(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Er,Sr=Object(g.gql)(vr||(vr=Ze()(["\n  mutation UpdateDropzoneUser(\n    $credits: Float,\n    $userRoleId: Int,\n    $expiresAt: Int,\n    $dropzoneUserId: Int\n  ) {\n    updateDropzoneUser(\n      input: {\n        id: $dropzoneUserId,\n        attributes: {\n          credits: $credits,\n          userRoleId: $userRoleId,\n          expiresAt: $expiresAt,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function xr(e){var n,t=he(),r=Ee((function(e){return e.dropzoneUserForm})),i=Ee((function(e){return e.global})),o=Object(g.useMutation)(Sr),s=q()(o,2),u=s[0],c=s[1],d=Object(a.useCallback)((function(){var e=!1;return r.fields.credits.value||(e=!0,t(fe.setFieldError(["credits","Required"]))),r.fields.role.value||(e=!0,t(fe.setFieldError(["role","User must have an access level"]))),r.fields.expiresAt.value||(e=!0,t(fe.setFieldError(["expiresAt","Membership expiry must be set"]))),!e}),[JSON.stringify(r.fields)]),m=Object(a.useCallback)((function(){var n,a,l,i,o,s,c,m,f,p,g,v;return ze.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(d()){b.next=2;break}return b.abrupt("return");case 2:return b.prev=2,b.next=5,ze.a.awrap(u({variables:hr(hr({},null!=(n=r.original)&&n.id?{id:null==(a=r.original)?void 0:a.id}:{}),{},{credits:r.fields.credits.value,userRoleId:Number(null==(l=r.fields.role.value)?void 0:l.id),expiresAt:r.fields.expiresAt.value,dropzoneUserId:Number(null==(i=r.original)?void 0:i.id)})}));case 5:if(g=b.sent,null==(v=null!=(o=r.original)&&o.id?null==(s=g.data)?void 0:s.updateRig:null==(c=g.data)?void 0:c.createRig)||null==(m=v.fieldErrors)||m.map((function(e){var n=e.field,r=e.message;switch(n){case"user_role":return t(fe.setFieldError(["role",r]));case"credits":return t(fe.setFieldError(["credits",r]));case"expires_at":return t(fe.setFieldError(["expiresAt",r]))}})),null==v||null==(f=v.errors)||!f.length){b.next=10;break}return b.abrupt("return",t(ce.showSnackbar({message:null==v?void 0:v.errors[0],variant:"error"})));case 10:null!=v&&null!=(p=v.fieldErrors)&&p.length||e.onSuccess(),b.next=16;break;case 13:b.prev=13,b.t0=b.catch(2),t(ce.showSnackbar({message:b.t0.message,variant:"error"}));case 16:case"end":return b.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(r.fields),u,e.onSuccess]);return l.a.createElement(ln.a,null,l.a.createElement(on.a,{visible:!!e.open},l.a.createElement(rn.a,{indeterminate:!0,visible:c.loading,color:i.theme.colors.accent}),l.a.createElement(on.a.Title,null,(null!=r&&null!=(n=r.original)&&n.id?"Edit":"New")+" rig"),l.a.createElement(on.a.Content,null,l.a.createElement(gr,null)),l.a.createElement(on.a.Actions,{style:{justifyContent:"flex-end"}},l.a.createElement(sn.a,{onPress:function(){t(fe.reset()),e.onClose()}},"Cancel"),l.a.createElement(sn.a,{onPress:m},"Save"))))}var Ir=Object(en.a)(Er||(Er=Ze()(["\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function kr(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p,v,b,y,h,E,S,x,I,k,O,z,w,C,j,P,T,$,F,N,D,M,U,A,W,B=Ee((function(e){return e.global})),R=he(),L=Object(Ke.useNavigation)(),H=a.useState(!1),V=q()(H,2),Q=V[0],J=V[1],G=a.useState(!1),_=q()(G,2),Y=_[0],Z=_[1],K=Object(Ke.useRoute)(),X=(null==(e=B.currentUser)?void 0:e.id)===K.params.userId,ee=Object(g.useQuery)(Ir,{variables:{dropzoneId:Number(null==(n=B.currentDropzone)?void 0:n.id),dropzoneUserId:Number(K.params.userId)}}),ne=ee.data,te=ee.loading,re=a.useCallback((function(e){return function(){R(pe.setOriginal(e)),J(!0)}}),[R,J]);return a.createElement(a.Fragment,null,a.createElement(rn.a,{color:B.theme.colors.accent,indeterminate:!0,visible:te}),a.createElement(ur,{contentContainerStyle:Or.content},a.createElement(Jn.a,{elevation:3,style:Or.card},a.createElement(Jn.a.Title,{title:"Basic information"}),a.createElement(Jn.a.Content,null,a.createElement(fn.a.Item,{title:"Name",left:function(){return a.createElement(fn.a.Icon,{icon:"account-outline"})},description:(null==ne||null==(t=ne.dropzone)||null==(r=t.dropzoneUser)||null==(l=r.user)?void 0:l.name)||"-"}),a.createElement(fn.a.Item,{title:"Email",left:function(){return a.createElement(fn.a.Icon,{icon:"at"})},description:(null==ne||null==(i=ne.dropzone)||null==(o=i.dropzoneUser)||null==(s=o.user)?void 0:s.email)||"-"}),a.createElement(fn.a.Item,{title:"Phone",left:function(){return a.createElement(fn.a.Icon,{icon:"phone"})},description:(null==ne||null==(u=ne.dropzone)||null==(c=u.dropzoneUser)||null==(d=c.user)?void 0:d.phone)||"-"}),a.createElement(fn.a.Item,{title:"License",left:function(){return a.createElement(fn.a.Icon,{icon:"ticket-account"})},description:(null==ne||null==(m=ne.dropzone)||null==(f=m.dropzoneUser)||null==(p=f.user)||null==(v=p.license)?void 0:v.name)||"-"}),a.createElement(fn.a.Item,{title:"Exit weight",left:function(){return a.createElement(fn.a.Icon,{icon:"scale"})},description:(null==ne||null==(b=ne.dropzone)||null==(y=b.dropzoneUser)||null==(h=y.user)?void 0:h.exitWeight)||"-"})),X&&a.createElement(Jn.a.Actions,{style:{justifyContent:"flex-end"}},a.createElement(sn.a,{icon:"pencil",onPress:function(){var e;return L.navigate("UpdateUserScreen",{user:null==(e=B.currentDropzone)?void 0:e.currentUser})}},"Edit"))),a.createElement(Jn.a,{elevation:3,style:Or.card},a.createElement(Jn.a.Title,{title:null==(E=B.currentDropzone)?void 0:E.name}),a.createElement(Jn.a.Content,null,a.createElement(fn.a.Item,{title:"Role",description:null==ne||null==(S=ne.dropzone)||null==(x=S.dropzoneUser)||null==(I=x.role)?void 0:I.name,left:function(){return a.createElement(fn.a.Icon,{icon:"lock"})}}),a.createElement(fn.a.Item,{title:"Credits",description:null==ne||null==(k=ne.dropzone)||null==(O=k.dropzoneUser)?void 0:O.credits,left:function(){return a.createElement(fn.a.Icon,{icon:"cash-multiple"})}}),a.createElement(fn.a.Item,{title:"Membership",description:null!=ne&&null!=(z=ne.dropzone)&&null!=(w=z.dropzoneUser)&&w.expiresAt?Object(_t.a)(1e3*((null==ne||null==(C=ne.dropzone)||null==(j=C.dropzoneUser)?void 0:j.expiresAt)||0),"yyyy/MM/dd"):a.createElement("span",null,"Not a member"),left:function(){var e,n,t,r;return a.createElement(fn.a.Icon,{icon:"card-account-details",color:null!=ne&&null!=(e=ne.dropzone)&&null!=(n=e.dropzoneUser)&&n.expiresAt&&1e3*(null==ne||null==(t=ne.dropzone)||null==(r=t.dropzoneUser)?void 0:r.expiresAt)>(new Date).getTime()?void 0:"#B00020"})}})),a.createElement(Jn.a.Actions,{style:{justifyContent:"flex-end"}},a.createElement(sn.a,{icon:"pencil",onPress:function(){var e;R(fe.setOriginal(null==ne||null==(e=ne.dropzone)?void 0:e.dropzoneUser)),Z(!0)}},"Edit"))),a.createElement(Jn.a,{elevation:3,style:Or.card},a.createElement(Jn.a.Title,{title:"Rigs"}),a.createElement(Jn.a.Content,null,a.createElement(Gn.a,null,a.createElement(Gn.a.Header,null,a.createElement(Gn.a.Row,null,a.createElement(Gn.a.Title,null,"Make"),a.createElement(Gn.a.Title,null,"Model"),a.createElement(Gn.a.Title,null,"Serial"),a.createElement(Gn.a.Title,{numeric:!0},"Repack expires"),a.createElement(Gn.a.Title,{numeric:!0},"Canopy size"))),null==ne||null==(P=ne.dropzone)||null==(T=P.dropzoneUser)||null==($=T.user)||null==(F=$.rigs)?void 0:F.map((function(e){return a.createElement(Gn.a.Row,{onPress:re(e)},a.createElement(Gn.a.Cell,{onPress:re(e)},null==e?void 0:e.make),a.createElement(Gn.a.Cell,{onPress:re(e)},null==e?void 0:e.model),a.createElement(Gn.a.Cell,{onPress:re(e)},null==e?void 0:e.serial),a.createElement(Gn.a.Cell,{onPress:re(e)},null!=e&&e.repackExpiresAt?Object(_t.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),a.createElement(Gn.a.Cell,{onPress:re(e)},(null==e?void 0:e.canopySize)+"sqft"))})))),X&&a.createElement(Jn.a.Actions,{style:{justifyContent:"flex-end"}},a.createElement(sn.a,{onPress:function(){return J(!0)}},"Add rig"))),(null==ne||null==(N=ne.dropzone)||null==(D=N.dropzoneUser)?void 0:D.id)===(null==(M=B.currentUser)?void 0:M.id)&&a.createElement(sn.a,{color:"#B00020",onPress:function(){return R(se.logout())}},"Log out")),a.createElement(sr,{onClose:function(){return J(!1)},onSuccess:function(){return J(!1)},userId:Number(null==ne||null==(U=ne.dropzone)||null==(A=U.dropzoneUser)||null==(W=A.user)?void 0:W.id),open:Q}),a.createElement(xr,{onClose:function(){return Z(!1)},onSuccess:function(){return Z(!1)},open:Y}))}var Or=$e.a.create({container:{flex:1},content:{alignItems:"center",flexGrow:1,paddingBottom:56},card:{marginVertical:8,width:"80%"},fields:{width:"80%",display:"flex"},spacer:{width:"100%",height:32},title:{fontSize:20,fontWeight:"bold"},fab:{position:"absolute",margin:16,right:0,bottom:0},separator:{marginVertical:30,height:1,width:"80%"}});function zr(){return a.createElement(Wn,{style:jr.container},a.createElement(qn,{style:jr.title},"Tab One"),a.createElement(Wn,{style:jr.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(vt,{path:"/screens/RigScreen.tsx"}))}var wr,Cr,jr=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Pr=Object(en.a)(wr||(wr=Ze()(["\n  query Licenses($federationId: Int) {\n    licenses(federationId: $federationId) {\n      id\n      name\n\n      federation {\n        id\n        name\n      }\n\n    }\n  }\n"])));function Tr(e){var n,t,r=Object(a.useState)(!1),i=q()(r,2),o=i[0],s=i[1],u=(Ee((function(e){return e.global})),Object(g.useQuery)(Pr,{variables:{federationId:e.federationId}})),c=u.data;u.loading,u.refetch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(fn.a.Subheader,null,"License"),l.a.createElement(bn.a,{onDismiss:function(){return s(!1)},visible:o,anchor:l.a.createElement(fn.a.Item,{onPress:function(){s(!0)},title:(null==(n=e.value)?void 0:n.name)||"Please select a license",description:e.required?null:"Optional"})},null==c||null==(t=c.licenses)?void 0:t.map((function(n){return l.a.createElement(fn.a.Item,{onPress:function(){s(!1),e.onSelect(n)},title:n.name||"-"})}))))}var $r=Object(en.a)(Cr||(Cr=Ze()(["\n  query Federations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function Fr(e){var n,t,r=Object(a.useState)(!1),i=q()(r,2),o=i[0],s=i[1],u=Object(g.useQuery)($r).data;return Object(a.useEffect)((function(){var n;1!==(null==u||null==(n=u.federations)?void 0:n.length)||e.value||e.onSelect(u.federations[0])}),[JSON.stringify(null==u?void 0:u.federations)]),l.a.createElement(l.a.Fragment,null,l.a.createElement(fn.a.Subheader,null,"Federation"),l.a.createElement(bn.a,{onDismiss:function(){return s(!1)},visible:o,anchor:l.a.createElement(fn.a.Item,{onPress:function(){s(!0)},title:(null==(n=e.value)?void 0:n.name)||"Please select federation",description:e.required?null:"Optional"})},null==u||null==(t=u.federations)?void 0:t.map((function(n){return l.a.createElement(fn.a.Item,{onPress:function(){s(!1),e.onSelect(n)},title:n.name||"-"})}))))}var Nr=re.actions;function Dr(){var e,n,t,r,l,i,o,s,u,c,d,m,f,p,g,v,b,y,h,E,S,x,I,k,O,z,w,C=Ee((function(e){return e.userForm})),j=he(),P=Ee((function(e){return e.global}));a.useEffect((function(){var e;C.original&&(C.fields.exitWeight.value||j(Nr.setField(["exitWeight",C.original.exitWeight||"60"])),!C.fields.rigs.value&&null!=(e=C.original)&&e.id&&j(Nr.setField(["rigs",C.original.rigs])))}),[null==(e=C.original)?void 0:e.id]);null==C||null==(n=C.original)||n.id,null==C||null==(t=C.original)||t.id,null==(r=P.currentUser)||r.id;return a.createElement(dn.a,{style:Ur.fields,contentContainerStyle:{flexGrow:1}},a.createElement(vn.a,{style:Ur.field,mode:"outlined",label:"Name",error:!!C.fields.name.error,value:(null==(l=C.fields.name)||null==(i=l.value)?void 0:i.toString())||"",onChangeText:function(e){return j(Nr.setField(["name",e]))}}),a.createElement(mn.a,{type:C.fields.name.error?"error":"info"},C.fields.name.error||" "),a.createElement(vn.a,{style:Ur.field,mode:"outlined",label:"Email",error:!!C.fields.email.error,value:(null==(o=C.fields.email)||null==(s=o.value)?void 0:s.toString())||"",onChangeText:function(e){return j(Nr.setField(["email",e]))}}),a.createElement(mn.a,{type:C.fields.email.error?"error":"info"},C.fields.email.error||" "),a.createElement(vn.a,{style:Ur.field,mode:"outlined",label:"Phone",error:!!C.fields.phone.error,value:(null==(u=C.fields.phone)||null==(c=u.value)?void 0:c.toString())||"",onChangeText:function(e){return j(Nr.setField(["phone",e]))}}),a.createElement(mn.a,{type:C.fields.phone.error?"error":"info"},C.fields.phone.error||""),a.createElement(vn.a,{style:Ur.field,mode:"outlined",label:"Exit weight",error:!!C.fields.exitWeight.error,value:(null==(d=C.fields.exitWeight)||null==(m=d.value)?void 0:m.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(vn.a.Affix,{text:"kg"})},onChangeText:function(e){return j(Nr.setField(["exitWeight",e]))}}),a.createElement(mn.a,{type:C.fields.exitWeight.error?"error":"info"},C.fields.exitWeight.error||""),a.createElement(gn.a,null),a.createElement(Fr,{value:(null==C||null==(f=C.fields)||null==(p=f.license)||null==(g=p.value)?void 0:g.federation)||C.federation.value,onSelect:function(e){return j(Nr.setFederation(e))},required:!0}),a.createElement(mn.a,{type:C.federation.error?"error":"info"},C.federation.error||""),((null==C||null==(v=C.fields)||null==(b=v.license)||null==(y=b.value)||null==(h=y.federation)?void 0:h.id)||(null==C||null==(E=C.federation)||null==(S=E.value)?void 0:S.id))&&a.createElement(a.Fragment,null,a.createElement(Tr,{value:C.fields.license.value,federationId:Number((null==C||null==(x=C.fields)||null==(I=x.license)||null==(k=I.value)||null==(O=k.federation)?void 0:O.id)||(null==(z=C.federation)||null==(w=z.value)?void 0:w.id)),onSelect:function(e){return j(Nr.setField(["license",e]))},required:!0}),a.createElement(mn.a,{type:C.fields.license.error?"error":"info"},C.fields.license.error||"")))}var Mr,Ur=$e.a.create({fields:{flex:1,width:"70%",paddingTop:32},field:{marginBottom:8},ticketAddons:{marginBottom:8}}),Ar=re.actions,qr=(F.actions,Object(g.gql)(Mr||(Mr=Ze()(["\n  mutation UpdateUser(\n    $id: Int,\n    $name: String,\n    $phone: String,\n    $email: String,\n    $licenseId: Int,\n    $exitWeight: Float,\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        phone: $phone,\n        email: $email,\n        licenseId: $licenseId,\n        exitWeight: $exitWeight,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))));function Wr(){var e=Ee((function(e){return e})),n=e.userForm,t=(e.global,he()),r=Object(Ke.useNavigation)(),l=Object(Ke.useRoute)().params.user;a.useEffect((function(){t(Ar.setOriginal(l))}),[null==l?void 0:l.id]);var i=Object(g.useMutation)(qr),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e,r,a,l,i,o,s,u,c,d=!1,m=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=n.fields.name)||null==(r=e.value)?void 0:r.length)||0)<3&&(d=!0,t(Ar.setFieldError(["name","Name is too short"]))),((null==(a=n.fields.email)||null==(l=a.value)?void 0:l.length)||0)<3&&(d=!0,t(Ar.setFieldError(["email","Email is too short"]))),((null==(i=n.fields.phone)||null==(o=i.value)?void 0:o.length)||0)<3&&(d=!0,t(Ar.setFieldError(["phone","Phone number is too short"]))),m.test((null==(s=n.fields)||null==(u=s.email)?void 0:u.value)||"")||(d=!0,t(Ar.setFieldError(["email","Please enter a valid email"]))),((null==(c=n.fields.exitWeight)?void 0:c.value)||0)<30&&(d=!0,t(Ar.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[JSON.stringify(n.fields),t]),d=a.useCallback((function(){var e,a,l,i,o,u,d,m,f,p,g,v,b;return ze.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(e=n.fields,a=e.name,l=e.license,i=e.phone,o=e.email,u=e.exitWeight,!c()){y.next=12;break}return y.prev=2,y.next=5,ze.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,licenseId:null!=(d=l.value)&&d.id?Number(l.value.id):null,phone:i.value,exitWeight:parseFloat(u.value),email:o.value}}));case 5:p=y.sent,null!=(m=p.data)&&null!=(f=m.updateUser)&&f.user&&(g=p.data.updateUser,v=g.fieldErrors,b=g.errors,v?null==v||v.map((function(e){var n=e.field,r=e.message;switch(n){case"name":return t(me.setFieldError(["name",r]));case"exit_weight":return t(me.setFieldError(["exitWeight",r]));case"license_id":return t(me.setFieldError(["license",r]));case"phone":return t(me.setFieldError(["phone",r]));case"email":return t(me.setFieldError(["email",r]))}})):null!=b&&b.length?b.map((function(e){return t(It.showSnackbar({message:e,variant:"error"}))})):(t(It.showSnackbar({message:"Profile has been updated",variant:"success"})),r.goBack(),t(me.reset()))),y.next=12;break;case 9:y.prev=9,y.t0=y.catch(2),t(It.showSnackbar({message:y.t0.message,variant:"error"}));case 12:case"end":return y.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return a.createElement(Wn,{style:Br.container},a.createElement(Dr,null),a.createElement(Wn,{style:Br.fields},a.createElement(sn.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Br=$e.a.create({container:{flex:1,alignItems:"center",paddingTop:56},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Rr=Object(qe.a)();function Lr(){var e,n=Ee((function(e){return e.global})).currentDropzone;return a.createElement(Rr.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(Rt,e)},cardStyle:{flex:1}}},a.createElement(Rr.Screen,{name:"ProfileScreen",component:kr,options:{title:"Profile"},initialParams:{userId:null==n||null==(e=n.currentUser)?void 0:e.id}}),a.createElement(Rr.Screen,{name:"UpdateUserScreen",component:Wr,options:{title:"Edit profile"}}),a.createElement(Rr.Screen,{name:"RigScreen",component:zr,options:{title:"Rig"}}))}function Hr(){var e=Object(Ke.useNavigation)(),n=Ee((function(e){return e.global}));return a.createElement(Wn,{style:Vr.container},a.createElement(fn.a.Section,{title:"Dropzone"},a.createElement(fn.a.Item,{title:"Basic settings",onPress:function(){return e.navigate("UpdateDropzoneScreen",{dropzone:n.currentDropzone})},left:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"information-outline"})}}),a.createElement(fn.a.Item,{title:"Planes",onPress:function(){return e.navigate("PlanesScreen")},left:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"airplane"})}}),a.createElement(fn.a.Item,{title:"Rigs",left:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"parachute"})}}),a.createElement(fn.a.Item,{title:"Users",left:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"account-cog"})}})),a.createElement(fn.a.Section,{title:"Tickets"},a.createElement(fn.a.Item,{title:"Ticket types",onPress:function(){return e.navigate("TicketTypesScreen")},left:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"ticket"})}}),a.createElement(fn.a.Item,{title:"Ticket add-ons",onPress:function(){return e.navigate("ExtrasScreen")},left:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"plus"})}})))}var Vr=$e.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function Qr(){return a.createElement(Wn,{style:_r.container},a.createElement(qn,{style:_r.title},"Tab One"),a.createElement(Wn,{style:_r.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(vt,{path:"/screens/DropzoneSettingsScreen.tsx"}))}var Jr,Gr,_r=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Yr=t(127),Zr=t(295),Kr=Object(en.a)(Jr||(Jr=Ze()(["\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      altitude\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n"]))),Xr=Object(en.a)(Gr||(Gr=Ze()(["\n  mutation UpdateTicketTypePublic(\n    $id: Int!,\n    $allowManifestingSelf: Boolean\n  ){\n    updateTicketType(input: {\n      id: $id\n      attributes: {\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n"])));function ea(){var e,n,t=Ee((function(e){return e.global})),r=Object(g.useQuery)(Kr,{variables:{dropzoneId:Number(null==(e=t.currentDropzone)?void 0:e.id)}}),l=r.data,i=r.loading,o=r.refetch,s=Object(Ke.useNavigation)(),u=Object(Ke.useRoute)(),c=Object(g.useMutation)(Xr),d=q()(c,2),m=d[0];d[1];return a.useEffect((function(){"TicketTypesScreen"===u.name&&o()}),[u.name]),a.createElement(tn.b,{style:na.container,contentContainerStyle:[na.content,{backgroundColor:"white"}],refreshControl:a.createElement(Yr.a,{refreshing:i,onRefresh:o})},a.createElement(rn.a,{visible:i,color:t.theme.colors.accent}),a.createElement(Gn.a,null,a.createElement(Gn.a.Header,null,a.createElement(Gn.a.Title,null,"Name"),a.createElement(Gn.a.Title,{numeric:!0},"Cost"),a.createElement(Gn.a.Title,{numeric:!0},"Altitude"),a.createElement(Gn.a.Title,{numeric:!0},"Public")),null==l||null==(n=l.ticketTypes)?void 0:n.map((function(e){return a.createElement(Gn.a.Row,{onPress:function(){return s.navigate("UpdateTicketTypeScreen",{ticketType:e})}},a.createElement(Gn.a.Cell,null,e.name),a.createElement(Gn.a.Cell,{numeric:!0},"$",e.cost),a.createElement(Gn.a.Cell,{numeric:!0},e.altitude),a.createElement(Gn.a.Cell,{numeric:!0},a.createElement(Zr.a,{onValueChange:function(){m({variables:{id:Number(e.id),allowManifestingSelf:!e.allowManifestingSelf}})},value:!!e.allowManifestingSelf})))}))),a.createElement(an.a,{style:na.fab,small:!0,icon:"plus",onPress:function(){return s.navigate("CreateTicketTypeScreen")},label:"New ticket type"}))}var na=$e.a.create({container:{flex:1,display:"flex"},content:{flexGrow:1},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),ta=J.actions;function ra(){var e,n,t,r,l=Ee((function(e){return e.planeForm})),i=he();return a.createElement(dn.a,{style:la.fields,contentContainerStyle:{paddingTop:200}},a.createElement(vn.a,{style:la.field,mode:"outlined",label:"Name",error:!!l.fields.name.error,value:l.fields.name.value,onChangeText:function(e){return i(ta.setField(["name",e]))}}),a.createElement(mn.a,{type:l.fields.name.error?"error":"info"},l.fields.name.error||""),a.createElement(vn.a,{style:la.field,mode:"outlined",label:"Registration",error:!!l.fields.registration.error,value:l.fields.registration.value,onChangeText:function(e){return i(ta.setField(["registration",e]))}}),a.createElement(mn.a,{type:l.fields.registration.error?"error":"info"},l.fields.registration.error||""),a.createElement(vn.a,{style:la.field,mode:"outlined",label:"hours",error:!!l.fields.hours.error,value:null==(e=l.fields.hours)||null==(n=e.value)?void 0:n.toString(),placeholder:"Optional",onChangeText:function(e){return i(ta.setField(["hours",Number(e)]))}}),a.createElement(mn.a,{type:l.fields.hours.error?"error":"info"},l.fields.hours.error||""),a.createElement(vn.a,{style:la.field,mode:"outlined",label:"Min slots",error:!!l.fields.minSlots.error,value:null==(t=l.fields.minSlots.value)?void 0:t.toString(),keyboardType:"number-pad",onChangeText:function(e){return i(ta.setField(["minSlots",Number(e)]))}}),a.createElement(mn.a,{type:l.fields.minSlots.error?"error":"info"},l.fields.minSlots.error||"Minimum tickets required to send it"),a.createElement(vn.a,{style:la.field,mode:"outlined",label:"Max slots",error:!!l.fields.maxSlots.error,value:null==(r=l.fields.maxSlots)?void 0:r.value.toString(),keyboardType:"number-pad",onChangeText:function(e){return i(ta.setField(["maxSlots",Number(e)]))}}),a.createElement(mn.a,{type:l.fields.maxSlots.error?"error":"info"},l.fields.maxSlots.error||"Maximum amount of jumpers who can be manifested on one load"))}var aa,la=$e.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),ia=J.actions,oa=(F.actions,Object(g.gql)(aa||(aa=Ze()(["\n  mutation CreatePlane(\n    $name: String!,\n    $registration: String!,\n    $dropzoneId: Int!\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    createPlane(input: {\n      attributes: {\n        name: $name,\n        registration: $registration,\n        dropzoneId: $dropzoneId\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))));function sa(){var e=Ee((function(e){return e})),n=e.planeForm,t=e.global,r=he(),l=Object(Ke.useNavigation)(),i=Object(g.useMutation)(oa),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(ia.setFieldError(["name","Name is too short"]))),n.fields.registration.value.length<3&&(e=!0,r(ia.setFieldError(["registration","Registration is too short"]))),n.fields.maxSlots.value||(e=!0,r(ia.setFieldError(["maxSlots","Max slots must be specified"]))),!e}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p,g,v,b;return ze.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(e=n.fields,a=e.name,i=e.registration,o=e.maxSlots,u=e.minSlots,d=e.hours,m=e.nextMaintenanceHours,!c()){y.next=12;break}return y.prev=2,y.next=5,ze.a.awrap(s({variables:{dropzoneId:Number(null==(f=t.currentDropzone)?void 0:f.id),name:a.value,registration:i.value,minSlots:u.value,maxSlots:o.value,hours:d.value,nextMaintenanceHours:m.value}}));case 5:v=y.sent,null!=(p=v.data)&&null!=(g=p.createPlane)&&g.plane&&(b=v.data.createPlane.plane,r(It.showSnackbar({message:"Added plane "+b.name,variant:"success"})),l.goBack()),y.next=12;break;case 9:y.prev=9,y.t0=y.catch(2),r(It.showSnackbar({message:y.t0.message,variant:"error"}));case 12:case"end":return y.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Wn,{style:ca.container},a.createElement(ra,null),a.createElement(Wn,{style:ca.fields},a.createElement(sn.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var ua,ca=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),da=J.actions,ma=(F.actions,Object(g.gql)(ua||(ua=Ze()(["\n  mutation UpdatePlane(\n    $id: Int!,\n    $name: String!,\n    $registration: String!,\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ){\n    updatePlane(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        registration: $registration,\n        minSlots: $minSlots\n        maxSlots: $maxSlots\n        hours: $hours\n        nextMaintenanceHours: $nextMaintenanceHours\n      }\n    }) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))));function fa(){var e=Ee((function(e){return e})),n=e.planeForm,t=(e.global,he()),r=Object(Ke.useNavigation)(),l=Object(Ke.useRoute)().params.plane;a.useEffect((function(){t(da.setOriginal(l))}),[null==l?void 0:l.id]);var i=Object(g.useMutation)(ma),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,t(da.setFieldError(["name","Name is too short"]))),n.fields.registration.value.length<3&&(e=!0,t(da.setFieldError(["registration","Registration is too short"]))),n.fields.maxSlots.value||(e=!0,t(da.setFieldError(["maxSlots","Max slots must be specified"]))),!e}),[JSON.stringify(n.fields),t]),d=a.useCallback((function(){var e,a,l,i,o,u,d,m,f,p,g;return ze.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(e=n.fields,a=e.name,l=e.registration,i=e.maxSlots,o=e.minSlots,u=e.hours,d=e.nextMaintenanceHours,!c()){v.next=12;break}return v.prev=2,v.next=5,ze.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,registration:l.value,minSlots:o.value,maxSlots:i.value,hours:u.value,nextMaintenanceHours:d.value}}));case 5:p=v.sent,null!=(m=p.data)&&null!=(f=m.updatePlane)&&f.plane&&(g=p.data.updatePlane.plane,t(It.showSnackbar({message:"Saved plane "+g.name,variant:"success"})),r.goBack()),v.next=12;break;case 9:v.prev=9,v.t0=v.catch(2),t(It.showSnackbar({message:v.t0.message,variant:"error"}));case 12:case"end":return v.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return a.createElement(Wn,{style:ga.container},a.createElement(ra,null),a.createElement(Wn,{style:ga.fields},a.createElement(sn.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var pa,ga=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),va=t(373),ba=t(371),ya=t(365),ha=t.n(ya),Ea=V.actions,Sa=Object(g.gql)(pa||(pa=Ze()(["\n  query QueryFederations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function xa(){var e,n,t,r,i=Ee((function(e){return e})),o=i.dropzoneForm,s=i.global,u=he(),c=Object(g.useQuery)(Sa),d=c.data,m=(c.loading,Object(a.useState)(!1)),f=q()(m,2),p=f[0],v=f[1],b=Object(a.useState)(null),y=q()(b,2),h=y[0],E=y[1];Object(a.useEffect)((function(){var e,n;null==d||null==(e=d.federations)||!e.length||null!=(n=o.fields.federation)&&n.value||u(Ea.setField(["federation",d.federations[0]]))}),[JSON.stringify(null==d?void 0:d.federations)]);var S=Object(a.useCallback)((function(){var e;return ze.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ze.a.awrap(Object(va.a)({multiple:!1,type:"image"}));case 3:e=n.sent,u(Ea.setField(["banner",e.uri])),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}),[u]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ln.a,null,l.a.createElement(on.a,{visible:!!h,onDismiss:function(){return E(null)}},l.a.createElement(on.a.Title,null,"Pick a ","primary"===h?"primary color":"secondary color"),l.a.createElement(on.a.Content,{style:{padding:20,height:400}},l.a.createElement(ba.a,{onColorSelected:function(e){u("primary"===h?Ea.setField(["primaryColor",e]):Ea.setField(["secondaryColor",e]))},style:{flex:1},sliderComponent:ha.a,defaultColor:("primary"===h?o.fields.primaryColor.value:o.fields.secondaryColor.value)||void 0,hideSliders:!0})),l.a.createElement(on.a.Actions,null,l.a.createElement(sn.a,{onPress:function(){return E(null)}},"Cancel"),l.a.createElement(sn.a,{disabled:"primary"===h&&!o.fields.primaryColor.value||"secondary"===h&&!o.fields.secondaryColor.value,onPress:function(){console.log({current:s.theme.colors.accent,next:o.fields.secondaryColor.value}),u("primary"===h?se.setPrimaryColor(o.fields.primaryColor.value):se.setAccentColor(o.fields.secondaryColor.value)),E(null)}},"Save")))),l.a.createElement(Jn.a,{style:{width:"100%",maxHeight:300}},l.a.createElement(Jn.a.Cover,{source:{uri:o.fields.banner.value||"https://picsum.photos/700"},resizeMode:"cover"}),l.a.createElement(Jn.a.Actions,{style:{justifyContent:"flex-end"}},l.a.createElement(sn.a,{onPress:S},"Upload"))),l.a.createElement(Wn,{style:ka.fields},l.a.createElement(fn.a.Subheader,{style:ka.subheader},"Dropzone"),l.a.createElement(vn.a,{style:ka.field,mode:"outlined",label:"Name",error:!!o.fields.name.error,value:o.fields.name.value||"",onChangeText:function(e){return u(Ea.setField(["name",e]))}}),l.a.createElement(mn.a,{type:"error"},o.fields.name.error||""),l.a.createElement(fn.a.Subheader,{style:ka.subheader},"Federation"),l.a.createElement(bn.a,{onDismiss:function(){return v(!1)},visible:p,anchor:l.a.createElement(bn.a.Item,{onPress:function(){return v(!0)},title:(null==(e=o.fields)||null==(n=e.federation)||null==(t=n.value)?void 0:t.name)||"",icon:"parachute"})},null==d||null==(r=d.federations)?void 0:r.map((function(e){return l.a.createElement(bn.a.Item,{title:e.name,onPress:function(){u(Ea.setField(["federation",e])),v(!1)}})}))),l.a.createElement(fn.a.Subheader,{style:ka.subheader},"Branding"),l.a.createElement(fn.a.Item,{title:"Primary color",onPress:function(){return E("primary")},left:function(){return l.a.createElement(Wn,{style:{width:24,height:24,backgroundColor:s.theme.colors.primary}})}}),l.a.createElement(fn.a.Item,{title:"Secondary color",onPress:function(){return E("secondary")},left:function(){return l.a.createElement(Wn,{style:{width:24,height:24,backgroundColor:s.theme.colors.accent}})}}),l.a.createElement(fn.a.Item,{title:"Use credit system",description:"Users will be charged credits when a load is marked as landed and can't manifest with insufficient funds.",onPress:function(){return u(Ea.setField(["isCreditSystemEnabled",!o.fields.isCreditSystemEnabled.value]))},left:function(){return l.a.createElement(kt.a,{onPress:function(){return u(Ea.setField(["isCreditSystemEnabled",!o.fields.isCreditSystemEnabled.value]))},status:o.fields.isCreditSystemEnabled.value?"checked":"unchecked"})}}),l.a.createElement(fn.a.Item,{title:"Public",description:"Your dropzone will not be available in the app if this is disabled",onPress:function(){return u(Ea.setField(["isPublic",!o.fields.isPublic.value]))},left:function(){return l.a.createElement(kt.a,{onPress:function(){return u(Ea.setField(["isPublic",!o.fields.isPublic.value]))},status:o.fields.isPublic.value?"checked":"unchecked"})}})))}var Ia,ka=$e.a.create({fields:{flexGrow:1,display:"flex",width:"70%"},field:{marginBottom:8},subheader:{paddingLeft:0}}),Oa=V.actions,za=F.actions,wa=Object(g.gql)(Ia||(Ia=Ze()(["\n  mutation UpdateDropzone(\n    $id: Int!,\n    $name: String!,\n    $banner: String,\n    $federationId: Int!\n    $primaryColor: String\n    $secondaryColor: String\n  ){\n    updateDropzone(input: {\n    id: $id\n    attributes: {\n      name: $name,\n      banner: $banner,\n      federationId: $federationId\n      primaryColor: $primaryColor\n      secondaryColor: $secondaryColor\n    }\n  }) {\n      dropzone {\n        id\n        name\n        banner\n        primaryColor\n        secondaryColor,\n\n        federation {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function Ca(){var e=Ee((function(e){return e.dropzoneForm})),n=he(),t=(Object(Ke.useNavigation)(),Object(Ke.useRoute)().params.dropzone);a.useEffect((function(){n(Oa.setOriginal(t))}),[null==t?void 0:t.id]);var r=Object(g.useMutation)(wa),l=q()(r,2),i=l[0],o=l[1],s=a.useCallback((function(){var r,a,l,o,s,u,c,d,m,f,p,g,v,b;return ze.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(l=!1,o=e.fields,s=o.name,u=o.banner,c=o.federation,d=o.primaryColor,m=o.secondaryColor,(null==(r=s.value)||!r.length||(null==(a=s.value)?void 0:a.length)<3)&&(l=!0,n(Oa.setFieldError(["name","Name is too short"]))),l){y.next=14;break}return y.prev=4,y.next=7,ze.a.awrap(i({variables:{id:Number(null==t?void 0:t.id),name:s.value,banner:u.value||null,primaryColor:d.value,secondaryColor:m.value,federationId:Number(null==c||null==(f=c.value)?void 0:f.id)}}));case 7:v=y.sent,null!=(p=v.data)&&null!=(g=p.updateDropzone)&&g.dropzone&&(b=v.data.updateDropzone.dropzone,n(za.setDropzone(b)),n(It.showSnackbar({message:"Saved",variant:"success"}))),y.next=14;break;case 11:y.prev=11,y.t0=y.catch(4),n(It.showSnackbar({message:y.t0.message,variant:"error"}));case 14:case"end":return y.stop()}}),null,null,[[4,11]],Promise)}),[JSON.stringify(e.fields),n,i]);return a.createElement(dn.a,{style:Pa.container,contentContainerStyle:Pa.content},a.createElement(xa,null),a.createElement(Wn,{style:Pa.fields},a.createElement(sn.a,{mode:"contained",disabled:o.loading,onPress:s,loading:o.loading},"Save")))}var ja,Pa=$e.a.create({container:{flex:1,backgroundColor:"white",display:"flex"},content:{display:"flex",flexGrow:1,alignItems:"center",paddingBottom:56},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Ta=t(94),$a=Object(en.a)(ja||(ja=Ze()(["\n  query QueryPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function Fa(){var e,n=Ee((function(e){return e.global})),t=Object(g.useQuery)($a,{variables:{dropzoneId:Number(null==(e=n.currentDropzone)?void 0:e.id)}}),r=t.data,l=t.loading,i=t.refetch,o=Object(Ke.useNavigation)();Object(Ke.useRoute)();return a.createElement(Wn,{style:Da.container},a.createElement(Ta.a,{data:(null==r?void 0:r.planes)||[],numColumns:1,refreshing:l,onRefresh:function(){return i()},style:{flex:1},contentContainerStyle:{flexGrow:1},ListEmptyComponent:function(){return a.createElement(Bn,{title:"No planes?",subtitle:"You need to have at least one plane to manifest loads"})},renderItem:function(e){var n=e.item;return a.createElement(fn.a.Item,{title:n.name,onPress:function(){return o.navigate("UpdatePlaneScreen",{plane:n})},left:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"airplane"})},right:function(){return a.createElement(fn.a.Icon,{color:"#000",icon:"pencil"})}})}}),a.createElement(an.a,{style:Da.fab,small:!0,icon:"plus",onPress:function(){return o.navigate("CreatePlaneScreen")},label:"New plane"}))}var Na,Da=$e.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),Ma=t(217),Ua=_.actions,Aa=Object(en.a)(Na||(Na=Ze()(["\n  query QueryExtras(\n    $dropzoneId: Int!\n  ) {\n    extras(dropzoneId: $dropzoneId) {\n      id\n      cost\n      name\n\n      ticketTypes {\n        id\n        name\n      }\n    }\n  }\n"])));function qa(){var e,n,t,r,l,i=Ee((function(e){return e.ticketTypeForm})),o=he(),s=Ee((function(e){return e.global})),u=a.useState(!1),c=q()(u,2),d=c[0],m=c[1],f=Object(g.useQuery)(Aa,{variables:{dropzoneId:Number(null==(e=s.currentDropzone)?void 0:e.id)}}),p=f.data;f.loading,f.refetch;return a.createElement(dn.a,{style:Ba.fields,contentContainerStyle:{paddingTop:200}},a.createElement(vn.a,{style:Ba.field,mode:"outlined",label:"Name",error:!!i.fields.name.error,value:i.fields.name.value,onChangeText:function(e){return o(Ua.setField(["name",e]))}}),a.createElement(mn.a,{type:i.fields.name.error?"error":"info"},i.fields.name.error||""),a.createElement(vn.a,{style:Ba.field,mode:"outlined",label:"Price",error:!!i.fields.cost.value,value:null==(n=i.fields.cost)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return o(Ua.setField(["cost",Number(e)]))}}),a.createElement(mn.a,{type:i.fields.cost.error?"error":"info"},i.fields.cost.error||""),a.createElement(bn.a,{onDismiss:function(){return m(!1)},visible:d,anchor:a.createElement(fn.a.Item,{onPress:function(){m(!0)},title:[4e3,14e3].includes(i.fields.altitude.value)?{14e3:"Height",4e3:"Hop n Pop"}[i.fields.altitude.value.toString()]:"Custom",right:function(){return a.createElement(fn.a.Icon,{icon:[4e3,14e3].includes(i.fields.altitude.value)?{14e3:"airplane",4e3:"parachute"}[i.fields.altitude.value.toString()]:"pencil-plus"})}})},a.createElement(fn.a.Item,{onPress:function(){o(Ua.setField(["altitude",4e3])),m(!1)},title:"Hop n Pop",right:function(){return a.createElement(fn.a.Icon,{icon:"parachute"})}}),a.createElement(fn.a.Item,{onPress:function(){o(Ua.setField(["altitude",14e3])),m(!1)},title:"Height",right:function(){return a.createElement(fn.a.Icon,{icon:"airplane-takeoff"})}}),a.createElement(fn.a.Item,{onPress:function(){o(Ua.setField(["altitude",7e3])),m(!1)},title:"Other",right:function(){return a.createElement(fn.a.Icon,{icon:"parachute"})}})),![4e3,14e3].includes(i.fields.altitude.value)&&a.createElement(vn.a,{style:Ba.field,mode:"outlined",label:"Custom altitude",error:!!i.fields.altitude.value,value:null==(r=i.fields.altitude)||null==(l=r.value)?void 0:l.toString(),onChangeText:function(e){return o(Ua.setField(["altitude",Number(e)]))}}),a.createElement(kt.a.Item,{label:"Public manifesting",status:i.fields.allowManifestingSelf.value?"checked":"unchecked",onPress:function(){return o(Ua.setField(["allowManifestingSelf",!i.fields.allowManifestingSelf.value]))}}),a.createElement(gn.a,null),a.createElement(fn.a.Subheader,null,"Enabled ticket add-ons"),null==p?void 0:p.extras.map((function(e){return a.createElement(kt.a.Item,{label:e.name,status:i.fields.extraIds.value.includes(Number(e.id))?"checked":"unchecked",onPress:function(){return o(Ua.setField(["extraIds",Object(Ma.xor)(i.fields.extraIds.value,[Number(e.id)])]))}})})))}var Wa,Ba=$e.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),Ra=_.actions,La=(F.actions,Object(g.gql)(Wa||(Wa=Ze()(["\n  mutation CreateTicketType(\n    $name: String,\n    $cost: Float,\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n  ){\n    createTicketType(input: {\n      attributes: {\n        name: $name,\n        cost: $cost,\n        dropzoneId: $dropzoneId\n        altitude: $altitude\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n"]))));function Ha(){var e=Ee((function(e){return e})),n=e.ticketTypeForm,t=e.global,r=he(),l=Object(Ke.useNavigation)(),i=Object(g.useMutation)(La),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(Ra.setFieldError(["name","Name is too short"]))),n.fields.cost.value<1&&(e=!0,r(Ra.setFieldError(["cost","Cost must be at least $1"]))),n.fields.altitude.value||(e=!0,r(Ra.setFieldError(["altitude","Altitude must be specified"]))),!e}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p,g,v;return ze.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(e=n.fields,a=e.name,i=e.cost,o=e.allowManifestingSelf,u=e.altitude,d=e.extraIds,!c()){b.next=12;break}return b.prev=2,b.next=5,ze.a.awrap(s({variables:{dropzoneId:Number(null==(m=t.currentDropzone)?void 0:m.id),name:a.value,cost:i.value,altitude:u.value,allowManifestingSelf:o.value,extraIds:d.value}}));case 5:g=b.sent,null!=(f=g.data)&&null!=(p=f.createTicketType)&&p.ticketType&&(v=g.data.createTicketType.ticketType,r(It.showSnackbar({message:"Added ticket "+v.name,variant:"success"})),l.goBack()),b.next=12;break;case 9:b.prev=9,b.t0=b.catch(2),r(It.showSnackbar({message:b.t0.message,variant:"error"}));case 12:case"end":return b.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Wn,{style:Qa.container},a.createElement(qa,null),a.createElement(Wn,{style:Qa.fields},a.createElement(sn.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Va,Qa=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Ja=_.actions,Ga=(F.actions,Object(g.gql)(Va||(Va=Ze()(["\n  mutation UpdateTicketType(\n    $id: Int!,\n    $name: String,\n    $cost: Float,\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n  ){\n    updateTicketType(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        cost: $cost,\n        dropzoneId: $dropzoneId\n        altitude: $altitude\n        allowManifestingSelf: $allowManifestingSelf\n      }\n    }) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n      }\n    }\n  }\n"]))));function _a(){var e=Ee((function(e){return e})),n=e.ticketTypeForm,t=(e.global,he()),r=Object(Ke.useNavigation)(),l=Object(Ke.useRoute)().params.ticketType;a.useEffect((function(){t(Ja.setOriginal(l))}),[null==l?void 0:l.id]);var i=Object(g.useMutation)(Ga),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,t(Ja.setFieldError(["name","Name is too short"]))),n.fields.cost.value<1&&(e=!0,t(Ja.setFieldError(["cost","Cost must be at least $1"]))),n.fields.altitude.value||(e=!0,t(Ja.setFieldError(["altitude","Altitude must be specified"]))),!e}),[JSON.stringify(n.fields),t]),d=a.useCallback((function(){var e,a,l,i,o,u,d,m,f;return ze.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=n.fields,a=e.name,l=e.cost,i=e.allowManifestingSelf,o=e.altitude,u=e.extraIds,!c()){p.next=12;break}return p.prev=2,p.next=5,ze.a.awrap(s({variables:{id:Number(n.original.id),name:a.value,cost:l.value,altitude:o.value,allowManifestingSelf:i.value,extraIds:u.value}}));case 5:f=p.sent,null!=(d=f.data)&&null!=(m=d.updateTicketType)&&m.ticketType&&(t(It.showSnackbar({message:"Saved",variant:"success"})),r.goBack()),p.next=12;break;case 9:p.prev=9,p.t0=p.catch(2),t(It.showSnackbar({message:p.t0.message,variant:"error"}));case 12:case"end":return p.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),t,s]);return a.createElement(Wn,{style:Za.container},a.createElement(qa,null),a.createElement(Wn,{style:Za.fields},a.createElement(sn.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var Ya,Za=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),Ka=Z.actions,Xa=Object(en.a)(Ya||(Ya=Ze()(["\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n"])));function el(){var e,n,t,r=Ee((function(e){return e.extraForm})),l=he(),i=Ee((function(e){return e.global})),o=Object(g.useQuery)(Xa,{variables:{dropzoneId:Number(null==(e=i.currentDropzone)?void 0:e.id)}}),s=o.data;o.loading,o.refetch;return a.createElement(dn.a,{style:tl.fields,contentContainerStyle:{paddingTop:200}},a.createElement(vn.a,{style:tl.field,mode:"outlined",label:"Name",error:!!r.fields.name.error,value:r.fields.name.value,onChangeText:function(e){return l(Ka.setField(["name",e]))}}),a.createElement(mn.a,{type:r.fields.name.error?"error":"info"},r.fields.name.error||""),a.createElement(vn.a,{style:tl.field,mode:"outlined",label:"Price",error:!!r.fields.cost.value,value:null==(n=r.fields.cost)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return l(Ka.setField(["cost",Number(e)]))}}),a.createElement(mn.a,{type:r.fields.cost.error?"error":"info"},r.fields.cost.error||""),a.createElement(fn.a.Subheader,null,"Compatible tickets"),null==s?void 0:s.ticketTypes.map((function(e){return a.createElement(kt.a.Item,{label:e.name,status:r.fields.ticketTypeIds.value.includes(Number(e.id))?"checked":"unchecked",onPress:function(){return l(Ka.setField(["ticketTypeIds",Object(Ma.xor)(r.fields.ticketTypeIds.value,[Number(e.id)])]))}})})))}var nl,tl=$e.a.create({fields:{width:"70%",flex:1},field:{marginBottom:8}}),rl=Z.actions,al=(F.actions,Object(g.gql)(nl||(nl=Ze()(["\n  mutation CreateExtra(\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    createExtra(input: {\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n"]))));function ll(){var e=Ee((function(e){return e})),n=e.extraForm,t=e.global,r=he(),l=Object(Ke.useNavigation)(),i=Object(g.useMutation)(al),o=q()(i,2),s=o[0],u=o[1],c=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(rl.setFieldError(["name","Name is too short"]))),Number(n.fields.cost.value)<0&&(e=!0,r(rl.setFieldError(["cost","Price must be a number"]))),!e}),[JSON.stringify(n.fields),r]),d=a.useCallback((function(){var e,a,i,o,u,d,m,f,p;return ze.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(e=n.fields,a=e.name,i=e.cost,o=e.ticketTypeIds,!c()){g.next=12;break}return g.prev=2,g.next=5,ze.a.awrap(s({variables:{dropzoneId:Number(null==(u=t.currentDropzone)?void 0:u.id),name:a.value,cost:i.value,ticketTypeIds:o.value}}));case 5:f=g.sent,null!=(d=f.data)&&null!=(m=d.createExtra)&&m.extra&&(p=f.data.createExtra.extra,r(It.showSnackbar({message:"Added extra "+p.name,variant:"success"})),l.goBack()),g.next=12;break;case 9:g.prev=9,g.t0=g.catch(2),r(It.showSnackbar({message:g.t0.message,variant:"error"}));case 12:case"end":return g.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,s]);return a.createElement(Wn,{style:ol.container},a.createElement(el,null),a.createElement(Wn,{style:ol.fields},a.createElement(sn.a,{mode:"contained",disabled:u.loading,onPress:d,loading:u.loading},"Save")))}var il,ol=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),sl=Z.actions,ul=(F.actions,Object(g.gql)(il||(il=Ze()(["\n  mutation UpdateExtra(\n    $id: Int!,\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    updateExtra(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n"]))));function cl(){var e=Ee((function(e){return e})),n=e.extraForm,t=e.global,r=he(),l=Object(Ke.useNavigation)(),i=Object(Ke.useRoute)().params.extra;a.useEffect((function(){r(sl.setOriginal(i))}),[null==i?void 0:i.id]);var o=Object(g.useMutation)(ul),s=q()(o,2),u=s[0],c=s[1],d=a.useCallback((function(){var e=!1;return n.fields.name.value.length<3&&(e=!0,r(sl.setFieldError(["name","Name is too short"]))),Number(n.fields.cost.value)<0&&(e=!0,r(sl.setFieldError(["cost","Price must be a number"]))),!e}),[JSON.stringify(n.fields),r]),m=a.useCallback((function(){var e,a,i,o,s,c,m,f;return ze.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=n.fields,a=e.name,i=e.cost,o=e.ticketTypeIds,!d()){p.next=12;break}return p.prev=2,p.next=5,ze.a.awrap(u({variables:{id:Number(n.original.id),dropzoneId:Number(null==(s=t.currentDropzone)?void 0:s.id),name:a.value,cost:i.value,ticketTypeIds:o.value}}));case 5:f=p.sent,null!=(c=f.data)&&null!=(m=c.updateExtra)&&m.extra&&(r(It.showSnackbar({message:"Saved",variant:"success"})),l.goBack()),p.next=12;break;case 9:p.prev=9,p.t0=p.catch(2),r(It.showSnackbar({message:p.t0.message,variant:"error"}));case 12:case"end":return p.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(n.fields),r,u]);return a.createElement(Wn,{style:ml.container},a.createElement(el,null),a.createElement(Wn,{style:ml.fields},a.createElement(sn.a,{mode:"contained",disabled:c.loading,onPress:m,loading:c.loading},"Save")))}var dl,ml=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%",marginBottom:16},field:{marginBottom:8}}),fl=Object(en.a)(dl||(dl=Ze()(["\n  query QueryExtra(\n    $dropzoneId: Int!\n  ) {\n    extras(dropzoneId: $dropzoneId) {\n      id\n      cost\n      name\n\n      ticketTypes {\n        id\n        altitude\n        name\n      }\n    }\n  }\n"])));function pl(){var e,n,t,r=Ee((function(e){return e.global})),l=Object(g.useQuery)(fl,{variables:{dropzoneId:Number(null==(e=r.currentDropzone)?void 0:e.id)}}),i=l.data,o=l.loading,s=(l.refetch,Object(Ke.useNavigation)());Object(Ke.useRoute)();return a.createElement(a.Fragment,null,a.createElement(rn.a,{visible:o,indeterminate:!0,color:r.theme.colors.accent}),a.createElement(Wn,{style:vl.container},a.createElement(Gn.a,null,a.createElement(Gn.a.Header,null,a.createElement(Gn.a.Title,null,"Name"),a.createElement(Gn.a.Title,{numeric:!0},"Cost")),null==i||null==(n=i.extras)?void 0:n.map((function(e){return a.createElement(Gn.a.Row,null,a.createElement(Gn.a.Cell,{onPress:function(){return s.navigate("UpdateExtraScreen",{extra:e})}},e.name),a.createElement(Gn.a.Cell,{numeric:!0},e.cost))}))),!o&&!(null!=i&&null!=(t=i.extras)&&t.length)&&a.createElement(Bn,{title:"No ticket addons",subtitle:"You can add multiple addons to assign to tickets, e.g outside camera, or coach"}),a.createElement(an.a,{style:vl.fab,small:!0,icon:"plus",onPress:function(){return s.navigate("CreateExtraScreen")},label:"New ticket addon"})))}var gl,vl=$e.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),bl=Object(qe.a)();function yl(){return a.createElement(bl.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(Rt,e)},cardStyle:{flex:1}}},a.createElement(bl.Screen,{name:"SettingsScreen",component:Hr,options:{title:"Settings"}}),a.createElement(bl.Screen,{name:"DropzoneSettingsScreen",component:Qr}),a.createElement(bl.Screen,{name:"UpdateDropzoneScreen",component:Ca}),a.createElement(bl.Screen,{name:"PlanesScreen",component:Fa,options:{title:"Planes"}}),a.createElement(bl.Screen,{name:"CreatePlaneScreen",component:sa,options:{title:"New plane"}}),a.createElement(bl.Screen,{name:"UpdatePlaneScreen",component:fa,options:{title:"Edit plane"}}),a.createElement(bl.Screen,{name:"TicketTypesScreen",component:ea,options:{title:"Ticket types"}}),a.createElement(bl.Screen,{name:"CreateTicketTypeScreen",component:Ha,options:{title:"New ticket type"}}),a.createElement(bl.Screen,{name:"UpdateTicketTypeScreen",component:_a,options:{title:"Edit ticket type"}}),a.createElement(bl.Screen,{name:"CreateExtraScreen",component:ll,options:{title:"Create ticket add-on"}}),a.createElement(bl.Screen,{name:"UpdateExtraScreen",component:cl,options:{title:"Update ticket add-on"}}),a.createElement(bl.Screen,{name:"ExtrasScreen",component:pl,options:{title:"Ticket add-ons"}}))}var hl=Object(en.a)(gl||(gl=Ze()(["\n  query QueryDropzoneUsersSearch(\n    $dropzoneId: Int!\n    $search: String\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(search: $search) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function El(){var e,n,t,r,l,i,o,s=Ee((function(e){return e})),u=s.global,c=s.usersScreen,d=he(),m=Object(g.useQuery)(hl,{variables:{dropzoneId:Number(null==(e=u.currentDropzone)?void 0:e.id),search:c.searchText}}),f=m.data,p=m.loading,v=Object(Ke.useNavigation)(),b=Object(Ke.useIsFocused)();return a.useEffect((function(){c.isSearchVisible&&d(ue.setSearchVisible(!1))}),[b]),a.createElement(Wn,{style:Sl.container},a.createElement(rn.a,{indeterminate:!0,color:u.theme.colors.accent,visible:p}),!(null!=f&&null!=(n=f.dropzone)&&null!=(t=n.dropzoneUsers)&&null!=(r=t.edges)&&r.length)&&a.createElement(Bn,{title:"No users",subtitle:""}),null==f||null==(l=f.dropzone)||null==(i=l.dropzoneUsers)||null==(o=i.edges)?void 0:o.map((function(e){var n,t,r;return a.createElement(fn.a.Item,{title:null==e||null==(n=e.node)?void 0:n.user.name,description:null==e||null==(t=e.node)||null==(r=t.role)?void 0:r.name,left:function(){return a.createElement(fn.a.Icon,{icon:"account"})},onPress:function(){var n;return v.navigate("UserProfileScreen",{userId:null==e||null==(n=e.node)?void 0:n.id})}})})))}var Sl=$e.a.create({container:{flex:1},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),xl=t(479);var Il=$e.a.create({inputContainer:{flexGrow:1},input:{backgroundColor:"transparent",height:"100%",color:"white",borderColor:"none"},icon:{marginHorizontal:8}}),kl=function(e){var n=e.navigation,t=e.previous,r=e.scene,a=e.onSearch,i=e.searchText,o=e.searchVisible,s=e.setSearchVisible,u=Ee((function(e){return e.global}));return u.currentDropzone,u.theme,he(),l.a.createElement(At.a.Header,null,t?l.a.createElement(At.a.BackAction,{onPress:n.goBack}):null,o?l.a.createElement(At.a.BackAction,{onPress:function(){return s(!1)}}):null,o?l.a.createElement(d.a,{style:Il.inputContainer},l.a.createElement(vn.a,{style:Il.input,value:i,onChangeText:function(e){return a(e)}})):l.a.createElement(At.a.Content,{title:r.descriptor.options.title}),l.a.createElement(xl.a,{name:"search",onPress:function(){return s(!o)},color:"#FFFFFF",size:24,style:Il.icon}))};function Ol(){return a.createElement(Wn,{style:zl.container},a.createElement(qn,{style:zl.title},"Tab One"),a.createElement(Wn,{style:zl.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),a.createElement(vt,{path:"/screens/UserRigScreen.tsx"}))}var zl=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),wl=Object(qe.a)();function Cl(){var e=Ee((function(e){return e.usersScreen})),n=e.isSearchVisible,t=e.searchText,r=he();return a.createElement(wl.Navigator,{screenOptions:{headerShown:!0,header:function(e){return a.createElement(kl,Je()({},e,{searchText:t,searchVisible:n,setSearchVisible:function(e){return r(ue.setSearchVisible(e))},onSearch:function(e){return r(ue.setSearchText(e))}}))},cardStyle:{flex:1}}},a.createElement(wl.Screen,{name:"UsersScreen",component:El,options:{title:"Dropzone users"}}),a.createElement(wl.Screen,{name:"UserProfileScreen",component:kr,options:{title:"User"}}),a.createElement(wl.Screen,{name:"UserRigScreen",component:Ol}))}var jl,Pl=Object(_e.a)();function Tl(){Object(Ge.b)();var e=On("readUser"),n=On("createPackjob"),t=On("updateDropzone");return a.createElement(Pl.Navigator,{initialRouteName:"Manifest"},a.createElement(Pl.Screen,{name:"Manifest",component:Ht,options:{tabBarIcon:"airplane"}}),a.createElement(Pl.Screen,{name:"Profile",component:Lr,options:{tabBarIcon:"account-circle"}}),n&&a.createElement(Pl.Screen,{name:"Packing",component:Gt,options:{tabBarIcon:"parachute"}}),e&&a.createElement(Pl.Screen,{name:"Users",component:Cl,options:{tabBarIcon:"account-group"}}),t&&a.createElement(Pl.Screen,{name:"Settings",component:yl,options:{tabBarIcon:"account-cog"}}))}var $l=Object(en.a)(jl||(jl=Ze()(["\n  query QueryDropzones {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n          banner\n          ticketTypes {\n            id\n            name\n            cost\n            allowManifestingSelf\n            currency\n          }\n          planes {\n            id\n            name,\n            registration,\n            minSlots,\n            maxSlots,\n          }\n        }\n      }\n    }\n  }\n"])));function Fl(){var e,n=he(),t=Object(g.useQuery)($l),r=t.data,l=t.loading,i=t.refetch,o=Object(Ke.useNavigation)();return a.createElement(Wn,{style:Dl.container},a.createElement(Ta.a,{data:(null==r||null==(e=r.dropzones)?void 0:e.edges)||[],numColumns:2,refreshing:l,onRefresh:function(){return i()},style:{flex:1},contentContainerStyle:{flexGrow:1},ListEmptyComponent:function(){return a.createElement(Wn,{style:Dl.empty},a.createElement(Nn.a,null,"No dropzones?"),a.createElement(Dn.a,null,"You can set one up!"))},renderItem:function(e){var t,r,l=e.item;return a.createElement(Jn.a,{style:{width:nn.a.get("window").width/2-32,margin:8},onPress:function(){return ze.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:null!=l&&l.node&&n(se.setDropzone(l.node));case 1:case"end":return e.stop()}}),null,null,null,Promise)}},a.createElement(Jn.a.Cover,{source:{uri:null==l||null==(t=l.node)?void 0:t.banner}}),a.createElement(Jn.a.Content,null,a.createElement(Nn.a,null,null==l||null==(r=l.node)?void 0:r.name)))}}),a.createElement(an.a,{style:Dl.fab,small:!0,icon:"plus",onPress:function(){return o.navigate("CreateDropzoneScreen")},label:"Create dropzone"}))}var Nl,Dl=$e.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function Ml(e){return{message:e,pattern:/.{1,}/}}function Ul(e,n){return{message:e,callback:n}}function Al(e,n){var t=n.getPayload,r=n.fieldErrorMap,l=n.validates;return function(i){var o=i.onFieldError,s=i.onSuccess,u=i.onError,c=Object(g.useMutation)(e),d=q()(c,2),m=d[0],f=d[1],p=f.data,v=f.loading;f.error;return{loading:v,mutate:Object(a.useCallback)((function(e){var a,c,d,f,p,g;return ze.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(function(){var t=!1;return l&&Object.keys(e).forEach((function(r){var a,i=r;i in(n.validates||{})&&(null==(a=l[i])||a.forEach((function(n){n.pattern?n.pattern.test(""+e[i])||(t=!0,o&&o(i,n.message)):n.callback&&!n.callback(e)&&(t=!0,o&&o(i,n.message))})))})),!t}()){v.next=3;break}return v.abrupt("return");case 3:return v.prev=3,v.next=6,ze.a.awrap(m({variables:e}));case 6:if(f=v.sent,null==(p=t(f.data))||null==(a=p.fieldErrors)||a.map((function(e){var t=e.field,a=e.message,l=t in(r||{})?n.fieldErrorMap[t]:t;i.onFieldError&&i.onFieldError(""+l,a)})),null==p||null==(c=p.errors)||!c.length||!u){v.next=12;break}return null==(g=p.errors)||g.map((function(e){return u(e)})),v.abrupt("return");case 12:return null!=p&&null!=(d=p.fieldErrors)&&d.length||s(p),v.abrupt("return",p);case 16:v.prev=16,v.t0=v.catch(3),u&&u(v.t0.message);case 19:return v.abrupt("return");case 20:case"end":return v.stop()}}),null,null,[[3,16]],Promise)}),[o,u,s,,m,t,JSON.stringify(p)])}}}var ql=Al(Object(en.a)(Nl||(Nl=Ze()(["\nmutation CreateDropzone(\n  $name: String!,\n  $banner: String!,\n  $federationId: Int!\n){\n  createDropzone(input: { attributes: { name: $name, banner: $banner, federationId: $federationId }}) {\n    dropzone {\n      id\n      name\n      banner\n\n      federation {\n        id\n        name\n      }\n    }\n  }\n}\n"]))),{getPayload:function(e){return e.createDropzone},fieldErrorMap:{federation:"federationId"},validates:{name:[Ml("Name is required")]}}),Wl=V.actions,Bl=F.actions;function Rl(){var e=Ee((function(e){return e.dropzoneForm})),n=he(),t=(Object(Ke.useNavigation)(),ql({onError:function(e){return n(ce.showSnackbar({message:e,variant:"error"}))},onFieldError:function(e,t){return n(Wl.setFieldError([e,t]))},onSuccess:function(e){return n(Bl.setDropzone(e.dropzone))}}));return a.createElement(Wn,{style:Ll.container},a.createElement(xa,null),a.createElement(Wn,{style:Ll.fields},a.createElement(sn.a,{mode:"contained",disabled:t.loading,loading:t.loading,onPress:function(){return t.mutate({name:e.fields.name.value,banner:e.fields.banner.value,federationId:Number(e.fields.federation.value.id)})}},"Save")))}var Ll=$e.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%"},field:{marginBottom:8}}),Hl=Object(qe.a)();function Vl(){return a.createElement(Hl.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"Dropzones"},a.createElement(Hl.Screen,{name:"DropzonesScreen",component:Fl}),a.createElement(Hl.Screen,{name:"CreateDropzoneScreen",component:Rl}))}var Ql,Jl=t(45),Gl=U.actions,_l=Object(g.gql)(Ql||(Ql=Ze()(["\n  mutation UserLogin($email: String!, $password: String!) {\n    userLogin(email: $email, password: $password) {\n      authenticatable {\n        id\n        email\n        name\n        phone\n        createdAt\n        updatedAt\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"])));function Yl(){var e=Ee((function(e){return e.login})),n=he(),t=Object(Jl.useNavigation)(),r=Object(g.useMutation)(_l),i=q()(r,2),o=i[0],s=i[1],u=Object(a.useCallback)((function(){var t,r,a,l,i,s,u;return ze.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),r=!1,e.fields.email.value||(r=!0,n(Gl.setEmailError("Email is required"))),e.fields.password.value||(r=!0,n(Gl.setPasswordError("Password is required"))),t.test(e.fields.email.value)||(r=!0,n(Gl.setEmailError("Please enter a valid email"))),r){c.next=17;break}return c.prev=6,c.next=9,ze.a.awrap(o({variables:{email:e.fields.email.value,password:e.fields.password.value}}));case 9:u=c.sent,console.log({result:u}),null!=u&&null!=(a=u.data)&&null!=(l=a.userLogin)&&l.authenticatable&&null!=u&&null!=(i=u.data)&&null!=(s=i.userLogin)&&s.credentials&&(n(se.setCredentials(u.data.userLogin.credentials)),n(se.setUser(u.data.userLogin.authenticatable))),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(6),n(ce.showSnackbar({message:c.t0.message,variant:"error"}));case 17:case"end":return c.stop()}}),null,null,[[6,14]],Promise)}),[o,JSON.stringify(e.fields)]);return l.a.createElement(Wn,{style:Xl.container},l.a.createElement(qn,{style:Xl.title},"Sign in"),l.a.createElement(Wn,{style:Xl.fields},l.a.createElement(vn.a,{label:"Email",mode:"outlined",value:e.fields.email.value,onChangeText:function(e){n(Gl.setEmail(e))}}),l.a.createElement(mn.a,{type:"error"},e.fields.email.error||" "),l.a.createElement(vn.a,{label:"Password",mode:"outlined",value:e.fields.password.value,secureTextEntry:!0,onChangeText:function(e){n(Gl.setPassword(e))},error:!!e.fields.password.error}),l.a.createElement(mn.a,{type:"error"},e.fields.password.error||" "),l.a.createElement(sn.a,{mode:"contained",style:Xl.button,onPress:u,loading:s.loading},"Log in"),l.a.createElement(sn.a,{style:Xl.button,onPress:function(){return t.navigate("SignUpScreen")}},"Sign up")))}var Zl,Kl,Xl=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{marginBottom:10},button:{marginTop:10,width:"100%"}}),ei=Al(Object(en.a)(Zl||(Zl=Ze()(["\n  mutation UserSignUp(\n    $email: String!,\n    $password: String!,\n    $passwordConfirmation: String!\n    $name: String!\n    $phone: String!\n    $exitWeight: Float!\n    $licenseId: Int\n  ){\n    userSignUp(\n      email: $email,\n      password: $password,\n      passwordConfirmation: $passwordConfirmation,\n      exitWeight: $exitWeight,\n      name: $name,\n      phone: $phone,\n      licenseId: $licenseId\n    ) {\n      authenticatable {\n        createdAt,\n        email,\n        id,\n        name,\n        phone,\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.userSignUp},fieldErrorMap:{license:"licenseId"},validates:{name:[Ml("Name is required")],email:[(Kl="Please enter a valid email",{message:Kl,pattern:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})],passwordConfirmation:[Ul("Password must have 1 uppercase, 1 lowercase, 1 digit and be at least 8 characters",(function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}.*$/.test(e.passwordConfirmation)})),Ul("Passwords don't match",(function(e){return e.password===e.passwordConfirmation}))]}}),ni=B.actions,ti=F.actions;function ri(){var e,n,t=Ee((function(e){return e.signup})),r=he(),l=ei({onSuccess:function(e){e.credentials&&(r(ti.setCredentials(e.credentials)),r(ti.setUser(e.authenticatable)))},onFieldError:function(e,n){return r(ni.setFieldError([e,n]))}}),i=l.loading,o=l.mutate;return a.createElement(Wn,{style:ai.container},a.createElement(qn,{style:ai.title},"Sign up"),a.createElement(Wn,{style:ai.fields},a.createElement(vn.a,{style:ai.field,mode:"outlined",label:"Name",error:!!t.fields.name.error,value:t.fields.name.value,onChangeText:function(e){return r(ni.setField(["name",e]))}}),a.createElement(mn.a,{type:"error"},t.fields.name.error||""),a.createElement(vn.a,{style:ai.field,mode:"outlined",label:"Exit weight",error:!!t.fields.exitWeight.error,value:(null==(e=t.fields.exitWeight)||null==(n=e.value)?void 0:n.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(vn.a.Affix,{text:"kg"})},onChangeText:function(e){return r(ni.setField(["exitWeight",parseFloat(e)]))}}),a.createElement(mn.a,{type:t.fields.exitWeight.error?"error":"info"},t.fields.exitWeight.error||""),a.createElement(vn.a,{style:ai.field,mode:"outlined",label:"Email",error:!!t.fields.email.error,value:t.fields.email.value,onChangeText:function(e){return r(ni.setField(["email",e]))}}),a.createElement(mn.a,{type:"error"},t.fields.email.error||""),a.createElement(vn.a,{style:ai.field,mode:"outlined",label:"Phone",error:!!t.fields.phone.error,value:t.fields.phone.value,onChangeText:function(e){return r(ni.setField(["phone",e]))}}),a.createElement(mn.a,{type:"error"},t.fields.phone.error||""),a.createElement(vn.a,{style:ai.field,mode:"outlined",label:"Password",error:Boolean(t.fields.password.error||t.fields.passwordConfirmation.error),textContentType:"newPassword",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:t.fields.password.value,onChangeText:function(e){return r(ni.setField(["password",e]))}}),a.createElement(mn.a,{type:"error"},t.fields.password.error||""),a.createElement(vn.a,{style:ai.field,mode:"outlined",label:"Repeat password",error:Boolean(t.fields.password.error||t.fields.passwordConfirmation.error),textContentType:"newPassword",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:t.fields.passwordConfirmation.value,onChangeText:function(e){return r(ni.setField(["passwordConfirmation",e]))}}),a.createElement(mn.a,{type:"error"},t.fields.passwordConfirmation.error||""),a.createElement(sn.a,{mode:"contained",onPress:function(){var e,n;return o({email:t.fields.email.value,name:t.fields.name.value,exitWeight:t.fields.exitWeight.value,password:t.fields.password.value,passwordConfirmation:t.fields.passwordConfirmation.value,licenseId:Number(null==(e=t.fields.license)||null==(n=e.value)?void 0:n.id)||null,phone:t.fields.phone.value})},loading:i},"Sign up")))}var ai=$e.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"70%"},field:{marginBottom:8}}),li=Object(qe.a)();function ii(){return a.createElement(li.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"LoginScreen"},a.createElement(li.Screen,{name:"LoginScreen",component:Yl}),a.createElement(li.Screen,{name:"SignUpScreen",component:ri}))}var oi=Object(qe.a)();function si(){var e=Ee((function(e){return e.global}));return a.createElement(oi.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},e.credentials?e.currentDropzone?a.createElement(oi.Screen,{name:"Authenticated",component:Tl}):a.createElement(oi.Screen,{name:"Dropzones",component:Vl}):a.createElement(oi.Screen,{name:"Unauthenticated",component:ii}),a.createElement(oi.Screen,{name:"NotFound",component:Re,options:{title:"Oops!"}}))}function ui(){var e=Ee((function(e){return e.global}));return l.a.createElement(ke,null,l.a.createElement(u.a,{theme:e.theme},l.a.createElement(i.b,null,l.a.createElement(m.a,{linking:Ae,theme:e.theme},l.a.createElement(si,null)),l.a.createElement(r.a,null),l.a.createElement(Ue,null))))}function ci(){return function(){var e=a.useState(!1),n=q()(e,2),r=n[0],l=n[1];return a.useEffect((function(){ze.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,je.b(),e.next=4,ze.a.awrap(Ce.b(Te(Te({},we.a.font),{},{"space-mono":t(422)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,l(!0),je.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}()?l.a.createElement(o.a,{store:be},l.a.createElement(s.a,{persistor:ye,loading:l.a.createElement(d.a,{style:{flex:1,justifyContent:"center",alignItems:"center"}},l.a.createElement(c.a,{size:"large"}))},l.a.createElement(ui,null))):null}},387:function(e,n,t){e.exports=t(471)},422:function(e,n,t){e.exports=t.p+"./fonts/SpaceMono-Regular.ttf"},438:function(e,n){}},[[387,1,2]]]);
//# sourceMappingURL=app.62a89e82.chunk.js.map