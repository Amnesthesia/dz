(this.webpackJsonp=this.webpackJsonp||[]).push([[28],{404:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var r=n(27),a=n.n(r),o=n(13),i=n.n(o),l=n(0),c=n(59),s=n(5),u=n(197),d=n(200);function f(e,t){var n=Object(d.a)(),r=e[n];return r||u.a[n][t]}function m(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=i()(e,["style","lightColor","darkColor"]),s=f({light:n,dark:r},"text");return l.createElement(c.a,a()({style:[{color:s},t]},o))}function b(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=i()(e,["style","lightColor","darkColor"]),c=f({light:n,dark:r},"background");return l.createElement(s.a,a()({style:[{backgroundColor:c},t]},o))}},408:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),o=n(89),i=n(4),l=n(409),c=n(60);function s(e){var t=Object(l.a)().height,n=Object(c.h)((function(e){return e.global})).theme;return a.a.createElement(o.a,{style:[u.container,{backgroundColor:n.colors.surface,height:t-112},e.style],contentContainerStyle:[u.content,e.contentContainerStyle]},e.children)}var u=i.a.create({container:{flex:1},content:{paddingHorizontal:16,alignItems:"flex-start",flexGrow:1,paddingBottom:50}})},426:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(103),a=n(205),o=r.a.actions;a.a},466:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r,a=n(405),o=n.n(a),i=n(120),l=n(88),c=n(0),s=n(4),u=n(5),d=n(428),f=n(412),m=n(194),b=n(416),g=n(478),p=n(60),v=n(165).a.actions,h=Object(l.a)(r||(r=o()(["\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n"])));function y(){var e,t,n,r=Object(p.h)((function(e){return e.extraForm})),a=Object(p.g)(),o=Object(p.h)((function(e){return e.global})),l=Object(i.useQuery)(h,{variables:{dropzoneId:Number(null==(e=o.currentDropzone)?void 0:e.id)}}),s=l.data;l.loading,l.refetch;return c.createElement(c.Fragment,null,c.createElement(d.a,{style:k.field,mode:"outlined",label:"Name",error:!!r.fields.name.error,value:r.fields.name.value,onChangeText:function(e){return a(v.setField(["name",e]))}}),c.createElement(f.a,{type:r.fields.name.error?"error":"info"},r.fields.name.error||""),c.createElement(d.a,{style:k.field,mode:"outlined",label:"Price",error:!!r.fields.cost.error,value:null==(t=r.fields.cost)||null==(n=t.value)?void 0:n.toString(),onChangeText:function(e){return a(v.setField(["cost",Number(e)]))}}),c.createElement(f.a,{type:r.fields.cost.error?"error":"info"},r.fields.cost.error||""),c.createElement(u.a,{style:{width:"100%"}},c.createElement(m.a.Subheader,null,"Compatible tickets"),null==s?void 0:s.ticketTypes.map((function(e){return c.createElement(b.a.Item,{label:e.name,status:r.fields.ticketTypeIds.value.includes(Number(e.id))?"checked":"unchecked",onPress:function(){return a(v.setField(["ticketTypeIds",Object(g.xor)(r.fields.ticketTypeIds.value,[Number(e.id)])]))}})}))))}var k=s.a.create({fields:{width:"100%",flex:1},field:{marginBottom:8,width:"100%"}})},521:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var r,a=n(6),o=n.n(a),i=n(405),l=n.n(i),c=n(10),s=n.n(c),u=n(0),d=n(4),f=n(203),m=n(120),b=n(60),g=n(404),p=n(426),v=n(161),h=n(165),y=n(466),k=n(73),x=n(408),E=n(297),I=h.a.actions,C=(v.a.actions,Object(m.gql)(r||(r=l()(["\n  mutation CreateExtra(\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    createExtra(input: {\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n"]))));function O(){var e=Object(b.h)((function(e){return e})),t=e.extraForm,n=e.global,r=Object(b.g)(),a=Object(k.useNavigation)(),i=Object(k.useIsFocused)();u.useEffect((function(){i&&r(I.reset())}),[i]);var l=Object(m.useMutation)(C),c=o()(l,2),d=c[0],v=c[1],h=u.useCallback((function(){var e=!1;return t.fields.name.value.length<3&&(e=!0,r(I.setFieldError(["name","Name is too short"]))),Number(t.fields.cost.value)<0&&(e=!0,r(I.setFieldError(["cost","Price must be a number"]))),!e}),[JSON.stringify(t.fields),r]),O=u.useCallback((function(){var e,o,i,l,c,u,f,m,b;return s.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(e=t.fields,o=e.name,i=e.cost,l=e.ticketTypeIds,!h()){g.next=12;break}return g.prev=2,g.next=5,s.a.awrap(d({variables:{dropzoneId:Number(null==(c=n.currentDropzone)?void 0:c.id),name:o.value,cost:i.value,ticketTypeIds:l.value}}));case 5:m=g.sent,null!=(u=m.data)&&null!=(f=u.createExtra)&&f.extra&&(b=m.data.createExtra.extra,r(p.a.showSnackbar({message:"Added extra "+b.name,variant:"success"})),a.goBack()),g.next=12;break;case 9:g.prev=9,g.t0=g.catch(2),r(p.a.showSnackbar({message:g.t0.message,variant:"error"}));case 12:case"end":return g.stop()}}),null,null,[[2,9]],Promise)}),[JSON.stringify(t.fields),r,d]);return u.createElement(x.a,{contentContainerStyle:{paddingHorizontal:48}},u.createElement(E.a,{name:"ticket-percent",size:100,color:"#999999",style:{alignSelf:"center"}}),u.createElement(y.a,null),u.createElement(g.b,{style:j.fields},u.createElement(f.a,{mode:"contained",disabled:v.loading,onPress:O,loading:v.loading},"Save")))}var j=d.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%",marginBottom:16},field:{width:"100%",marginBottom:8}})}}]);
//# sourceMappingURL=28.62681217.chunk.js.map