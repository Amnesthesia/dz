(this.webpackJsonp=this.webpackJsonp||[]).push([[16],{404:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p}));var r=n(27),a=n.n(r),i=n(13),o=n.n(i),l=n(0),s=n(59),c=n(5),u=n(197),d=n(200);function f(e,t){var n=Object(d.a)(),r=e[n];return r||u.a[n][t]}function m(e){var t=e.style,n=e.lightColor,r=e.darkColor,i=o()(e,["style","lightColor","darkColor"]),c=f({light:n,dark:r},"text");return l.createElement(s.a,a()({style:[{color:c},t]},i))}function p(e){var t=e.style,n=e.lightColor,r=e.darkColor,i=o()(e,["style","lightColor","darkColor"]),s=f({light:n,dark:r},"background");return l.createElement(c.a,a()({style:[{backgroundColor:s},t]},i))}},405:function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),e.raw=t,e},e.exports.default=e.exports,e.exports.__esModule=!0},406:function(e,t,n){"use strict";var r=n(13),a=n.n(r),i=n(0),o=n(5),l=n(4),s=n(33),c=n.n(s),u=n(193),d=n(195),f=n(424),m=n(38);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=l.a.create({container:{alignItems:"center",justifyContent:"center",overflow:"hidden",margin:6},disabled:{opacity:.32}});t.a=Object(m.c)((function(e){var t=e.icon,n=e.color,r=e.size,l=void 0===r?24:r,s=e.accessibilityLabel,m=e.disabled,b=e.onPress,h=e.animated,v=void 0!==h&&h,y=e.theme,w=e.style,E=a()(e,["icon","color","size","accessibilityLabel","disabled","onPress","animated","theme","style"]),x="undefined"!==typeof n?n:y.colors.text,C=c()(x).alpha(.32).rgb().string(),S=v?f.a:d.a,O=1.5*l;return i.createElement(u.a,p({borderless:!0,centered:!0,onPress:b,rippleColor:C,style:[g.container,{width:O,height:O,borderRadius:O/2},m&&g.disabled,w],accessibilityLabel:s,accessibilityTraits:m?["button","disabled"]:"button",accessibilityComponentType:"button",accessibilityRole:"button",accessibilityState:{disabled:m},disabled:m,hitSlop:u.a.supported?{top:10,left:10,bottom:10,right:10}:{top:6,left:6,bottom:6,right:6}},E),i.createElement(o.a,null,i.createElement(S,{color:x,source:t,size:l})))}))},408:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(89),o=n(4),l=n(409),s=n(60);function c(e){var t=Object(l.a)().height,n=Object(s.h)((function(e){return e.global})).theme;return a.a.createElement(i.a,{style:[u.container,{backgroundColor:n.colors.surface,height:t-112},e.style],contentContainerStyle:[u.content,e.contentContainerStyle]},e.children)}var u=o.a.create({container:{flex:1},content:{paddingHorizontal:16,alignItems:"flex-start",flexGrow:1,paddingBottom:50}})},409:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(53),a=n(0);function i(){var e=Object(a.useState)((function(){return r.a.get("window")})),t=e[0],n=e[1];return Object(a.useEffect)((function(){function e(e){var t=e.window;n(t)}return r.a.addEventListener("change",e),n(r.a.get("window")),function(){r.a.removeEventListener("change",e)}}),[]),t}},412:function(e,t,n){"use strict";var r=n(13),a=n.n(r),i=n(0),o=n(33),l=n.n(o),s=n(8),c=n(4),u=n(442),d=n(38);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=c.a.create({text:{fontSize:12,paddingVertical:4},padding:{paddingHorizontal:12}});t.a=Object(d.c)((function(e){var t=e.style,n=e.type,r=void 0===n?"info":n,o=e.visible,c=void 0===o||o,d=e.theme,p=e.onLayout,g=e.padding,b=void 0===g?"normal":g,h=a()(e,["style","type","visible","theme","onLayout","padding"]),v=i.useRef(new s.a.Value(c?1:0)).current,y=i.useRef(0).current,w=d.animation.scale;i.useEffect((function(){c?s.a.timing(v,{toValue:1,duration:150*w,useNativeDriver:!0}).start():s.a.timing(v,{toValue:0,duration:180*w,useNativeDriver:!0}).start()}),[c,w,v]);var E=d.colors,x=d.dark,C="error"===r?E.error:l()(E.text).alpha(x?.7:.54).rgb().string();return i.createElement(u.a,f({onLayout:function(e){null===p||void 0===p||p(e),y=e.nativeEvent.layout.height},style:[m.text,"none"!==b?m.padding:{},{color:C,opacity:v,transform:c&&"error"===r?[{translateY:v.interpolate({inputRange:[0,1],outputRange:[-y/2,0]})}]:[]},t]},h),h.children)}))},424:function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(0),o=n(8),l=n(4),s=n(5),c=n(195),u=n(38);t.a=Object(u.c)((function(e){var t=e.color,n=e.size,r=e.source,l=e.theme,u=i.useState((function(){return r})),f=a()(u,2),m=f[0],p=f[1],g=i.useState(null),b=a()(g,2),h=b[0],v=b[1],y=i.useRef(new o.a.Value(1)).current,w=l.animation.scale;m!==r&&(v((function(){return m})),p((function(){return r}))),i.useEffect((function(){Object(c.c)(h)&&!Object(c.b)(h,m)&&(y.setValue(1),o.a.timing(y,{duration:200*w,toValue:0,useNativeDriver:!0}).start())}),[m,h,y,w]);var E=y,x=h?y.interpolate({inputRange:[0,1],outputRange:[1,0]}):1,C=y.interpolate({inputRange:[0,1],outputRange:["-90deg","0deg"]}),S=h?y.interpolate({inputRange:[0,1],outputRange:["0deg","-180deg"]}):"0deg";return i.createElement(s.a,{style:[d.content,{height:n,width:n}]},h?i.createElement(o.a.View,{style:[d.icon,{opacity:E,transform:[{rotate:C}]}]},i.createElement(c.a,{source:h,size:n,color:t})):null,i.createElement(o.a.View,{style:[d.icon,{opacity:x,transform:[{rotate:S}]}]},i.createElement(c.a,{source:m,size:n,color:t})))}));var d=l.a.create({content:{alignItems:"center",justifyContent:"center"},icon:{position:"absolute",top:0,left:0,right:0,bottom:0}})},461:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return f}));var r=n(6),a=n.n(r),i=n(10),o=n.n(i),l=n(120),s=n(0);function c(e){return{message:e,pattern:/.{1,}/}}function u(e){return{message:e,pattern:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}}function d(e,t){return{message:e,callback:t}}function f(e,t){var n=t.getPayload,r=t.fieldErrorMap,i=t.validates;return function(c){var u=c.onFieldError,d=c.onSuccess,f=c.onError,m=Object(l.useMutation)(e),p=a()(m,2),g=p[0],b=p[1],h=b.data,v=b.loading;b.error;return{loading:v,mutate:Object(s.useCallback)((function(e){var a,l,s,m,p,b;return o.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(function(){var n=!1;return i&&Object.keys(e).forEach((function(r){var a,o=r;o in(t.validates||{})&&(null==(a=i[o])||a.forEach((function(t){t.pattern?t.pattern.test(""+e[o])||(n=!0,u&&u(o,t.message)):t.callback&&!t.callback(e)&&(n=!0,u&&u(o,t.message))})))})),!n}()){h.next=3;break}return h.abrupt("return");case 3:return h.prev=3,h.next=6,o.a.awrap(g({variables:e}));case 6:if(m=h.sent,null==(p=n(m.data))||null==(a=p.fieldErrors)||a.map((function(e){var n=e.field,a=e.message,i=n in(r||{})?t.fieldErrorMap[n]:n;c.onFieldError&&c.onFieldError(""+i,a)})),null==p||null==(l=p.errors)||!l.length||!f){h.next=12;break}return null==(b=p.errors)||b.map((function(e){return f(e)})),h.abrupt("return");case 12:return null!=p&&null!=(s=p.fieldErrors)&&s.length||d(p),h.abrupt("return",p);case 16:h.prev=16,h.t0=h.catch(3),f&&f(h.t0.message);case 19:return h.abrupt("return");case 20:case"end":return h.stop()}}),null,null,[[3,16]],Promise)}),[u,f,d,,g,n,JSON.stringify(h)])}}}},541:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return V}));var r,a=n(401),i=n(0),o=n.n(i),l=n(6),s=n.n(l),c=n(405),u=n.n(c),d=n(10),f=n.n(d),m=n(4),p=n(428),g=n(412),b=n(203),h=n(37),v=n(120),y=n(404),w=n(60),E=n(181).a.actions,x=Object(v.gql)(r||(r=u()(["\n  mutation UserLogin($email: String!, $password: String!) {\n    userLogin(email: $email, password: $password) {\n      authenticatable {\n        id\n        email\n        name\n        phone\n        createdAt\n        updatedAt\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"])));function C(){var e=Object(w.h)((function(e){return e.login})),t=Object(w.g)(),n=Object(h.useNavigation)(),r=Object(v.useMutation)(x),a=s()(r,2),l=a[0],c=a[1],u=Object(i.useCallback)((function(){var n,r,a,i,o,s,c;return f.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(n=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),r=!1,e.fields.email.value||(r=!0,t(E.setEmailError("Email is required"))),e.fields.password.value||(r=!0,t(E.setPasswordError("Password is required"))),n.test(e.fields.email.value)||(r=!0,t(E.setEmailError("Please enter a valid email"))),r){u.next=17;break}return u.prev=6,u.next=9,f.a.awrap(l({variables:{email:e.fields.email.value,password:e.fields.password.value}}));case 9:c=u.sent,console.log({result:c}),null!=c&&null!=(a=c.data)&&null!=(i=a.userLogin)&&i.authenticatable&&null!=c&&null!=(o=c.data)&&null!=(s=o.userLogin)&&s.credentials&&(t(w.b.setCredentials(c.data.userLogin.credentials)),t(w.b.setUser(c.data.userLogin.authenticatable))),u.next=17;break;case 14:u.prev=14,u.t0=u.catch(6),t(w.f.showSnackbar({message:u.t0.message,variant:"error"}));case 17:case"end":return u.stop()}}),null,null,[[6,14]],Promise)}),[l,JSON.stringify(e.fields)]);return o.a.createElement(y.b,{style:O.container},o.a.createElement(y.a,{style:O.title},"Sign in"),o.a.createElement(y.b,{style:O.fields},o.a.createElement(p.a,{label:"Email",mode:"outlined",value:e.fields.email.value,onChangeText:function(e){t(E.setEmail(e))}}),o.a.createElement(g.a,{type:"error"},e.fields.email.error||" "),o.a.createElement(p.a,{label:"Password",mode:"outlined",value:e.fields.password.value,secureTextEntry:!0,onChangeText:function(e){t(E.setPassword(e))},error:!!e.fields.password.error}),o.a.createElement(g.a,{type:"error"},e.fields.password.error||" "),o.a.createElement(b.a,{mode:"contained",style:O.button,onPress:u,loading:c.loading},"Log in"),o.a.createElement(b.a,{style:O.button,onPress:function(){return n.navigate("SignUpScreen")}},"Sign up")))}var S,O=m.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{marginBottom:10},button:{marginTop:10,width:"100%"}}),j=n(161),k=n(182),P=n(88),T=n(461),$=Object(P.a)(S||(S=u()(["\n  mutation UserSignUp(\n    $email: String!,\n    $password: String!,\n    $passwordConfirmation: String!\n    $name: String!\n    $phone: String!\n    $exitWeight: Float!\n    $licenseId: Int\n  ){\n    userSignUp(\n      email: $email,\n      password: $password,\n      passwordConfirmation: $passwordConfirmation,\n      exitWeight: $exitWeight,\n      name: $name,\n      phone: $phone,\n      licenseId: $licenseId\n    ) {\n      authenticatable {\n        createdAt,\n        email,\n        id,\n        name,\n        phone,\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"]))),R=Object(T.a)($,{getPayload:function(e){return e.userSignUp},fieldErrorMap:{license:"licenseId"},validates:{name:[Object(T.c)("Name is required")],email:[Object(T.b)("Please enter a valid email")],passwordConfirmation:[Object(T.d)("Password must have 1 uppercase, 1 lowercase, 1 digit and be at least 8 characters",(function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}.*$/.test(e.passwordConfirmation)})),Object(T.d)("Passwords don't match",(function(e){return e.password===e.passwordConfirmation}))]}}),z=n(408),L=k.a.actions,F=j.a.actions;function W(){var e,t,n=Object(w.h)((function(e){return e.signup})),r=Object(w.g)(),a=R({onSuccess:function(e){e.credentials&&(r(F.setCredentials(e.credentials)),r(F.setUser(e.authenticatable)))},onFieldError:function(e,t){return r(L.setFieldError([e,t]))}}),o=a.loading,l=a.mutate;return i.createElement(z.a,{contentContainerStyle:{padding:48,alignItems:"center"}},i.createElement(y.a,{style:I.title},"Sign up"),i.createElement(y.b,{style:I.fields},i.createElement(p.a,{style:I.field,mode:"outlined",label:"Name",error:!!n.fields.name.error,value:n.fields.name.value,onChangeText:function(e){return r(L.setField(["name",e]))}}),i.createElement(g.a,{type:"error"},n.fields.name.error||""),i.createElement(p.a,{style:I.field,mode:"outlined",label:"Exit weight",error:!!n.fields.exitWeight.error,value:(null==(e=n.fields.exitWeight)||null==(t=e.value)?void 0:t.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return i.createElement(p.a.Affix,{text:"kg"})},onChangeText:function(e){return r(L.setField(["exitWeight",parseFloat(e)]))}}),i.createElement(g.a,{type:n.fields.exitWeight.error?"error":"info"},n.fields.exitWeight.error||""),i.createElement(p.a,{style:I.field,mode:"outlined",label:"Email",error:!!n.fields.email.error,value:n.fields.email.value,onChangeText:function(e){return r(L.setField(["email",e]))}}),i.createElement(g.a,{type:"error"},n.fields.email.error||""),i.createElement(p.a,{style:I.field,mode:"outlined",label:"Phone",error:!!n.fields.phone.error,value:n.fields.phone.value,onChangeText:function(e){return r(L.setField(["phone",e]))}}),i.createElement(g.a,{type:"error"},n.fields.phone.error||""),i.createElement(p.a,{style:I.field,mode:"outlined",label:"Password",error:Boolean(n.fields.password.error||n.fields.passwordConfirmation.error),textContentType:"newPassword",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:n.fields.password.value,onChangeText:function(e){return r(L.setField(["password",e]))}}),i.createElement(g.a,{type:"error"},n.fields.password.error||""),i.createElement(p.a,{style:I.field,mode:"outlined",label:"Repeat password",error:Boolean(n.fields.password.error||n.fields.passwordConfirmation.error),textContentType:"newPassword",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:n.fields.passwordConfirmation.value,onChangeText:function(e){return r(L.setField(["passwordConfirmation",e]))}}),i.createElement(g.a,{type:"error"},n.fields.passwordConfirmation.error||""),i.createElement(b.a,{mode:"contained",onPress:function(){var e,t;return l({email:n.fields.email.value,name:n.fields.name.value,exitWeight:n.fields.exitWeight.value,password:n.fields.password.value,passwordConfirmation:n.fields.passwordConfirmation.value,licenseId:Number(null==(e=n.fields.license)||null==(t=e.value)?void 0:t.id)||null,phone:n.fields.phone.value})},loading:o},"Sign up")))}var I=m.a.create({container:{flex:1},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%",maxWidth:400},field:{marginBottom:8}}),N=Object(a.a)();function V(){return i.createElement(N.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"LoginScreen"},i.createElement(N.Screen,{name:"LoginScreen",component:C}),i.createElement(N.Screen,{name:"SignUpScreen",component:W}))}}}]);
//# sourceMappingURL=16.01d00556.chunk.js.map